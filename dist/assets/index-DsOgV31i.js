var q5=Object.defineProperty;var V5=(e,t,r)=>t in e?q5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var ho=(e,t,r)=>V5(e,typeof t!="symbol"?t+"":t,r);function mC(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function ti(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function G5(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var pC={exports:{}},Tm={},gC={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu=Symbol.for("react.element"),K5=Symbol.for("react.portal"),Y5=Symbol.for("react.fragment"),X5=Symbol.for("react.strict_mode"),Q5=Symbol.for("react.profiler"),J5=Symbol.for("react.provider"),Z5=Symbol.for("react.context"),eM=Symbol.for("react.forward_ref"),tM=Symbol.for("react.suspense"),rM=Symbol.for("react.memo"),nM=Symbol.for("react.lazy"),rj=Symbol.iterator;function sM(e){return e===null||typeof e!="object"?null:(e=rj&&e[rj]||e["@@iterator"],typeof e=="function"?e:null)}var vC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xC=Object.assign,yC={};function kl(e,t,r){this.props=e,this.context=t,this.refs=yC,this.updater=r||vC}kl.prototype.isReactComponent={};kl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};kl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bC(){}bC.prototype=kl.prototype;function hy(e,t,r){this.props=e,this.context=t,this.refs=yC,this.updater=r||vC}var fy=hy.prototype=new bC;fy.constructor=hy;xC(fy,kl.prototype);fy.isPureReactComponent=!0;var nj=Array.isArray,wC=Object.prototype.hasOwnProperty,my={current:null},_C={key:!0,ref:!0,__self:!0,__source:!0};function jC(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)wC.call(t,n)&&!_C.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Wu,type:e,key:i,ref:o,props:s,_owner:my.current}}function iM(e,t){return{$$typeof:Wu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function py(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wu}function aM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var sj=/\/+/g;function gg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?aM(""+e.key):t.toString(36)}function _h(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Wu:case K5:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+gg(o,0):n,nj(s)?(r="",e!=null&&(r=e.replace(sj,"$&/")+"/"),_h(s,t,r,"",function(u){return u})):s!=null&&(py(s)&&(s=iM(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sj,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",nj(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+gg(i,l);o+=_h(i,t,r,c,s)}else if(c=sM(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+gg(i,l++),o+=_h(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Cd(e,t,r){if(e==null)return e;var n=[],s=0;return _h(e,n,"","",function(i){return t.call(r,i,s++)}),n}function oM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ir={current:null},jh={transition:null},lM={ReactCurrentDispatcher:Ir,ReactCurrentBatchConfig:jh,ReactCurrentOwner:my};function NC(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Cd,forEach:function(e,t,r){Cd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cd(e,function(){t++}),t},toArray:function(e){return Cd(e,function(t){return t})||[]},only:function(e){if(!py(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ne.Component=kl;Ne.Fragment=Y5;Ne.Profiler=Q5;Ne.PureComponent=hy;Ne.StrictMode=X5;Ne.Suspense=tM;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lM;Ne.act=NC;Ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=xC({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=my.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)wC.call(t,c)&&!_C.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Wu,type:e.type,key:s,ref:i,props:n,_owner:o}};Ne.createContext=function(e){return e={$$typeof:Z5,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:J5,_context:e},e.Consumer=e};Ne.createElement=jC;Ne.createFactory=function(e){var t=jC.bind(null,e);return t.type=e,t};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(e){return{$$typeof:eM,render:e}};Ne.isValidElement=py;Ne.lazy=function(e){return{$$typeof:nM,_payload:{_status:-1,_result:e},_init:oM}};Ne.memo=function(e,t){return{$$typeof:rM,type:e,compare:t===void 0?null:t}};Ne.startTransition=function(e){var t=jh.transition;jh.transition={};try{e()}finally{jh.transition=t}};Ne.unstable_act=NC;Ne.useCallback=function(e,t){return Ir.current.useCallback(e,t)};Ne.useContext=function(e){return Ir.current.useContext(e)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(e){return Ir.current.useDeferredValue(e)};Ne.useEffect=function(e,t){return Ir.current.useEffect(e,t)};Ne.useId=function(){return Ir.current.useId()};Ne.useImperativeHandle=function(e,t,r){return Ir.current.useImperativeHandle(e,t,r)};Ne.useInsertionEffect=function(e,t){return Ir.current.useInsertionEffect(e,t)};Ne.useLayoutEffect=function(e,t){return Ir.current.useLayoutEffect(e,t)};Ne.useMemo=function(e,t){return Ir.current.useMemo(e,t)};Ne.useReducer=function(e,t,r){return Ir.current.useReducer(e,t,r)};Ne.useRef=function(e){return Ir.current.useRef(e)};Ne.useState=function(e){return Ir.current.useState(e)};Ne.useSyncExternalStore=function(e,t,r){return Ir.current.useSyncExternalStore(e,t,r)};Ne.useTransition=function(){return Ir.current.useTransition()};Ne.version="18.3.1";gC.exports=Ne;var x=gC.exports;const SC=ti(x),cM=mC({__proto__:null,default:SC},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uM=x,dM=Symbol.for("react.element"),hM=Symbol.for("react.fragment"),fM=Object.prototype.hasOwnProperty,mM=uM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pM={key:!0,ref:!0,__self:!0,__source:!0};function EC(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)fM.call(t,n)&&!pM.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:dM,type:e,key:i,ref:o,props:s,_owner:mM.current}}Tm.Fragment=hM;Tm.jsx=EC;Tm.jsxs=EC;pC.exports=Tm;var a=pC.exports,CC={exports:{}},hn={},kC={exports:{}},AC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(A,$){var L=A.length;A.push($);e:for(;0<L;){var z=L-1>>>1,K=A[z];if(0<s(K,$))A[z]=$,A[L]=K,L=z;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var $=A[0],L=A.pop();if(L!==$){A[0]=L;e:for(var z=0,K=A.length,se=K>>>1;z<se;){var fe=2*(z+1)-1,he=A[fe],ye=fe+1,q=A[ye];if(0>s(he,L))ye<K&&0>s(q,he)?(A[z]=q,A[ye]=L,z=ye):(A[z]=he,A[fe]=L,z=fe);else if(ye<K&&0>s(q,L))A[z]=q,A[ye]=L,z=ye;else break e}}return $}function s(A,$){var L=A.sortIndex-$.sortIndex;return L!==0?L:A.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,g=!1,y=!1,p=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var $=r(u);$!==null;){if($.callback===null)n(u);else if($.startTime<=A)n(u),$.sortIndex=$.expirationTime,t(c,$);else break;$=r(u)}}function _(A){if(y=!1,w(A),!g)if(r(c)!==null)g=!0,M(j);else{var $=r(u);$!==null&&P(_,$.startTime-A)}}function j(A,$){g=!1,y&&(y=!1,v(T),T=-1),m=!0;var L=f;try{for(w($),h=r(c);h!==null&&(!(h.expirationTime>$)||A&&!O());){var z=h.callback;if(typeof z=="function"){h.callback=null,f=h.priorityLevel;var K=z(h.expirationTime<=$);$=e.unstable_now(),typeof K=="function"?h.callback=K:h===r(c)&&n(c),w($)}else n(c);h=r(c)}if(h!==null)var se=!0;else{var fe=r(u);fe!==null&&P(_,fe.startTime-$),se=!1}return se}finally{h=null,f=L,m=!1}}var N=!1,E=null,T=-1,S=5,D=-1;function O(){return!(e.unstable_now()-D<S)}function C(){if(E!==null){var A=e.unstable_now();D=A;var $=!0;try{$=E(!0,A)}finally{$?k():(N=!1,E=null)}}else N=!1}var k;if(typeof b=="function")k=function(){b(C)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,R=I.port2;I.port1.onmessage=C,k=function(){R.postMessage(null)}}else k=function(){p(C,0)};function M(A){E=A,N||(N=!0,k())}function P(A,$){T=p(function(){A(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(A){A.callback=null},e.unstable_continueExecution=function(){g||m||(g=!0,M(j))},e.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<A?Math.floor(1e3/A):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(A){switch(f){case 1:case 2:case 3:var $=3;break;default:$=f}var L=f;f=$;try{return A()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(A,$){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var L=f;f=A;try{return $()}finally{f=L}},e.unstable_scheduleCallback=function(A,$,L){var z=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?z+L:z):L=z,A){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,A={id:d++,callback:$,priorityLevel:A,startTime:L,expirationTime:K,sortIndex:-1},L>z?(A.sortIndex=L,t(u,A),r(c)===null&&A===r(u)&&(y?(v(T),T=-1):y=!0,P(_,L-z))):(A.sortIndex=K,t(c,A),g||m||(g=!0,M(j))),A},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(A){var $=f;return function(){var L=f;f=$;try{return A.apply(this,arguments)}finally{f=L}}}})(AC);kC.exports=AC;var gM=kC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vM=x,ln=gM;function Y(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PC=new Set,Kc={};function Qa(e,t){el(e,t),el(e+"Capture",t)}function el(e,t){for(Kc[e]=t,e=0;e<t.length;e++)PC.add(t[e])}var Fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uv=Object.prototype.hasOwnProperty,xM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ij={},aj={};function yM(e){return Uv.call(aj,e)?!0:Uv.call(ij,e)?!1:xM.test(e)?aj[e]=!0:(ij[e]=!0,!1)}function bM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function wM(e,t,r,n){if(t===null||typeof t>"u"||bM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Dr(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var dr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){dr[e]=new Dr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];dr[t]=new Dr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){dr[e]=new Dr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){dr[e]=new Dr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){dr[e]=new Dr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){dr[e]=new Dr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){dr[e]=new Dr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){dr[e]=new Dr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){dr[e]=new Dr(e,5,!1,e.toLowerCase(),null,!1,!1)});var gy=/[\-:]([a-z])/g;function vy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(gy,vy);dr[t]=new Dr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(gy,vy);dr[t]=new Dr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(gy,vy);dr[t]=new Dr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){dr[e]=new Dr(e,1,!1,e.toLowerCase(),null,!1,!1)});dr.xlinkHref=new Dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){dr[e]=new Dr(e,1,!1,e.toLowerCase(),null,!0,!0)});function xy(e,t,r,n){var s=dr.hasOwnProperty(t)?dr[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(wM(t,r,s,n)&&(r=null),n||s===null?yM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ri=vM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kd=Symbol.for("react.element"),Co=Symbol.for("react.portal"),ko=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),Fv=Symbol.for("react.profiler"),OC=Symbol.for("react.provider"),TC=Symbol.for("react.context"),by=Symbol.for("react.forward_ref"),Bv=Symbol.for("react.suspense"),zv=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),gi=Symbol.for("react.lazy"),IC=Symbol.for("react.offscreen"),oj=Symbol.iterator;function Zl(e){return e===null||typeof e!="object"?null:(e=oj&&e[oj]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Object.assign,vg;function bc(e){if(vg===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);vg=t&&t[1]||""}return`
`+vg+e}var xg=!1;function yg(e,t){if(!e||xg)return"";xg=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{xg=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?bc(e):""}function _M(e){switch(e.tag){case 5:return bc(e.type);case 16:return bc("Lazy");case 13:return bc("Suspense");case 19:return bc("SuspenseList");case 0:case 2:case 15:return e=yg(e.type,!1),e;case 11:return e=yg(e.type.render,!1),e;case 1:return e=yg(e.type,!0),e;default:return""}}function Wv(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ko:return"Fragment";case Co:return"Portal";case Fv:return"Profiler";case yy:return"StrictMode";case Bv:return"Suspense";case zv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case TC:return(e.displayName||"Context")+".Consumer";case OC:return(e._context.displayName||"Context")+".Provider";case by:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wy:return t=e.displayName||null,t!==null?t:Wv(e.type)||"Memo";case gi:t=e._payload,e=e._init;try{return Wv(e(t))}catch{}}return null}function jM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wv(t);case 8:return t===yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Wi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function DC(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function NM(e){var t=DC(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ad(e){e._valueTracker||(e._valueTracker=NM(e))}function RC(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=DC(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Bh(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hv(e,t){var r=t.checked;return pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function lj(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Wi(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function MC(e,t){t=t.checked,t!=null&&xy(e,"checked",t,!1)}function qv(e,t){MC(e,t);var r=Wi(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vv(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vv(e,t.type,Wi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cj(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vv(e,t,r){(t!=="number"||Bh(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var wc=Array.isArray;function Wo(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Wi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Gv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Y(91));return pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function uj(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Y(92));if(wc(r)){if(1<r.length)throw Error(Y(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Wi(r)}}function LC(e,t){var r=Wi(t.value),n=Wi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function dj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $C(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kv(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$C(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Pd,UC=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Pd=Pd||document.createElement("div"),Pd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Pd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Yc(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Cc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SM=["Webkit","ms","Moz","O"];Object.keys(Cc).forEach(function(e){SM.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Cc[t]=Cc[e]})});function FC(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Cc.hasOwnProperty(e)&&Cc[e]?(""+t).trim():t+"px"}function BC(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=FC(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var EM=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yv(e,t){if(t){if(EM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Y(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Y(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Y(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Y(62))}}function Xv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qv=null;function _y(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jv=null,Ho=null,qo=null;function hj(e){if(e=Vu(e)){if(typeof Jv!="function")throw Error(Y(280));var t=e.stateNode;t&&(t=Lm(t),Jv(e.stateNode,e.type,t))}}function zC(e){Ho?qo?qo.push(e):qo=[e]:Ho=e}function WC(){if(Ho){var e=Ho,t=qo;if(qo=Ho=null,hj(e),t)for(e=0;e<t.length;e++)hj(t[e])}}function HC(e,t){return e(t)}function qC(){}var bg=!1;function VC(e,t,r){if(bg)return e(t,r);bg=!0;try{return HC(e,t,r)}finally{bg=!1,(Ho!==null||qo!==null)&&(qC(),WC())}}function Xc(e,t){var r=e.stateNode;if(r===null)return null;var n=Lm(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Y(231,t,typeof r));return r}var Zv=!1;if(Fs)try{var ec={};Object.defineProperty(ec,"passive",{get:function(){Zv=!0}}),window.addEventListener("test",ec,ec),window.removeEventListener("test",ec,ec)}catch{Zv=!1}function CM(e,t,r,n,s,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var kc=!1,zh=null,Wh=!1,e0=null,kM={onError:function(e){kc=!0,zh=e}};function AM(e,t,r,n,s,i,o,l,c){kc=!1,zh=null,CM.apply(kM,arguments)}function PM(e,t,r,n,s,i,o,l,c){if(AM.apply(this,arguments),kc){if(kc){var u=zh;kc=!1,zh=null}else throw Error(Y(198));Wh||(Wh=!0,e0=u)}}function Ja(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function GC(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fj(e){if(Ja(e)!==e)throw Error(Y(188))}function OM(e){var t=e.alternate;if(!t){if(t=Ja(e),t===null)throw Error(Y(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return fj(s),e;if(i===n)return fj(s),t;i=i.sibling}throw Error(Y(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(r.alternate!==n)throw Error(Y(190))}if(r.tag!==3)throw Error(Y(188));return r.stateNode.current===r?e:t}function KC(e){return e=OM(e),e!==null?YC(e):null}function YC(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=YC(e);if(t!==null)return t;e=e.sibling}return null}var XC=ln.unstable_scheduleCallback,mj=ln.unstable_cancelCallback,TM=ln.unstable_shouldYield,IM=ln.unstable_requestPaint,jt=ln.unstable_now,DM=ln.unstable_getCurrentPriorityLevel,jy=ln.unstable_ImmediatePriority,QC=ln.unstable_UserBlockingPriority,Hh=ln.unstable_NormalPriority,RM=ln.unstable_LowPriority,JC=ln.unstable_IdlePriority,Im=null,hs=null;function MM(e){if(hs&&typeof hs.onCommitFiberRoot=="function")try{hs.onCommitFiberRoot(Im,e,void 0,(e.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:UM,LM=Math.log,$M=Math.LN2;function UM(e){return e>>>=0,e===0?32:31-(LM(e)/$M|0)|0}var Od=64,Td=4194304;function _c(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qh(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=_c(l):(i&=o,i!==0&&(n=_c(i)))}else o=r&~s,o!==0?n=_c(o):i!==0&&(n=_c(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Kn(t),s=1<<r,n|=e[r],t&=~s;return n}function FM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Kn(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=FM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function t0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ZC(){var e=Od;return Od<<=1,!(Od&4194240)&&(Od=64),e}function wg(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Kn(t),e[t]=r}function zM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Kn(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function Ny(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Kn(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Re=0;function ek(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var tk,Sy,rk,nk,sk,r0=!1,Id=[],ki=null,Ai=null,Pi=null,Qc=new Map,Jc=new Map,bi=[],WM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pj(e,t){switch(e){case"focusin":case"focusout":ki=null;break;case"dragenter":case"dragleave":Ai=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Qc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jc.delete(t.pointerId)}}function tc(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Vu(t),t!==null&&Sy(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function HM(e,t,r,n,s){switch(t){case"focusin":return ki=tc(ki,e,t,r,n,s),!0;case"dragenter":return Ai=tc(Ai,e,t,r,n,s),!0;case"mouseover":return Pi=tc(Pi,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Qc.set(i,tc(Qc.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Jc.set(i,tc(Jc.get(i)||null,e,t,r,n,s)),!0}return!1}function ik(e){var t=ya(e.target);if(t!==null){var r=Ja(t);if(r!==null){if(t=r.tag,t===13){if(t=GC(r),t!==null){e.blockedOn=t,sk(e.priority,function(){rk(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Nh(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=n0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Qv=n,r.target.dispatchEvent(n),Qv=null}else return t=Vu(r),t!==null&&Sy(t),e.blockedOn=r,!1;t.shift()}return!0}function gj(e,t,r){Nh(e)&&r.delete(t)}function qM(){r0=!1,ki!==null&&Nh(ki)&&(ki=null),Ai!==null&&Nh(Ai)&&(Ai=null),Pi!==null&&Nh(Pi)&&(Pi=null),Qc.forEach(gj),Jc.forEach(gj)}function rc(e,t){e.blockedOn===t&&(e.blockedOn=null,r0||(r0=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,qM)))}function Zc(e){function t(s){return rc(s,e)}if(0<Id.length){rc(Id[0],e);for(var r=1;r<Id.length;r++){var n=Id[r];n.blockedOn===e&&(n.blockedOn=null)}}for(ki!==null&&rc(ki,e),Ai!==null&&rc(Ai,e),Pi!==null&&rc(Pi,e),Qc.forEach(t),Jc.forEach(t),r=0;r<bi.length;r++)n=bi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<bi.length&&(r=bi[0],r.blockedOn===null);)ik(r),r.blockedOn===null&&bi.shift()}var Vo=ri.ReactCurrentBatchConfig,Vh=!0;function VM(e,t,r,n){var s=Re,i=Vo.transition;Vo.transition=null;try{Re=1,Ey(e,t,r,n)}finally{Re=s,Vo.transition=i}}function GM(e,t,r,n){var s=Re,i=Vo.transition;Vo.transition=null;try{Re=4,Ey(e,t,r,n)}finally{Re=s,Vo.transition=i}}function Ey(e,t,r,n){if(Vh){var s=n0(e,t,r,n);if(s===null)Og(e,t,n,Gh,r),pj(e,n);else if(HM(s,e,t,r,n))n.stopPropagation();else if(pj(e,n),t&4&&-1<WM.indexOf(e)){for(;s!==null;){var i=Vu(s);if(i!==null&&tk(i),i=n0(e,t,r,n),i===null&&Og(e,t,n,Gh,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Og(e,t,n,null,r)}}var Gh=null;function n0(e,t,r,n){if(Gh=null,e=_y(n),e=ya(e),e!==null)if(t=Ja(e),t===null)e=null;else if(r=t.tag,r===13){if(e=GC(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gh=e,null}function ak(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(DM()){case jy:return 1;case QC:return 4;case Hh:case RM:return 16;case JC:return 536870912;default:return 16}default:return 16}}var Ni=null,Cy=null,Sh=null;function ok(){if(Sh)return Sh;var e,t=Cy,r=t.length,n,s="value"in Ni?Ni.value:Ni.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Sh=s.slice(e,1<n?1-n:void 0)}function Eh(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dd(){return!0}function vj(){return!1}function fn(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dd:vj,this.isPropagationStopped=vj,this}return pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Dd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Dd)},persist:function(){},isPersistent:Dd}),t}var Al={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ky=fn(Al),qu=pt({},Al,{view:0,detail:0}),KM=fn(qu),_g,jg,nc,Dm=pt({},qu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nc&&(nc&&e.type==="mousemove"?(_g=e.screenX-nc.screenX,jg=e.screenY-nc.screenY):jg=_g=0,nc=e),_g)},movementY:function(e){return"movementY"in e?e.movementY:jg}}),xj=fn(Dm),YM=pt({},Dm,{dataTransfer:0}),XM=fn(YM),QM=pt({},qu,{relatedTarget:0}),Ng=fn(QM),JM=pt({},Al,{animationName:0,elapsedTime:0,pseudoElement:0}),ZM=fn(JM),e6=pt({},Al,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),t6=fn(e6),r6=pt({},Al,{data:0}),yj=fn(r6),n6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},s6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},i6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function a6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=i6[e])?!!t[e]:!1}function Ay(){return a6}var o6=pt({},qu,{key:function(e){if(e.key){var t=n6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Eh(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?s6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(e){return e.type==="keypress"?Eh(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Eh(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),l6=fn(o6),c6=pt({},Dm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bj=fn(c6),u6=pt({},qu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),d6=fn(u6),h6=pt({},Al,{propertyName:0,elapsedTime:0,pseudoElement:0}),f6=fn(h6),m6=pt({},Dm,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),p6=fn(m6),g6=[9,13,27,32],Py=Fs&&"CompositionEvent"in window,Ac=null;Fs&&"documentMode"in document&&(Ac=document.documentMode);var v6=Fs&&"TextEvent"in window&&!Ac,lk=Fs&&(!Py||Ac&&8<Ac&&11>=Ac),wj=" ",_j=!1;function ck(e,t){switch(e){case"keyup":return g6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ao=!1;function x6(e,t){switch(e){case"compositionend":return uk(t);case"keypress":return t.which!==32?null:(_j=!0,wj);case"textInput":return e=t.data,e===wj&&_j?null:e;default:return null}}function y6(e,t){if(Ao)return e==="compositionend"||!Py&&ck(e,t)?(e=ok(),Sh=Cy=Ni=null,Ao=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return lk&&t.locale!=="ko"?null:t.data;default:return null}}var b6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!b6[e.type]:t==="textarea"}function dk(e,t,r,n){zC(n),t=Kh(t,"onChange"),0<t.length&&(r=new ky("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Pc=null,eu=null;function w6(e){_k(e,0)}function Rm(e){var t=To(e);if(RC(t))return e}function _6(e,t){if(e==="change")return t}var hk=!1;if(Fs){var Sg;if(Fs){var Eg="oninput"in document;if(!Eg){var Nj=document.createElement("div");Nj.setAttribute("oninput","return;"),Eg=typeof Nj.oninput=="function"}Sg=Eg}else Sg=!1;hk=Sg&&(!document.documentMode||9<document.documentMode)}function Sj(){Pc&&(Pc.detachEvent("onpropertychange",fk),eu=Pc=null)}function fk(e){if(e.propertyName==="value"&&Rm(eu)){var t=[];dk(t,eu,e,_y(e)),VC(w6,t)}}function j6(e,t,r){e==="focusin"?(Sj(),Pc=t,eu=r,Pc.attachEvent("onpropertychange",fk)):e==="focusout"&&Sj()}function N6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Rm(eu)}function S6(e,t){if(e==="click")return Rm(t)}function E6(e,t){if(e==="input"||e==="change")return Rm(t)}function C6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Jn=typeof Object.is=="function"?Object.is:C6;function tu(e,t){if(Jn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Uv.call(t,s)||!Jn(e[s],t[s]))return!1}return!0}function Ej(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Cj(e,t){var r=Ej(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ej(r)}}function mk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function pk(){for(var e=window,t=Bh();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Bh(e.document)}return t}function Oy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k6(e){var t=pk(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&mk(r.ownerDocument.documentElement,r)){if(n!==null&&Oy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=Cj(r,i);var o=Cj(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var A6=Fs&&"documentMode"in document&&11>=document.documentMode,Po=null,s0=null,Oc=null,i0=!1;function kj(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;i0||Po==null||Po!==Bh(n)||(n=Po,"selectionStart"in n&&Oy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oc&&tu(Oc,n)||(Oc=n,n=Kh(s0,"onSelect"),0<n.length&&(t=new ky("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Po)))}function Rd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Oo={animationend:Rd("Animation","AnimationEnd"),animationiteration:Rd("Animation","AnimationIteration"),animationstart:Rd("Animation","AnimationStart"),transitionend:Rd("Transition","TransitionEnd")},Cg={},gk={};Fs&&(gk=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Mm(e){if(Cg[e])return Cg[e];if(!Oo[e])return e;var t=Oo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in gk)return Cg[e]=t[r];return e}var vk=Mm("animationend"),xk=Mm("animationiteration"),yk=Mm("animationstart"),bk=Mm("transitionend"),wk=new Map,Aj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qi(e,t){wk.set(e,t),Qa(t,[e])}for(var kg=0;kg<Aj.length;kg++){var Ag=Aj[kg],P6=Ag.toLowerCase(),O6=Ag[0].toUpperCase()+Ag.slice(1);Qi(P6,"on"+O6)}Qi(vk,"onAnimationEnd");Qi(xk,"onAnimationIteration");Qi(yk,"onAnimationStart");Qi("dblclick","onDoubleClick");Qi("focusin","onFocus");Qi("focusout","onBlur");Qi(bk,"onTransitionEnd");el("onMouseEnter",["mouseout","mouseover"]);el("onMouseLeave",["mouseout","mouseover"]);el("onPointerEnter",["pointerout","pointerover"]);el("onPointerLeave",["pointerout","pointerover"]);Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),T6=new Set("cancel close invalid load scroll toggle".split(" ").concat(jc));function Pj(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,PM(n,t,void 0,e),e.currentTarget=null}function _k(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Pj(s,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Pj(s,l,u),i=c}}}if(Wh)throw e=e0,Wh=!1,e0=null,e}function et(e,t){var r=t[u0];r===void 0&&(r=t[u0]=new Set);var n=e+"__bubble";r.has(n)||(jk(t,e,2,!1),r.add(n))}function Pg(e,t,r){var n=0;t&&(n|=4),jk(r,e,n,t)}var Md="_reactListening"+Math.random().toString(36).slice(2);function ru(e){if(!e[Md]){e[Md]=!0,PC.forEach(function(r){r!=="selectionchange"&&(T6.has(r)||Pg(r,!1,e),Pg(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Md]||(t[Md]=!0,Pg("selectionchange",!1,t))}}function jk(e,t,r,n){switch(ak(t)){case 1:var s=VM;break;case 4:s=GM;break;default:s=Ey}r=s.bind(null,t,r,e),s=void 0,!Zv||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Og(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ya(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}VC(function(){var u=i,d=_y(r),h=[];e:{var f=wk.get(e);if(f!==void 0){var m=ky,g=e;switch(e){case"keypress":if(Eh(r)===0)break e;case"keydown":case"keyup":m=l6;break;case"focusin":g="focus",m=Ng;break;case"focusout":g="blur",m=Ng;break;case"beforeblur":case"afterblur":m=Ng;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=xj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=XM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=d6;break;case vk:case xk:case yk:m=ZM;break;case bk:m=f6;break;case"scroll":m=KM;break;case"wheel":m=p6;break;case"copy":case"cut":case"paste":m=t6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=bj}var y=(t&4)!==0,p=!y&&e==="scroll",v=y?f!==null?f+"Capture":null:f;y=[];for(var b=u,w;b!==null;){w=b;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,v!==null&&(_=Xc(b,v),_!=null&&y.push(nu(b,_,w)))),p)break;b=b.return}0<y.length&&(f=new m(f,g,null,r,d),h.push({event:f,listeners:y}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==Qv&&(g=r.relatedTarget||r.fromElement)&&(ya(g)||g[Bs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(g=r.relatedTarget||r.toElement,m=u,g=g?ya(g):null,g!==null&&(p=Ja(g),g!==p||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(y=xj,_="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(y=bj,_="onPointerLeave",v="onPointerEnter",b="pointer"),p=m==null?f:To(m),w=g==null?f:To(g),f=new y(_,b+"leave",m,r,d),f.target=p,f.relatedTarget=w,_=null,ya(d)===u&&(y=new y(v,b+"enter",g,r,d),y.target=w,y.relatedTarget=p,_=y),p=_,m&&g)t:{for(y=m,v=g,b=0,w=y;w;w=fo(w))b++;for(w=0,_=v;_;_=fo(_))w++;for(;0<b-w;)y=fo(y),b--;for(;0<w-b;)v=fo(v),w--;for(;b--;){if(y===v||v!==null&&y===v.alternate)break t;y=fo(y),v=fo(v)}y=null}else y=null;m!==null&&Oj(h,f,m,y,!1),g!==null&&p!==null&&Oj(h,p,g,y,!0)}}e:{if(f=u?To(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=_6;else if(jj(f))if(hk)j=E6;else{j=N6;var N=j6}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=S6);if(j&&(j=j(e,u))){dk(h,j,r,d);break e}N&&N(e,f,u),e==="focusout"&&(N=f._wrapperState)&&N.controlled&&f.type==="number"&&Vv(f,"number",f.value)}switch(N=u?To(u):window,e){case"focusin":(jj(N)||N.contentEditable==="true")&&(Po=N,s0=u,Oc=null);break;case"focusout":Oc=s0=Po=null;break;case"mousedown":i0=!0;break;case"contextmenu":case"mouseup":case"dragend":i0=!1,kj(h,r,d);break;case"selectionchange":if(A6)break;case"keydown":case"keyup":kj(h,r,d)}var E;if(Py)e:{switch(e){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ao?ck(e,r)&&(T="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(T="onCompositionStart");T&&(lk&&r.locale!=="ko"&&(Ao||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ao&&(E=ok()):(Ni=d,Cy="value"in Ni?Ni.value:Ni.textContent,Ao=!0)),N=Kh(u,T),0<N.length&&(T=new yj(T,e,null,r,d),h.push({event:T,listeners:N}),E?T.data=E:(E=uk(r),E!==null&&(T.data=E)))),(E=v6?x6(e,r):y6(e,r))&&(u=Kh(u,"onBeforeInput"),0<u.length&&(d=new yj("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=E))}_k(h,t)})}function nu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kh(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xc(e,r),i!=null&&n.unshift(nu(e,i,s)),i=Xc(e,t),i!=null&&n.push(nu(e,i,s))),e=e.return}return n}function fo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oj(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Xc(r,i),c!=null&&o.unshift(nu(r,c,l))):s||(c=Xc(r,i),c!=null&&o.push(nu(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var I6=/\r\n?/g,D6=/\u0000|\uFFFD/g;function Tj(e){return(typeof e=="string"?e:""+e).replace(I6,`
`).replace(D6,"")}function Ld(e,t,r){if(t=Tj(t),Tj(e)!==t&&r)throw Error(Y(425))}function Yh(){}var a0=null,o0=null;function l0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var c0=typeof setTimeout=="function"?setTimeout:void 0,R6=typeof clearTimeout=="function"?clearTimeout:void 0,Ij=typeof Promise=="function"?Promise:void 0,M6=typeof queueMicrotask=="function"?queueMicrotask:typeof Ij<"u"?function(e){return Ij.resolve(null).then(e).catch(L6)}:c0;function L6(e){setTimeout(function(){throw e})}function Tg(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Zc(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Zc(t)}function Oi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pl=Math.random().toString(36).slice(2),ls="__reactFiber$"+Pl,su="__reactProps$"+Pl,Bs="__reactContainer$"+Pl,u0="__reactEvents$"+Pl,$6="__reactListeners$"+Pl,U6="__reactHandles$"+Pl;function ya(e){var t=e[ls];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Bs]||r[ls]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Dj(e);e!==null;){if(r=e[ls])return r;e=Dj(e)}return t}e=r,r=e.parentNode}return null}function Vu(e){return e=e[ls]||e[Bs],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function To(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Y(33))}function Lm(e){return e[su]||null}var d0=[],Io=-1;function Ji(e){return{current:e}}function nt(e){0>Io||(e.current=d0[Io],d0[Io]=null,Io--)}function Je(e,t){Io++,d0[Io]=e.current,e.current=t}var Hi={},wr=Ji(Hi),zr=Ji(!1),Ra=Hi;function tl(e,t){var r=e.type.contextTypes;if(!r)return Hi;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Wr(e){return e=e.childContextTypes,e!=null}function Xh(){nt(zr),nt(wr)}function Rj(e,t,r){if(wr.current!==Hi)throw Error(Y(168));Je(wr,t),Je(zr,r)}function Nk(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Y(108,jM(e)||"Unknown",s));return pt({},r,n)}function Qh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Hi,Ra=wr.current,Je(wr,e),Je(zr,zr.current),!0}function Mj(e,t,r){var n=e.stateNode;if(!n)throw Error(Y(169));r?(e=Nk(e,t,Ra),n.__reactInternalMemoizedMergedChildContext=e,nt(zr),nt(wr),Je(wr,e)):nt(zr),Je(zr,r)}var Ns=null,$m=!1,Ig=!1;function Sk(e){Ns===null?Ns=[e]:Ns.push(e)}function F6(e){$m=!0,Sk(e)}function Zi(){if(!Ig&&Ns!==null){Ig=!0;var e=0,t=Re;try{var r=Ns;for(Re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Ns=null,$m=!1}catch(s){throw Ns!==null&&(Ns=Ns.slice(e+1)),XC(jy,Zi),s}finally{Re=t,Ig=!1}}return null}var Do=[],Ro=0,Jh=null,Zh=0,wn=[],_n=0,Ma=null,As=1,Ps="";function oa(e,t){Do[Ro++]=Zh,Do[Ro++]=Jh,Jh=e,Zh=t}function Ek(e,t,r){wn[_n++]=As,wn[_n++]=Ps,wn[_n++]=Ma,Ma=e;var n=As;e=Ps;var s=32-Kn(n)-1;n&=~(1<<s),r+=1;var i=32-Kn(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,As=1<<32-Kn(t)+s|r<<s|n,Ps=i+e}else As=1<<i|r<<s|n,Ps=e}function Ty(e){e.return!==null&&(oa(e,1),Ek(e,1,0))}function Iy(e){for(;e===Jh;)Jh=Do[--Ro],Do[Ro]=null,Zh=Do[--Ro],Do[Ro]=null;for(;e===Ma;)Ma=wn[--_n],wn[_n]=null,Ps=wn[--_n],wn[_n]=null,As=wn[--_n],wn[_n]=null}var an=null,rn=null,ot=!1,Bn=null;function Ck(e,t){var r=jn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Lj(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,an=e,rn=Oi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,an=e,rn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ma!==null?{id:As,overflow:Ps}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=jn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,an=e,rn=null,!0):!1;default:return!1}}function h0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function f0(e){if(ot){var t=rn;if(t){var r=t;if(!Lj(e,t)){if(h0(e))throw Error(Y(418));t=Oi(r.nextSibling);var n=an;t&&Lj(e,t)?Ck(n,r):(e.flags=e.flags&-4097|2,ot=!1,an=e)}}else{if(h0(e))throw Error(Y(418));e.flags=e.flags&-4097|2,ot=!1,an=e}}}function $j(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;an=e}function $d(e){if(e!==an)return!1;if(!ot)return $j(e),ot=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!l0(e.type,e.memoizedProps)),t&&(t=rn)){if(h0(e))throw kk(),Error(Y(418));for(;t;)Ck(e,t),t=Oi(t.nextSibling)}if($j(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Y(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){rn=Oi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}rn=null}}else rn=an?Oi(e.stateNode.nextSibling):null;return!0}function kk(){for(var e=rn;e;)e=Oi(e.nextSibling)}function rl(){rn=an=null,ot=!1}function Dy(e){Bn===null?Bn=[e]:Bn.push(e)}var B6=ri.ReactCurrentBatchConfig;function sc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Y(309));var n=r.stateNode}if(!n)throw Error(Y(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Y(284));if(!r._owner)throw Error(Y(290,e))}return e}function Ud(e,t){throw e=Object.prototype.toString.call(t),Error(Y(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Uj(e){var t=e._init;return t(e._payload)}function Ak(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=Ri(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,_){return b===null||b.tag!==6?(b=Fg(w,v.mode,_),b.return=v,b):(b=s(b,w),b.return=v,b)}function c(v,b,w,_){var j=w.type;return j===ko?d(v,b,w.props.children,_,w.key):b!==null&&(b.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gi&&Uj(j)===b.type)?(_=s(b,w.props),_.ref=sc(v,b,w),_.return=v,_):(_=Ih(w.type,w.key,w.props,null,v.mode,_),_.ref=sc(v,b,w),_.return=v,_)}function u(v,b,w,_){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=Bg(w,v.mode,_),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function d(v,b,w,_,j){return b===null||b.tag!==7?(b=Pa(w,v.mode,_,j),b.return=v,b):(b=s(b,w),b.return=v,b)}function h(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fg(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kd:return w=Ih(b.type,b.key,b.props,null,v.mode,w),w.ref=sc(v,null,b),w.return=v,w;case Co:return b=Bg(b,v.mode,w),b.return=v,b;case gi:var _=b._init;return h(v,_(b._payload),w)}if(wc(b)||Zl(b))return b=Pa(b,v.mode,w,null),b.return=v,b;Ud(v,b)}return null}function f(v,b,w,_){var j=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(v,b,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:return w.key===j?c(v,b,w,_):null;case Co:return w.key===j?u(v,b,w,_):null;case gi:return j=w._init,f(v,b,j(w._payload),_)}if(wc(w)||Zl(w))return j!==null?null:d(v,b,w,_,null);Ud(v,w)}return null}function m(v,b,w,_,j){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(w)||null,l(b,v,""+_,j);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case kd:return v=v.get(_.key===null?w:_.key)||null,c(b,v,_,j);case Co:return v=v.get(_.key===null?w:_.key)||null,u(b,v,_,j);case gi:var N=_._init;return m(v,b,w,N(_._payload),j)}if(wc(_)||Zl(_))return v=v.get(w)||null,d(b,v,_,j,null);Ud(b,_)}return null}function g(v,b,w,_){for(var j=null,N=null,E=b,T=b=0,S=null;E!==null&&T<w.length;T++){E.index>T?(S=E,E=null):S=E.sibling;var D=f(v,E,w[T],_);if(D===null){E===null&&(E=S);break}e&&E&&D.alternate===null&&t(v,E),b=i(D,b,T),N===null?j=D:N.sibling=D,N=D,E=S}if(T===w.length)return r(v,E),ot&&oa(v,T),j;if(E===null){for(;T<w.length;T++)E=h(v,w[T],_),E!==null&&(b=i(E,b,T),N===null?j=E:N.sibling=E,N=E);return ot&&oa(v,T),j}for(E=n(v,E);T<w.length;T++)S=m(E,v,T,w[T],_),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?T:S.key),b=i(S,b,T),N===null?j=S:N.sibling=S,N=S);return e&&E.forEach(function(O){return t(v,O)}),ot&&oa(v,T),j}function y(v,b,w,_){var j=Zl(w);if(typeof j!="function")throw Error(Y(150));if(w=j.call(w),w==null)throw Error(Y(151));for(var N=j=null,E=b,T=b=0,S=null,D=w.next();E!==null&&!D.done;T++,D=w.next()){E.index>T?(S=E,E=null):S=E.sibling;var O=f(v,E,D.value,_);if(O===null){E===null&&(E=S);break}e&&E&&O.alternate===null&&t(v,E),b=i(O,b,T),N===null?j=O:N.sibling=O,N=O,E=S}if(D.done)return r(v,E),ot&&oa(v,T),j;if(E===null){for(;!D.done;T++,D=w.next())D=h(v,D.value,_),D!==null&&(b=i(D,b,T),N===null?j=D:N.sibling=D,N=D);return ot&&oa(v,T),j}for(E=n(v,E);!D.done;T++,D=w.next())D=m(E,v,T,D.value,_),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?T:D.key),b=i(D,b,T),N===null?j=D:N.sibling=D,N=D);return e&&E.forEach(function(C){return t(v,C)}),ot&&oa(v,T),j}function p(v,b,w,_){if(typeof w=="object"&&w!==null&&w.type===ko&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case kd:e:{for(var j=w.key,N=b;N!==null;){if(N.key===j){if(j=w.type,j===ko){if(N.tag===7){r(v,N.sibling),b=s(N,w.props.children),b.return=v,v=b;break e}}else if(N.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gi&&Uj(j)===N.type){r(v,N.sibling),b=s(N,w.props),b.ref=sc(v,N,w),b.return=v,v=b;break e}r(v,N);break}else t(v,N);N=N.sibling}w.type===ko?(b=Pa(w.props.children,v.mode,_,w.key),b.return=v,v=b):(_=Ih(w.type,w.key,w.props,null,v.mode,_),_.ref=sc(v,b,w),_.return=v,v=_)}return o(v);case Co:e:{for(N=w.key;b!==null;){if(b.key===N)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=Bg(w,v.mode,_),b.return=v,v=b}return o(v);case gi:return N=w._init,p(v,b,N(w._payload),_)}if(wc(w))return g(v,b,w,_);if(Zl(w))return y(v,b,w,_);Ud(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,w),b.return=v,v=b):(r(v,b),b=Fg(w,v.mode,_),b.return=v,v=b),o(v)):r(v,b)}return p}var nl=Ak(!0),Pk=Ak(!1),ef=Ji(null),tf=null,Mo=null,Ry=null;function My(){Ry=Mo=tf=null}function Ly(e){var t=ef.current;nt(ef),e._currentValue=t}function m0(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Go(e,t){tf=e,Ry=Mo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&($r=!0),e.firstContext=null)}function Cn(e){var t=e._currentValue;if(Ry!==e)if(e={context:e,memoizedValue:t,next:null},Mo===null){if(tf===null)throw Error(Y(308));Mo=e,tf.dependencies={lanes:0,firstContext:e}}else Mo=Mo.next=e;return t}var ba=null;function $y(e){ba===null?ba=[e]:ba.push(e)}function Ok(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,$y(t)):(r.next=s.next,s.next=r),t.interleaved=r,zs(e,n)}function zs(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vi=!1;function Uy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tk(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Rs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ti(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Ae&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,zs(e,r)}return s=n.interleaved,s===null?(t.next=t,$y(n)):(t.next=s.next,s.next=t),n.interleaved=t,zs(e,r)}function Ch(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ny(e,r)}}function Fj(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rf(e,t,r,n){var s=e.updateQueue;vi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;o=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,y=l;switch(f=t,m=r,y.tag){case 1:if(g=y.payload,typeof g=="function"){h=g.call(m,h,f);break e}h=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=y.payload,f=typeof g=="function"?g.call(m,h,f):g,f==null)break e;h=pt({},h,f);break e;case 2:vi=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);$a|=o,e.lanes=o,e.memoizedState=h}}function Bj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Y(191,s));s.call(n)}}}var Gu={},fs=Ji(Gu),iu=Ji(Gu),au=Ji(Gu);function wa(e){if(e===Gu)throw Error(Y(174));return e}function Fy(e,t){switch(Je(au,t),Je(iu,e),Je(fs,Gu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kv(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kv(t,e)}nt(fs),Je(fs,t)}function sl(){nt(fs),nt(iu),nt(au)}function Ik(e){wa(au.current);var t=wa(fs.current),r=Kv(t,e.type);t!==r&&(Je(iu,e),Je(fs,r))}function By(e){iu.current===e&&(nt(fs),nt(iu))}var dt=Ji(0);function nf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dg=[];function zy(){for(var e=0;e<Dg.length;e++)Dg[e]._workInProgressVersionPrimary=null;Dg.length=0}var kh=ri.ReactCurrentDispatcher,Rg=ri.ReactCurrentBatchConfig,La=0,mt=null,Ot=null,Ht=null,sf=!1,Tc=!1,ou=0,z6=0;function mr(){throw Error(Y(321))}function Wy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Jn(e[r],t[r]))return!1;return!0}function Hy(e,t,r,n,s,i){if(La=i,mt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,kh.current=e===null||e.memoizedState===null?V6:G6,e=r(n,s),Tc){i=0;do{if(Tc=!1,ou=0,25<=i)throw Error(Y(301));i+=1,Ht=Ot=null,t.updateQueue=null,kh.current=K6,e=r(n,s)}while(Tc)}if(kh.current=af,t=Ot!==null&&Ot.next!==null,La=0,Ht=Ot=mt=null,sf=!1,t)throw Error(Y(300));return e}function qy(){var e=ou!==0;return ou=0,e}function os(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?mt.memoizedState=Ht=e:Ht=Ht.next=e,Ht}function kn(){if(Ot===null){var e=mt.alternate;e=e!==null?e.memoizedState:null}else e=Ot.next;var t=Ht===null?mt.memoizedState:Ht.next;if(t!==null)Ht=t,Ot=e;else{if(e===null)throw Error(Y(310));Ot=e,e={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},Ht===null?mt.memoizedState=Ht=e:Ht=Ht.next=e}return Ht}function lu(e,t){return typeof t=="function"?t(e):t}function Mg(e){var t=kn(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=Ot,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((La&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,mt.lanes|=d,$a|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,Jn(n,t.memoizedState)||($r=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,mt.lanes|=i,$a|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Lg(e){var t=kn(),r=t.queue;if(r===null)throw Error(Y(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);Jn(i,t.memoizedState)||($r=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Dk(){}function Rk(e,t){var r=mt,n=kn(),s=t(),i=!Jn(n.memoizedState,s);if(i&&(n.memoizedState=s,$r=!0),n=n.queue,Vy($k.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Ht!==null&&Ht.memoizedState.tag&1){if(r.flags|=2048,cu(9,Lk.bind(null,r,n,s,t),void 0,null),Xt===null)throw Error(Y(349));La&30||Mk(r,t,s)}return s}function Mk(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Lk(e,t,r,n){t.value=r,t.getSnapshot=n,Uk(t)&&Fk(e)}function $k(e,t,r){return r(function(){Uk(t)&&Fk(e)})}function Uk(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Jn(e,r)}catch{return!0}}function Fk(e){var t=zs(e,1);t!==null&&Yn(t,e,1,-1)}function zj(e){var t=os();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lu,lastRenderedState:e},t.queue=e,e=e.dispatch=q6.bind(null,mt,e),[t.memoizedState,e]}function cu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=mt.updateQueue,t===null?(t={lastEffect:null,stores:null},mt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Bk(){return kn().memoizedState}function Ah(e,t,r,n){var s=os();mt.flags|=e,s.memoizedState=cu(1|t,r,void 0,n===void 0?null:n)}function Um(e,t,r,n){var s=kn();n=n===void 0?null:n;var i=void 0;if(Ot!==null){var o=Ot.memoizedState;if(i=o.destroy,n!==null&&Wy(n,o.deps)){s.memoizedState=cu(t,r,i,n);return}}mt.flags|=e,s.memoizedState=cu(1|t,r,i,n)}function Wj(e,t){return Ah(8390656,8,e,t)}function Vy(e,t){return Um(2048,8,e,t)}function zk(e,t){return Um(4,2,e,t)}function Wk(e,t){return Um(4,4,e,t)}function Hk(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qk(e,t,r){return r=r!=null?r.concat([e]):null,Um(4,4,Hk.bind(null,t,e),r)}function Gy(){}function Vk(e,t){var r=kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Gk(e,t){var r=kn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Wy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Kk(e,t,r){return La&21?(Jn(r,t)||(r=ZC(),mt.lanes|=r,$a|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,$r=!0),e.memoizedState=r)}function W6(e,t){var r=Re;Re=r!==0&&4>r?r:4,e(!0);var n=Rg.transition;Rg.transition={};try{e(!1),t()}finally{Re=r,Rg.transition=n}}function Yk(){return kn().memoizedState}function H6(e,t,r){var n=Di(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Xk(e))Qk(t,r);else if(r=Ok(e,t,r,n),r!==null){var s=Ar();Yn(r,e,n,s),Jk(r,t,n)}}function q6(e,t,r){var n=Di(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xk(e))Qk(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,Jn(l,o)){var c=t.interleaved;c===null?(s.next=s,$y(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Ok(e,t,s,n),r!==null&&(s=Ar(),Yn(r,e,n,s),Jk(r,t,n))}}function Xk(e){var t=e.alternate;return e===mt||t!==null&&t===mt}function Qk(e,t){Tc=sf=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Jk(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Ny(e,r)}}var af={readContext:Cn,useCallback:mr,useContext:mr,useEffect:mr,useImperativeHandle:mr,useInsertionEffect:mr,useLayoutEffect:mr,useMemo:mr,useReducer:mr,useRef:mr,useState:mr,useDebugValue:mr,useDeferredValue:mr,useTransition:mr,useMutableSource:mr,useSyncExternalStore:mr,useId:mr,unstable_isNewReconciler:!1},V6={readContext:Cn,useCallback:function(e,t){return os().memoizedState=[e,t===void 0?null:t],e},useContext:Cn,useEffect:Wj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ah(4194308,4,Hk.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ah(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ah(4,2,e,t)},useMemo:function(e,t){var r=os();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=os();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=H6.bind(null,mt,e),[n.memoizedState,e]},useRef:function(e){var t=os();return e={current:e},t.memoizedState=e},useState:zj,useDebugValue:Gy,useDeferredValue:function(e){return os().memoizedState=e},useTransition:function(){var e=zj(!1),t=e[0];return e=W6.bind(null,e[1]),os().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=mt,s=os();if(ot){if(r===void 0)throw Error(Y(407));r=r()}else{if(r=t(),Xt===null)throw Error(Y(349));La&30||Mk(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Wj($k.bind(null,n,i,e),[e]),n.flags|=2048,cu(9,Lk.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=os(),t=Xt.identifierPrefix;if(ot){var r=Ps,n=As;r=(n&~(1<<32-Kn(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=ou++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=z6++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},G6={readContext:Cn,useCallback:Vk,useContext:Cn,useEffect:Vy,useImperativeHandle:qk,useInsertionEffect:zk,useLayoutEffect:Wk,useMemo:Gk,useReducer:Mg,useRef:Bk,useState:function(){return Mg(lu)},useDebugValue:Gy,useDeferredValue:function(e){var t=kn();return Kk(t,Ot.memoizedState,e)},useTransition:function(){var e=Mg(lu)[0],t=kn().memoizedState;return[e,t]},useMutableSource:Dk,useSyncExternalStore:Rk,useId:Yk,unstable_isNewReconciler:!1},K6={readContext:Cn,useCallback:Vk,useContext:Cn,useEffect:Vy,useImperativeHandle:qk,useInsertionEffect:zk,useLayoutEffect:Wk,useMemo:Gk,useReducer:Lg,useRef:Bk,useState:function(){return Lg(lu)},useDebugValue:Gy,useDeferredValue:function(e){var t=kn();return Ot===null?t.memoizedState=e:Kk(t,Ot.memoizedState,e)},useTransition:function(){var e=Lg(lu)[0],t=kn().memoizedState;return[e,t]},useMutableSource:Dk,useSyncExternalStore:Rk,useId:Yk,unstable_isNewReconciler:!1};function $n(e,t){if(e&&e.defaultProps){t=pt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function p0(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:pt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Fm={isMounted:function(e){return(e=e._reactInternals)?Ja(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ar(),s=Di(e),i=Rs(n,s);i.payload=t,r!=null&&(i.callback=r),t=Ti(e,i,s),t!==null&&(Yn(t,e,s,n),Ch(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ar(),s=Di(e),i=Rs(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Ti(e,i,s),t!==null&&(Yn(t,e,s,n),Ch(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ar(),n=Di(e),s=Rs(r,n);s.tag=2,t!=null&&(s.callback=t),t=Ti(e,s,n),t!==null&&(Yn(t,e,n,r),Ch(t,e,n))}};function Hj(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!tu(r,n)||!tu(s,i):!0}function Zk(e,t,r){var n=!1,s=Hi,i=t.contextType;return typeof i=="object"&&i!==null?i=Cn(i):(s=Wr(t)?Ra:wr.current,n=t.contextTypes,i=(n=n!=null)?tl(e,s):Hi),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fm,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function qj(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Fm.enqueueReplaceState(t,t.state,null)}function g0(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Uy(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=Cn(i):(i=Wr(t)?Ra:wr.current,s.context=tl(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(p0(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Fm.enqueueReplaceState(s,s.state,null),rf(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function il(e,t){try{var r="",n=t;do r+=_M(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function $g(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function v0(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Y6=typeof WeakMap=="function"?WeakMap:Map;function eA(e,t,r){r=Rs(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){lf||(lf=!0,C0=n),v0(e,t)},r}function tA(e,t,r){r=Rs(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){v0(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){v0(e,t),typeof n!="function"&&(Ii===null?Ii=new Set([this]):Ii.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Vj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Y6;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=cL.bind(null,e,t,r),t.then(e,e))}function Gj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Kj(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Rs(-1,1),t.tag=2,Ti(r,t,1))),r.lanes|=1),e)}var X6=ri.ReactCurrentOwner,$r=!1;function jr(e,t,r,n){t.child=e===null?Pk(t,null,r,n):nl(t,e.child,r,n)}function Yj(e,t,r,n,s){r=r.render;var i=t.ref;return Go(t,s),n=Hy(e,t,r,n,i,s),r=qy(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ws(e,t,s)):(ot&&r&&Ty(t),t.flags|=1,jr(e,t,n,s),t.child)}function Xj(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!tb(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,rA(e,t,i,n,s)):(e=Ih(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:tu,r(o,n)&&e.ref===t.ref)return Ws(e,t,s)}return t.flags|=1,e=Ri(i,n),e.ref=t.ref,e.return=t,t.child=e}function rA(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(tu(i,n)&&e.ref===t.ref)if($r=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&($r=!0);else return t.lanes=e.lanes,Ws(e,t,s)}return x0(e,t,r,n,s)}function nA(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je($o,Yr),Yr|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Je($o,Yr),Yr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Je($o,Yr),Yr|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,Je($o,Yr),Yr|=n;return jr(e,t,s,r),t.child}function sA(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function x0(e,t,r,n,s){var i=Wr(r)?Ra:wr.current;return i=tl(t,i),Go(t,s),r=Hy(e,t,r,n,i,s),n=qy(),e!==null&&!$r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ws(e,t,s)):(ot&&n&&Ty(t),t.flags|=1,jr(e,t,r,s),t.child)}function Qj(e,t,r,n,s){if(Wr(r)){var i=!0;Qh(t)}else i=!1;if(Go(t,s),t.stateNode===null)Ph(e,t),Zk(t,r,n),g0(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Cn(u):(u=Wr(r)?Ra:wr.current,u=tl(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&qj(t,o,n,u),vi=!1;var f=t.memoizedState;o.state=f,rf(t,n,o,s),c=t.memoizedState,l!==n||f!==c||zr.current||vi?(typeof d=="function"&&(p0(t,r,d,n),c=t.memoizedState),(l=vi||Hj(t,r,l,n,f,c,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Tk(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:$n(t.type,l),o.props=u,h=t.pendingProps,f=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Cn(c):(c=Wr(r)?Ra:wr.current,c=tl(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&qj(t,o,n,c),vi=!1,f=t.memoizedState,o.state=f,rf(t,n,o,s);var g=t.memoizedState;l!==h||f!==g||zr.current||vi?(typeof m=="function"&&(p0(t,r,m,n),g=t.memoizedState),(u=vi||Hj(t,r,u,n,f,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return y0(e,t,r,n,i,s)}function y0(e,t,r,n,s,i){sA(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&Mj(t,r,!1),Ws(e,t,i);n=t.stateNode,X6.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=nl(t,e.child,null,i),t.child=nl(t,null,l,i)):jr(e,t,l,i),t.memoizedState=n.state,s&&Mj(t,r,!0),t.child}function iA(e){var t=e.stateNode;t.pendingContext?Rj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Rj(e,t.context,!1),Fy(e,t.containerInfo)}function Jj(e,t,r,n,s){return rl(),Dy(s),t.flags|=256,jr(e,t,r,n),t.child}var b0={dehydrated:null,treeContext:null,retryLane:0};function w0(e){return{baseLanes:e,cachePool:null,transitions:null}}function aA(e,t,r){var n=t.pendingProps,s=dt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Je(dt,s&1),e===null)return f0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Wm(o,n,0,null),e=Pa(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=w0(r),t.memoizedState=b0,e):Ky(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Q6(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Ri(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ri(l,i):(i=Pa(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?w0(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=b0,n}return i=e.child,e=i.sibling,n=Ri(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ky(e,t){return t=Wm({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fd(e,t,r,n){return n!==null&&Dy(n),nl(t,e.child,null,r),e=Ky(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Q6(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=$g(Error(Y(422))),Fd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=Wm({mode:"visible",children:n.children},s,0,null),i=Pa(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&nl(t,e.child,null,o),t.child.memoizedState=w0(o),t.memoizedState=b0,i);if(!(t.mode&1))return Fd(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Y(419)),n=$g(i,n,void 0),Fd(e,t,o,n)}if(l=(o&e.childLanes)!==0,$r||l){if(n=Xt,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zs(e,s),Yn(n,e,s,-1))}return eb(),n=$g(Error(Y(421))),Fd(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=uL.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,rn=Oi(s.nextSibling),an=t,ot=!0,Bn=null,e!==null&&(wn[_n++]=As,wn[_n++]=Ps,wn[_n++]=Ma,As=e.id,Ps=e.overflow,Ma=t),t=Ky(t,n.children),t.flags|=4096,t)}function Zj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),m0(e.return,t,r)}function Ug(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function oA(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(jr(e,t,n.children,r),n=dt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zj(e,r,t);else if(e.tag===19)Zj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Je(dt,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&nf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Ug(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&nf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Ug(t,!0,r,null,i);break;case"together":Ug(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ph(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$a|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Y(153));if(t.child!==null){for(e=t.child,r=Ri(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ri(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function J6(e,t,r){switch(t.tag){case 3:iA(t),rl();break;case 5:Ik(t);break;case 1:Wr(t.type)&&Qh(t);break;case 4:Fy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;Je(ef,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(Je(dt,dt.current&1),t.flags|=128,null):r&t.child.childLanes?aA(e,t,r):(Je(dt,dt.current&1),e=Ws(e,t,r),e!==null?e.sibling:null);Je(dt,dt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return oA(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Je(dt,dt.current),n)break;return null;case 22:case 23:return t.lanes=0,nA(e,t,r)}return Ws(e,t,r)}var lA,_0,cA,uA;lA=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_0=function(){};cA=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,wa(fs.current);var i=null;switch(r){case"input":s=Hv(e,s),n=Hv(e,n),i=[];break;case"select":s=pt({},s,{value:void 0}),n=pt({},n,{value:void 0}),i=[];break;case"textarea":s=Gv(e,s),n=Gv(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yh)}Yv(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Kc.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Kc.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&et("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};uA=function(e,t,r,n){r!==n&&(t.flags|=4)};function ic(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function pr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Z6(e,t,r){var n=t.pendingProps;switch(Iy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pr(t),null;case 1:return Wr(t.type)&&Xh(),pr(t),null;case 3:return n=t.stateNode,sl(),nt(zr),nt(wr),zy(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($d(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bn!==null&&(P0(Bn),Bn=null))),_0(e,t),pr(t),null;case 5:By(t);var s=wa(au.current);if(r=t.type,e!==null&&t.stateNode!=null)cA(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Y(166));return pr(t),null}if(e=wa(fs.current),$d(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ls]=t,n[su]=i,e=(t.mode&1)!==0,r){case"dialog":et("cancel",n),et("close",n);break;case"iframe":case"object":case"embed":et("load",n);break;case"video":case"audio":for(s=0;s<jc.length;s++)et(jc[s],n);break;case"source":et("error",n);break;case"img":case"image":case"link":et("error",n),et("load",n);break;case"details":et("toggle",n);break;case"input":lj(n,i),et("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},et("invalid",n);break;case"textarea":uj(n,i),et("invalid",n)}Yv(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ld(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ld(n.textContent,l,e),s=["children",""+l]):Kc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&et("scroll",n)}switch(r){case"input":Ad(n),cj(n,i,!0);break;case"textarea":Ad(n),dj(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Yh)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$C(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[ls]=t,e[su]=n,lA(e,t,!1,!1),t.stateNode=e;e:{switch(o=Xv(r,n),r){case"dialog":et("cancel",e),et("close",e),s=n;break;case"iframe":case"object":case"embed":et("load",e),s=n;break;case"video":case"audio":for(s=0;s<jc.length;s++)et(jc[s],e);s=n;break;case"source":et("error",e),s=n;break;case"img":case"image":case"link":et("error",e),et("load",e),s=n;break;case"details":et("toggle",e),s=n;break;case"input":lj(e,n),s=Hv(e,n),et("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=pt({},n,{value:void 0}),et("invalid",e);break;case"textarea":uj(e,n),s=Gv(e,n),et("invalid",e);break;default:s=n}Yv(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?BC(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&UC(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Yc(e,c):typeof c=="number"&&Yc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&et("scroll",e):c!=null&&xy(e,i,c,o))}switch(r){case"input":Ad(e),cj(e,n,!1);break;case"textarea":Ad(e),dj(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Wi(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?Wo(e,!!n.multiple,i,!1):n.defaultValue!=null&&Wo(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Yh)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pr(t),null;case 6:if(e&&t.stateNode!=null)uA(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Y(166));if(r=wa(au.current),wa(fs.current),$d(t)){if(n=t.stateNode,r=t.memoizedProps,n[ls]=t,(i=n.nodeValue!==r)&&(e=an,e!==null))switch(e.tag){case 3:Ld(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ls]=t,t.stateNode=n}return pr(t),null;case 13:if(nt(dt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ot&&rn!==null&&t.mode&1&&!(t.flags&128))kk(),rl(),t.flags|=98560,i=!1;else if(i=$d(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Y(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[ls]=t}else rl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;pr(t),i=!1}else Bn!==null&&(P0(Bn),Bn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?Dt===0&&(Dt=3):eb())),t.updateQueue!==null&&(t.flags|=4),pr(t),null);case 4:return sl(),_0(e,t),e===null&&ru(t.stateNode.containerInfo),pr(t),null;case 10:return Ly(t.type._context),pr(t),null;case 17:return Wr(t.type)&&Xh(),pr(t),null;case 19:if(nt(dt),i=t.memoizedState,i===null)return pr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)ic(i,!1);else{if(Dt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=nf(e),o!==null){for(t.flags|=128,ic(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Je(dt,dt.current&1|2),t.child}e=e.sibling}i.tail!==null&&jt()>al&&(t.flags|=128,n=!0,ic(i,!1),t.lanes=4194304)}else{if(!n)if(e=nf(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ic(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ot)return pr(t),null}else 2*jt()-i.renderingStartTime>al&&r!==1073741824&&(t.flags|=128,n=!0,ic(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=jt(),t.sibling=null,r=dt.current,Je(dt,n?r&1|2:r&1),t):(pr(t),null);case 22:case 23:return Zy(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Yr&1073741824&&(pr(t),t.subtreeFlags&6&&(t.flags|=8192)):pr(t),null;case 24:return null;case 25:return null}throw Error(Y(156,t.tag))}function eL(e,t){switch(Iy(t),t.tag){case 1:return Wr(t.type)&&Xh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sl(),nt(zr),nt(wr),zy(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return By(t),null;case 13:if(nt(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Y(340));rl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return nt(dt),null;case 4:return sl(),null;case 10:return Ly(t.type._context),null;case 22:case 23:return Zy(),null;case 24:return null;default:return null}}var Bd=!1,vr=!1,tL=typeof WeakSet=="function"?WeakSet:Set,re=null;function Lo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){yt(e,t,n)}else r.current=null}function j0(e,t,r){try{r()}catch(n){yt(e,t,n)}}var eN=!1;function rL(e,t){if(a0=Vh,e=pk(),Oy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=o),f===i&&++d===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(o0={focusedElem:e,selectionRange:r},Vh=!1,re=t;re!==null;)if(t=re,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,re=e;else for(;re!==null;){t=re;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var y=g.memoizedProps,p=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?y:$n(t.type,y),p);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(_){yt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,re=e;break}re=t.return}return g=eN,eN=!1,g}function Ic(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&j0(t,r,i)}s=s.next}while(s!==n)}}function Bm(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function N0(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function dA(e){var t=e.alternate;t!==null&&(e.alternate=null,dA(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ls],delete t[su],delete t[u0],delete t[$6],delete t[U6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hA(e){return e.tag===5||e.tag===3||e.tag===4}function tN(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hA(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function S0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yh));else if(n!==4&&(e=e.child,e!==null))for(S0(e,t,r),e=e.sibling;e!==null;)S0(e,t,r),e=e.sibling}function E0(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(E0(e,t,r),e=e.sibling;e!==null;)E0(e,t,r),e=e.sibling}var sr=null,Fn=!1;function mi(e,t,r){for(r=r.child;r!==null;)fA(e,t,r),r=r.sibling}function fA(e,t,r){if(hs&&typeof hs.onCommitFiberUnmount=="function")try{hs.onCommitFiberUnmount(Im,r)}catch{}switch(r.tag){case 5:vr||Lo(r,t);case 6:var n=sr,s=Fn;sr=null,mi(e,t,r),sr=n,Fn=s,sr!==null&&(Fn?(e=sr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):sr.removeChild(r.stateNode));break;case 18:sr!==null&&(Fn?(e=sr,r=r.stateNode,e.nodeType===8?Tg(e.parentNode,r):e.nodeType===1&&Tg(e,r),Zc(e)):Tg(sr,r.stateNode));break;case 4:n=sr,s=Fn,sr=r.stateNode.containerInfo,Fn=!0,mi(e,t,r),sr=n,Fn=s;break;case 0:case 11:case 14:case 15:if(!vr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&j0(r,t,o),s=s.next}while(s!==n)}mi(e,t,r);break;case 1:if(!vr&&(Lo(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){yt(r,t,l)}mi(e,t,r);break;case 21:mi(e,t,r);break;case 22:r.mode&1?(vr=(n=vr)||r.memoizedState!==null,mi(e,t,r),vr=n):mi(e,t,r);break;default:mi(e,t,r)}}function rN(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new tL),t.forEach(function(n){var s=dL.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Mn(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:sr=l.stateNode,Fn=!1;break e;case 3:sr=l.stateNode.containerInfo,Fn=!0;break e;case 4:sr=l.stateNode.containerInfo,Fn=!0;break e}l=l.return}if(sr===null)throw Error(Y(160));fA(i,o,s),sr=null,Fn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){yt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mA(t,e),t=t.sibling}function mA(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Mn(t,e),is(e),n&4){try{Ic(3,e,e.return),Bm(3,e)}catch(y){yt(e,e.return,y)}try{Ic(5,e,e.return)}catch(y){yt(e,e.return,y)}}break;case 1:Mn(t,e),is(e),n&512&&r!==null&&Lo(r,r.return);break;case 5:if(Mn(t,e),is(e),n&512&&r!==null&&Lo(r,r.return),e.flags&32){var s=e.stateNode;try{Yc(s,"")}catch(y){yt(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&MC(s,i),Xv(l,o);var u=Xv(l,i);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];d==="style"?BC(s,h):d==="dangerouslySetInnerHTML"?UC(s,h):d==="children"?Yc(s,h):xy(s,d,h,u)}switch(l){case"input":qv(s,i);break;case"textarea":LC(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Wo(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Wo(s,!!i.multiple,i.defaultValue,!0):Wo(s,!!i.multiple,i.multiple?[]:"",!1))}s[su]=i}catch(y){yt(e,e.return,y)}}break;case 6:if(Mn(t,e),is(e),n&4){if(e.stateNode===null)throw Error(Y(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(y){yt(e,e.return,y)}}break;case 3:if(Mn(t,e),is(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Zc(t.containerInfo)}catch(y){yt(e,e.return,y)}break;case 4:Mn(t,e),is(e);break;case 13:Mn(t,e),is(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Qy=jt())),n&4&&rN(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(vr=(u=vr)||d,Mn(t,e),vr=u):Mn(t,e),is(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(re=e,d=e.child;d!==null;){for(h=re=d;re!==null;){switch(f=re,m=f.child,f.tag){case 0:case 11:case 14:case 15:Ic(4,f,f.return);break;case 1:Lo(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(y){yt(n,r,y)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){sN(h);continue}}m!==null?(m.return=f,re=m):sN(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=FC("display",o))}catch(y){yt(e,e.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){yt(e,e.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Mn(t,e),is(e),n&4&&rN(e);break;case 21:break;default:Mn(t,e),is(e)}}function is(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hA(r)){var n=r;break e}r=r.return}throw Error(Y(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Yc(s,""),n.flags&=-33);var i=tN(e);E0(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=tN(e);S0(e,l,o);break;default:throw Error(Y(161))}}catch(c){yt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function nL(e,t,r){re=e,pA(e)}function pA(e,t,r){for(var n=(e.mode&1)!==0;re!==null;){var s=re,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Bd;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||vr;l=Bd;var u=vr;if(Bd=o,(vr=c)&&!u)for(re=s;re!==null;)o=re,c=o.child,o.tag===22&&o.memoizedState!==null?iN(s):c!==null?(c.return=o,re=c):iN(s);for(;i!==null;)re=i,pA(i),i=i.sibling;re=s,Bd=l,vr=u}nN(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,re=i):nN(e)}}function nN(e){for(;re!==null;){var t=re;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:vr||Bm(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!vr)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:$n(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Bj(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Zc(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}vr||t.flags&512&&N0(t)}catch(f){yt(t,t.return,f)}}if(t===e){re=null;break}if(r=t.sibling,r!==null){r.return=t.return,re=r;break}re=t.return}}function sN(e){for(;re!==null;){var t=re;if(t===e){re=null;break}var r=t.sibling;if(r!==null){r.return=t.return,re=r;break}re=t.return}}function iN(e){for(;re!==null;){var t=re;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bm(4,t)}catch(c){yt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){yt(t,s,c)}}var i=t.return;try{N0(t)}catch(c){yt(t,i,c)}break;case 5:var o=t.return;try{N0(t)}catch(c){yt(t,o,c)}}}catch(c){yt(t,t.return,c)}if(t===e){re=null;break}var l=t.sibling;if(l!==null){l.return=t.return,re=l;break}re=t.return}}var sL=Math.ceil,of=ri.ReactCurrentDispatcher,Yy=ri.ReactCurrentOwner,En=ri.ReactCurrentBatchConfig,Ae=0,Xt=null,kt=null,lr=0,Yr=0,$o=Ji(0),Dt=0,uu=null,$a=0,zm=0,Xy=0,Dc=null,Lr=null,Qy=0,al=1/0,_s=null,lf=!1,C0=null,Ii=null,zd=!1,Si=null,cf=0,Rc=0,k0=null,Oh=-1,Th=0;function Ar(){return Ae&6?jt():Oh!==-1?Oh:Oh=jt()}function Di(e){return e.mode&1?Ae&2&&lr!==0?lr&-lr:B6.transition!==null?(Th===0&&(Th=ZC()),Th):(e=Re,e!==0||(e=window.event,e=e===void 0?16:ak(e.type)),e):1}function Yn(e,t,r,n){if(50<Rc)throw Rc=0,k0=null,Error(Y(185));Hu(e,r,n),(!(Ae&2)||e!==Xt)&&(e===Xt&&(!(Ae&2)&&(zm|=r),Dt===4&&wi(e,lr)),Hr(e,n),r===1&&Ae===0&&!(t.mode&1)&&(al=jt()+500,$m&&Zi()))}function Hr(e,t){var r=e.callbackNode;BM(e,t);var n=qh(e,e===Xt?lr:0);if(n===0)r!==null&&mj(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&mj(r),t===1)e.tag===0?F6(aN.bind(null,e)):Sk(aN.bind(null,e)),M6(function(){!(Ae&6)&&Zi()}),r=null;else{switch(ek(n)){case 1:r=jy;break;case 4:r=QC;break;case 16:r=Hh;break;case 536870912:r=JC;break;default:r=Hh}r=jA(r,gA.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gA(e,t){if(Oh=-1,Th=0,Ae&6)throw Error(Y(327));var r=e.callbackNode;if(Ko()&&e.callbackNode!==r)return null;var n=qh(e,e===Xt?lr:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=uf(e,n);else{t=n;var s=Ae;Ae|=2;var i=xA();(Xt!==e||lr!==t)&&(_s=null,al=jt()+500,Aa(e,t));do try{oL();break}catch(l){vA(e,l)}while(!0);My(),of.current=i,Ae=s,kt!==null?t=0:(Xt=null,lr=0,t=Dt)}if(t!==0){if(t===2&&(s=t0(e),s!==0&&(n=s,t=A0(e,s))),t===1)throw r=uu,Aa(e,0),wi(e,n),Hr(e,jt()),r;if(t===6)wi(e,n);else{if(s=e.current.alternate,!(n&30)&&!iL(s)&&(t=uf(e,n),t===2&&(i=t0(e),i!==0&&(n=i,t=A0(e,i))),t===1))throw r=uu,Aa(e,0),wi(e,n),Hr(e,jt()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Y(345));case 2:la(e,Lr,_s);break;case 3:if(wi(e,n),(n&130023424)===n&&(t=Qy+500-jt(),10<t)){if(qh(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ar(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=c0(la.bind(null,e,Lr,_s),t);break}la(e,Lr,_s);break;case 4:if(wi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-Kn(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=jt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*sL(n/1960))-n,10<n){e.timeoutHandle=c0(la.bind(null,e,Lr,_s),n);break}la(e,Lr,_s);break;case 5:la(e,Lr,_s);break;default:throw Error(Y(329))}}}return Hr(e,jt()),e.callbackNode===r?gA.bind(null,e):null}function A0(e,t){var r=Dc;return e.current.memoizedState.isDehydrated&&(Aa(e,t).flags|=256),e=uf(e,t),e!==2&&(t=Lr,Lr=r,t!==null&&P0(t)),e}function P0(e){Lr===null?Lr=e:Lr.push.apply(Lr,e)}function iL(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Jn(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wi(e,t){for(t&=~Xy,t&=~zm,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Kn(t),n=1<<r;e[r]=-1,t&=~n}}function aN(e){if(Ae&6)throw Error(Y(327));Ko();var t=qh(e,0);if(!(t&1))return Hr(e,jt()),null;var r=uf(e,t);if(e.tag!==0&&r===2){var n=t0(e);n!==0&&(t=n,r=A0(e,n))}if(r===1)throw r=uu,Aa(e,0),wi(e,t),Hr(e,jt()),r;if(r===6)throw Error(Y(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,la(e,Lr,_s),Hr(e,jt()),null}function Jy(e,t){var r=Ae;Ae|=1;try{return e(t)}finally{Ae=r,Ae===0&&(al=jt()+500,$m&&Zi())}}function Ua(e){Si!==null&&Si.tag===0&&!(Ae&6)&&Ko();var t=Ae;Ae|=1;var r=En.transition,n=Re;try{if(En.transition=null,Re=1,e)return e()}finally{Re=n,En.transition=r,Ae=t,!(Ae&6)&&Zi()}}function Zy(){Yr=$o.current,nt($o)}function Aa(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,R6(r)),kt!==null)for(r=kt.return;r!==null;){var n=r;switch(Iy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xh();break;case 3:sl(),nt(zr),nt(wr),zy();break;case 5:By(n);break;case 4:sl();break;case 13:nt(dt);break;case 19:nt(dt);break;case 10:Ly(n.type._context);break;case 22:case 23:Zy()}r=r.return}if(Xt=e,kt=e=Ri(e.current,null),lr=Yr=t,Dt=0,uu=null,Xy=zm=$a=0,Lr=Dc=null,ba!==null){for(t=0;t<ba.length;t++)if(r=ba[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}ba=null}return e}function vA(e,t){do{var r=kt;try{if(My(),kh.current=af,sf){for(var n=mt.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sf=!1}if(La=0,Ht=Ot=mt=null,Tc=!1,ou=0,Yy.current=null,r===null||r.return===null){Dt=1,uu=t,kt=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=lr,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Gj(o);if(m!==null){m.flags&=-257,Kj(m,o,l,i,t),m.mode&1&&Vj(i,u,t),t=m,c=u;var g=t.updateQueue;if(g===null){var y=new Set;y.add(c),t.updateQueue=y}else g.add(c);break e}else{if(!(t&1)){Vj(i,u,t),eb();break e}c=Error(Y(426))}}else if(ot&&l.mode&1){var p=Gj(o);if(p!==null){!(p.flags&65536)&&(p.flags|=256),Kj(p,o,l,i,t),Dy(il(c,l));break e}}i=c=il(c,l),Dt!==4&&(Dt=2),Dc===null?Dc=[i]:Dc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=eA(i,c,t);Fj(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Ii===null||!Ii.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=tA(i,l,t);Fj(i,_);break e}}i=i.return}while(i!==null)}bA(r)}catch(j){t=j,kt===r&&r!==null&&(kt=r=r.return);continue}break}while(!0)}function xA(){var e=of.current;return of.current=af,e===null?af:e}function eb(){(Dt===0||Dt===3||Dt===2)&&(Dt=4),Xt===null||!($a&268435455)&&!(zm&268435455)||wi(Xt,lr)}function uf(e,t){var r=Ae;Ae|=2;var n=xA();(Xt!==e||lr!==t)&&(_s=null,Aa(e,t));do try{aL();break}catch(s){vA(e,s)}while(!0);if(My(),Ae=r,of.current=n,kt!==null)throw Error(Y(261));return Xt=null,lr=0,Dt}function aL(){for(;kt!==null;)yA(kt)}function oL(){for(;kt!==null&&!TM();)yA(kt)}function yA(e){var t=_A(e.alternate,e,Yr);e.memoizedProps=e.pendingProps,t===null?bA(e):kt=t,Yy.current=null}function bA(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=eL(r,t),r!==null){r.flags&=32767,kt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Dt=6,kt=null;return}}else if(r=Z6(r,t,Yr),r!==null){kt=r;return}if(t=t.sibling,t!==null){kt=t;return}kt=t=e}while(t!==null);Dt===0&&(Dt=5)}function la(e,t,r){var n=Re,s=En.transition;try{En.transition=null,Re=1,lL(e,t,r,n)}finally{En.transition=s,Re=n}return null}function lL(e,t,r,n){do Ko();while(Si!==null);if(Ae&6)throw Error(Y(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Y(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(zM(e,i),e===Xt&&(kt=Xt=null,lr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zd||(zd=!0,jA(Hh,function(){return Ko(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=En.transition,En.transition=null;var o=Re;Re=1;var l=Ae;Ae|=4,Yy.current=null,rL(e,r),mA(r,e),k6(o0),Vh=!!a0,o0=a0=null,e.current=r,nL(r),IM(),Ae=l,Re=o,En.transition=i}else e.current=r;if(zd&&(zd=!1,Si=e,cf=s),i=e.pendingLanes,i===0&&(Ii=null),MM(r.stateNode),Hr(e,jt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(lf)throw lf=!1,e=C0,C0=null,e;return cf&1&&e.tag!==0&&Ko(),i=e.pendingLanes,i&1?e===k0?Rc++:(Rc=0,k0=e):Rc=0,Zi(),null}function Ko(){if(Si!==null){var e=ek(cf),t=En.transition,r=Re;try{if(En.transition=null,Re=16>e?16:e,Si===null)var n=!1;else{if(e=Si,Si=null,cf=0,Ae&6)throw Error(Y(331));var s=Ae;for(Ae|=4,re=e.current;re!==null;){var i=re,o=i.child;if(re.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(re=u;re!==null;){var d=re;switch(d.tag){case 0:case 11:case 15:Ic(8,d,i)}var h=d.child;if(h!==null)h.return=d,re=h;else for(;re!==null;){d=re;var f=d.sibling,m=d.return;if(dA(d),d===u){re=null;break}if(f!==null){f.return=m,re=f;break}re=m}}}var g=i.alternate;if(g!==null){var y=g.child;if(y!==null){g.child=null;do{var p=y.sibling;y.sibling=null,y=p}while(y!==null)}}re=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,re=o;else e:for(;re!==null;){if(i=re,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ic(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,re=v;break e}re=i.return}}var b=e.current;for(re=b;re!==null;){o=re;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,re=w;else e:for(o=b;re!==null;){if(l=re,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Bm(9,l)}}catch(j){yt(l,l.return,j)}if(l===o){re=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,re=_;break e}re=l.return}}if(Ae=s,Zi(),hs&&typeof hs.onPostCommitFiberRoot=="function")try{hs.onPostCommitFiberRoot(Im,e)}catch{}n=!0}return n}finally{Re=r,En.transition=t}}return!1}function oN(e,t,r){t=il(r,t),t=eA(e,t,1),e=Ti(e,t,1),t=Ar(),e!==null&&(Hu(e,1,t),Hr(e,t))}function yt(e,t,r){if(e.tag===3)oN(e,e,r);else for(;t!==null;){if(t.tag===3){oN(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ii===null||!Ii.has(n))){e=il(r,e),e=tA(t,e,1),t=Ti(t,e,1),e=Ar(),t!==null&&(Hu(t,1,e),Hr(t,e));break}}t=t.return}}function cL(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ar(),e.pingedLanes|=e.suspendedLanes&r,Xt===e&&(lr&r)===r&&(Dt===4||Dt===3&&(lr&130023424)===lr&&500>jt()-Qy?Aa(e,0):Xy|=r),Hr(e,t)}function wA(e,t){t===0&&(e.mode&1?(t=Td,Td<<=1,!(Td&130023424)&&(Td=4194304)):t=1);var r=Ar();e=zs(e,t),e!==null&&(Hu(e,t,r),Hr(e,r))}function uL(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wA(e,r)}function dL(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Y(314))}n!==null&&n.delete(t),wA(e,r)}var _A;_A=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||zr.current)$r=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return $r=!1,J6(e,t,r);$r=!!(e.flags&131072)}else $r=!1,ot&&t.flags&1048576&&Ek(t,Zh,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ph(e,t),e=t.pendingProps;var s=tl(t,wr.current);Go(t,r),s=Hy(null,t,n,e,s,r);var i=qy();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Wr(n)?(i=!0,Qh(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uy(t),s.updater=Fm,t.stateNode=s,s._reactInternals=t,g0(t,n,e,r),t=y0(null,t,n,!0,i,r)):(t.tag=0,ot&&i&&Ty(t),jr(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ph(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=fL(n),e=$n(n,e),s){case 0:t=x0(null,t,n,e,r);break e;case 1:t=Qj(null,t,n,e,r);break e;case 11:t=Yj(null,t,n,e,r);break e;case 14:t=Xj(null,t,n,$n(n.type,e),r);break e}throw Error(Y(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$n(n,s),x0(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$n(n,s),Qj(e,t,n,s,r);case 3:e:{if(iA(t),e===null)throw Error(Y(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Tk(e,t),rf(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=il(Error(Y(423)),t),t=Jj(e,t,n,r,s);break e}else if(n!==s){s=il(Error(Y(424)),t),t=Jj(e,t,n,r,s);break e}else for(rn=Oi(t.stateNode.containerInfo.firstChild),an=t,ot=!0,Bn=null,r=Pk(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(rl(),n===s){t=Ws(e,t,r);break e}jr(e,t,n,r)}t=t.child}return t;case 5:return Ik(t),e===null&&f0(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,l0(n,s)?o=null:i!==null&&l0(n,i)&&(t.flags|=32),sA(e,t),jr(e,t,o,r),t.child;case 6:return e===null&&f0(t),null;case 13:return aA(e,t,r);case 4:return Fy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=nl(t,null,n,r):jr(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$n(n,s),Yj(e,t,n,s,r);case 7:return jr(e,t,t.pendingProps,r),t.child;case 8:return jr(e,t,t.pendingProps.children,r),t.child;case 12:return jr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,Je(ef,n._currentValue),n._currentValue=o,i!==null)if(Jn(i.value,o)){if(i.children===s.children&&!zr.current){t=Ws(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Rs(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),m0(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),m0(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}jr(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Go(t,r),s=Cn(s),n=n(s),t.flags|=1,jr(e,t,n,r),t.child;case 14:return n=t.type,s=$n(n,t.pendingProps),s=$n(n.type,s),Xj(e,t,n,s,r);case 15:return rA(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:$n(n,s),Ph(e,t),t.tag=1,Wr(n)?(e=!0,Qh(t)):e=!1,Go(t,r),Zk(t,n,s),g0(t,n,s,r),y0(null,t,n,!0,e,r);case 19:return oA(e,t,r);case 22:return nA(e,t,r)}throw Error(Y(156,t.tag))};function jA(e,t){return XC(e,t)}function hL(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(e,t,r,n){return new hL(e,t,r,n)}function tb(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fL(e){if(typeof e=="function")return tb(e)?1:0;if(e!=null){if(e=e.$$typeof,e===by)return 11;if(e===wy)return 14}return 2}function Ri(e,t){var r=e.alternate;return r===null?(r=jn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ih(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")tb(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ko:return Pa(r.children,s,i,t);case yy:o=8,s|=8;break;case Fv:return e=jn(12,r,t,s|2),e.elementType=Fv,e.lanes=i,e;case Bv:return e=jn(13,r,t,s),e.elementType=Bv,e.lanes=i,e;case zv:return e=jn(19,r,t,s),e.elementType=zv,e.lanes=i,e;case IC:return Wm(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case OC:o=10;break e;case TC:o=9;break e;case by:o=11;break e;case wy:o=14;break e;case gi:o=16,n=null;break e}throw Error(Y(130,e==null?e:typeof e,""))}return t=jn(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Pa(e,t,r,n){return e=jn(7,e,n,t),e.lanes=r,e}function Wm(e,t,r,n){return e=jn(22,e,n,t),e.elementType=IC,e.lanes=r,e.stateNode={isHidden:!1},e}function Fg(e,t,r){return e=jn(6,e,null,t),e.lanes=r,e}function Bg(e,t,r){return t=jn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function mL(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wg(0),this.expirationTimes=wg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wg(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function rb(e,t,r,n,s,i,o,l,c){return e=new mL(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(i),e}function pL(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function NA(e){if(!e)return Hi;e=e._reactInternals;e:{if(Ja(e)!==e||e.tag!==1)throw Error(Y(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Wr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Y(171))}if(e.tag===1){var r=e.type;if(Wr(r))return Nk(e,r,t)}return t}function SA(e,t,r,n,s,i,o,l,c){return e=rb(r,n,!0,e,s,i,o,l,c),e.context=NA(null),r=e.current,n=Ar(),s=Di(r),i=Rs(n,s),i.callback=t??null,Ti(r,i,s),e.current.lanes=s,Hu(e,s,n),Hr(e,n),e}function Hm(e,t,r,n){var s=t.current,i=Ar(),o=Di(s);return r=NA(r),t.context===null?t.context=r:t.pendingContext=r,t=Rs(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Ti(s,t,o),e!==null&&(Yn(e,s,o,i),Ch(e,s,o)),o}function df(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lN(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function nb(e,t){lN(e,t),(e=e.alternate)&&lN(e,t)}function gL(){return null}var EA=typeof reportError=="function"?reportError:function(e){console.error(e)};function sb(e){this._internalRoot=e}qm.prototype.render=sb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Y(409));Hm(e,t,null,null)};qm.prototype.unmount=sb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ua(function(){Hm(null,e,null,null)}),t[Bs]=null}};function qm(e){this._internalRoot=e}qm.prototype.unstable_scheduleHydration=function(e){if(e){var t=nk();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bi.length&&t!==0&&t<bi[r].priority;r++);bi.splice(r,0,e),r===0&&ik(e)}};function ib(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cN(){}function vL(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=df(o);i.call(u)}}var o=SA(t,n,e,0,null,!1,!1,"",cN);return e._reactRootContainer=o,e[Bs]=o.current,ru(e.nodeType===8?e.parentNode:e),Ua(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=df(c);l.call(u)}}var c=rb(e,0,!1,null,null,!1,!1,"",cN);return e._reactRootContainer=c,e[Bs]=c.current,ru(e.nodeType===8?e.parentNode:e),Ua(function(){Hm(t,c,r,n)}),c}function Gm(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=df(o);l.call(c)}}Hm(t,o,e,s)}else o=vL(r,t,e,s,n);return df(o)}tk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=_c(t.pendingLanes);r!==0&&(Ny(t,r|1),Hr(t,jt()),!(Ae&6)&&(al=jt()+500,Zi()))}break;case 13:Ua(function(){var n=zs(e,1);if(n!==null){var s=Ar();Yn(n,e,1,s)}}),nb(e,1)}};Sy=function(e){if(e.tag===13){var t=zs(e,134217728);if(t!==null){var r=Ar();Yn(t,e,134217728,r)}nb(e,134217728)}};rk=function(e){if(e.tag===13){var t=Di(e),r=zs(e,t);if(r!==null){var n=Ar();Yn(r,e,t,n)}nb(e,t)}};nk=function(){return Re};sk=function(e,t){var r=Re;try{return Re=e,t()}finally{Re=r}};Jv=function(e,t,r){switch(t){case"input":if(qv(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Lm(n);if(!s)throw Error(Y(90));RC(n),qv(n,s)}}}break;case"textarea":LC(e,r);break;case"select":t=r.value,t!=null&&Wo(e,!!r.multiple,t,!1)}};HC=Jy;qC=Ua;var xL={usingClientEntryPoint:!1,Events:[Vu,To,Lm,zC,WC,Jy]},ac={findFiberByHostInstance:ya,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yL={bundleType:ac.bundleType,version:ac.version,rendererPackageName:ac.rendererPackageName,rendererConfig:ac.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=KC(e),e===null?null:e.stateNode},findFiberByHostInstance:ac.findFiberByHostInstance||gL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Im=Wd.inject(yL),hs=Wd}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xL;hn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ib(t))throw Error(Y(200));return pL(e,t,null,r)};hn.createRoot=function(e,t){if(!ib(e))throw Error(Y(299));var r=!1,n="",s=EA;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=rb(e,1,!1,null,null,r,!1,n,s),e[Bs]=t.current,ru(e.nodeType===8?e.parentNode:e),new sb(t)};hn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Y(188)):(e=Object.keys(e).join(","),Error(Y(268,e)));return e=KC(t),e=e===null?null:e.stateNode,e};hn.flushSync=function(e){return Ua(e)};hn.hydrate=function(e,t,r){if(!Vm(t))throw Error(Y(200));return Gm(null,e,t,!0,r)};hn.hydrateRoot=function(e,t,r){if(!ib(e))throw Error(Y(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=EA;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=SA(t,null,e,1,r??null,s,!1,i,o),e[Bs]=t.current,ru(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new qm(t)};hn.render=function(e,t,r){if(!Vm(t))throw Error(Y(200));return Gm(null,e,t,!1,r)};hn.unmountComponentAtNode=function(e){if(!Vm(e))throw Error(Y(40));return e._reactRootContainer?(Ua(function(){Gm(null,null,e,!1,function(){e._reactRootContainer=null,e[Bs]=null})}),!0):!1};hn.unstable_batchedUpdates=Jy;hn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Vm(r))throw Error(Y(200));if(e==null||e._reactInternals===void 0)throw Error(Y(38));return Gm(e,t,r,!1,n)};hn.version="18.3.1-next-f1338f8080-20240426";function CA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CA)}catch(e){console.error(e)}}CA(),CC.exports=hn;var ab=CC.exports,kA,uN=ab;kA=uN.createRoot,uN.hydrateRoot;const bL=()=>{const[e,t]=x.useState("desktop");return x.useEffect(()=>{const r=()=>{const n=window.innerWidth,s=navigator.userAgent,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(s);n<768||i?t("mobile"):n<1200?t("tablet"):t("desktop")};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),e};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wL=()=>{};var dN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=function(e,t){if(!e)throw Ol(t)},Ol=function(e){return new Error("Firebase Database ("+AA.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):(s&64512)===55296&&n+1<e.length&&(e.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++n)&1023),t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},_L=function(e){const t=[];let r=0,n=0;for(;r<e.length;){const s=e[r++];if(s<128)t[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[r++];t[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[r++],o=e[r++],l=e[r++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;t[n++]=String.fromCharCode(55296+(c>>10)),t[n++]=String.fromCharCode(56320+(c&1023))}else{const i=e[r++],o=e[r++];t[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return t.join("")},ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<e.length;s+=3){const i=e[s],o=s+1<e.length,l=o?e[s+1]:0,c=s+2<e.length,u=c?e[s+2]:0,d=i>>2,h=(i&3)<<4|l>>4;let f=(l&15)<<2|u>>6,m=u&63;c||(m=64,o||(f=64)),n.push(r[d],r[h],r[f],r[m])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(PA(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):_L(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<e.length;){const i=r[e.charAt(s++)],l=s<e.length?r[e.charAt(s)]:0;++s;const u=s<e.length?r[e.charAt(s)]:64;++s;const h=s<e.length?r[e.charAt(s)]:64;if(++s,i==null||l==null||u==null||h==null)throw new jL;const f=i<<2|l>>4;if(n.push(f),u!==64){const m=l<<4&240|u>>2;if(n.push(m),h!==64){const g=u<<6&192|h;n.push(g)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class jL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const OA=function(e){const t=PA(e);return ob.encodeByteArray(t,!0)},hf=function(e){return OA(e).replace(/\./g,"")},O0=function(e){try{return ob.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(e){return TA(void 0,e)}function TA(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const r=t;return new Date(r.getTime());case Object:e===void 0&&(e={});break;case Array:e=[];break;default:return t}for(const r in t)!t.hasOwnProperty(r)||!SL(r)||(e[r]=TA(e[r],t[r]));return e}function SL(e){return e!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=()=>EL().__FIREBASE_DEFAULTS__,kL=()=>{if(typeof process>"u"||typeof dN>"u")return;const e=dN.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},AL=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&O0(e[1]);return t&&JSON.parse(t)},IA=()=>{try{return wL()||CL()||kL()||AL()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},PL=e=>{var t,r;return(r=(t=IA())==null?void 0:t.emulatorHosts)==null?void 0:r[e]},DA=e=>{const t=PL(e);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const n=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),n]:[t.substring(0,r),n]},RA=()=>{var e;return(e=IA())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cs=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,n))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ku(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function MA(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[hf(JSON.stringify(r)),hf(JSON.stringify(o)),""].join(".")}const Mc={};function OL(){const e={prod:[],emulator:[]};for(const t of Object.keys(Mc))Mc[t]?e.emulator.push(t):e.prod.push(t);return e}function TL(e){let t=document.getElementById(e),r=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),r=!0),{created:r,element:t}}let hN=!1;function $A(e,t){if(typeof window>"u"||typeof document>"u"||!Ku(window.location.host)||Mc[e]===t||Mc[e]||hN)return;Mc[e]=t;function r(f){return`__firebase__banner__${f}`}const n="__firebase__banner",i=OL().prod.length>0;function o(){const f=document.getElementById(n);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,m){f.setAttribute("width","24"),f.setAttribute("id",m),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{hN=!0,o()},f}function d(f,m){f.setAttribute("id",m),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function h(){const f=TL(n),m=r("text"),g=document.getElementById(m)||document.createElement("span"),y=r("learnmore"),p=document.getElementById(y)||document.createElement("a"),v=r("preprendIcon"),b=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const w=f.element;l(w),d(p,y);const _=u();c(b,v),w.append(b,g,p,_),document.body.appendChild(w)}i?(g.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function UA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(IL())}function DL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RL(){return AA.NODE_ADMIN===!0}function ML(){try{return typeof indexedDB=="object"}catch{return!1}}function LL(){return new Promise((e,t)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L="FirebaseError";class Tl extends Error{constructor(t,r,n){super(r),this.code=t,this.customData=n,this.name=$L,Object.setPrototypeOf(this,Tl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,FA.prototype.create)}}class FA{constructor(t,r,n){this.service=t,this.serviceName=r,this.errors=n}create(t,...r){const n=r[0]||{},s=`${this.service}/${t}`,i=this.errors[t],o=i?UL(i,n):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Tl(s,l,n)}}function UL(e,t){return e.replace(FL,(r,n)=>{const s=t[n];return s!=null?String(s):`<${n}?>`})}const FL=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(e){return JSON.parse(e)}function It(e){return JSON.stringify(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA=function(e){let t={},r={},n={},s="";try{const i=e.split(".");t=du(O0(i[0])||""),r=du(O0(i[1])||""),s=i[2],n=r.d||{},delete r.d}catch{}return{header:t,claims:r,data:n,signature:s}},BL=function(e){const t=BA(e),r=t.claims;return!!r&&typeof r=="object"&&r.hasOwnProperty("iat")},zL=function(e){const t=BA(e).claims;return typeof t=="object"&&t.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ol(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function T0(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function ff(e,t,r){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=t.call(r,e[s],s,e));return n}function mf(e,t){if(e===t)return!0;const r=Object.keys(e),n=Object.keys(t);for(const s of r){if(!n.includes(s))return!1;const i=e[s],o=t[s];if(fN(i)&&fN(o)){if(!mf(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function fN(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WL(e){const t=[];for(const[r,n]of Object.entries(e))Array.isArray(n)?n.forEach(s=>{t.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):t.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return t.length?"&"+t.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(t,r){r||(r=0);const n=this.W_;if(typeof t=="string")for(let h=0;h<16;h++)n[h]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(let h=0;h<16;h++)n[h]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(let h=16;h<80;h++){const f=n[h-3]^n[h-8]^n[h-14]^n[h-16];n[h]=(f<<1|f>>>31)&4294967295}let s=this.chain_[0],i=this.chain_[1],o=this.chain_[2],l=this.chain_[3],c=this.chain_[4],u,d;for(let h=0;h<80;h++){h<40?h<20?(u=l^i&(o^l),d=1518500249):(u=i^o^l,d=1859775393):h<60?(u=i&o|l&(i|o),d=2400959708):(u=i^o^l,d=3395469782);const f=(s<<5|s>>>27)+u+c+d+n[h]&4294967295;c=l,l=o,o=(i<<30|i>>>2)&4294967295,i=s,s=f}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+i&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(t,r){if(t==null)return;r===void 0&&(r=t.length);const n=r-this.blockSize;let s=0;const i=this.buf_;let o=this.inbuf_;for(;s<r;){if(o===0)for(;s<=n;)this.compress_(t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<r;)if(i[o]=t.charCodeAt(s),++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}else for(;s<r;)if(i[o]=t[s],++o,++s,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=r}digest(){const t=[];let r=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let s=this.blockSize-1;s>=56;s--)this.buf_[s]=r&255,r/=256;this.compress_(this.buf_);let n=0;for(let s=0;s<5;s++)for(let i=24;i>=0;i-=8)t[n]=this.chain_[s]>>i&255,++n;return t}}function ll(e,t){return`${e} failed: ${t} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qL=function(e){const t=[];let r=0;for(let n=0;n<e.length;n++){let s=e.charCodeAt(n);if(s>=55296&&s<=56319){const i=s-55296;n++,Q(n<e.length,"Surrogate pair missing trail surrogate.");const o=e.charCodeAt(n)-56320;s=65536+(i<<10)+o}s<128?t[r++]=s:s<2048?(t[r++]=s>>6|192,t[r++]=s&63|128):s<65536?(t[r++]=s>>12|224,t[r++]=s>>6&63|128,t[r++]=s&63|128):(t[r++]=s>>18|240,t[r++]=s>>12&63|128,t[r++]=s>>6&63|128,t[r++]=s&63|128)}return t},Km=function(e){let t=0;for(let r=0;r<e.length;r++){const n=e.charCodeAt(r);n<128?t++:n<2048?t+=2:n>=55296&&n<=56319?(t+=4,r++):t+=3}return t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(e){return e&&e._delegate?e._delegate:e}class cl{constructor(t,r,n){this.name=t,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VL=class{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const n=new cs;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),n=(t==null?void 0:t.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(KL(t))try{this.getOrInitializeService({instanceIdentifier:ca})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(t=ca){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=ca){return this.instances.has(t)}getOptions(t=ca){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&o.resolve(s)}return s}onInit(t,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(t),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&t(i,n),()=>{s.delete(t)}}invokeOnInitCallbacks(t,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:GL(t),options:r}),this.instances.set(t,n),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch{}return n||null}normalizeInstanceIdentifier(t=ca){return this.component?this.component.multipleInstances?t:ca:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function GL(e){return e===ca?void 0:e}function KL(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new VL(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Qe||(Qe={}));const XL={debug:Qe.DEBUG,verbose:Qe.VERBOSE,info:Qe.INFO,warn:Qe.WARN,error:Qe.ERROR,silent:Qe.SILENT},QL=Qe.INFO,JL={[Qe.DEBUG]:"log",[Qe.VERBOSE]:"log",[Qe.INFO]:"info",[Qe.WARN]:"warn",[Qe.ERROR]:"error"},ZL=(e,t,...r)=>{if(t<e.logLevel)return;const n=new Date().toISOString(),s=JL[t];if(s)console[s](`[${n}]  ${e.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class zA{constructor(t){this.name=t,this._logLevel=QL,this._logHandler=ZL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qe))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?XL[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qe.DEBUG,...t),this._logHandler(this,Qe.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qe.VERBOSE,...t),this._logHandler(this,Qe.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qe.INFO,...t),this._logHandler(this,Qe.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qe.WARN,...t),this._logHandler(this,Qe.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qe.ERROR,...t),this._logHandler(this,Qe.ERROR,...t)}}const e$=(e,t)=>t.some(r=>e instanceof r);let mN,pN;function t$(){return mN||(mN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function r$(){return pN||(pN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WA=new WeakMap,I0=new WeakMap,HA=new WeakMap,zg=new WeakMap,lb=new WeakMap;function n$(e){const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{r(Mi(e.result)),s()},o=()=>{n(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",o)});return t.then(r=>{r instanceof IDBCursor&&WA.set(r,e)}).catch(()=>{}),lb.set(t,e),t}function s$(e){if(I0.has(e))return;const t=new Promise((r,n)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});I0.set(e,t)}let D0={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return I0.get(e);if(t==="objectStoreNames")return e.objectStoreNames||HA.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Mi(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function i$(e){D0=e(D0)}function a$(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const n=e.call(Wg(this),t,...r);return HA.set(n,t.sort?t.sort():[t]),Mi(n)}:r$().includes(e)?function(...t){return e.apply(Wg(this),t),Mi(WA.get(this))}:function(...t){return Mi(e.apply(Wg(this),t))}}function o$(e){return typeof e=="function"?a$(e):(e instanceof IDBTransaction&&s$(e),e$(e,t$())?new Proxy(e,D0):e)}function Mi(e){if(e instanceof IDBRequest)return n$(e);if(zg.has(e))return zg.get(e);const t=o$(e);return t!==e&&(zg.set(e,t),lb.set(t,e)),t}const Wg=e=>lb.get(e);function l$(e,t,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(e,t),l=Mi(o);return n&&o.addEventListener("upgradeneeded",c=>{n(Mi(o.result),c.oldVersion,c.newVersion,Mi(o.transaction),c)}),r&&o.addEventListener("blocked",c=>r(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const c$=["get","getKey","getAll","getAllKeys","count"],u$=["put","add","delete","clear"],Hg=new Map;function gN(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Hg.get(t))return Hg.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,s=u$.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||c$.includes(r)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(l.shift())),(await Promise.all([u[r](...l),s&&c.done]))[0]};return Hg.set(t,i),i}i$(e=>({...e,get:(t,r,n)=>gN(t,r)||e.get(t,r,n),has:(t,r)=>!!gN(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d${constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(h$(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function h$(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const R0="@firebase/app",vN="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs=new zA("@firebase/app"),f$="@firebase/app-compat",m$="@firebase/analytics-compat",p$="@firebase/analytics",g$="@firebase/app-check-compat",v$="@firebase/app-check",x$="@firebase/auth",y$="@firebase/auth-compat",b$="@firebase/database",w$="@firebase/data-connect",_$="@firebase/database-compat",j$="@firebase/functions",N$="@firebase/functions-compat",S$="@firebase/installations",E$="@firebase/installations-compat",C$="@firebase/messaging",k$="@firebase/messaging-compat",A$="@firebase/performance",P$="@firebase/performance-compat",O$="@firebase/remote-config",T$="@firebase/remote-config-compat",I$="@firebase/storage",D$="@firebase/storage-compat",R$="@firebase/firestore",M$="@firebase/ai",L$="@firebase/firestore-compat",$$="firebase",U$="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="[DEFAULT]",F$={[R0]:"fire-core",[f$]:"fire-core-compat",[p$]:"fire-analytics",[m$]:"fire-analytics-compat",[v$]:"fire-app-check",[g$]:"fire-app-check-compat",[x$]:"fire-auth",[y$]:"fire-auth-compat",[b$]:"fire-rtdb",[w$]:"fire-data-connect",[_$]:"fire-rtdb-compat",[j$]:"fire-fn",[N$]:"fire-fn-compat",[S$]:"fire-iid",[E$]:"fire-iid-compat",[C$]:"fire-fcm",[k$]:"fire-fcm-compat",[A$]:"fire-perf",[P$]:"fire-perf-compat",[O$]:"fire-rc",[T$]:"fire-rc-compat",[I$]:"fire-gcs",[D$]:"fire-gcs-compat",[R$]:"fire-fst",[L$]:"fire-fst-compat",[M$]:"fire-vertex","fire-js":"fire-js",[$$]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf=new Map,B$=new Map,L0=new Map;function xN(e,t){try{e.container.addComponent(t)}catch(r){Hs.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function hu(e){const t=e.name;if(L0.has(t))return Hs.debug(`There were multiple attempts to register component ${t}.`),!1;L0.set(t,e);for(const r of pf.values())xN(r,e);for(const r of B$.values())xN(r,e);return!0}function qA(e,t){const r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function VA(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Li=new FA("app","Firebase",z$);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(t,r,n){this._isDeleted=!1,this._options={...t},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new cl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Li.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GA=U$;function KA(e,t={}){let r=e;typeof t!="object"&&(t={name:t});const n={name:M0,automaticDataCollectionEnabled:!0,...t},s=n.name;if(typeof s!="string"||!s)throw Li.create("bad-app-name",{appName:String(s)});if(r||(r=RA()),!r)throw Li.create("no-options");const i=pf.get(s);if(i){if(mf(r,i.options)&&mf(n,i.config))return i;throw Li.create("duplicate-app",{appName:s})}const o=new YL(s);for(const c of L0.values())o.addComponent(c);const l=new W$(r,n,o);return pf.set(s,l),l}function YA(e=M0){const t=pf.get(e);if(!t&&e===M0&&RA())return KA();if(!t)throw Li.create("no-app",{appName:e});return t}function $i(e,t,r){let n=F$[e]??e;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const o=[`Unable to register library "${n}" with version "${t}":`];s&&o.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Hs.warn(o.join(" "));return}hu(new cl(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H$="firebase-heartbeat-database",q$=1,fu="firebase-heartbeat-store";let qg=null;function XA(){return qg||(qg=l$(H$,q$,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(fu)}catch(r){console.warn(r)}}}}).catch(e=>{throw Li.create("idb-open",{originalErrorMessage:e.message})})),qg}async function V$(e){try{const r=(await XA()).transaction(fu),n=await r.objectStore(fu).get(QA(e));return await r.done,n}catch(t){if(t instanceof Tl)Hs.warn(t.message);else{const r=Li.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Hs.warn(r.message)}}}async function yN(e,t){try{const n=(await XA()).transaction(fu,"readwrite");await n.objectStore(fu).put(t,QA(e)),await n.done}catch(r){if(r instanceof Tl)Hs.warn(r.message);else{const n=Li.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Hs.warn(n.message)}}}function QA(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$=1024,K$=30;class Y${constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Q$(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var t,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bN();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>K$){const o=J$(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){Hs.warn(n)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=bN(),{heartbeatsToSend:n,unsentEntries:s}=X$(this._heartbeatsCache.heartbeats),i=hf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Hs.warn(r),""}}}function bN(){return new Date().toISOString().substring(0,10)}function X$(e,t=G$){const r=[];let n=e.slice();for(const s of e){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),wN(r)>t){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),wN(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class Q${constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ML()?LL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await V$(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return yN(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const n=await this.read();return yN(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}else return}}function wN(e){return hf(JSON.stringify({version:2,heartbeats:e})).length}function J$(e){if(e.length===0)return-1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z$(e){hu(new cl("platform-logger",t=>new d$(t),"PRIVATE")),hu(new cl("heartbeat",t=>new Y$(t),"PRIVATE")),$i(R0,vN,e),$i(R0,vN,"esm2020"),$i("fire-js","")}Z$("");var eU="firebase",tU="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$i(eU,tU,"app");var _N={};const jN="@firebase/database",NN="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let JA="";function rU(e){JA=e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,r){r==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),It(r))}get(t){const r=this.domStorage_.getItem(this.prefixedName_(t));return r==null?null:du(r)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,r){r==null?delete this.cache_[t]:this.cache_[t]=r}get(t){return ys(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA=function(e){try{if(typeof window<"u"&&typeof window[e]<"u"){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new nU(t)}}catch{}return new sU},_a=ZA("localStorage"),iU=ZA("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=new zA("@firebase/database"),aU=function(){let e=1;return function(){return e++}}(),eP=function(e){const t=qL(e),r=new HL;r.update(t);const n=r.digest();return ob.encodeByteArray(n)},Yu=function(...e){let t="";for(let r=0;r<e.length;r++){const n=e[r];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=Yu.apply(null,n):typeof n=="object"?t+=It(n):t+=n,t+=" "}return t};let Lc=null,SN=!0;const oU=function(e,t){Q(!0,"Can't turn on custom loggers persistently."),Yo.logLevel=Qe.VERBOSE,Lc=Yo.log.bind(Yo)},Kt=function(...e){if(SN===!0&&(SN=!1,Lc===null&&iU.get("logging_enabled")===!0&&oU()),Lc){const t=Yu.apply(null,e);Lc(t)}},Xu=function(e){return function(...t){Kt(e,...t)}},$0=function(...e){const t="FIREBASE INTERNAL ERROR: "+Yu(...e);Yo.error(t)},qs=function(...e){const t=`FIREBASE FATAL ERROR: ${Yu(...e)}`;throw Yo.error(t),new Error(t)},Pr=function(...e){const t="FIREBASE WARNING: "+Yu(...e);Yo.warn(t)},lU=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Ym=function(e){return typeof e=="number"&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},cU=function(e){if(document.readyState==="complete")e();else{let t=!1;const r=function(){if(!document.body){setTimeout(r,Math.floor(10));return}t||(t=!0,e())};document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&r()}),window.attachEvent("onload",r))}},ul="[MIN_NAME]",Fa="[MAX_NAME]",Za=function(e,t){if(e===t)return 0;if(e===ul||t===Fa)return-1;if(t===ul||e===Fa)return 1;{const r=EN(e),n=EN(t);return r!==null?n!==null?r-n===0?e.length-t.length:r-n:-1:n!==null?1:e<t?-1:1}},uU=function(e,t){return e===t?0:e<t?-1:1},oc=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+It(t))},cb=function(e){if(typeof e!="object"||e===null)return It(e);const t=[];for(const n in e)t.push(n);t.sort();let r="{";for(let n=0;n<t.length;n++)n!==0&&(r+=","),r+=It(t[n]),r+=":",r+=cb(e[t[n]]);return r+="}",r},tP=function(e,t){const r=e.length;if(r<=t)return[e];const n=[];for(let s=0;s<r;s+=t)s+t>r?n.push(e.substring(s,r)):n.push(e.substring(s,s+t));return n};function Qt(e,t){for(const r in e)e.hasOwnProperty(r)&&t(r,e[r])}const rP=function(e){Q(!Ym(e),"Invalid JSON number");const t=11,r=52,n=(1<<t-1)-1;let s,i,o,l,c;e===0?(i=0,o=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-n)?(l=Math.min(Math.floor(Math.log(e)/Math.LN2),n),i=l+n,o=Math.round(e*Math.pow(2,r-l)-Math.pow(2,r))):(i=0,o=Math.round(e/Math.pow(2,1-n-r))));const u=[];for(c=r;c;c-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(c=t;c;c-=1)u.push(i%2?1:0),i=Math.floor(i/2);u.push(s?1:0),u.reverse();const d=u.join("");let h="";for(c=0;c<64;c+=8){let f=parseInt(d.substr(c,8),2).toString(16);f.length===1&&(f="0"+f),h=h+f}return h.toLowerCase()},dU=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},hU=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function fU(e,t){let r="Unknown Error";e==="too_big"?r="The data requested exceeds the maximum size that can be accessed with a single request.":e==="permission_denied"?r="Client doesn't have permission to access the desired data.":e==="unavailable"&&(r="The service is unavailable");const n=new Error(e+" at "+t._path.toString()+": "+r);return n.code=e.toUpperCase(),n}const mU=new RegExp("^-?(0*)\\d{1,10}$"),pU=-2147483648,gU=2147483647,EN=function(e){if(mU.test(e)){const t=Number(e);if(t>=pU&&t<=gU)return t}return null},Il=function(e){try{e()}catch(t){setTimeout(()=>{const r=t.stack||"";throw Pr("Exception was thrown by user callback.",r),t},Math.floor(0))}},vU=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},$c=function(e,t){const r=setTimeout(e,t);return typeof r=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(r):typeof r=="object"&&r.unref&&r.unref(),r};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(t,r){this.appCheckProvider=r,this.appName=t.name,VA(t)&&t.settings.appCheckToken&&(this.serverAppAppCheckToken=t.settings.appCheckToken),this.appCheck=r==null?void 0:r.getImmediate({optional:!0}),this.appCheck||r==null||r.get().then(n=>this.appCheck=n)}getToken(t){if(this.serverAppAppCheckToken){if(t)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(t):new Promise((r,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){var r;(r=this.appCheckProvider)==null||r.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Pr(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yU{constructor(t,r,n){this.appName_=t,this.firebaseOptions_=r,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(r=>r&&r.code==="auth/token-not-initialized"?(Kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(r)):new Promise((r,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(r,n):r(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(r=>r.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(r=>r.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pr(t)}}class Dh{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}Dh.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="5",nP="v",sP="s",iP="r",aP="f",oP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,lP="ls",cP="p",U0="ac",uP="websocket",dP="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(t,r,n,s,i=!1,o="",l=!1,c=!1,u=null){this.secure=r,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=c,this.emulatorOptions=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=_a.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&_a.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){const t=this.secure?"https://":"http://",r=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${r}`}}function bU(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function fP(e,t,r){Q(typeof t=="string","typeof type must == string"),Q(typeof r=="object","typeof params must == object");let n;if(t===uP)n=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else if(t===dP)n=(e.secure?"https://":"http://")+e.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);bU(e)&&(r.ns=e.namespace);const s=[];return Qt(r,(i,o)=>{s.push(i+"="+o)}),n+s.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wU{constructor(){this.counters_={}}incrementCounter(t,r=1){ys(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=r}get(){return NL(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg={},Gg={};function db(e){const t=e.toString();return Vg[t]||(Vg[t]=new wU),Vg[t]}function _U(e,t){const r=e.toString();return Gg[r]||(Gg[r]=t()),Gg[r]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,r){this.closeAfterResponse=t,this.onClose=r,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,r){for(this.pendingResponses[t]=r;this.pendingResponses[this.currentResponseNum];){const n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&Il(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="start",NU="close",SU="pLPCommand",EU="pRTLPCB",mP="id",pP="pw",gP="ser",CU="cb",kU="seg",AU="ts",PU="d",OU="dframe",vP=1870,xP=30,TU=vP-xP,IU=25e3,DU=3e4;class Uo{constructor(t,r,n,s,i,o,l){this.connId=t,this.repoInfo=r,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Xu(t),this.stats_=db(r),this.urlFn=c=>(this.appCheckToken&&(c[U0]=this.appCheckToken),fP(r,dP,c))}open(t,r){this.curSegmentNum=0,this.onDisconnect_=r,this.myPacketOrderer=new jU(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(DU)),cU(()=>{if(this.isClosed_)return;this.scriptTagHolder=new hb((...i)=>{const[o,l,c,u,d]=i;if(this.incrementIncomingBytes_(i),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===CN)this.id=l,this.password=c;else if(o===NU)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...i)=>{const[o,l]=i;this.incrementIncomingBytes_(i),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const n={};n[CN]="t",n[gP]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[CU]=this.scriptTagHolder.uniqueCallbackIdentifier),n[nP]=ub,this.transportSessionId&&(n[sP]=this.transportSessionId),this.lastSessionId&&(n[lP]=this.lastSessionId),this.applicationId&&(n[cP]=this.applicationId),this.appCheckToken&&(n[U0]=this.appCheckToken),typeof location<"u"&&location.hostname&&oP.test(location.hostname)&&(n[iP]=aP);const s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Uo.forceAllow_=!0}static forceDisallow(){Uo.forceDisallow_=!0}static isAvailable(){return Uo.forceAllow_?!0:!Uo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!dU()&&!hU()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const r=It(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=OA(r),s=tP(n,TU);for(let i=0;i<s.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[i]),this.curSegmentNum++}addDisconnectPingFrame(t,r){this.myDisconnFrame=document.createElement("iframe");const n={};n[OU]="t",n[mP]=t,n[pP]=r,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const r=It(t).length;this.bytesReceived+=r,this.stats_.incrementCounter("bytes_received",r)}}class hb{constructor(t,r,n,s){this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=aU(),window[SU+this.uniqueCallbackIdentifier]=t,window[EU+this.uniqueCallbackIdentifier]=r,this.myIFrame=hb.createIFrame_();let i="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(i='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){Kt("frame writing exception"),l.stack&&Kt(l.stack),Kt(l)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||Kt("No IE domain setting required")}catch{const n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,r){for(this.myID=t,this.myPW=r,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t[mP]=this.myID,t[pP]=this.myPW,t[gP]=this.currentSerial;let r=this.urlFn(t),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+xP+n.length<=vP;){const o=this.pendingSegs.shift();n=n+"&"+kU+s+"="+o.seg+"&"+AU+s+"="+o.ts+"&"+PU+s+"="+o.d,s++}return r=r+n,this.addLongPollTag_(r,this.currentSerial),!0}else return!1}enqueueSegment(t,r,n){this.pendingSegs.push({seg:t,ts:r,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,r){this.outstandingRequests.add(r);const n=()=>{this.outstandingRequests.delete(r),this.newRequest_()},s=setTimeout(n,Math.floor(IU)),i=()=>{clearTimeout(s),n()};this.addTag(t,i)}addTag(t,r){setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){const s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),r())},n.onerror=()=>{Kt("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RU=16384,MU=45e3;let gf=null;typeof MozWebSocket<"u"?gf=MozWebSocket:typeof WebSocket<"u"&&(gf=WebSocket);class zn{constructor(t,r,n,s,i,o,l){this.connId=t,this.applicationId=n,this.appCheckToken=s,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Xu(this.connId),this.stats_=db(r),this.connURL=zn.connectionURL_(r,o,l,s,n),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,n,s,i){const o={};return o[nP]=ub,typeof location<"u"&&location.hostname&&oP.test(location.hostname)&&(o[iP]=aP),r&&(o[sP]=r),n&&(o[lP]=n),s&&(o[U0]=s),i&&(o[cP]=i),fP(t,uP,o)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,_a.set("previous_websocket_failure",!0);try{let n;RL(),this.mySock=new gf(this.connURL,[],n)}catch(n){this.log_("Error instantiating WebSocket.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=n=>{this.handleIncomingFrame(n)},this.mySock.onerror=n=>{this.log_("WebSocket error.  Closing connection.");const s=n.message||n.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){zn.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(r);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&gf!==null&&!zn.forceDisallow_}static previouslyFailed(){return _a.isInMemoryStorage||_a.get("previous_websocket_failure")===!0}markConnectionHealthy(){_a.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const n=du(r);this.onMessage(n)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if(Q(this.frames===null,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(this.mySock===null)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{const n=this.extractFrameCount_(r);n!==null&&this.appendFrame_(n)}}send(t){this.resetKeepAlive();const r=It(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const n=tP(r,RU);n.length>1&&this.sendString_(String(n.length));for(let s=0;s<n.length;s++)this.sendString_(n[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(MU))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}zn.responsesRequiredToBeHealthy=2;zn.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{static get ALL_TRANSPORTS(){return[Uo,zn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(t){this.initTransports_(t)}initTransports_(t){const r=zn&&zn.isAvailable();let n=r&&!zn.previouslyFailed();if(t.webSocketOnly&&(r||Pr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[zn];else{const s=this.transports_=[];for(const i of mu.ALL_TRANSPORTS)i&&i.isAvailable()&&s.push(i);mu.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}mu.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LU=6e4,$U=5e3,UU=10*1024,FU=100*1024,Kg="t",kN="d",BU="s",AN="r",zU="e",PN="o",ON="a",TN="n",IN="p",WU="h";class HU{constructor(t,r,n,s,i,o,l,c,u,d){this.id=t,this.repoInfo_=r,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=i,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=c,this.onKill_=u,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Xu("c:"+this.id+":"),this.transportManager_=new mu(r),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(r,n)},Math.floor(0));const s=t.healthyTimeout||0;s>0&&(this.healthyTimeout_=$c(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>FU?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>UU?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return r=>{t===this.conn_?this.onConnectionLost_(r):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return r=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(r):t===this.secondaryConn_?this.onSecondaryMessageReceived_(r):this.log_("message on old connection"))}}sendRequest(t){const r={t:"d",d:t};this.sendData_(r)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(Kg in t){const r=t[Kg];r===ON?this.upgradeIfSecondaryHealthy_():r===AN?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):r===PN&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const r=oc("t",t),n=oc("d",t);if(r==="c")this.onSecondaryControl_(n);else if(r==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+r)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IN,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ON,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:TN,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const r=oc("t",t),n=oc("d",t);r==="c"?this.onControl_(n):r==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const r=oc(Kg,t);if(kN in t){const n=t[kN];if(r===WU){const s={...n};this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(r===TN){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else r===BU?this.onConnectionShutdown_(n):r===AN?this.onReset_(n):r===zU?$0("Server Error: "+n):r===PN?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):$0("Unknown control packet command: "+r)}}onHandshake_(t){const r=t.ts,n=t.v,s=t.h;this.sessionId=t.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,r),ub!==n&&Pr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const r=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(r,n),$c(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(LU))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,r){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(r,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$c(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor($U))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IN,d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(_a.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{put(t,r,n,s){}merge(t,r,n,s){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,r,n){}onDisconnectMerge(t,r,n){}onDisconnectCancel(t,r){}reportStats(t){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bP=class{constructor(t){this.allowedEvents_=t,this.listeners_={},Q(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...r){if(Array.isArray(this.listeners_[t])){const n=[...this.listeners_[t]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,r)}}on(t,r,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:r,context:n});const s=this.getInitialEvent(t);s&&r.apply(n,s)}off(t,r,n){this.validateEventType_(t);const s=this.listeners_[t]||[];for(let i=0;i<s.length;i++)if(s[i].callback===r&&(!n||n===s[i].context)){s.splice(i,1);return}}validateEventType_(t){Q(this.allowedEvents_.find(r=>r===t),"Unknown event: "+t)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf extends bP{static getInstance(){return new vf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!UA()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(t){return Q(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=32,RN=768;let Le=class{constructor(t,r){if(r===void 0){this.pieces_=t.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=r}toString(){let t="";for(let r=this.pieceNum_;r<this.pieces_.length;r++)this.pieces_[r]!==""&&(t+="/"+this.pieces_[r]);return t||"/"}};function Pe(){return new Le("")}function we(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function qi(e){return e.pieces_.length-e.pieceNum_}function He(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Le(e.pieces_,t)}function fb(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function qU(e){let t="";for(let r=e.pieceNum_;r<e.pieces_.length;r++)e.pieces_[r]!==""&&(t+="/"+encodeURIComponent(String(e.pieces_[r])));return t||"/"}function pu(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function wP(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let r=e.pieceNum_;r<e.pieces_.length-1;r++)t.push(e.pieces_[r]);return new Le(t,0)}function ht(e,t){const r=[];for(let n=e.pieceNum_;n<e.pieces_.length;n++)r.push(e.pieces_[n]);if(t instanceof Le)for(let n=t.pieceNum_;n<t.pieces_.length;n++)r.push(t.pieces_[n]);else{const n=t.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&r.push(n[s])}return new Le(r,0)}function _e(e){return e.pieceNum_>=e.pieces_.length}function Er(e,t){const r=we(e),n=we(t);if(r===null)return t;if(r===n)return Er(He(e),He(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function VU(e,t){const r=pu(e,0),n=pu(t,0);for(let s=0;s<r.length&&s<n.length;s++){const i=Za(r[s],n[s]);if(i!==0)return i}return r.length===n.length?0:r.length<n.length?-1:1}function mb(e,t){if(qi(e)!==qi(t))return!1;for(let r=e.pieceNum_,n=t.pieceNum_;r<=e.pieces_.length;r++,n++)if(e.pieces_[r]!==t.pieces_[n])return!1;return!0}function Nn(e,t){let r=e.pieceNum_,n=t.pieceNum_;if(qi(e)>qi(t))return!1;for(;r<e.pieces_.length;){if(e.pieces_[r]!==t.pieces_[n])return!1;++r,++n}return!0}class GU{constructor(t,r){this.errorPrefix_=r,this.parts_=pu(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Km(this.parts_[n]);_P(this)}}function KU(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Km(t),_P(e)}function YU(e){const t=e.parts_.pop();e.byteLength_-=Km(t),e.parts_.length>0&&(e.byteLength_-=1)}function _P(e){if(e.byteLength_>RN)throw new Error(e.errorPrefix_+"has a key path longer than "+RN+" bytes ("+e.byteLength_+").");if(e.parts_.length>DN)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+DN+") or object contains a cycle "+ua(e))}function ua(e){return e.parts_.length===0?"":"in property '"+e.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends bP{static getInstance(){return new pb}constructor(){super(["visible"]);let t,r;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(r="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(r="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(r="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(r="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,r&&document.addEventListener(r,()=>{const n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}getInitialEvent(t){return Q(t==="visible","Unknown event type: "+t),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lc=1e3,XU=60*5*1e3,MN=30*1e3,QU=1.3,JU=3e4,ZU="server_kill",LN=3;class Ms extends yP{constructor(t,r,n,s,i,o,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=n,this.onConnectStatus_=s,this.onServerInfoUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=Ms.nextPersistentConnectionId_++,this.log_=Xu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=lc,this.maxReconnectDelay_=XU,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");pb.getInstance().on("visible",this.onVisible_,this),t.host.indexOf("fblocal")===-1&&vf.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,n){const s=++this.requestNumber_,i={r:s,a:t,b:r};this.log_(It(i)),Q(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[s]=n)}get(t){this.initConnection_();const r=new cs,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),r.promise}listen(t,r,n,s){this.initConnection_();const i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Q(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:n};this.listens.get(o).set(i,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,n=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(n)})}sendListen_(t){const r=t.query,n=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+n+" for "+s);const i={p:n},o="q";t.tag&&(i.q=r._queryObject,i.t=t.tag),i.h=t.hashFn(),this.sendRequest(o,i,l=>{const c=l.d,u=l.s;Ms.warnOnListenWarnings_(c,r),(this.listens.get(n)&&this.listens.get(n).get(s))===t&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(n,s),t.onComplete&&t.onComplete(u,c))})}static warnOnListenWarnings_(t,r){if(t&&typeof t=="object"&&ys(t,"w")){const n=ol(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',i=r._path.toString();Pr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${i} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&t.length===40||zL(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=MN)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=BL(t)?"auth":"gauth",n={cred:t};this.authOverride_===null?n.noauth=!0:typeof this.authOverride_=="object"&&(n.authvar=this.authOverride_),this.sendRequest(r,n,s=>{const i=s.s,o=s.d||"error";this.authToken_===t&&(i==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(i,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,n=t.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,n)})}unlisten(t,r){const n=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+s),Q(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,s)&&this.connected_&&this.sendUnlisten_(n,s,t._queryObject,r)}sendUnlisten_(t,r,n,s){this.log_("Unlisten on "+t+" for "+r);const i={p:t},o="n";s&&(i.q=n,i.t=s),this.sendRequest(o,i)}onDisconnectPut(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:n})}onDisconnectMerge(t,r,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:n})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,n,s){const i={p:r,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,o=>{s&&setTimeout(()=>{s(o.s,o.d)},Math.floor(0))})}put(t,r,n,s){this.putInternal("p",t,r,n,s)}merge(t,r,n,s){this.putInternal("m",t,r,n,s)}putInternal(t,r,n,s,i){this.initConnection_();const o={p:r,d:n};i!==void 0&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:s}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,n=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,n,i=>{this.log_(r+" response",i),delete this.outstandingPuts_[t],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(i.s,i.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,n=>{if(n.s!=="ok"){const i=n.d;this.log_("reportStats","Error sending stats: "+i)}})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+It(t));const r=t.r,n=this.requestCBHash_[r];n&&(delete this.requestCBHash_[r],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),t==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):t==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):t==="c"?this.onListenRevoked_(r.p,r.q):t==="ac"?this.onAuthRevoked_(r.s,r.d):t==="apc"?this.onAppCheckRevoked_(r.s,r.d):t==="sd"?this.onSecurityDebugPacket_(r):$0("Unrecognized action received from server: "+It(t)+`
Are you using the latest client?`)}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){Q(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>JU&&(this.reconnectDelay_=lc),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const t=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*QU)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+Ms.nextConnectionId_++,i=this.lastSessionId;let o=!1,l=null;const c=function(){l?l.close():(o=!0,n())},u=function(h){Q(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};const d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[h,f]=await Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);o?Kt("getToken() completed but was canceled"):(Kt("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new HU(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,n,m=>{Pr(m+" ("+this.repoInfo_.toString()+")"),this.interrupt(ZU)},i))}catch(h){this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&Pr(h),c())}}}interrupt(t){Kt("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Kt("Resuming connection for reason: "+t),delete this.interruptReasons_[t],T0(this.interruptReasons_)&&(this.reconnectDelay_=lc,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let n;r?n=r.map(i=>cb(i)).join("$"):n="default";const s=this.removeListen_(t,n);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const n=new Le(t).toString();let s;if(this.listens.has(n)){const i=this.listens.get(n);s=i.get(r),i.delete(r),i.size===0&&this.listens.delete(n)}else s=void 0;return s}onAuthRevoked_(t,r){Kt("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(t==="invalid_token"||t==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=LN&&(this.reconnectDelay_=MN,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Kt("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(t==="invalid_token"||t==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=LN&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";t["sdk."+r+"."+JA.replace(/\./g,"-")]=1,UA()?t["framework.cordova"]=1:DL()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=vf.getInstance().currentlyOnline();return T0(this.interruptReasons_)&&t}}Ms.nextPersistentConnectionId_=0;Ms.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t,r){this.name=t,this.node=r}static Wrap(t,r){return new je(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,r){const n=new je(ul,t),s=new je(ul,r);return this.compare(n,s)!==0}minPost(){return je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hd;class jP extends Xm{static get __EMPTY_NODE(){return Hd}static set __EMPTY_NODE(t){Hd=t}compare(t,r){return Za(t.name,r.name)}isDefinedOn(t){throw Ol("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,r){return!1}minPost(){return je.MIN}maxPost(){return new je(Fa,Hd)}makePost(t,r){return Q(typeof t=="string","KeyIndex indexValue must always be a string."),new je(t,Hd)}toString(){return".key"}}const Xo=new jP;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,r,n,s,i=null){this.isReverse_=s,this.resultGenerator_=i,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=r?n(t.key,r):1,s&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),r;if(this.resultGenerator_?r=this.resultGenerator_(t.key,t.value):r={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return r}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}class qt{constructor(t,r,n,s,i){this.key=t,this.value=r,this.color=n??qt.RED,this.left=s??Ur.EMPTY_NODE,this.right=i??Ur.EMPTY_NODE}copy(t,r,n,s,i){return new qt(t??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,n){let s=this;const i=n(t,s.key);return i<0?s=s.copy(null,null,null,s.left.insert(t,r,n),null):i===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(t,r,n)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ur.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let n,s;if(n=this,r(t,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,r),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),r(t,n.key)===0){if(n.right.isEmpty())return Ur.EMPTY_NODE;s=n.right.min_(),n=n.copy(s.key,s.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,r))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}qt.RED=!0;qt.BLACK=!1;class eF{copy(t,r,n,s,i){return this}insert(t,r,n){return new qt(t,r,null)}remove(t,r){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ur{constructor(t,r=Ur.EMPTY_NODE){this.comparator_=t,this.root_=r}insert(t,r){return new Ur(this.comparator_,this.root_.insert(t,r,this.comparator_).copy(null,null,qt.BLACK,null,null))}remove(t){return new Ur(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,qt.BLACK,null,null))}get(t){let r,n=this.root_;for(;!n.isEmpty();){if(r=this.comparator_(t,n.key),r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}getPredecessorKey(t){let r,n=this.root_,s=null;for(;!n.isEmpty();)if(r=this.comparator_(t,n.key),r===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else r<0?n=n.left:r>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new qd(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,r){return new qd(this.root_,t,this.comparator_,!1,r)}getReverseIteratorFrom(t,r){return new qd(this.root_,t,this.comparator_,!0,r)}getReverseIterator(t){return new qd(this.root_,null,this.comparator_,!0,t)}}Ur.EMPTY_NODE=new eF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tF(e,t){return Za(e.name,t.name)}function gb(e,t){return Za(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let F0;function rF(e){F0=e}const NP=function(e){return typeof e=="number"?"number:"+rP(e):"string:"+e},SP=function(e){if(e.isLeafNode()){const t=e.val();Q(typeof t=="string"||typeof t=="number"||typeof t=="object"&&ys(t,".sv"),"Priority must be a string or number.")}else Q(e===F0||e.isEmpty(),"priority of unexpected type.");Q(e===F0||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $N;class zt{static set __childrenNodeConstructor(t){$N=t}static get __childrenNodeConstructor(){return $N}constructor(t,r=zt.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,Q(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),SP(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new zt(this.value_,t)}getImmediateChild(t){return t===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _e(t)?this:we(t)===".priority"?this.priorityNode_:zt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return t===".priority"?this.updatePriority(r):r.isEmpty()&&t!==".priority"?this:zt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const n=we(t);return n===null?r:r.isEmpty()&&n!==".priority"?this:(Q(n!==".priority"||qi(t)===1,".priority must be the last token in a path"),this.updateImmediateChild(n,zt.__childrenNodeConstructor.EMPTY_NODE.updateChild(He(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+NP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",r==="number"?t+=rP(this.value_):t+=this.value_,this.lazyHash_=eP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===zt.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof zt.__childrenNodeConstructor?-1:(Q(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,n=typeof this.value_,s=zt.VALUE_TYPE_ORDER.indexOf(r),i=zt.VALUE_TYPE_ORDER.indexOf(n);return Q(s>=0,"Unknown leaf type: "+r),Q(i>=0,"Unknown leaf type: "+n),s===i?n==="object"?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}zt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EP,CP;function nF(e){EP=e}function sF(e){CP=e}class iF extends Xm{compare(t,r){const n=t.node.getPriority(),s=r.node.getPriority(),i=n.compareTo(s);return i===0?Za(t.name,r.name):i}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,r){return!t.getPriority().equals(r.getPriority())}minPost(){return je.MIN}maxPost(){return new je(Fa,new zt("[PRIORITY-POST]",CP))}makePost(t,r){const n=EP(t);return new je(r,new zt("[PRIORITY-POST]",n))}toString(){return".priority"}}const ft=new iF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF=Math.log(2);class oF{constructor(t){const r=i=>parseInt(Math.log(i)/aF,10),n=i=>parseInt(Array(i+1).join("1"),2);this.count=r(t+1),this.current_=this.count-1;const s=n(this.count);this.bits_=t+1&s}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const xf=function(e,t,r,n){e.sort(t);const s=function(c,u){const d=u-c;let h,f;if(d===0)return null;if(d===1)return h=e[c],f=r?r(h):h,new qt(f,h.node,qt.BLACK,null,null);{const m=parseInt(d/2,10)+c,g=s(c,m),y=s(m+1,u);return h=e[m],f=r?r(h):h,new qt(f,h.node,qt.BLACK,g,y)}},i=function(c){let u=null,d=null,h=e.length;const f=function(g,y){const p=h-g,v=h;h-=g;const b=s(p+1,v),w=e[p],_=r?r(w):w;m(new qt(_,w.node,y,null,b))},m=function(g){u?(u.left=g,u=g):(d=g,u=g)};for(let g=0;g<c.count;++g){const y=c.nextBitIsOne(),p=Math.pow(2,c.count-(g+1));y?f(p,qt.BLACK):(f(p,qt.BLACK),f(p,qt.RED))}return d},o=new oF(e.length),l=i(o);return new Ur(n||t,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yg;const mo={};class Os{static get Default(){return Q(mo&&ft,"ChildrenNode.ts has not been loaded"),Yg=Yg||new Os({".priority":mo},{".priority":ft}),Yg}constructor(t,r){this.indexes_=t,this.indexSet_=r}get(t){const r=ol(this.indexes_,t);if(!r)throw new Error("No index defined for "+t);return r instanceof Ur?r:null}hasIndex(t){return ys(this.indexSet_,t.toString())}addIndex(t,r){Q(t!==Xo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let s=!1;const i=r.getIterator(je.Wrap);let o=i.getNext();for(;o;)s=s||t.isDefinedOn(o.node),n.push(o),o=i.getNext();let l;s?l=xf(n,t.getCompare()):l=mo;const c=t.toString(),u={...this.indexSet_};u[c]=t;const d={...this.indexes_};return d[c]=l,new Os(d,u)}addToIndexes(t,r){const n=ff(this.indexes_,(s,i)=>{const o=ol(this.indexSet_,i);if(Q(o,"Missing index implementation for "+i),s===mo)if(o.isDefinedOn(t.node)){const l=[],c=r.getIterator(je.Wrap);let u=c.getNext();for(;u;)u.name!==t.name&&l.push(u),u=c.getNext();return l.push(t),xf(l,o.getCompare())}else return mo;else{const l=r.get(t.name);let c=s;return l&&(c=c.remove(new je(t.name,l))),c.insert(t,t.node)}});return new Os(n,this.indexSet_)}removeFromIndexes(t,r){const n=ff(this.indexes_,s=>{if(s===mo)return s;{const i=r.get(t.name);return i?s.remove(new je(t.name,i)):s}});return new Os(n,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc;class de{static get EMPTY_NODE(){return cc||(cc=new de(new Ur(gb),null,Os.Default))}constructor(t,r,n){this.children_=t,this.priorityNode_=r,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&SP(this.priorityNode_),this.children_.isEmpty()&&Q(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cc}updatePriority(t){return this.children_.isEmpty()?this:new de(this.children_,t,this.indexMap_)}getImmediateChild(t){if(t===".priority")return this.getPriority();{const r=this.children_.get(t);return r===null?cc:r}}getChild(t){const r=we(t);return r===null?this:this.getImmediateChild(r).getChild(He(t))}hasChild(t){return this.children_.get(t)!==null}updateImmediateChild(t,r){if(Q(r,"We should always be passing snapshot nodes"),t===".priority")return this.updatePriority(r);{const n=new je(t,r);let s,i;r.isEmpty()?(s=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(n,this.children_)):(s=this.children_.insert(t,r),i=this.indexMap_.addToIndexes(n,this.children_));const o=s.isEmpty()?cc:this.priorityNode_;return new de(s,o,i)}}updateChild(t,r){const n=we(t);if(n===null)return r;{Q(we(t)!==".priority"||qi(t)===1,".priority must be the last token in a path");const s=this.getImmediateChild(n).updateChild(He(t),r);return this.updateImmediateChild(n,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let n=0,s=0,i=!0;if(this.forEachChild(ft,(o,l)=>{r[o]=l.val(t),n++,i&&de.INTEGER_REGEXP_.test(o)?s=Math.max(s,Number(o)):i=!1}),!t&&i&&s<2*n){const o=[];for(const l in r)o[l]=r[l];return o}else return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let t="";this.getPriority().isEmpty()||(t+="priority:"+NP(this.getPriority().val())+":"),this.forEachChild(ft,(r,n)=>{const s=n.hash();s!==""&&(t+=":"+r+":"+s)}),this.lazyHash_=t===""?"":eP(t)}return this.lazyHash_}getPredecessorChildName(t,r,n){const s=this.resolveIndex_(n);if(s){const i=s.getPredecessorKey(new je(t,r));return i?i.name:null}else return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.minKey();return n&&n.name}else return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new je(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const n=r.maxKey();return n&&n.name}else return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new je(r,this.children_.get(r)):null}forEachChild(t,r){const n=this.resolveIndex_(t);return n?n.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,je.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)<0;)s.getNext(),i=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const n=this.resolveIndex_(r);if(n)return n.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,je.Wrap);let i=s.peek();for(;i!=null&&r.compare(i,t)>0;)s.getNext(),i=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Qu?-1:0}withIndex(t){if(t===Xo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new de(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Xo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){const n=this.getIterator(ft),s=r.getIterator(ft);let i=n.getNext(),o=s.getNext();for(;i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=s.getNext()}return i===null&&o===null}else return!1;else return!1}}resolveIndex_(t){return t===Xo?null:this.indexMap_.get(t.toString())}}de.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class lF extends de{constructor(){super(new Ur(gb),de.EMPTY_NODE,Os.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return de.EMPTY_NODE}isEmpty(){return!1}}const Qu=new lF;Object.defineProperties(je,{MIN:{value:new je(ul,de.EMPTY_NODE)},MAX:{value:new je(Fa,Qu)}});jP.__EMPTY_NODE=de.EMPTY_NODE;zt.__childrenNodeConstructor=de;rF(Qu);sF(Qu);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cF=!0;function bt(e,t=null){if(e===null)return de.EMPTY_NODE;if(typeof e=="object"&&".priority"in e&&(t=e[".priority"]),Q(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof e=="object"&&".value"in e&&e[".value"]!==null&&(e=e[".value"]),typeof e!="object"||".sv"in e){const r=e;return new zt(r,bt(t))}if(!(e instanceof Array)&&cF){const r=[];let n=!1;if(Qt(e,(o,l)=>{if(o.substring(0,1)!=="."){const c=bt(l);c.isEmpty()||(n=n||!c.getPriority().isEmpty(),r.push(new je(o,c)))}}),r.length===0)return de.EMPTY_NODE;const i=xf(r,tF,o=>o.name,gb);if(n){const o=xf(r,ft.getCompare());return new de(i,bt(t),new Os({".priority":o},{".priority":ft}))}else return new de(i,bt(t),Os.Default)}else{let r=de.EMPTY_NODE;return Qt(e,(n,s)=>{if(ys(e,n)&&n.substring(0,1)!=="."){const i=bt(s);(i.isLeafNode()||!i.isEmpty())&&(r=r.updateImmediateChild(n,i))}}),r.updatePriority(bt(t))}}nF(bt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF extends Xm{constructor(t){super(),this.indexPath_=t,Q(!_e(t)&&we(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,r){const n=this.extractChild(t.node),s=this.extractChild(r.node),i=n.compareTo(s);return i===0?Za(t.name,r.name):i}makePost(t,r){const n=bt(t),s=de.EMPTY_NODE.updateChild(this.indexPath_,n);return new je(r,s)}maxPost(){const t=de.EMPTY_NODE.updateChild(this.indexPath_,Qu);return new je(Fa,t)}toString(){return pu(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF extends Xm{compare(t,r){const n=t.node.compareTo(r.node);return n===0?Za(t.name,r.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,r){return!t.equals(r)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(t,r){const n=bt(t);return new je(r,n)}toString(){return".value"}}const hF=new dF;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(e){return{type:"value",snapshotNode:e}}function dl(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function gu(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function vu(e,t,r){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:r}}function fF(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(t){this.index_=t}updateChild(t,r,n,s,i,o){Q(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=t.getImmediateChild(r);return l.getChild(s).equals(n.getChild(s))&&l.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?t.hasChild(r)?o.trackChildChange(gu(r,l)):Q(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(dl(r,n)):o.trackChildChange(vu(r,n,l))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(r,n).withIndex(this.index_)}updateFullNode(t,r,n){return n!=null&&(t.isLeafNode()||t.forEachChild(ft,(s,i)=>{r.hasChild(s)||n.trackChildChange(gu(s,i))}),r.isLeafNode()||r.forEachChild(ft,(s,i)=>{if(t.hasChild(s)){const o=t.getImmediateChild(s);o.equals(i)||n.trackChildChange(vu(s,i,o))}else n.trackChildChange(dl(s,i))})),r.withIndex(this.index_)}updatePriority(t,r){return t.isEmpty()?de.EMPTY_NODE:t.updatePriority(r)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.indexedFilter_=new vb(t.getIndex()),this.index_=t.getIndex(),this.startPost_=xu.getStartPost_(t),this.endPost_=xu.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){const r=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return r&&n}updateChild(t,r,n,s,i,o){return this.matches(new je(r,n))||(n=de.EMPTY_NODE),this.indexedFilter_.updateChild(t,r,n,s,i,o)}updateFullNode(t,r,n){r.isLeafNode()&&(r=de.EMPTY_NODE);let s=r.withIndex(this.index_);s=s.updatePriority(de.EMPTY_NODE);const i=this;return r.forEachChild(ft,(o,l)=>{i.matches(new je(o,l))||(s=s.updateImmediateChild(o,de.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const r=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),r)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const r=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),r)}else return t.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(t){this.withinDirectionalStart=r=>this.reverse_?this.withinEndPost(r):this.withinStartPost(r),this.withinDirectionalEnd=r=>this.reverse_?this.withinStartPost(r):this.withinEndPost(r),this.withinStartPost=r=>{const n=this.index_.compare(this.rangedFilter_.getStartPost(),r);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=r=>{const n=this.index_.compare(r,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new xu(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,r,n,s,i,o){return this.rangedFilter_.matches(new je(r,n))||(n=de.EMPTY_NODE),t.getImmediateChild(r).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,r,n,s,i,o):this.fullLimitUpdateChild_(t,r,n,i,o)}updateFullNode(t,r,n){let s;if(r.isLeafNode()||r.isEmpty())s=de.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<r.numChildren()&&r.isIndexed(this.index_)){s=de.EMPTY_NODE.withIndex(this.index_);let i;this.reverse_?i=r.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):i=r.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;i.hasNext()&&o<this.limit_;){const l=i.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))s=s.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{s=r.withIndex(this.index_),s=s.updatePriority(de.EMPTY_NODE);let i;this.reverse_?i=s.getReverseIterator(this.index_):i=s.getIterator(this.index_);let o=0;for(;i.hasNext();){const l=i.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:s=s.updateImmediateChild(l.name,de.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,s,n)}updatePriority(t,r){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,r,n,s,i){let o;if(this.reverse_){const h=this.index_.getCompare();o=(f,m)=>h(m,f)}else o=this.index_.getCompare();const l=t;Q(l.numChildren()===this.limit_,"");const c=new je(r,n),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),d=this.rangedFilter_.matches(c);if(l.hasChild(r)){const h=l.getImmediateChild(r);let f=s.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===r||l.hasChild(f.name));)f=s.getChildAfterChild(this.index_,f,this.reverse_);const m=f==null?1:o(f,c);if(d&&!n.isEmpty()&&m>=0)return i!=null&&i.trackChildChange(vu(r,n,h)),l.updateImmediateChild(r,n);{i!=null&&i.trackChildChange(gu(r,h));const y=l.updateImmediateChild(r,de.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(i!=null&&i.trackChildChange(dl(f.name,f.node)),y.updateImmediateChild(f.name,f.node)):y}}else return n.isEmpty()?t:d&&o(u,c)>=0?(i!=null&&(i.trackChildChange(gu(u.name,u.node)),i.trackChildChange(dl(r,n))),l.updateImmediateChild(r,n).updateImmediateChild(u.name,de.EMPTY_NODE)):t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Q(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Q(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ul}hasEnd(){return this.endSet_}getIndexEndValue(){return Q(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Q(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Fa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Q(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ft}copy(){const t=new xb;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function pF(e){return e.loadsAllData()?new vb(e.getIndex()):e.hasLimit()?new mF(e):new xu(e)}function UN(e){const t={};if(e.isDefault())return t;let r;if(e.index_===ft?r="$priority":e.index_===hF?r="$value":e.index_===Xo?r="$key":(Q(e.index_ instanceof uF,"Unrecognized index type!"),r=e.index_.toString()),t.orderBy=It(r),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=It(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+It(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=It(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+It(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function FN(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let r=e.viewFrom_;r===""&&(e.isViewFromLeft()?r="l":r="r"),t.vf=r}return e.index_!==ft&&(t.i=e.index_.toString()),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf extends yP{reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,r){return r!==void 0?"tag$"+r:(Q(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}constructor(t,r,n,s){super(),this.repoInfo_=t,this.onDataUpdate_=r,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=Xu("p:rest:"),this.listens_={}}listen(t,r,n,s){const i=t._path.toString();this.log_("Listen called for "+i+" "+t._queryIdentifier);const o=yf.getListenId_(t,n),l={};this.listens_[o]=l;const c=UN(t._queryParams);this.restRequest_(i+".json",c,(u,d)=>{let h=d;if(u===404&&(h=null,u=null),u===null&&this.onDataUpdate_(i,h,!1,n),ol(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",s(f,null)}})}unlisten(t,r){const n=yf.getListenId_(t,r);delete this.listens_[n]}get(t){const r=UN(t._queryParams),n=t._path.toString(),s=new cs;return this.restRequest_(n+".json",r,(i,o)=>{let l=o;i===404&&(l=null,i=null),i===null?(this.onDataUpdate_(n,l,!1,null),s.resolve(l)):s.reject(new Error(l))}),s.promise}refreshAuthToken(t){}restRequest_(t,r={},n){return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,i])=>{s&&s.accessToken&&(r.auth=s.accessToken),i&&i.token&&(r.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+WL(r);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(n&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let c=null;if(l.status>=200&&l.status<300){try{c=du(l.responseText)}catch{Pr("Failed to parse JSON response for "+o+": "+l.responseText)}n(null,c)}else l.status!==401&&l.status!==404&&Pr("Got unsuccessful REST response for "+o+" Status: "+l.status),n(l.status);n=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.rootNode_=de.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,r){this.rootNode_=this.rootNode_.updateChild(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(){return{value:null,children:new Map}}function Dl(e,t,r){if(_e(t))e.value=r,e.children.clear();else if(e.value!==null)e.value=e.value.updateChild(t,r);else{const n=we(t);e.children.has(n)||e.children.set(n,bf());const s=e.children.get(n);t=He(t),Dl(s,t,r)}}function B0(e,t){if(_e(t))return e.value=null,e.children.clear(),!0;if(e.value!==null){if(e.value.isLeafNode())return!1;{const r=e.value;return e.value=null,r.forEachChild(ft,(n,s)=>{Dl(e,new Le(n),s)}),B0(e,t)}}else if(e.children.size>0){const r=we(t);return t=He(t),e.children.has(r)&&B0(e.children.get(r),t)&&e.children.delete(r),e.children.size===0}else return!0}function z0(e,t,r){e.value!==null?r(t,e.value):vF(e,(n,s)=>{const i=new Le(t.toString()+"/"+n);z0(s,i,r)})}function vF(e,t){e.children.forEach((r,n)=>{t(n,r)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),r={...t};return this.last_&&Qt(this.last_,(n,s)=>{r[n]=r[n]-s}),this.last_=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BN=10*1e3,yF=30*1e3,bF=5*60*1e3;class wF{constructor(t,r){this.server_=r,this.statsToReport_={},this.statsListener_=new xF(t);const n=BN+(yF-BN)*Math.random();$c(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const t=this.statsListener_.get(),r={};let n=!1;Qt(t,(s,i)=>{i>0&&ys(this.statsToReport_,s)&&(r[s]=i,n=!0)}),n&&this.server_.reportStats(r),$c(this.reportStats_.bind(this),Math.floor(Math.random()*2*bF))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Vn||(Vn={}));function yb(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bb(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wb(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(t,r,n){this.path=t,this.affectedTree=r,this.revert=n,this.type=Vn.ACK_USER_WRITE,this.source=yb()}operationForChild(t){if(_e(this.path)){if(this.affectedTree.value!=null)return Q(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const r=this.affectedTree.subtree(new Le(t));return new wf(Pe(),r,this.revert)}}else return Q(we(this.path)===t,"operationForChild called for unrelated child."),new wf(He(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(t,r){this.source=t,this.path=r,this.type=Vn.LISTEN_COMPLETE}operationForChild(t){return _e(this.path)?new yu(this.source,Pe()):new yu(this.source,He(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,r,n){this.source=t,this.path=r,this.snap=n,this.type=Vn.OVERWRITE}operationForChild(t){return _e(this.path)?new Ba(this.source,Pe(),this.snap.getImmediateChild(t)):new Ba(this.source,He(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(t,r,n){this.source=t,this.path=r,this.children=n,this.type=Vn.MERGE}operationForChild(t){if(_e(this.path)){const r=this.children.subtree(new Le(t));return r.isEmpty()?null:r.value?new Ba(this.source,Pe(),r.value):new hl(this.source,Pe(),r)}else return Q(we(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new hl(this.source,He(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,r,n){this.node_=t,this.fullyInitialized_=r,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(_e(t))return this.isFullyInitialized()&&!this.filtered_;const r=we(t);return this.isCompleteForChild(r)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function jF(e,t,r,n){const s=[],i=[];return t.forEach(o=>{o.type==="child_changed"&&e.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&i.push(fF(o.childName,o.snapshotNode))}),uc(e,s,"child_removed",t,n,r),uc(e,s,"child_added",t,n,r),uc(e,s,"child_moved",i,n,r),uc(e,s,"child_changed",t,n,r),uc(e,s,"value",t,n,r),s}function uc(e,t,r,n,s,i){const o=n.filter(l=>l.type===r);o.sort((l,c)=>SF(e,l,c)),o.forEach(l=>{const c=NF(e,l,i);s.forEach(u=>{u.respondsTo(l.type)&&t.push(u.createEvent(c,e.query_))})})}function NF(e,t,r){return t.type==="value"||t.type==="child_removed"||(t.prevName=r.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function SF(e,t,r){if(t.childName==null||r.childName==null)throw Ol("Should only compare child_ events.");const n=new je(t.childName,t.snapshotNode),s=new je(r.childName,r.snapshotNode);return e.index_.compare(n,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(e,t){return{eventCache:e,serverCache:t}}function Uc(e,t,r,n){return Qm(new Vi(t,r,n),e.serverCache)}function AP(e,t,r,n){return Qm(e.eventCache,new Vi(t,r,n))}function _f(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function za(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xg;const EF=()=>(Xg||(Xg=new Ur(uU)),Xg);class Ye{static fromObject(t){let r=new Ye(null);return Qt(t,(n,s)=>{r=r.set(new Le(n),s)}),r}constructor(t,r=EF()){this.value=t,this.children=r}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,r){if(this.value!=null&&r(this.value))return{path:Pe(),value:this.value};if(_e(t))return null;{const n=we(t),s=this.children.get(n);if(s!==null){const i=s.findRootMostMatchingPathAndValue(He(t),r);return i!=null?{path:ht(new Le(n),i.path),value:i.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(_e(t))return this;{const r=we(t),n=this.children.get(r);return n!==null?n.subtree(He(t)):new Ye(null)}}set(t,r){if(_e(t))return new Ye(r,this.children);{const n=we(t),i=(this.children.get(n)||new Ye(null)).set(He(t),r),o=this.children.insert(n,i);return new Ye(this.value,o)}}remove(t){if(_e(t))return this.children.isEmpty()?new Ye(null):new Ye(null,this.children);{const r=we(t),n=this.children.get(r);if(n){const s=n.remove(He(t));let i;return s.isEmpty()?i=this.children.remove(r):i=this.children.insert(r,s),this.value===null&&i.isEmpty()?new Ye(null):new Ye(this.value,i)}else return this}}get(t){if(_e(t))return this.value;{const r=we(t),n=this.children.get(r);return n?n.get(He(t)):null}}setTree(t,r){if(_e(t))return r;{const n=we(t),i=(this.children.get(n)||new Ye(null)).setTree(He(t),r);let o;return i.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,i),new Ye(this.value,o)}}fold(t){return this.fold_(Pe(),t)}fold_(t,r){const n={};return this.children.inorderTraversal((s,i)=>{n[s]=i.fold_(ht(t,s),r)}),r(t,this.value,n)}findOnPath(t,r){return this.findOnPath_(t,Pe(),r)}findOnPath_(t,r,n){const s=this.value?n(r,this.value):!1;if(s)return s;if(_e(t))return null;{const i=we(t),o=this.children.get(i);return o?o.findOnPath_(He(t),ht(r,i),n):null}}foreachOnPath(t,r){return this.foreachOnPath_(t,Pe(),r)}foreachOnPath_(t,r,n){if(_e(t))return this;{this.value&&n(r,this.value);const s=we(t),i=this.children.get(s);return i?i.foreachOnPath_(He(t),ht(r,s),n):new Ye(null)}}foreach(t){this.foreach_(Pe(),t)}foreach_(t,r){this.children.inorderTraversal((n,s)=>{s.foreach_(ht(t,n),r)}),this.value&&r(t,this.value)}foreachChild(t){this.children.inorderTraversal((r,n)=>{n.value&&t(r,n.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(t){this.writeTree_=t}static empty(){return new Xn(new Ye(null))}}function Fc(e,t,r){if(_e(t))return new Xn(new Ye(r));{const n=e.writeTree_.findRootMostValueAndPath(t);if(n!=null){const s=n.path;let i=n.value;const o=Er(s,t);return i=i.updateChild(o,r),new Xn(e.writeTree_.set(s,i))}else{const s=new Ye(r),i=e.writeTree_.setTree(t,s);return new Xn(i)}}}function W0(e,t,r){let n=e;return Qt(r,(s,i)=>{n=Fc(n,ht(t,s),i)}),n}function zN(e,t){if(_e(t))return Xn.empty();{const r=e.writeTree_.setTree(t,new Ye(null));return new Xn(r)}}function H0(e,t){return eo(e,t)!=null}function eo(e,t){const r=e.writeTree_.findRootMostValueAndPath(t);return r!=null?e.writeTree_.get(r.path).getChild(Er(r.path,t)):null}function WN(e){const t=[],r=e.writeTree_.value;return r!=null?r.isLeafNode()||r.forEachChild(ft,(n,s)=>{t.push(new je(n,s))}):e.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&t.push(new je(n,s.value))}),t}function Ui(e,t){if(_e(t))return e;{const r=eo(e,t);return r!=null?new Xn(new Ye(r)):new Xn(e.writeTree_.subtree(t))}}function q0(e){return e.writeTree_.isEmpty()}function fl(e,t){return PP(Pe(),e.writeTree_,t)}function PP(e,t,r){if(t.value!=null)return r.updateChild(e,t.value);{let n=null;return t.children.inorderTraversal((s,i)=>{s===".priority"?(Q(i.value!==null,"Priority writes must always be leaf nodes"),n=i.value):r=PP(ht(e,s),i,r)}),!r.getChild(e).isEmpty()&&n!==null&&(r=r.updateChild(ht(e,".priority"),n)),r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e,t){return DP(t,e)}function CF(e,t,r,n,s){Q(n>e.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),e.allWrites.push({path:t,snap:r,writeId:n,visible:s}),s&&(e.visibleWrites=Fc(e.visibleWrites,t,r)),e.lastWriteId=n}function kF(e,t,r,n){Q(n>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:r,writeId:n,visible:!0}),e.visibleWrites=W0(e.visibleWrites,t,r),e.lastWriteId=n}function AF(e,t){for(let r=0;r<e.allWrites.length;r++){const n=e.allWrites[r];if(n.writeId===t)return n}return null}function PF(e,t){const r=e.allWrites.findIndex(l=>l.writeId===t);Q(r>=0,"removeWrite called with nonexistent writeId.");const n=e.allWrites[r];e.allWrites.splice(r,1);let s=n.visible,i=!1,o=e.allWrites.length-1;for(;s&&o>=0;){const l=e.allWrites[o];l.visible&&(o>=r&&OF(l,n.path)?s=!1:Nn(n.path,l.path)&&(i=!0)),o--}if(s){if(i)return TF(e),!0;if(n.snap)e.visibleWrites=zN(e.visibleWrites,n.path);else{const l=n.children;Qt(l,c=>{e.visibleWrites=zN(e.visibleWrites,ht(n.path,c))})}return!0}else return!1}function OF(e,t){if(e.snap)return Nn(e.path,t);for(const r in e.children)if(e.children.hasOwnProperty(r)&&Nn(ht(e.path,r),t))return!0;return!1}function TF(e){e.visibleWrites=OP(e.allWrites,IF,Pe()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function IF(e){return e.visible}function OP(e,t,r){let n=Xn.empty();for(let s=0;s<e.length;++s){const i=e[s];if(t(i)){const o=i.path;let l;if(i.snap)Nn(r,o)?(l=Er(r,o),n=Fc(n,l,i.snap)):Nn(o,r)&&(l=Er(o,r),n=Fc(n,Pe(),i.snap.getChild(l)));else if(i.children){if(Nn(r,o))l=Er(r,o),n=W0(n,l,i.children);else if(Nn(o,r))if(l=Er(o,r),_e(l))n=W0(n,Pe(),i.children);else{const c=ol(i.children,we(l));if(c){const u=c.getChild(He(l));n=Fc(n,Pe(),u)}}}else throw Ol("WriteRecord should have .snap or .children")}}return n}function TP(e,t,r,n,s){if(!n&&!s){const i=eo(e.visibleWrites,t);if(i!=null)return i;{const o=Ui(e.visibleWrites,t);if(q0(o))return r;if(r==null&&!H0(o,Pe()))return null;{const l=r||de.EMPTY_NODE;return fl(o,l)}}}else{const i=Ui(e.visibleWrites,t);if(!s&&q0(i))return r;if(!s&&r==null&&!H0(i,Pe()))return null;{const o=function(u){return(u.visible||s)&&(!n||!~n.indexOf(u.writeId))&&(Nn(u.path,t)||Nn(t,u.path))},l=OP(e.allWrites,o,t),c=r||de.EMPTY_NODE;return fl(l,c)}}}function DF(e,t,r){let n=de.EMPTY_NODE;const s=eo(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(ft,(i,o)=>{n=n.updateImmediateChild(i,o)}),n;if(r){const i=Ui(e.visibleWrites,t);return r.forEachChild(ft,(o,l)=>{const c=fl(Ui(i,new Le(o)),l);n=n.updateImmediateChild(o,c)}),WN(i).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{const i=Ui(e.visibleWrites,t);return WN(i).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function RF(e,t,r,n,s){Q(n||s,"Either existingEventSnap or existingServerSnap must exist");const i=ht(t,r);if(H0(e.visibleWrites,i))return null;{const o=Ui(e.visibleWrites,i);return q0(o)?s.getChild(r):fl(o,s.getChild(r))}}function MF(e,t,r,n){const s=ht(t,r),i=eo(e.visibleWrites,s);if(i!=null)return i;if(n.isCompleteForChild(r)){const o=Ui(e.visibleWrites,s);return fl(o,n.getNode().getImmediateChild(r))}else return null}function LF(e,t){return eo(e.visibleWrites,t)}function $F(e,t,r,n,s,i,o){let l;const c=Ui(e.visibleWrites,t),u=eo(c,Pe());if(u!=null)l=u;else if(r!=null)l=fl(c,r);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const d=[],h=o.getCompare(),f=i?l.getReverseIteratorFrom(n,o):l.getIteratorFrom(n,o);let m=f.getNext();for(;m&&d.length<s;)h(m,n)!==0&&d.push(m),m=f.getNext();return d}else return[]}function UF(){return{visibleWrites:Xn.empty(),allWrites:[],lastWriteId:-1}}function jf(e,t,r,n){return TP(e.writeTree,e.treePath,t,r,n)}function _b(e,t){return DF(e.writeTree,e.treePath,t)}function HN(e,t,r,n){return RF(e.writeTree,e.treePath,t,r,n)}function Nf(e,t){return LF(e.writeTree,ht(e.treePath,t))}function FF(e,t,r,n,s,i){return $F(e.writeTree,e.treePath,t,r,n,s,i)}function jb(e,t,r){return MF(e.writeTree,e.treePath,t,r)}function IP(e,t){return DP(ht(e.treePath,t),e.writeTree)}function DP(e,t){return{treePath:e,writeTree:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(){this.changeMap=new Map}trackChildChange(t){const r=t.type,n=t.childName;Q(r==="child_added"||r==="child_changed"||r==="child_removed","Only child changes supported for tracking"),Q(n!==".priority","Only non-priority child changes can be tracked.");const s=this.changeMap.get(n);if(s){const i=s.type;if(r==="child_added"&&i==="child_removed")this.changeMap.set(n,vu(n,t.snapshotNode,s.snapshotNode));else if(r==="child_removed"&&i==="child_added")this.changeMap.delete(n);else if(r==="child_removed"&&i==="child_changed")this.changeMap.set(n,gu(n,s.oldSnap));else if(r==="child_changed"&&i==="child_added")this.changeMap.set(n,dl(n,t.snapshotNode));else if(r==="child_changed"&&i==="child_changed")this.changeMap.set(n,vu(n,t.snapshotNode,s.oldSnap));else throw Ol("Illegal combination of changes: "+t+" occurred after "+s)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{getCompleteChild(t){return null}getChildAfterChild(t,r,n){return null}}const RP=new zF;class Nb{constructor(t,r,n=null){this.writes_=t,this.viewCache_=r,this.optCompleteServerCache_=n}getCompleteChild(t){const r=this.viewCache_.eventCache;if(r.isCompleteForChild(t))return r.getNode().getImmediateChild(t);{const n=this.optCompleteServerCache_!=null?new Vi(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return jb(this.writes_,t,n)}}getChildAfterChild(t,r,n){const s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:za(this.viewCache_),i=FF(this.writes_,s,r,1,n,t);return i.length===0?null:i[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WF(e){return{filter:e}}function HF(e,t){Q(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Q(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function qF(e,t,r,n,s){const i=new BF;let o,l;if(r.type===Vn.OVERWRITE){const u=r;u.source.fromUser?o=V0(e,t,u.path,u.snap,n,s,i):(Q(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered()&&!_e(u.path),o=Sf(e,t,u.path,u.snap,n,s,l,i))}else if(r.type===Vn.MERGE){const u=r;u.source.fromUser?o=GF(e,t,u.path,u.children,n,s,i):(Q(u.source.fromServer,"Unknown source."),l=u.source.tagged||t.serverCache.isFiltered(),o=G0(e,t,u.path,u.children,n,s,l,i))}else if(r.type===Vn.ACK_USER_WRITE){const u=r;u.revert?o=XF(e,t,u.path,n,s,i):o=KF(e,t,u.path,u.affectedTree,n,s,i)}else if(r.type===Vn.LISTEN_COMPLETE)o=YF(e,t,r.path,n,i);else throw Ol("Unknown operation type: "+r.type);const c=i.getChanges();return VF(t,o,c),{viewCache:o,changes:c}}function VF(e,t,r){const n=t.eventCache;if(n.isFullyInitialized()){const s=n.getNode().isLeafNode()||n.getNode().isEmpty(),i=_f(e);(r.length>0||!e.eventCache.isFullyInitialized()||s&&!n.getNode().equals(i)||!n.getNode().getPriority().equals(i.getPriority()))&&r.push(kP(_f(t)))}}function MP(e,t,r,n,s,i){const o=t.eventCache;if(Nf(n,r)!=null)return t;{let l,c;if(_e(r))if(Q(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const u=za(t),d=u instanceof de?u:de.EMPTY_NODE,h=_b(n,d);l=e.filter.updateFullNode(t.eventCache.getNode(),h,i)}else{const u=jf(n,za(t));l=e.filter.updateFullNode(t.eventCache.getNode(),u,i)}else{const u=we(r);if(u===".priority"){Q(qi(r)===1,"Can't have a priority with additional path components");const d=o.getNode();c=t.serverCache.getNode();const h=HN(n,r,d,c);h!=null?l=e.filter.updatePriority(d,h):l=o.getNode()}else{const d=He(r);let h;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const f=HN(n,r,o.getNode(),c);f!=null?h=o.getNode().getImmediateChild(u).updateChild(d,f):h=o.getNode().getImmediateChild(u)}else h=jb(n,u,t.serverCache);h!=null?l=e.filter.updateChild(o.getNode(),u,h,d,s,i):l=o.getNode()}}return Uc(t,l,o.isFullyInitialized()||_e(r),e.filter.filtersNodes())}}function Sf(e,t,r,n,s,i,o,l){const c=t.serverCache;let u;const d=o?e.filter:e.filter.getIndexedFilter();if(_e(r))u=d.updateFullNode(c.getNode(),n,null);else if(d.filtersNodes()&&!c.isFiltered()){const m=c.getNode().updateChild(r,n);u=d.updateFullNode(c.getNode(),m,null)}else{const m=we(r);if(!c.isCompleteForPath(r)&&qi(r)>1)return t;const g=He(r),p=c.getNode().getImmediateChild(m).updateChild(g,n);m===".priority"?u=d.updatePriority(c.getNode(),p):u=d.updateChild(c.getNode(),m,p,g,RP,null)}const h=AP(t,u,c.isFullyInitialized()||_e(r),d.filtersNodes()),f=new Nb(s,h,i);return MP(e,h,r,s,f,l)}function V0(e,t,r,n,s,i,o){const l=t.eventCache;let c,u;const d=new Nb(s,t,i);if(_e(r))u=e.filter.updateFullNode(t.eventCache.getNode(),n,o),c=Uc(t,u,!0,e.filter.filtersNodes());else{const h=we(r);if(h===".priority")u=e.filter.updatePriority(t.eventCache.getNode(),n),c=Uc(t,u,l.isFullyInitialized(),l.isFiltered());else{const f=He(r),m=l.getNode().getImmediateChild(h);let g;if(_e(f))g=n;else{const y=d.getCompleteChild(h);y!=null?fb(f)===".priority"&&y.getChild(wP(f)).isEmpty()?g=y:g=y.updateChild(f,n):g=de.EMPTY_NODE}if(m.equals(g))c=t;else{const y=e.filter.updateChild(l.getNode(),h,g,f,d,o);c=Uc(t,y,l.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function qN(e,t){return e.eventCache.isCompleteForChild(t)}function GF(e,t,r,n,s,i,o){let l=t;return n.foreach((c,u)=>{const d=ht(r,c);qN(t,we(d))&&(l=V0(e,l,d,u,s,i,o))}),n.foreach((c,u)=>{const d=ht(r,c);qN(t,we(d))||(l=V0(e,l,d,u,s,i,o))}),l}function VN(e,t,r){return r.foreach((n,s)=>{t=t.updateChild(n,s)}),t}function G0(e,t,r,n,s,i,o,l){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c=t,u;_e(r)?u=n:u=new Ye(null).setTree(r,n);const d=t.serverCache.getNode();return u.children.inorderTraversal((h,f)=>{if(d.hasChild(h)){const m=t.serverCache.getNode().getImmediateChild(h),g=VN(e,m,f);c=Sf(e,c,new Le(h),g,s,i,o,l)}}),u.children.inorderTraversal((h,f)=>{const m=!t.serverCache.isCompleteForChild(h)&&f.value===null;if(!d.hasChild(h)&&!m){const g=t.serverCache.getNode().getImmediateChild(h),y=VN(e,g,f);c=Sf(e,c,new Le(h),y,s,i,o,l)}}),c}function KF(e,t,r,n,s,i,o){if(Nf(s,r)!=null)return t;const l=t.serverCache.isFiltered(),c=t.serverCache;if(n.value!=null){if(_e(r)&&c.isFullyInitialized()||c.isCompleteForPath(r))return Sf(e,t,r,c.getNode().getChild(r),s,i,l,o);if(_e(r)){let u=new Ye(null);return c.getNode().forEachChild(Xo,(d,h)=>{u=u.set(new Le(d),h)}),G0(e,t,r,u,s,i,l,o)}else return t}else{let u=new Ye(null);return n.foreach((d,h)=>{const f=ht(r,d);c.isCompleteForPath(f)&&(u=u.set(d,c.getNode().getChild(f)))}),G0(e,t,r,u,s,i,l,o)}}function YF(e,t,r,n,s){const i=t.serverCache,o=AP(t,i.getNode(),i.isFullyInitialized()||_e(r),i.isFiltered());return MP(e,o,r,n,RP,s)}function XF(e,t,r,n,s,i){let o;if(Nf(n,r)!=null)return t;{const l=new Nb(n,t,s),c=t.eventCache.getNode();let u;if(_e(r)||we(r)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=jf(n,za(t));else{const h=t.serverCache.getNode();Q(h instanceof de,"serverChildren would be complete if leaf node"),d=_b(n,h)}d=d,u=e.filter.updateFullNode(c,d,i)}else{const d=we(r);let h=jb(n,d,t.serverCache);h==null&&t.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),h!=null?u=e.filter.updateChild(c,d,h,He(r),l,i):t.eventCache.getNode().hasChild(d)?u=e.filter.updateChild(c,d,de.EMPTY_NODE,He(r),l,i):u=c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=jf(n,za(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,i)))}return o=t.serverCache.isFullyInitialized()||Nf(n,Pe())!=null,Uc(t,u,o,e.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(t,r){this.query_=t,this.eventRegistrations_=[];const n=this.query_._queryParams,s=new vb(n.getIndex()),i=pF(n);this.processor_=WF(i);const o=r.serverCache,l=r.eventCache,c=s.updateFullNode(de.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(de.EMPTY_NODE,l.getNode(),null),d=new Vi(c,o.isFullyInitialized(),s.filtersNodes()),h=new Vi(u,l.isFullyInitialized(),i.filtersNodes());this.viewCache_=Qm(h,d),this.eventGenerator_=new _F(this.query_)}get query(){return this.query_}}function JF(e){return e.viewCache_.serverCache.getNode()}function ZF(e){return _f(e.viewCache_)}function e8(e,t){const r=za(e.viewCache_);return r&&(e.query._queryParams.loadsAllData()||!_e(t)&&!r.getImmediateChild(we(t)).isEmpty())?r.getChild(t):null}function GN(e){return e.eventRegistrations_.length===0}function t8(e,t){e.eventRegistrations_.push(t)}function KN(e,t,r){const n=[];if(r){Q(t==null,"A cancel should cancel all event registrations.");const s=e.query._path;e.eventRegistrations_.forEach(i=>{const o=i.createCancelEvent(r,s);o&&n.push(o)})}if(t){let s=[];for(let i=0;i<e.eventRegistrations_.length;++i){const o=e.eventRegistrations_[i];if(!o.matches(t))s.push(o);else if(t.hasAnyCallback()){s=s.concat(e.eventRegistrations_.slice(i+1));break}}e.eventRegistrations_=s}else e.eventRegistrations_=[];return n}function YN(e,t,r,n){t.type===Vn.MERGE&&t.source.queryId!==null&&(Q(za(e.viewCache_),"We should always have a full cache before handling merges"),Q(_f(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,i=qF(e.processor_,s,t,r,n);return HF(e.processor_,i.viewCache),Q(i.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=i.viewCache,LP(e,i.changes,i.viewCache.eventCache.getNode(),null)}function r8(e,t){const r=e.viewCache_.eventCache,n=[];return r.getNode().isLeafNode()||r.getNode().forEachChild(ft,(i,o)=>{n.push(dl(i,o))}),r.isFullyInitialized()&&n.push(kP(r.getNode())),LP(e,n,r.getNode(),t)}function LP(e,t,r,n){const s=n?[n]:e.eventRegistrations_;return jF(e.eventGenerator_,t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ef;class $P{constructor(){this.views=new Map}}function n8(e){Q(!Ef,"__referenceConstructor has already been defined"),Ef=e}function s8(){return Q(Ef,"Reference.ts has not been loaded"),Ef}function i8(e){return e.views.size===0}function Sb(e,t,r,n){const s=t.source.queryId;if(s!==null){const i=e.views.get(s);return Q(i!=null,"SyncTree gave us an op for an invalid query."),YN(i,t,r,n)}else{let i=[];for(const o of e.views.values())i=i.concat(YN(o,t,r,n));return i}}function UP(e,t,r,n,s){const i=t._queryIdentifier,o=e.views.get(i);if(!o){let l=jf(r,s?n:null),c=!1;l?c=!0:n instanceof de?(l=_b(r,n),c=!1):(l=de.EMPTY_NODE,c=!1);const u=Qm(new Vi(l,c,!1),new Vi(n,s,!1));return new QF(t,u)}return o}function a8(e,t,r,n,s,i){const o=UP(e,t,n,s,i);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),t8(o,r),r8(o,r)}function o8(e,t,r,n){const s=t._queryIdentifier,i=[];let o=[];const l=Gi(e);if(s==="default")for(const[c,u]of e.views.entries())o=o.concat(KN(u,r,n)),GN(u)&&(e.views.delete(c),u.query._queryParams.loadsAllData()||i.push(u.query));else{const c=e.views.get(s);c&&(o=o.concat(KN(c,r,n)),GN(c)&&(e.views.delete(s),c.query._queryParams.loadsAllData()||i.push(c.query)))}return l&&!Gi(e)&&i.push(new(s8())(t._repo,t._path)),{removed:i,events:o}}function FP(e){const t=[];for(const r of e.views.values())r.query._queryParams.loadsAllData()||t.push(r);return t}function Fi(e,t){let r=null;for(const n of e.views.values())r=r||e8(n,t);return r}function BP(e,t){if(t._queryParams.loadsAllData())return Zm(e);{const n=t._queryIdentifier;return e.views.get(n)}}function zP(e,t){return BP(e,t)!=null}function Gi(e){return Zm(e)!=null}function Zm(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cf;function l8(e){Q(!Cf,"__referenceConstructor has already been defined"),Cf=e}function c8(){return Q(Cf,"Reference.ts has not been loaded"),Cf}let u8=1;class XN{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Ye(null),this.pendingWriteTree_=UF(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WP(e,t,r,n,s){return CF(e.pendingWriteTree_,t,r,n,s),s?Rl(e,new Ba(yb(),t,r)):[]}function d8(e,t,r,n){kF(e.pendingWriteTree_,t,r,n);const s=Ye.fromObject(r);return Rl(e,new hl(yb(),t,s))}function Ei(e,t,r=!1){const n=AF(e.pendingWriteTree_,t);if(PF(e.pendingWriteTree_,t)){let i=new Ye(null);return n.snap!=null?i=i.set(Pe(),!0):Qt(n.children,o=>{i=i.set(new Le(o),!0)}),Rl(e,new wf(n.path,i,r))}else return[]}function Ju(e,t,r){return Rl(e,new Ba(bb(),t,r))}function h8(e,t,r){const n=Ye.fromObject(r);return Rl(e,new hl(bb(),t,n))}function f8(e,t){return Rl(e,new yu(bb(),t))}function m8(e,t,r){const n=Cb(e,r);if(n){const s=kb(n),i=s.path,o=s.queryId,l=Er(i,t),c=new yu(wb(o),l);return Ab(e,i,c)}else return[]}function kf(e,t,r,n,s=!1){const i=t._path,o=e.syncPointTree_.get(i);let l=[];if(o&&(t._queryIdentifier==="default"||zP(o,t))){const c=o8(o,t,r,n);i8(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));const u=c.removed;if(l=c.events,!s){const d=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,h=e.syncPointTree_.findOnPath(i,(f,m)=>Gi(m));if(d&&!h){const f=e.syncPointTree_.subtree(i);if(!f.isEmpty()){const m=v8(f);for(let g=0;g<m.length;++g){const y=m[g],p=y.query,v=GP(e,y);e.listenProvider_.startListening(Bc(p),bu(e,p),v.hashFn,v.onComplete)}}}!h&&u.length>0&&!n&&(d?e.listenProvider_.stopListening(Bc(t),null):u.forEach(f=>{const m=e.queryToTagMap.get(ep(f));e.listenProvider_.stopListening(Bc(f),m)}))}x8(e,u)}return l}function HP(e,t,r,n){const s=Cb(e,n);if(s!=null){const i=kb(s),o=i.path,l=i.queryId,c=Er(o,t),u=new Ba(wb(l),c,r);return Ab(e,o,u)}else return[]}function p8(e,t,r,n){const s=Cb(e,n);if(s){const i=kb(s),o=i.path,l=i.queryId,c=Er(o,t),u=Ye.fromObject(r),d=new hl(wb(l),c,u);return Ab(e,o,d)}else return[]}function K0(e,t,r,n=!1){const s=t._path;let i=null,o=!1;e.syncPointTree_.foreachOnPath(s,(f,m)=>{const g=Er(f,s);i=i||Fi(m,g),o=o||Gi(m)});let l=e.syncPointTree_.get(s);l?(o=o||Gi(l),i=i||Fi(l,Pe())):(l=new $P,e.syncPointTree_=e.syncPointTree_.set(s,l));let c;i!=null?c=!0:(c=!1,i=de.EMPTY_NODE,e.syncPointTree_.subtree(s).foreachChild((m,g)=>{const y=Fi(g,Pe());y&&(i=i.updateImmediateChild(m,y))}));const u=zP(l,t);if(!u&&!t._queryParams.loadsAllData()){const f=ep(t);Q(!e.queryToTagMap.has(f),"View does not exist, but we have a tag");const m=y8();e.queryToTagMap.set(f,m),e.tagToQueryMap.set(m,f)}const d=Jm(e.pendingWriteTree_,s);let h=a8(l,t,r,d,i,c);if(!u&&!o&&!n){const f=BP(l,t);h=h.concat(b8(e,t,f))}return h}function Eb(e,t,r){const s=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(o,l)=>{const c=Er(o,t),u=Fi(l,c);if(u)return u});return TP(s,t,i,r,!0)}function g8(e,t){const r=t._path;let n=null;e.syncPointTree_.foreachOnPath(r,(u,d)=>{const h=Er(u,r);n=n||Fi(d,h)});let s=e.syncPointTree_.get(r);s?n=n||Fi(s,Pe()):(s=new $P,e.syncPointTree_=e.syncPointTree_.set(r,s));const i=n!=null,o=i?new Vi(n,!0,!1):null,l=Jm(e.pendingWriteTree_,t._path),c=UP(s,t,l,i?o.getNode():de.EMPTY_NODE,i);return ZF(c)}function Rl(e,t){return qP(t,e.syncPointTree_,null,Jm(e.pendingWriteTree_,Pe()))}function qP(e,t,r,n){if(_e(e.path))return VP(e,t,r,n);{const s=t.get(Pe());r==null&&s!=null&&(r=Fi(s,Pe()));let i=[];const o=we(e.path),l=e.operationForChild(o),c=t.children.get(o);if(c&&l){const u=r?r.getImmediateChild(o):null,d=IP(n,o);i=i.concat(qP(l,c,u,d))}return s&&(i=i.concat(Sb(s,e,n,r))),i}}function VP(e,t,r,n){const s=t.get(Pe());r==null&&s!=null&&(r=Fi(s,Pe()));let i=[];return t.children.inorderTraversal((o,l)=>{const c=r?r.getImmediateChild(o):null,u=IP(n,o),d=e.operationForChild(o);d&&(i=i.concat(VP(d,l,c,u)))}),s&&(i=i.concat(Sb(s,e,n,r))),i}function GP(e,t){const r=t.query,n=bu(e,r);return{hashFn:()=>(JF(t)||de.EMPTY_NODE).hash(),onComplete:s=>{if(s==="ok")return n?m8(e,r._path,n):f8(e,r._path);{const i=fU(s,r);return kf(e,r,null,i)}}}}function bu(e,t){const r=ep(t);return e.queryToTagMap.get(r)}function ep(e){return e._path.toString()+"$"+e._queryIdentifier}function Cb(e,t){return e.tagToQueryMap.get(t)}function kb(e){const t=e.indexOf("$");return Q(t!==-1&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Le(e.substr(0,t))}}function Ab(e,t,r){const n=e.syncPointTree_.get(t);Q(n,"Missing sync point for query tag that we're tracking");const s=Jm(e.pendingWriteTree_,t);return Sb(n,r,s,null)}function v8(e){return e.fold((t,r,n)=>{if(r&&Gi(r))return[Zm(r)];{let s=[];return r&&(s=FP(r)),Qt(n,(i,o)=>{s=s.concat(o)}),s}})}function Bc(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(c8())(e._repo,e._path):e}function x8(e,t){for(let r=0;r<t.length;++r){const n=t[r];if(!n._queryParams.loadsAllData()){const s=ep(n),i=e.queryToTagMap.get(s);e.queryToTagMap.delete(s),e.tagToQueryMap.delete(i)}}}function y8(){return u8++}function b8(e,t,r){const n=t._path,s=bu(e,t),i=GP(e,r),o=e.listenProvider_.startListening(Bc(t),s,i.hashFn,i.onComplete),l=e.syncPointTree_.subtree(n);if(s)Q(!Gi(l.value),"If we're adding a query, it shouldn't be shadowed");else{const c=l.fold((u,d,h)=>{if(!_e(u)&&d&&Gi(d))return[Zm(d).query];{let f=[];return d&&(f=f.concat(FP(d).map(m=>m.query))),Qt(h,(m,g)=>{f=f.concat(g)}),f}});for(let u=0;u<c.length;++u){const d=c[u];e.listenProvider_.stopListening(Bc(d),bu(e,d))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(t){this.node_=t}getImmediateChild(t){const r=this.node_.getImmediateChild(t);return new Pb(r)}node(){return this.node_}}class Ob{constructor(t,r){this.syncTree_=t,this.path_=r}getImmediateChild(t){const r=ht(this.path_,t);return new Ob(this.syncTree_,r)}node(){return Eb(this.syncTree_,this.path_)}}const w8=function(e){return e=e||{},e.timestamp=e.timestamp||new Date().getTime(),e},QN=function(e,t,r){if(!e||typeof e!="object")return e;if(Q(".sv"in e,"Unexpected leaf node or priority contents"),typeof e[".sv"]=="string")return _8(e[".sv"],t,r);if(typeof e[".sv"]=="object")return j8(e[".sv"],t);Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2))},_8=function(e,t,r){switch(e){case"timestamp":return r.timestamp;default:Q(!1,"Unexpected server value: "+e)}},j8=function(e,t,r){e.hasOwnProperty("increment")||Q(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const n=e.increment;typeof n!="number"&&Q(!1,"Unexpected increment value: "+n);const s=t.node();if(Q(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;const o=s.getValue();return typeof o!="number"?n:o+n},KP=function(e,t,r,n){return Tb(t,new Ob(r,e),n)},YP=function(e,t,r){return Tb(e,new Pb(t),r)};function Tb(e,t,r){const n=e.getPriority().val(),s=QN(n,t.getImmediateChild(".priority"),r);let i;if(e.isLeafNode()){const o=e,l=QN(o.getValue(),t,r);return l!==o.getValue()||s!==o.getPriority().val()?new zt(l,bt(s)):e}else{const o=e;return i=o,s!==o.getPriority().val()&&(i=i.updatePriority(new zt(s))),o.forEachChild(ft,(l,c)=>{const u=Tb(c,t.getImmediateChild(l),r);u!==c&&(i=i.updateImmediateChild(l,u))}),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t="",r=null,n={children:{},childCount:0}){this.name=t,this.parent=r,this.node=n}}function Db(e,t){let r=t instanceof Le?t:new Le(t),n=e,s=we(r);for(;s!==null;){const i=ol(n.node.children,s)||{children:{},childCount:0};n=new Ib(s,n,i),r=He(r),s=we(r)}return n}function Ml(e){return e.node.value}function XP(e,t){e.node.value=t,Y0(e)}function QP(e){return e.node.childCount>0}function N8(e){return Ml(e)===void 0&&!QP(e)}function tp(e,t){Qt(e.node.children,(r,n)=>{t(new Ib(r,e,n))})}function JP(e,t,r,n){r&&t(e),tp(e,s=>{JP(s,t,!0)})}function S8(e,t,r){let n=e.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function Zu(e){return new Le(e.parent===null?e.name:Zu(e.parent)+"/"+e.name)}function Y0(e){e.parent!==null&&E8(e.parent,e.name,e)}function E8(e,t,r){const n=N8(r),s=ys(e.node.children,t);n&&s?(delete e.node.children[t],e.node.childCount--,Y0(e)):!n&&!s&&(e.node.children[t]=r.node,e.node.childCount++,Y0(e))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8=/[\[\].#$\/\u0000-\u001F\u007F]/,k8=/[\[\].#$\u0000-\u001F\u007F]/,Qg=10*1024*1024,Rb=function(e){return typeof e=="string"&&e.length!==0&&!C8.test(e)},ZP=function(e){return typeof e=="string"&&e.length!==0&&!k8.test(e)},A8=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ZP(e)},eO=function(e){return e===null||typeof e=="string"||typeof e=="number"&&!Ym(e)||e&&typeof e=="object"&&ys(e,".sv")},Af=function(e,t,r,n){n&&t===void 0||rp(ll(e,"value"),t,r)},rp=function(e,t,r){const n=r instanceof Le?new GU(r,e):r;if(t===void 0)throw new Error(e+"contains undefined "+ua(n));if(typeof t=="function")throw new Error(e+"contains a function "+ua(n)+" with contents = "+t.toString());if(Ym(t))throw new Error(e+"contains "+t.toString()+" "+ua(n));if(typeof t=="string"&&t.length>Qg/3&&Km(t)>Qg)throw new Error(e+"contains a string greater than "+Qg+" utf8 bytes "+ua(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let s=!1,i=!1;if(Qt(t,(o,l)=>{if(o===".value")s=!0;else if(o!==".priority"&&o!==".sv"&&(i=!0,!Rb(o)))throw new Error(e+" contains an invalid key ("+o+") "+ua(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);KU(n,o),rp(e,l,n),YU(n)}),s&&i)throw new Error(e+' contains ".value" child '+ua(n)+" in addition to actual children.")}},P8=function(e,t){let r,n;for(r=0;r<t.length;r++){n=t[r];const i=pu(n);for(let o=0;o<i.length;o++)if(!(i[o]===".priority"&&o===i.length-1)){if(!Rb(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(VU);let s=null;for(r=0;r<t.length;r++){if(n=t[r],s!==null&&Nn(s,n))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}},tO=function(e,t,r,n){const s=ll(e,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(s+" must be an object containing the children to replace.");const i=[];Qt(t,(o,l)=>{const c=new Le(o);if(rp(s,l,ht(r,c)),fb(c)===".priority"&&!eO(l))throw new Error(s+"contains an invalid value for '"+c.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");i.push(c)}),P8(s,i)},O8=function(e,t,r){if(Ym(t))throw new Error(ll(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!eO(t))throw new Error(ll(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")},rO=function(e,t,r,n){if(!ZP(r))throw new Error(ll(e,t)+'was an invalid path = "'+r+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},T8=function(e,t,r,n){r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),rO(e,t,r)},ja=function(e,t){if(we(t)===".info")throw new Error(e+" failed = Can't modify data under /.info/")},I8=function(e,t){const r=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!Rb(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||r.length!==0&&!A8(r))throw new Error(ll(e,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function np(e,t){let r=null;for(let n=0;n<t.length;n++){const s=t[n],i=s.getPath();r!==null&&!mb(i,r.path)&&(e.eventLists_.push(r),r=null),r===null&&(r={events:[],path:i}),r.events.push(s)}r&&e.eventLists_.push(r)}function nO(e,t,r){np(e,r),sO(e,n=>mb(n,t))}function An(e,t,r){np(e,r),sO(e,n=>Nn(n,t)||Nn(t,n))}function sO(e,t){e.recursionDepth_++;let r=!0;for(let n=0;n<e.eventLists_.length;n++){const s=e.eventLists_[n];if(s){const i=s.path;t(i)?(R8(e.eventLists_[n]),e.eventLists_[n]=null):r=!1}}r&&(e.eventLists_=[]),e.recursionDepth_--}function R8(e){for(let t=0;t<e.events.length;t++){const r=e.events[t];if(r!==null){e.events[t]=null;const n=r.getEventRunner();Lc&&Kt("event: "+r.toString()),Il(n)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8="repo_interrupt",L8=25;class $8{constructor(t,r,n,s){this.repoInfo_=t,this.forceRestClient_=r,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new D8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bf(),this.transactionQueueTree_=new Ib,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function U8(e,t,r){if(e.stats_=db(e.repoInfo_),e.forceRestClient_||vU())e.server_=new yf(e.repoInfo_,(n,s,i,o)=>{JN(e,n,s,i,o)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>ZN(e,!0),0);else{if(typeof r<"u"&&r!==null){if(typeof r!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{It(r)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Ms(e.repoInfo_,t,(n,s,i,o)=>{JN(e,n,s,i,o)},n=>{ZN(e,n)},n=>{F8(e,n)},e.authTokenProvider_,e.appCheckProvider_,r),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(n=>{e.server_.refreshAuthToken(n)}),e.appCheckProvider_.addTokenChangeListener(n=>{e.server_.refreshAppCheckToken(n.token)}),e.statsReporter_=_U(e.repoInfo_,()=>new wF(e.stats_,e.server_)),e.infoData_=new gF,e.infoSyncTree_=new XN({startListening:(n,s,i,o)=>{let l=[];const c=e.infoData_.getNode(n._path);return c.isEmpty()||(l=Ju(e.infoSyncTree_,n._path,c),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Mb(e,"connected",!1),e.serverSyncTree_=new XN({startListening:(n,s,i,o)=>(e.server_.listen(n,i,s,(l,c)=>{const u=o(l,c);An(e.eventQueue_,n._path,u)}),[]),stopListening:(n,s)=>{e.server_.unlisten(n,s)}})}function iO(e){const r=e.infoData_.getNode(new Le(".info/serverTimeOffset")).val()||0;return new Date().getTime()+r}function sp(e){return w8({timestamp:iO(e)})}function JN(e,t,r,n,s){e.dataUpdateCount++;const i=new Le(t);r=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,r):r;let o=[];if(s)if(n){const c=ff(r,u=>bt(u));o=p8(e.serverSyncTree_,i,c,s)}else{const c=bt(r);o=HP(e.serverSyncTree_,i,c,s)}else if(n){const c=ff(r,u=>bt(u));o=h8(e.serverSyncTree_,i,c)}else{const c=bt(r);o=Ju(e.serverSyncTree_,i,c)}let l=i;o.length>0&&(l=ml(e,i)),An(e.eventQueue_,l,o)}function ZN(e,t){Mb(e,"connected",t),t===!1&&H8(e)}function F8(e,t){Qt(t,(r,n)=>{Mb(e,r,n)})}function Mb(e,t,r){const n=new Le("/.info/"+t),s=bt(r);e.infoData_.updateSnapshot(n,s);const i=Ju(e.infoSyncTree_,n,s);An(e.eventQueue_,n,i)}function Lb(e){return e.nextWriteId_++}function B8(e,t,r){const n=g8(e.serverSyncTree_,t);return n!=null?Promise.resolve(n):e.server_.get(t).then(s=>{const i=bt(s).withIndex(t._queryParams.getIndex());K0(e.serverSyncTree_,t,r,!0);let o;if(t._queryParams.loadsAllData())o=Ju(e.serverSyncTree_,t._path,i);else{const l=bu(e.serverSyncTree_,t);o=HP(e.serverSyncTree_,t._path,i,l)}return An(e.eventQueue_,t._path,o),kf(e.serverSyncTree_,t,r,null,!0),i},s=>(ed(e,"get for query "+It(t)+" failed: "+s),Promise.reject(new Error(s))))}function z8(e,t,r,n,s){ed(e,"set",{path:t.toString(),value:r,priority:n});const i=sp(e),o=bt(r,n),l=Eb(e.serverSyncTree_,t),c=YP(o,l,i),u=Lb(e),d=WP(e.serverSyncTree_,t,c,u,!0);np(e.eventQueue_,d),e.server_.put(t.toString(),o.val(!0),(f,m)=>{const g=f==="ok";g||Pr("set at "+t+" failed: "+f);const y=Ei(e.serverSyncTree_,u,!g);An(e.eventQueue_,t,y),Ki(e,s,f,m)});const h=Ub(e,t);ml(e,h),An(e.eventQueue_,h,[])}function W8(e,t,r,n){ed(e,"update",{path:t.toString(),value:r});let s=!0;const i=sp(e),o={};if(Qt(r,(l,c)=>{s=!1,o[l]=KP(ht(t,l),bt(c),e.serverSyncTree_,i)}),s)Kt("update() called with empty data.  Don't do anything."),Ki(e,n,"ok",void 0);else{const l=Lb(e),c=d8(e.serverSyncTree_,t,o,l);np(e.eventQueue_,c),e.server_.merge(t.toString(),r,(u,d)=>{const h=u==="ok";h||Pr("update at "+t+" failed: "+u);const f=Ei(e.serverSyncTree_,l,!h),m=f.length>0?ml(e,t):t;An(e.eventQueue_,m,f),Ki(e,n,u,d)}),Qt(r,u=>{const d=Ub(e,ht(t,u));ml(e,d)}),An(e.eventQueue_,t,[])}}function H8(e){ed(e,"onDisconnectEvents");const t=sp(e),r=bf();z0(e.onDisconnect_,Pe(),(s,i)=>{const o=KP(s,i,e.serverSyncTree_,t);Dl(r,s,o)});let n=[];z0(r,Pe(),(s,i)=>{n=n.concat(Ju(e.serverSyncTree_,s,i));const o=Ub(e,s);ml(e,o)}),e.onDisconnect_=bf(),An(e.eventQueue_,Pe(),n)}function q8(e,t,r){e.server_.onDisconnectCancel(t.toString(),(n,s)=>{n==="ok"&&B0(e.onDisconnect_,t),Ki(e,r,n,s)})}function e1(e,t,r,n){const s=bt(r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(i,o)=>{i==="ok"&&Dl(e.onDisconnect_,t,s),Ki(e,n,i,o)})}function V8(e,t,r,n,s){const i=bt(r,n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(o,l)=>{o==="ok"&&Dl(e.onDisconnect_,t,i),Ki(e,s,o,l)})}function G8(e,t,r,n){if(T0(r)){Kt("onDisconnect().update() called with empty data.  Don't do anything."),Ki(e,n,"ok",void 0);return}e.server_.onDisconnectMerge(t.toString(),r,(s,i)=>{s==="ok"&&Qt(r,(o,l)=>{const c=bt(l);Dl(e.onDisconnect_,ht(t,o),c)}),Ki(e,n,s,i)})}function K8(e,t,r){let n;we(t._path)===".info"?n=K0(e.infoSyncTree_,t,r):n=K0(e.serverSyncTree_,t,r),nO(e.eventQueue_,t._path,n)}function X0(e,t,r){let n;we(t._path)===".info"?n=kf(e.infoSyncTree_,t,r):n=kf(e.serverSyncTree_,t,r),nO(e.eventQueue_,t._path,n)}function Y8(e){e.persistentConnection_&&e.persistentConnection_.interrupt(M8)}function ed(e,...t){let r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),Kt(r,...t)}function Ki(e,t,r,n){t&&Il(()=>{if(r==="ok")t(null);else{const s=(r||"error").toUpperCase();let i=s;n&&(i+=": "+n);const o=new Error(i);o.code=s,t(o)}})}function aO(e,t,r){return Eb(e.serverSyncTree_,t,r)||de.EMPTY_NODE}function $b(e,t=e.transactionQueueTree_){if(t||ip(e,t),Ml(t)){const r=lO(e,t);Q(r.length>0,"Sending zero length transaction queue"),r.every(s=>s.status===0)&&X8(e,Zu(t),r)}else QP(t)&&tp(t,r=>{$b(e,r)})}function X8(e,t,r){const n=r.map(u=>u.currentWriteId),s=aO(e,t,n);let i=s;const o=s.hash();for(let u=0;u<r.length;u++){const d=r[u];Q(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;const h=Er(t,d.path);i=i.updateChild(h,d.currentOutputSnapshotRaw)}const l=i.val(!0),c=t;e.server_.put(c.toString(),l,u=>{ed(e,"transaction put response",{path:c.toString(),status:u});let d=[];if(u==="ok"){const h=[];for(let f=0;f<r.length;f++)r[f].status=2,d=d.concat(Ei(e.serverSyncTree_,r[f].currentWriteId)),r[f].onComplete&&h.push(()=>r[f].onComplete(null,!0,r[f].currentOutputSnapshotResolved)),r[f].unwatcher();ip(e,Db(e.transactionQueueTree_,t)),$b(e,e.transactionQueueTree_),An(e.eventQueue_,t,d);for(let f=0;f<h.length;f++)Il(h[f])}else{if(u==="datastale")for(let h=0;h<r.length;h++)r[h].status===3?r[h].status=4:r[h].status=0;else{Pr("transaction at "+c.toString()+" failed: "+u);for(let h=0;h<r.length;h++)r[h].status=4,r[h].abortReason=u}ml(e,t)}},o)}function ml(e,t){const r=oO(e,t),n=Zu(r),s=lO(e,r);return Q8(e,s,n),n}function Q8(e,t,r){if(t.length===0)return;const n=[];let s=[];const o=t.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<t.length;l++){const c=t[l],u=Er(r,c.path);let d=!1,h;if(Q(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===4)d=!0,h=c.abortReason,s=s.concat(Ei(e.serverSyncTree_,c.currentWriteId,!0));else if(c.status===0)if(c.retryCount>=L8)d=!0,h="maxretry",s=s.concat(Ei(e.serverSyncTree_,c.currentWriteId,!0));else{const f=aO(e,c.path,o);c.currentInputSnapshot=f;const m=t[l].update(f.val());if(m!==void 0){rp("transaction failed: Data returned ",m,c.path);let g=bt(m);typeof m=="object"&&m!=null&&ys(m,".priority")||(g=g.updatePriority(f.getPriority()));const p=c.currentWriteId,v=sp(e),b=YP(g,f,v);c.currentOutputSnapshotRaw=g,c.currentOutputSnapshotResolved=b,c.currentWriteId=Lb(e),o.splice(o.indexOf(p),1),s=s.concat(WP(e.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally)),s=s.concat(Ei(e.serverSyncTree_,p,!0))}else d=!0,h="nodata",s=s.concat(Ei(e.serverSyncTree_,c.currentWriteId,!0))}An(e.eventQueue_,r,s),s=[],d&&(t[l].status=2,function(f){setTimeout(f,Math.floor(0))}(t[l].unwatcher),t[l].onComplete&&(h==="nodata"?n.push(()=>t[l].onComplete(null,!1,t[l].currentInputSnapshot)):n.push(()=>t[l].onComplete(new Error(h),!1,null))))}ip(e,e.transactionQueueTree_);for(let l=0;l<n.length;l++)Il(n[l]);$b(e,e.transactionQueueTree_)}function oO(e,t){let r,n=e.transactionQueueTree_;for(r=we(t);r!==null&&Ml(n)===void 0;)n=Db(n,r),t=He(t),r=we(t);return n}function lO(e,t){const r=[];return cO(e,t,r),r.sort((n,s)=>n.order-s.order),r}function cO(e,t,r){const n=Ml(t);if(n)for(let s=0;s<n.length;s++)r.push(n[s]);tp(t,s=>{cO(e,s,r)})}function ip(e,t){const r=Ml(t);if(r){let n=0;for(let s=0;s<r.length;s++)r[s].status!==2&&(r[n]=r[s],n++);r.length=n,XP(t,r.length>0?r:void 0)}tp(t,n=>{ip(e,n)})}function Ub(e,t){const r=Zu(oO(e,t)),n=Db(e.transactionQueueTree_,t);return S8(n,s=>{Jg(e,s)}),Jg(e,n),JP(n,s=>{Jg(e,s)}),r}function Jg(e,t){const r=Ml(t);if(r){const n=[];let s=[],i=-1;for(let o=0;o<r.length;o++)r[o].status===3||(r[o].status===1?(Q(i===o-1,"All SENT items should be at beginning of queue."),i=o,r[o].status=3,r[o].abortReason="set"):(Q(r[o].status===0,"Unexpected transaction status in abort"),r[o].unwatcher(),s=s.concat(Ei(e.serverSyncTree_,r[o].currentWriteId,!0)),r[o].onComplete&&n.push(r[o].onComplete.bind(null,new Error("set"),!1,null))));i===-1?XP(t,void 0):r.length=i+1,An(e.eventQueue_,Zu(t),s);for(let o=0;o<n.length;o++)Il(n[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(e){let t="";const r=e.split("/");for(let n=0;n<r.length;n++)if(r[n].length>0){let s=r[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}t+="/"+s}return t}function Z8(e){const t={};e.charAt(0)==="?"&&(e=e.substring(1));for(const r of e.split("&")){if(r.length===0)continue;const n=r.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Pr(`Invalid query segment '${r}' in query '${e}'`)}return t}const t1=function(e,t){const r=eB(e),n=r.namespace;r.domain==="firebase.com"&&qs(r.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&r.domain!=="localhost"&&qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),r.secure||lU();const s=r.scheme==="ws"||r.scheme==="wss";return{repoInfo:new hP(r.host,r.secure,n,s,t,"",n!==r.subdomain),path:new Le(r.pathString)}},eB=function(e){let t="",r="",n="",s="",i="",o=!0,l="https",c=443;if(typeof e=="string"){let u=e.indexOf("//");u>=0&&(l=e.substring(0,u-1),e=e.substring(u+2));let d=e.indexOf("/");d===-1&&(d=e.length);let h=e.indexOf("?");h===-1&&(h=e.length),t=e.substring(0,Math.min(d,h)),d<h&&(s=J8(e.substring(d,h)));const f=Z8(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o=l==="https"||l==="wss",c=parseInt(t.substring(u+1),10)):u=t.length;const m=t.slice(0,u);if(m.toLowerCase()==="localhost")r="localhost";else if(m.split(".").length<=2)r=m;else{const g=t.indexOf(".");n=t.substring(0,g).toLowerCase(),r=t.substring(g+1),i=n}"ns"in f&&(i=f.ns)}return{host:t,port:c,domain:r,subdomain:n,secure:o,scheme:l,pathString:s,namespace:i}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",tB=function(){let e=0;const t=[];return function(r){const n=r===e;e=r;let s;const i=new Array(8);for(s=7;s>=0;s--)i[s]=r1.charAt(r%64),r=Math.floor(r/64);Q(r===0,"Cannot push at time == 0");let o=i.join("");if(n){for(s=11;s>=0&&t[s]===63;s--)t[s]=0;t[s]++}else for(s=0;s<12;s++)t[s]=Math.floor(Math.random()*64);for(s=0;s<12;s++)o+=r1.charAt(t[s]);return Q(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rB{constructor(t,r,n,s){this.eventType=t,this.eventRegistration=r,this.snapshot=n,this.prevName=s}getPath(){const t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+It(this.snapshot.exportVal())}}class nB{constructor(t,r,n){this.eventRegistration=t,this.error=r,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(t,r){this.snapshotCallback=t,this.cancelCallback=r}onValue(t,r){this.snapshotCallback.call(null,t,r)}onCancel(t){return Q(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(t,r){this._repo=t,this._path=r}cancel(){const t=new cs;return q8(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){ja("OnDisconnect.remove",this._path);const t=new cs;return e1(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){ja("OnDisconnect.set",this._path),Af("OnDisconnect.set",t,this._path,!1);const r=new cs;return e1(this._repo,this._path,t,r.wrapCallback(()=>{})),r.promise}setWithPriority(t,r){ja("OnDisconnect.setWithPriority",this._path),Af("OnDisconnect.setWithPriority",t,this._path,!1),O8("OnDisconnect.setWithPriority",r);const n=new cs;return V8(this._repo,this._path,t,r,n.wrapCallback(()=>{})),n.promise}update(t){ja("OnDisconnect.update",this._path),tO("OnDisconnect.update",t,this._path);const r=new cs;return G8(this._repo,this._path,t,r.wrapCallback(()=>{})),r.promise}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(t,r,n,s){this._repo=t,this._path=r,this._queryParams=n,this._orderByCalled=s}get key(){return _e(this._path)?null:fb(this._path)}get ref(){return new ni(this._repo,this._path)}get _queryIdentifier(){const t=FN(this._queryParams),r=cb(t);return r==="{}"?"default":r}get _queryObject(){return FN(this._queryParams)}isEqual(t){if(t=mn(t),!(t instanceof Fb))return!1;const r=this._repo===t._repo,n=mb(this._path,t._path),s=this._queryIdentifier===t._queryIdentifier;return r&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+qU(this._path)}}class ni extends Fb{constructor(t,r){super(t,r,new xb,!1)}get parent(){const t=wP(this._path);return t===null?null:new ni(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}}class wu{constructor(t,r,n){this._node=t,this.ref=r,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const r=new Le(t),n=Ts(this.ref,t);return new wu(this._node.getChild(r),n,ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,s)=>t(new wu(s,Ts(this.ref,n),ft)))}hasChild(t){const r=new Le(t);return!this._node.getChild(r).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function G(e,t){return e=mn(e),e._checkNotDeleted("ref"),t!==void 0?Ts(e._root,t):e._root}function Ts(e,t){return e=mn(e),we(e._path)===null?T8("child","path",t):rO("child","path",t),new ni(e._repo,ht(e._path,t))}function iB(e){return e=mn(e),new sB(e._repo,e._path)}function dO(e,t){e=mn(e),ja("push",e._path),Af("push",t,e._path,!0);const r=iO(e._repo),n=tB(r),s=Ts(e,n),i=Ts(e,n);let o;return o=Promise.resolve(i),s.then=o.then.bind(o),s.catch=o.then.bind(o,void 0),s}function _u(e){return ja("remove",e._path),Me(e,null)}function Me(e,t){e=mn(e),ja("set",e._path),Af("set",t,e._path,!1);const r=new cs;return z8(e._repo,e._path,t,null,r.wrapCallback(()=>{})),r.promise}function ap(e,t){tO("update",t,e._path);const r=new cs;return W8(e._repo,e._path,t,r.wrapCallback(()=>{})),r.promise}function le(e){e=mn(e);const t=new uO(()=>{}),r=new op(t);return B8(e._repo,e,r).then(n=>new wu(n,new ni(e._repo,e._path),e._queryParams.getIndex()))}class op{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,r){const n=r._queryParams.getIndex();return new rB("value",this,new wu(t.snapshotNode,new ni(r._repo,r._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,r){return this.callbackContext.hasCancelCallback?new nB(this,t,r):null}matches(t){return t instanceof op?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function aB(e,t,r,n,s){let i;if(typeof n=="object"&&(i=void 0,s=n),typeof n=="function"&&(i=n),s&&s.onlyOnce){const c=r,u=(d,h)=>{X0(e._repo,e,l),c(d,h)};u.userCallback=r.userCallback,u.context=r.context,r=u}const o=new uO(r,i||void 0),l=new op(o);return K8(e._repo,e,l),()=>X0(e._repo,e,l)}function Gt(e,t,r,n){return aB(e,"value",t,r,n)}function Pf(e,t,r){X0(e._repo,e,null)}n8(ni);l8(ni);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oB="FIREBASE_DATABASE_EMULATOR_HOST",Q0={};let lB=!1;function cB(e,t,r,n){const s=t.lastIndexOf(":"),i=t.substring(0,s),o=Ku(i);e.repoInfo_=new hP(t,o,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,r),n&&(e.authTokenProvider_=n)}function uB(e,t,r,n,s){let i=n||e.options.databaseURL;i===void 0&&(e.options.projectId||qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kt("Using default host for project ",e.options.projectId),i=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o=t1(i,s),l=o.repoInfo,c;typeof process<"u"&&_N&&(c=_N[oB]),c?(i=`http://${c}?ns=${l.namespace}`,o=t1(i,s),l=o.repoInfo):o.repoInfo.secure;const u=new yU(e.name,e.options,t);I8("Invalid Firebase Database URL",o),_e(o.path)||qs("Database URL must point to the root of a Firebase Database (not including a child path).");const d=hB(l,e,u,new xU(e,r));return new fB(d,e)}function dB(e,t){const r=Q0[t];(!r||r[e.key]!==e)&&qs(`Database ${t}(${e.repoInfo_}) has already been deleted.`),Y8(e),delete r[e.key]}function hB(e,t,r,n){let s=Q0[t.name];s||(s={},Q0[t.name]=s);let i=s[e.toURLString()];return i&&qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new $8(e,lB,r,n),s[e.toURLString()]=i,i}let fB=class{constructor(t,r){this._repoInternal=t,this.app=r,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(U8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ni(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(dB(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&qs("Cannot call "+t+" on a deleted database.")}};function mB(e=YA(),t){const r=qA(e,"database").getImmediate({identifier:t});if(!r._instanceStarted){const n=DA("database");n&&pB(r,...n)}return r}function pB(e,t,r,n={}){e=mn(e),e._checkNotDeleted("useEmulator");const s=`${t}:${r}`,i=e._repoInternal;if(e._instanceStarted){if(s===e._repoInternal.repoInfo_.host&&mf(n,i.repoInfo_.emulatorOptions))return;qs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(i.repoInfo_.nodeAdmin)n.mockUserToken&&qs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Dh(Dh.OWNER);else if(n.mockUserToken){const l=typeof n.mockUserToken=="string"?n.mockUserToken:LA(n.mockUserToken,e.app.options.projectId);o=new Dh(l)}Ku(t)&&(MA(t),$A("Database",!0)),cB(i,s,n,o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gB(e){rU(GA),hu(new cl("database",(t,{instanceIdentifier:r})=>{const n=t.getProvider("app").getImmediate(),s=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return uB(n,s,i,r)},"PUBLIC").setMultipleInstances(!0)),$i(jN,NN,e),$i(jN,NN,"esm2020")}Ms.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)};Ms.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};gB();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hO="firebasestorage.googleapis.com",fO="storageBucket",vB=2*60*1e3,xB=10*60*1e3,yB=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nt=class mO extends Tl{constructor(t,r,n=0){super(Zg(t),`Firebase Storage: ${r} (${Zg(t)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,mO.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Zg(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var st;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function Zg(e){return"storage/"+e}function Bb(){const e="An unknown error occurred, please check the error payload for server response.";return new Nt(st.UNKNOWN,e)}function bB(e){return new Nt(st.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function wB(e){return new Nt(st.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _B(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(st.UNAUTHENTICATED,e)}function jB(){return new Nt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function NB(e){return new Nt(st.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function pO(){return new Nt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gO(){return new Nt(st.CANCELED,"User canceled the upload/download.")}function SB(e){return new Nt(st.INVALID_URL,"Invalid URL '"+e+"'.")}function EB(e){return new Nt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function CB(){return new Nt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fO+"' property when initializing the app?")}function vO(){return new Nt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function kB(){return new Nt(st.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function AB(){return new Nt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function PB(e){return new Nt(st.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function J0(e){return new Nt(st.INVALID_ARGUMENT,e)}function xO(){return new Nt(st.APP_DELETED,"The Firebase app was deleted.")}function OB(e){return new Nt(st.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zc(e,t){return new Nt(st.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function dc(e){throw new Nt(st.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let n;try{n=nn.makeFromUrl(t,r)}catch{return new nn(t,"")}if(n.path==="")return n;throw EB(t)}static makeFromUrl(t,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(_){_.path.charAt(_.path.length-1)==="/"&&(_.path_=_.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(_){_.path_=decodeURIComponent(_.path)}const d="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${d}/b/${s}/o${f}`,"i"),g={bucket:1,path:3},y=r===hO?"(?:storage.googleapis.com|storage.cloud.google.com)":r,p="([^?#]*)",v=new RegExp(`^https?://${y}/${s}/${p}`,"i"),w=[{regex:l,indices:c,postModify:i},{regex:m,indices:g,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let _=0;_<w.length;_++){const j=w[_],N=j.regex.exec(t);if(N){const E=N[j.indices.bucket];let T=N[j.indices.path];T||(T=""),n=new nn(E,T),j.postModify(n);break}}if(n==null)throw SB(t);return n}}class TB{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IB(e,t,r){let n=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let u=!1;function d(...p){u||(u=!0,t.apply(null,p))}function h(p){s=setTimeout(()=>{s=null,e(m,c())},p)}function f(){i&&clearTimeout(i)}function m(p,...v){if(u){f();return}if(p){f(),d.call(null,p,...v);return}if(c()||o){f(),d.call(null,p,...v);return}n<64&&(n*=2);let w;l===1?(l=2,w=0):w=(n+Math.random())*1e3,h(w)}let g=!1;function y(p){g||(g=!0,f(),!u&&(s!==null?(p||(l=2),clearTimeout(s),h(0)):p||(l=1)))}return h(0),i=setTimeout(()=>{o=!0,y(!0)},r),y}function DB(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RB(e){return e!==void 0}function MB(e){return typeof e=="function"}function LB(e){return typeof e=="object"&&!Array.isArray(e)}function lp(e){return typeof e=="string"||e instanceof String}function n1(e){return zb()&&e instanceof Blob}function zb(){return typeof Blob<"u"}function s1(e,t,r,n){if(n<t)throw J0(`Invalid value for '${e}'. Expected ${t} or greater.`);if(n>r)throw J0(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e,t,r){let n=t;return r==null&&(n=`https://${t}`),`${r}://${n}/v0${e}`}function yO(e){const t=encodeURIComponent;let r="?";for(const n in e)if(e.hasOwnProperty(n)){const s=t(n)+"="+t(e[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var Oa;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Oa||(Oa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bO(e,t){const r=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,i=t.indexOf(e)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $B{constructor(t,r,n,s,i,o,l,c,u,d,h,f=!0,m=!1){this.url_=t,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=h,this.retry=f,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,y)=>{this.resolve_=g,this.reject_=y,this.start_()})}start_(){const t=(n,s)=>{if(s){n(!1,new Vd(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Oa.NO_ERROR,c=i.getStatus();if(!l||bO(c,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===Oa.ABORT;n(!1,new Vd(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;n(!0,new Vd(u,i))})},r=(n,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());RB(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Bb();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?xO():gO();o(c)}else{const c=pO();o(c)}};this.canceled_?r(!1,new Vd(!1,null,!0)):this.backoffId_=IB(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&DB(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vd{constructor(t,r,n){this.wasSuccessCode=t,this.connection=r,this.canceled=!!n}}function UB(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function FB(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function BB(e,t){t&&(e["X-Firebase-GMPID"]=t)}function zB(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function WB(e,t,r,n,s,i,o=!0,l=!1){const c=yO(e.urlParams),u=e.url+c,d=Object.assign({},e.headers);return BB(d,t),UB(d,r),FB(d,i),zB(d,n),new $B(u,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HB(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function qB(...e){const t=HB();if(t!==void 0){const r=new t;for(let n=0;n<e.length;n++)r.append(e[n]);return r.getBlob()}else{if(zb())return new Blob(e);throw new Nt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VB(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GB(e){if(typeof atob>"u")throw PB("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ev{constructor(t,r){this.data=t,this.contentType=r||null}}function KB(e,t){switch(e){case us.RAW:return new ev(wO(t));case us.BASE64:case us.BASE64URL:return new ev(_O(e,t));case us.DATA_URL:return new ev(XB(t),QB(t))}throw Bb()}function wO(e){const t=[];for(let r=0;r<e.length;r++){let n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|n&63);else if((n&64512)===55296)if(!(r<e.length-1&&(e.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const i=n,o=e.charCodeAt(++r);n=65536|(i&1023)<<10|o&1023,t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|n&63)}else(n&64512)===56320?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|n&63)}return new Uint8Array(t)}function YB(e){let t;try{t=decodeURIComponent(e)}catch{throw zc(us.DATA_URL,"Malformed data URL.")}return wO(t)}function _O(e,t){switch(e){case us.BASE64:{const s=t.indexOf("-")!==-1,i=t.indexOf("_")!==-1;if(s||i)throw zc(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case us.BASE64URL:{const s=t.indexOf("+")!==-1,i=t.indexOf("/")!==-1;if(s||i)throw zc(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=GB(t)}catch(s){throw s.message.includes("polyfill")?s:zc(e,"Invalid character found")}const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}class jO{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw zc(us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=r[1]||null;n!=null&&(this.base64=JB(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=t.substring(t.indexOf(",")+1)}}function XB(e){const t=new jO(e);return t.base64?_O(us.BASE64,t.rest):YB(t.rest)}function QB(e){return new jO(e).contentType}function JB(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,r){let n=0,s="";n1(t)?(this.data_=t,n=t.size,s=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,r){if(n1(this.data_)){const n=this.data_,s=VB(n,t,r);return s===null?null:new Es(s)}else{const n=new Uint8Array(this.data_.buffer,t,r-t);return new Es(n,!0)}}static getBlob(...t){if(zb()){const r=t.map(n=>n instanceof Es?n.data_:n);return new Es(qB.apply(null,r))}else{const r=t.map(o=>lp(o)?KB(us.RAW,o).data:o.data_);let n=0;r.forEach(o=>{n+=o.byteLength});const s=new Uint8Array(n);let i=0;return r.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Es(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NO(e){let t;try{t=JSON.parse(e)}catch{return null}return LB(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZB(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ez(e,t){const r=t.split("/").filter(n=>n.length>0).join("/");return e.length===0?r:e+"/"+r}function SO(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tz(e,t){return t}class _r{constructor(t,r,n,s){this.server=t,this.local=r||t,this.writable=!!n,this.xform=s||tz}}let Gd=null;function rz(e){return!lp(e)||e.length<2?e:SO(e)}function Wb(){if(Gd)return Gd;const e=[];e.push(new _r("bucket")),e.push(new _r("generation")),e.push(new _r("metageneration")),e.push(new _r("name","fullPath",!0));function t(i,o){return rz(o)}const r=new _r("name");r.xform=t,e.push(r);function n(i,o){return o!==void 0?Number(o):o}const s=new _r("size");return s.xform=n,e.push(s),e.push(new _r("timeCreated")),e.push(new _r("updated")),e.push(new _r("md5Hash",null,!0)),e.push(new _r("cacheControl",null,!0)),e.push(new _r("contentDisposition",null,!0)),e.push(new _r("contentEncoding",null,!0)),e.push(new _r("contentLanguage",null,!0)),e.push(new _r("contentType",null,!0)),e.push(new _r("metadata","customMetadata",!0)),Gd=e,Gd}function nz(e,t){function r(){const n=e.bucket,s=e.fullPath,i=new nn(n,s);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:r})}function sz(e,t,r){const n={};n.type="file";const s=r.length;for(let i=0;i<s;i++){const o=r[i];n[o.local]=o.xform(n,t[o.server])}return nz(n,e),n}function EO(e,t,r){const n=NO(t);return n===null?null:sz(e,n,r)}function iz(e,t,r,n){const s=NO(t);if(s===null||!lp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const d=e.bucket,h=e.fullPath,f="/b/"+o(d)+"/o/"+o(h),m=td(f,r,n),g=yO({alt:"media",token:u});return m+g})[0]}function CO(e,t){const r={},n=t.length;for(let s=0;s<n;s++){const i=t[s];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}class Ll{constructor(t,r,n,s){this.url=t,this.method=r,this.handler=n,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(e){if(!e)throw Bb()}function Hb(e,t){function r(n,s){const i=EO(e,s,t);return Ls(i!==null),i}return r}function az(e,t){function r(n,s){const i=EO(e,s,t);return Ls(i!==null),iz(i,s,e.host,e._protocol)}return r}function rd(e){function t(r,n){let s;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?s=jB():s=_B():r.getStatus()===402?s=wB(e.bucket):r.getStatus()===403?s=NB(e.path):s=n,s.status=r.getStatus(),s.serverResponse=n.serverResponse,s}return t}function kO(e){const t=rd(e);function r(n,s){let i=t(n,s);return n.getStatus()===404&&(i=bB(e.path)),i.serverResponse=s.serverResponse,i}return r}function oz(e,t,r){const n=t.fullServerUrl(),s=td(n,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new Ll(s,i,Hb(e,r),o);return l.errorHandler=kO(t),l}function lz(e,t,r){const n=t.fullServerUrl(),s=td(n,e.host,e._protocol),i="GET",o=e.maxOperationRetryTime,l=new Ll(s,i,az(e,r),o);return l.errorHandler=kO(t),l}function cz(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function AO(e,t,r){const n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=cz(null,t)),n}function PO(e,t,r,n,s){const i=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let w="";for(let _=0;_<2;_++)w=w+Math.random().toString().slice(2);return w}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const u=AO(t,n,s),d=CO(u,r),h="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+c+"--",m=Es.getBlob(h,n,f);if(m===null)throw vO();const g={name:u.fullPath},y=td(i,e.host,e._protocol),p="POST",v=e.maxUploadRetryTime,b=new Ll(y,p,Hb(e,r),v);return b.urlParams=g,b.headers=o,b.body=m.uploadData(),b.errorHandler=rd(t),b}class Of{constructor(t,r,n,s){this.current=t,this.total=r,this.finalized=!!n,this.metadata=s||null}}function qb(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch{Ls(!1)}return Ls(!!r&&(t||["active"]).indexOf(r)!==-1),r}function uz(e,t,r,n,s){const i=t.bucketOnlyServerUrl(),o=AO(t,n,s),l={name:o.fullPath},c=td(i,e.host,e._protocol),u="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=CO(o,r),f=e.maxUploadRetryTime;function m(y){qb(y);let p;try{p=y.getResponseHeader("X-Goog-Upload-URL")}catch{Ls(!1)}return Ls(lp(p)),p}const g=new Ll(c,u,m,f);return g.urlParams=l,g.headers=d,g.body=h,g.errorHandler=rd(t),g}function dz(e,t,r,n){const s={"X-Goog-Upload-Command":"query"};function i(u){const d=qb(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ls(!1)}h||Ls(!1);const f=Number(h);return Ls(!isNaN(f)),new Of(f,n.size(),d==="final")}const o="POST",l=e.maxUploadRetryTime,c=new Ll(r,o,i,l);return c.headers=s,c.errorHandler=rd(t),c}const i1=256*1024;function hz(e,t,r,n,s,i,o,l){const c=new Of(0,0);if(o?(c.current=o.current,c.total=o.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw kB();const u=c.total-c.current;let d=u;s>0&&(d=Math.min(d,s));const h=c.current,f=h+d;let m="";d===0?m="finalize":u===d?m="upload, finalize":m="upload";const g={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${c.current}`},y=n.slice(h,f);if(y===null)throw vO();function p(_,j){const N=qb(_,["active","final"]),E=c.current+d,T=n.size();let S;return N==="final"?S=Hb(t,i)(_,j):S=null,new Of(E,T,N==="final",S)}const v="POST",b=t.maxUploadRetryTime,w=new Ll(r,v,p,b);return w.headers=g,w.body=y.uploadData(),w.progressCallback=l||null,w.errorHandler=rd(e),w}const Mr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tv(e){switch(e){case"running":case"pausing":case"canceling":return Mr.RUNNING;case"paused":return Mr.PAUSED;case"success":return Mr.SUCCESS;case"canceled":return Mr.CANCELED;case"error":return Mr.ERROR;default:return Mr.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fz{constructor(t,r,n){if(MB(t)||r!=null||n!=null)this.next=t,this.error=r??void 0,this.complete=n??void 0;else{const i=t;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class mz{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Oa.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Oa.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Oa.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,n,s,i){if(this.sent_)throw dc("cannot .send() more than once");if(Ku(t)&&n&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(r,t,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw dc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw dc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw dc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw dc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class pz extends mz{initXhr(){this.xhr_.responseType="text"}}function pa(){return new pz}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(t,r,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=r,this._metadata=n,this._mappings=Wb(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(st.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(bO(s.status,[]))if(i)s=pO();else{this.sleepTime=Math.max(this.sleepTime*2,yB),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(st.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return r=>this._updateProgress(t+r)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([r,n])=>{switch(this._state){case"running":t(r,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,r)=>{const n=uz(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,pa,t,r);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((r,n)=>{const s=dz(this._ref.storage,this._ref._location,t,this._blob),i=this._ref.storage._makeRequest(s,pa,r,n);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=i1*this._chunkMultiplier,r=new Of(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=hz(this._ref._location,this._ref.storage,n,this._blob,t,this._mappings,r,this._makeProgressCallback())}catch(c){this._error=c,this._transition("error");return}const l=this._ref.storage._makeRequest(o,pa,s,i,!1);this._request=l,l.getPromise().then(c=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(c.current),c.finalized?(this._metadata=c.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){i1*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,r)=>{const n=oz(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(n,pa,t,r);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,r)=>{const n=PO(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(n,pa,t,r);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const r=this._transferred;this._transferred=t,this._transferred!==r&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const r=this._state==="paused";this._state=t,r&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=gO(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=tv(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,r,n,s){const i=new fz(r||void 0,n||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(t,r){return this._promise.then(t,r)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const r=this._observers.indexOf(t);r!==-1&&this._observers.splice(r,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(r=>{this._notifyObserver(r)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(tv(this._state)){case Mr.SUCCESS:po(this._resolve.bind(null,this.snapshot))();break;case Mr.CANCELED:case Mr.ERROR:const r=this._reject;po(r.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(tv(this._state)){case Mr.RUNNING:case Mr.PAUSED:t.next&&po(t.next.bind(t,this.snapshot))();break;case Mr.SUCCESS:t.complete&&po(t.complete.bind(t))();break;case Mr.CANCELED:case Mr.ERROR:t.error&&po(t.error.bind(t,this._error))();break;default:t.error&&po(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(t,r){this._service=t,r instanceof nn?this._location=r:this._location=nn.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new Wa(t,r)}get root(){const t=new nn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return SO(this._location.path)}get storage(){return this._service}get parent(){const t=ZB(this._location.path);if(t===null)return null;const r=new nn(this._location.bucket,t);return new Wa(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw OB(t)}}function vz(e,t,r){e._throwIfRoot("uploadBytes");const n=PO(e.storage,e._location,Wb(),new Es(t,!0),r);return e.storage.makeRequestWithTokens(n,pa).then(s=>({metadata:s,ref:e}))}function xz(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new gz(e,new Es(t),r)}function yz(e){e._throwIfRoot("getDownloadURL");const t=lz(e.storage,e._location,Wb());return e.storage.makeRequestWithTokens(t,pa).then(r=>{if(r===null)throw AB();return r})}function bz(e,t){const r=ez(e._location.path,t),n=new nn(e._location.bucket,r);return new Wa(e.storage,n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wz(e){return/^[A-Za-z]+:\/\//.test(e)}function _z(e,t){return new Wa(e,t)}function OO(e,t){if(e instanceof Vb){const r=e;if(r._bucket==null)throw CB();const n=new Wa(r,r._bucket);return t!=null?OO(n,t):n}else return t!==void 0?bz(e,t):e}function jz(e,t){if(t&&wz(t)){if(e instanceof Vb)return _z(e,t);throw J0("To use ref(service, url), the first argument must be a Storage instance.")}else return OO(e,t)}function a1(e,t){const r=t==null?void 0:t[fO];return r==null?null:nn.makeFromBucketSpec(r,e)}function Nz(e,t,r,n={}){e.host=`${t}:${r}`;const s=Ku(t);s&&(MA(`https://${e.host}/b`),$A("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=n;i&&(e._overrideAuthToken=typeof i=="string"?i:LA(i,e.app.options.projectId))}class Vb{constructor(t,r,n,s,i,o=!1){this.app=t,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=hO,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=vB,this._maxUploadRetryTime=xB,this._requests=new Set,s!=null?this._bucket=nn.makeFromBucketSpec(s,this._host):this._bucket=a1(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=nn.makeFromBucketSpec(this._url,t):this._bucket=a1(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){s1("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){s1("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){if(VA(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Wa(this,t)}_makeRequest(t,r,n,s,i=!0){if(this._deleted)return new TB(xO());{const o=WB(t,this._appId,n,s,r,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,n,s).getPromise()}}const o1="@firebase/storage",l1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="storage";function Sz(e,t,r){return e=mn(e),vz(e,t,r)}function Ez(e,t,r){return e=mn(e),xz(e,t,r)}function IO(e){return e=mn(e),yz(e)}function DO(e,t){return e=mn(e),jz(e,t)}function Cz(e=YA(),t){e=mn(e);const n=qA(e,TO).getImmediate({identifier:t}),s=DA("storage");return s&&kz(n,...s),n}function kz(e,t,r,n={}){Nz(e,t,r,n)}function Az(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Vb(r,n,s,t,GA)}function Pz(){hu(new cl(TO,Az,"PUBLIC").setMultipleInstances(!0)),$i(o1,l1,""),$i(o1,l1,"esm2020")}Pz();const RO={apiKey:"AIzaSyBqJNXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",authDomain:"educare-b132a.firebaseapp.com",databaseURL:"https://educare-b132a-default-rtdb.firebaseio.com",projectId:"educare-b132a",storageBucket:"educare-b132a.appspot.com",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdefghijklmnop"};console.log("Firebase config:",RO);let Gb;try{Gb=KA(RO),console.log("Firebase app initialized successfully")}catch(e){throw console.error("Firebase initialization error:",e),e}let V;try{V=mB(Gb),console.log("Firebase database initialized successfully")}catch(e){throw console.error("Firebase database initialization error:",e),e}let Tf;try{Tf=Cz(Gb),console.log("Firebase storage initialized successfully")}catch(e){throw console.error("Firebase storage initialization error:",e),e}class Oz{constructor(){ho(this,"USER_KEY","educare_user")}storeUser(t){try{localStorage.setItem(this.USER_KEY,JSON.stringify(t)),console.log("User stored successfully:",t)}catch(r){console.error("Failed to store user:",r)}}getStoredUser(){try{const t=localStorage.getItem(this.USER_KEY);if(t){const r=JSON.parse(t);return console.log("Retrieved stored user:",r),r}return null}catch(t){return console.error("Failed to retrieve user:",t),null}}getCurrentUser(){return this.getStoredUser()}clearUser(){try{localStorage.removeItem(this.USER_KEY),console.log("User data cleared")}catch(t){console.error("Failed to clear user:",t)}}hasStoredUser(){return localStorage.getItem(this.USER_KEY)!==null}}const lt=new Oz,Tz=()=>{const e=localStorage.getItem("counselor");if(e)try{const t=JSON.parse(e);return{username:t.email,name:t.name,grade:"",role:"counselor",school:""}}catch(t){console.error("Failed to parse counselor data:",t)}return lt.getStoredUser()};class Iz{extractUsername(t){return t.split("@")[0].toLowerCase()}async authenticateUser(t){try{const{email:r,password:n}=t,s=this.extractUsername(r);console.log("Attempting to authenticate:",s);const i=G(V),o=await le(Ts(i,"Schoolss"));if(!o.exists())return console.log("No schools found in database"),{success:!1,error:"NETWORK_ERROR",message:"Database connection error. Please try again."};const l=o.val();console.log("Found schools:",Object.keys(l));let c=!1,u=!1,d=null,h=null;console.log("=== STEP 1: Checking all schools ===");for(const[f,m]of Object.entries(l))if(console.log(`Searching in school: ${f}`),m&&typeof m=="object"&&"users"in m){const g=m.users;if(g&&s in g){c=!0;const y=g[s];if(console.log(`Found user ${s} in ${f}:`,y),y.Password===n){console.log("Password verified successfully for student");const p=y.Name||y.name||"Student";let v;try{const _=await le(Ts(i,`Schoolss/${f}/Individual average/Students`));if(_.exists()){const j=_.val();if(j&&p in j){const N=j[p];v=typeof N=="string"?parseFloat(N):N,console.log(`Found average grade for ${p}:`,v)}}}catch(_){console.error("Error fetching student average:",_)}let b={};try{const _=await le(Ts(i,`Schoolss/${f}/Marks`));if(_.exists()){const j=_.val();for(const[N,E]of Object.entries(j))if(E&&typeof E=="object"&&s in E){const T=E[s];if(T&&T.Rating&&T.Rating["sub rating"]){const S=T.Rating["sub rating"],D=typeof S=="string"?parseFloat(S):S;b[N]=D}}}}catch(_){console.error("Error fetching subject grades:",_)}const w={username:s,name:p,grade:y.Grade||"Unknown",role:y.Role||"Student",school:f,averageGrade:v,subjectGrades:b};lt.storeUser(w),d={success:!0,user:{username:s,name:p,grade:y.Grade||"Unknown",role:y.Role||"Student",school:f,averageGrade:v,subjectGrades:b}};break}else console.log("Password mismatch for student - will continue checking counselors")}}if(d)return console.log("=== Returning successful school login ==="),d;console.log("=== STEP 2: Checking University Counsellors ==="),console.log(`Comparing FULL email: "${r}" (NOT stripped username: "${s}")`);try{const f=await le(Ts(i,"University Data/University Counsellors "));if(f.exists()){const m=f.val();console.log("Found counselors:",Object.keys(m));for(const[g,y]of Object.entries(m))if(console.log(`Checking counselor: ${g}`),y&&typeof y=="object"){const p=y,v=p.email||p.Email;console.log(`Counselor email: "${v}", User entered: "${r}"`),console.log("Counselor data structure:",JSON.stringify(p,null,2));const b=r.toLowerCase(),w=v?v.toLowerCase():"";if(console.log(`Email comparison: "${w}" === "${b}" ? ${w===b}`),v&&w===b)if(console.log(` Found matching email for counselor: ${g}`),u=!0,console.log(`Password comparison: "${p.Password}" === "${n}" ? ${p.Password===n}`),p.Password===n){console.log(" Password verified for counselor");let _="counselor";p.Role==="Pool Management"?_="pool_management":p.Role==="Essay"&&(_="essay");const j={username:r,name:p.Name||g,grade:"Counselor",role:_,school:"University Counsellor"};lt.storeUser(j),h={success:!0,user:{username:r,name:p.Name||g,grade:"Counselor",role:_,school:"University Counsellor"}};break}else console.log("Password mismatch for counselor")}}else console.log("University Counsellors node does not exist")}catch(f){console.error("Error checking University Counsellors:",f)}return h?(console.log("=== Returning successful counselor login ==="),h):(console.log("=== STEP 3: Determining error ==="),console.log(`Found in schools: ${c}, Found in counselors: ${u}`),c||u?(console.log("User found but password incorrect"),{success:!1,error:"WRONG_PASSWORD",message:"The password you entered is incorrect. Please try again."}):(console.log("Email not found in either Schoolss or University Counsellors"),{success:!1,error:"USER_NOT_FOUND",message:"This email address is not in our database. Please check your email or contact your administrator."}))}catch(r){return console.error("Authentication error:",r),{success:!1,error:"NETWORK_ERROR",message:"Network error. Please check your connection and try again."}}}}const Dz=()=>{lt.clearUser()},MO=new Iz;var Z0=function(e,t){return Z0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])},Z0(e,t)};function LO(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Z0(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var If=function(){return If=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},If.apply(this,arguments)};function $l(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function $O(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function UO(e,t){return function(r,n){t(r,n,e)}}function FO(e,t,r,n,s,i){function o(v){if(v!==void 0&&typeof v!="function")throw new TypeError("Function expected");return v}for(var l=n.kind,c=l==="getter"?"get":l==="setter"?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h,f=!1,m=r.length-1;m>=0;m--){var g={};for(var y in n)g[y]=y==="access"?{}:n[y];for(var y in n.access)g.access[y]=n.access[y];g.addInitializer=function(v){if(f)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(v||null))};var p=(0,r[m])(l==="accessor"?{get:d.get,set:d.set}:d[c],g);if(l==="accessor"){if(p===void 0)continue;if(p===null||typeof p!="object")throw new TypeError("Object expected");(h=o(p.get))&&(d.get=h),(h=o(p.set))&&(d.set=h),(h=o(p.init))&&s.unshift(h)}else(h=o(p))&&(l==="field"?s.unshift(h):d[c]=h)}u&&Object.defineProperty(u,n.name,d),f=!0}function BO(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function zO(e){return typeof e=="symbol"?e:"".concat(e)}function WO(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function HO(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function ie(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(h){o(h)}}function c(d){try{u(n.throw(d))}catch(h){o(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})}function qO(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(r=0)),r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var cp=Object.create?function(e,t,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};function VO(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&cp(t,e,r)}function Df(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Kb(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function GO(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Kb(arguments[t]));return e}function KO(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}function YO(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function pl(e){return this instanceof pl?(this.v=e,this):new pl(e)}function XO(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(m){return function(g){return Promise.resolve(g).then(m,h)}}function l(m,g){n[m]&&(s[m]=function(y){return new Promise(function(p,v){i.push([m,y,p,v])>1||c(m,y)})},g&&(s[m]=g(s[m])))}function c(m,g){try{u(n[m](g))}catch(y){f(i[0][3],y)}}function u(m){m.value instanceof pl?Promise.resolve(m.value.v).then(d,h):f(i[0][2],m)}function d(m){c("next",m)}function h(m){c("throw",m)}function f(m,g){m(g),i.shift(),i.length&&c(i[0][0],i[0][1])}}function QO(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:pl(e[s](o)),done:!1}:i?i(o):o}:i}}function JO(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Df=="function"?Df(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,c){o=e[i](o),s(l,c,o.done,o.value)})}}function s(i,o,l,c){Promise.resolve(c).then(function(u){i({value:u,done:l})},o)}}function ZO(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Rz=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ex=function(e){return ex=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},ex(e)};function eT(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=ex(e),n=0;n<r.length;n++)r[n]!=="default"&&cp(t,e,r[n]);return Rz(t,e),t}function tT(e){return e&&e.__esModule?e:{default:e}}function rT(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function nT(e,t,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(e,r):s?s.value=r:t.set(e,r),r}function sT(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function iT(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Mz=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function aT(e){function t(i){e.error=e.hasError?new Mz(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function s(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(s,function(o){return t(o),s()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return s()}function oT(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,s,i,o){return n?t?".jsx":".js":s&&(!i||!o)?r:s+i+"."+o.toLowerCase()+"js"}):e}const Lz={__extends:LO,__assign:If,__rest:$l,__decorate:$O,__param:UO,__esDecorate:FO,__runInitializers:BO,__propKey:zO,__setFunctionName:WO,__metadata:HO,__awaiter:ie,__generator:qO,__createBinding:cp,__exportStar:VO,__values:Df,__read:Kb,__spread:GO,__spreadArrays:KO,__spreadArray:YO,__await:pl,__asyncGenerator:XO,__asyncDelegator:QO,__asyncValues:JO,__makeTemplateObject:ZO,__importStar:eT,__importDefault:tT,__classPrivateFieldGet:rT,__classPrivateFieldSet:nT,__classPrivateFieldIn:sT,__addDisposableResource:iT,__disposeResources:aT,__rewriteRelativeImportExtension:oT},$z=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:iT,get __assign(){return If},__asyncDelegator:QO,__asyncGenerator:XO,__asyncValues:JO,__await:pl,__awaiter:ie,__classPrivateFieldGet:rT,__classPrivateFieldIn:sT,__classPrivateFieldSet:nT,__createBinding:cp,__decorate:$O,__disposeResources:aT,__esDecorate:FO,__exportStar:VO,__extends:LO,__generator:qO,__importDefault:tT,__importStar:eT,__makeTemplateObject:ZO,__metadata:HO,__param:UO,__propKey:zO,__read:Kb,__rest:$l,__rewriteRelativeImportExtension:oT,__runInitializers:BO,__setFunctionName:WO,__spread:GO,__spreadArray:YO,__spreadArrays:KO,__values:Df,default:Lz},Symbol.toStringTag,{value:"Module"})),Uz=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);class Yb extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Fz extends Yb{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class c1 extends Yb{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class u1 extends Yb{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var tx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(tx||(tx={}));class Bz{constructor(t,{headers:r={},customFetch:n,region:s=tx.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Uz(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return ie(this,arguments,void 0,function*(r,n={}){var s;let i,o;try{const{headers:l,method:c,body:u,signal:d,timeout:h}=n;let f={},{region:m}=n;m||(m=this.region);const g=new URL(`${this.url}/${r}`);m&&m!=="any"&&(f["x-region"]=m,g.searchParams.set("forceFunctionRegion",m));let y;u&&(l&&!Object.prototype.hasOwnProperty.call(l,"Content-Type")||!l)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",y=u):typeof u=="string"?(f["Content-Type"]="text/plain",y=u):typeof FormData<"u"&&u instanceof FormData?y=u:(f["Content-Type"]="application/json",y=JSON.stringify(u)):y=u;let p=d;h&&(o=new AbortController,i=setTimeout(()=>o.abort(),h),d?(p=o.signal,d.addEventListener("abort",()=>o.abort())):p=o.signal);const v=yield this.fetch(g.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),l),body:y,signal:p}).catch(j=>{throw new Fz(j)}),b=v.headers.get("x-relay-error");if(b&&b==="true")throw new c1(v);if(!v.ok)throw new u1(v);let w=((s=v.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield v.json():w==="application/octet-stream"||w==="application/pdf"?_=yield v.blob():w==="text/event-stream"?_=v:w==="multipart/form-data"?_=yield v.formData():_=yield v.text(),{data:_,error:null,response:v}}catch(l){return{data:null,error:l,response:l instanceof u1||l instanceof c1?l.context:void 0}}finally{i&&clearTimeout(i)}})}}var Nr={};const Ul=G5($z);var Kd={},Yd={},Xd={},Qd={},Jd={},Zd={},d1;function lT(){if(d1)return Zd;d1=1,Object.defineProperty(Zd,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return Zd.default=e,Zd}var h1;function cT(){if(h1)return Jd;h1=1,Object.defineProperty(Jd,"__esModule",{value:!0});const t=Ul.__importDefault(lT());class r{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let l=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,d,h,f;let m=null,g=null,y=null,p=c.status,v=c.statusText;if(c.ok){if(this.method!=="HEAD"){const j=await c.text();j===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?g=j:g=JSON.parse(j))}const w=(d=this.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),_=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");w&&_&&_.length>1&&(y=parseInt(_[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(m={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,y=null,p=406,v="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const w=await c.text();try{m=JSON.parse(w),Array.isArray(m)&&c.status===404&&(g=[],m=null,p=200,v="OK")}catch{c.status===404&&w===""?(p=204,v="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((f=m==null?void 0:m.details)===null||f===void 0)&&f.includes("0 rows"))&&(m=null,p=200,v="OK"),m&&this.shouldThrowOnError)throw new t.default(m)}return{error:m,data:g,count:y,status:p,statusText:v}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,d,h,f,m,g;let y="";const p=c==null?void 0:c.cause;if(p){const v=(u=p==null?void 0:p.message)!==null&&u!==void 0?u:"",b=(d=p==null?void 0:p.code)!==null&&d!==void 0?d:"";y=`${(h=c==null?void 0:c.name)!==null&&h!==void 0?h:"FetchError"}: ${c==null?void 0:c.message}`,y+=`

Caused by: ${(f=p==null?void 0:p.name)!==null&&f!==void 0?f:"Error"}: ${v}`,b&&(y+=` (${b})`),p!=null&&p.stack&&(y+=`
${p.stack}`)}else y=(m=c==null?void 0:c.stack)!==null&&m!==void 0?m:"";return{error:{message:`${(g=c==null?void 0:c.name)!==null&&g!==void 0?g:"FetchError"}: ${c==null?void 0:c.message}`,details:y,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),l.then(s,i)}returns(){return this}overrideTypes(){return this}}return Jd.default=r,Jd}var f1;function uT(){if(f1)return Qd;f1=1,Object.defineProperty(Qd,"__esModule",{value:!0});const t=Ul.__importDefault(cT());class r extends t.default{select(s){let i=!1;const o=(s??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:c=l}={}){const u=c?`${c}.order`:"order",d=this.url.searchParams.get(u);return this.url.searchParams.set(u,`${d?`${d},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:l=o}={}){const c=typeof l>"u"?"offset":`${l}.offset`,u=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(u,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:c=!1,format:u="text"}={}){var d;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${u}; for="${f}"; options=${h};`),u==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Qd.default=r,Qd}var m1;function Xb(){if(m1)return Xd;m1=1,Object.defineProperty(Xd,"__esModule",{value:!0});const t=Ul.__importDefault(uT()),r=new RegExp("[,()]");class n extends t.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const l=Array.from(new Set(o)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${l})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:l,type:c}={}){let u="";c==="plain"?u="pl":c==="phrase"?u="ph":c==="websearch"&&(u="w");const d=l===void 0?"":`(${l})`;return this.url.searchParams.append(i,`${u}fts${d}.${o}`),this}match(i){return Object.entries(i).forEach(([o,l])=>{this.url.searchParams.append(o,`eq.${l}`)}),this}not(i,o,l){return this.url.searchParams.append(i,`not.${o}.${l}`),this}or(i,{foreignTable:o,referencedTable:l=o}={}){const c=l?`${l}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,l){return this.url.searchParams.append(i,`${o}.${l}`),this}}return Xd.default=n,Xd}var p1;function dT(){if(p1)return Yd;p1=1,Object.defineProperty(Yd,"__esModule",{value:!0});const t=Ul.__importDefault(Xb());class r{constructor(s,{headers:i={},schema:o,fetch:l}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(s,i){const{head:o=!1,count:l}=i??{},c=o?"HEAD":"GET";let u=!1;const d=(s??"*").split("").map(h=>/\s/.test(h)&&!u?"":(h==='"'&&(u=!u),h)).join("");return this.url.searchParams.set("select",d),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var l;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const u=s.reduce((d,h)=>d.concat(Object.keys(h)),[]);if(u.length>0){const d=[...new Set(u)].map(h=>`"${h}"`);this.url.searchParams.set("columns",d.join(","))}}return new t.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:c=!0}={}){var u;const d="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,m)=>f.concat(Object.keys(m)),[]);if(h.length>0){const f=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",f.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}update(s,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Yd.default=r,Yd}var g1;function zz(){if(g1)return Kd;g1=1,Object.defineProperty(Kd,"__esModule",{value:!0});const e=Ul,t=e.__importDefault(dT()),r=e.__importDefault(Xb());class n{constructor(i,{headers:o={},schema:l,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:c=!1,count:u}={}){var d;let h;const f=new URL(`${this.url}/rpc/${i}`);let m;l||c?(h=l?"HEAD":"GET",Object.entries(o).filter(([y,p])=>p!==void 0).map(([y,p])=>[y,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([y,p])=>{f.searchParams.append(y,p)})):(h="POST",m=o);const g=new Headers(this.headers);return u&&g.set("Prefer",`count=${u}`),new r.default({method:h,url:f,headers:g,schema:this.schemaName,body:m,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}}return Kd.default=n,Kd}Object.defineProperty(Nr,"__esModule",{value:!0});var hT=Nr.PostgrestError=_T=Nr.PostgrestBuilder=bT=Nr.PostgrestTransformBuilder=xT=Nr.PostgrestFilterBuilder=gT=Nr.PostgrestQueryBuilder=mT=Nr.PostgrestClient=void 0;const Fl=Ul,fT=Fl.__importDefault(zz());var mT=Nr.PostgrestClient=fT.default;const pT=Fl.__importDefault(dT());var gT=Nr.PostgrestQueryBuilder=pT.default;const vT=Fl.__importDefault(Xb());var xT=Nr.PostgrestFilterBuilder=vT.default;const yT=Fl.__importDefault(uT());var bT=Nr.PostgrestTransformBuilder=yT.default;const wT=Fl.__importDefault(cT());var _T=Nr.PostgrestBuilder=wT.default;const jT=Fl.__importDefault(lT());hT=Nr.PostgrestError=jT.default;var NT=Nr.default={PostgrestClient:fT.default,PostgrestQueryBuilder:pT.default,PostgrestFilterBuilder:vT.default,PostgrestTransformBuilder:yT.default,PostgrestBuilder:wT.default,PostgrestError:jT.default};const Wz=mC({__proto__:null,get PostgrestBuilder(){return _T},get PostgrestClient(){return mT},get PostgrestError(){return hT},get PostgrestFilterBuilder(){return xT},get PostgrestQueryBuilder(){return gT},get PostgrestTransformBuilder(){return bT},default:NT},[Nr]),{PostgrestClient:Hz,PostgrestQueryBuilder:Qoe,PostgrestFilterBuilder:Joe,PostgrestTransformBuilder:Zoe,PostgrestBuilder:ele,PostgrestError:tle}=NT||Wz;class qz{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Vz="2.83.0",Gz=`realtime-js/${Vz}`,ST="1.0.0",Kz="2.0.0",v1=ST,rx=1e4,Yz=1e3,Xz=100;var ga;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(ga||(ga={}));var Pt;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Pt||(Pt={}));var bn;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(bn||(bn={}));var nx;(function(e){e.websocket="websocket"})(nx||(nx={}));var va;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(va||(va={}));class Qz{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(n))}_binaryEncodePush(t){var r,n;const{event:s,topic:i,payload:o}=t,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=this.META_LENGTH+c.length+l.length+i.length+s.length,d=new ArrayBuffer(this.HEADER_LENGTH+u);let h=new DataView(d),f=0;h.setUint8(f++,this.KINDS.push),h.setUint8(f++,c.length),h.setUint8(f++,l.length),h.setUint8(f++,i.length),h.setUint8(f++,s.length),Array.from(c,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(l,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(i,g=>h.setUint8(f++,g.charCodeAt(0))),Array.from(s,g=>h.setUint8(f++,g.charCodeAt(0)));var m=new Uint8Array(d.byteLength+o.byteLength);return m.set(new Uint8Array(d),0),m.set(new Uint8Array(o),d.byteLength),m.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,n,s,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let m=new DataView(f),g=0;m.setUint8(g++,this.KINDS.userBroadcastPush),m.setUint8(g++,c.length),m.setUint8(g++,l.length),m.setUint8(g++,o.length),m.setUint8(g++,u.length),m.setUint8(g++,this.BINARY_ENCODING),Array.from(c,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(l,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(o,p=>m.setUint8(g++,p.charCodeAt(0))),Array.from(u,p=>m.setUint8(g++,p.charCodeAt(0)));var y=new Uint8Array(f.byteLength+d.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(d),f.byteLength),y.buffer}_encodeJsonUserBroadcastPush(t){var r,n,s,i;const o=t.topic,l=(r=t.ref)!==null&&r!==void 0?r:"",c=(n=t.join_ref)!==null&&n!==void 0?n:"",u=t.payload.event,d=(i=(s=t.payload)===null||s===void 0?void 0:s.payload)!==null&&i!==void 0?i:{},f=new TextEncoder().encode(JSON.stringify(d)).buffer,m=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+l.length+o.length+u.length,g=new ArrayBuffer(this.HEADER_LENGTH+m);let y=new DataView(g),p=0;y.setUint8(p++,this.KINDS.userBroadcastPush),y.setUint8(p++,c.length),y.setUint8(p++,l.length),y.setUint8(p++,o.length),y.setUint8(p++,u.length),y.setUint8(p++,this.JSON_ENCODING),Array.from(c,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(l,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(o,b=>y.setUint8(p++,b.charCodeAt(0))),Array.from(u,b=>y.setUint8(p++,b.charCodeAt(0)));var v=new Uint8Array(g.byteLength+f.byteLength);return v.set(new Uint8Array(g),0),v.set(new Uint8Array(f),g.byteLength),v.buffer}decode(t,r){if(this._isArrayBuffer(t)){let n=this._binaryDecode(t);return r(n)}if(typeof t=="string"){const n=JSON.parse(t),[s,i,o,l,c]=n;return r({join_ref:s,ref:i,topic:o,event:l,payload:c})}return r({})}_binaryDecode(t){const r=new DataView(t),n=r.getUint8(0),s=new TextDecoder;switch(n){case this.KINDS.push:return this._decodePush(t,r,s);case this.KINDS.reply:return this._decodeReply(t,r,s);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,s);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,s)}}_decodePush(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3);let l=this.HEADER_LENGTH+this.META_LENGTH-1;const c=n.decode(t.slice(l,l+s));l=l+s;const u=n.decode(t.slice(l,l+i));l=l+i;const d=n.decode(t.slice(l,l+o));l=l+o;const h=JSON.parse(n.decode(t.slice(l,t.byteLength)));return{join_ref:c,ref:null,topic:u,event:d,payload:h}}_decodeReply(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+this.META_LENGTH;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=n.decode(t.slice(c,c+l));c=c+l;const m=JSON.parse(n.decode(t.slice(c,t.byteLength))),g={status:f,response:m};return{join_ref:u,ref:d,topic:h,event:bn.reply,payload:g}}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{join_ref:null,ref:null,topic:l,event:c,payload:u}}_decodeUserBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2),o=r.getUint8(3),l=r.getUint8(4);let c=this.HEADER_LENGTH+4;const u=n.decode(t.slice(c,c+s));c=c+s;const d=n.decode(t.slice(c,c+i));c=c+i;const h=n.decode(t.slice(c,c+o));c=c+o;const f=t.slice(c,t.byteLength),m=l===this.JSON_ENCODING?JSON.parse(n.decode(f)):f,g={type:this.BROADCAST,event:d,payload:m};return o>0&&(g.meta=JSON.parse(h)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST,payload:g}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class ET{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ke||(Ke={}));const x1=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=Jz(o,e,t,s),i),{}):{}},Jz=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,o=r[e];return i&&!n.includes(i)?CT(i,o):sx(o)},CT=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return r7(t,r)}switch(e){case Ke.bool:return Zz(t);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return e7(t);case Ke.json:case Ke.jsonb:return t7(t);case Ke.timestamp:return n7(t);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return sx(t);default:return sx(t)}},sx=e=>e,Zz=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},e7=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},t7=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},r7=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>CT(t,l))}return e},n7=e=>typeof e=="string"?e.replace(" ","T"):e,kT=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class rv{constructor(t,r,n={},s=rx){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var y1;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(y1||(y1={}));class Wc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Wc.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=Wc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Wc.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const h=i[u];if(h){const f=d.map(p=>p.presence_ref),m=h.map(p=>p.presence_ref),g=d.filter(p=>m.indexOf(p.presence_ref)<0),y=h.filter(p=>f.indexOf(p.presence_ref)<0);g.length>0&&(l[u]=g),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var b1;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(b1||(b1={}));var Hc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Hc||(Hc={}));var js;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(js||(js={}));class Qb{constructor(t,r={config:{}},n){var s,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Pt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new rv(this,bn.join,this.params,this.timeout),this.rejoinTimer=new ET(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Pt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Pt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Pt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(bn.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Wc(this),this.broadcastEndpointURL=kT(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Pt.closed){const{config:{broadcast:o,presence:l,private:c}}=this.params,u=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[Hc.PRESENCE]&&this.bindings[Hc.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:d}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>t==null?void 0:t(js.CHANNEL_ERROR,m)),this._onClose(()=>t==null?void 0:t(js.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var g;if(this.socket.setAuth(),m===void 0){t==null||t(js.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,p=(g=y==null?void 0:y.length)!==null&&g!==void 0?g:0,v=[];for(let b=0;b<p;b++){const w=y[b],{filter:{event:_,schema:j,table:N,filter:E}}=w,T=m&&m[b];if(T&&T.event===_&&T.schema===j&&T.table===N&&T.filter===E)v.push(Object.assign(Object.assign({},w),{id:T.id}));else{this.unsubscribe(),this.state=Pt.errored,t==null||t(js.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=v,t&&t(js.SUBSCRIBED);return}}).receive("error",m=>{this.state=Pt.errored,t==null||t(js.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(js.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Pt.joined&&t===Hc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(l.status===202)return{success:!0};let c=l.statusText;try{const u=await l.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Pt.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(bn.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new rv(this,bn.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Pt.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new rv(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>Xz){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=bn;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var g,y,p;return((g=m.filter)===null||g===void 0?void 0:g.event)==="*"||((p=(y=m.filter)===null||y===void 0?void 0:y.event)===null||p===void 0?void 0:p.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var g,y,p,v,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const _=m.id,j=(g=m.filter)===null||g===void 0?void 0:g.event;return _&&((y=r.ids)===null||y===void 0?void 0:y.includes(_))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((p=r.data)===null||p===void 0?void 0:p.type.toLocaleLowerCase()))}else{const _=(b=(v=m==null?void 0:m.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return _==="*"||_===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const g=f.data,{schema:y,table:p,commit_timestamp:v,type:b,errors:w}=g;f=Object.assign(Object.assign({},{schema:y,table:p,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}m.callback(f,n)})}_isClosed(){return this.state===Pt.closed}_isJoined(){return this.state===Pt.joined}_isJoining(){return this.state===Pt.joining}_isLeaving(){return this.state===Pt.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Qb.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(bn.close,{},t)}_onError(t){this._on(bn.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Pt.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=x1(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=x1(t.columns,t.old_record)),r}}const nv=()=>{},eh={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},s7=[1e3,2e3,5e3,1e4],i7=1e4,a7=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class o7{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=rx,this.transport=null,this.heartbeatIntervalMs=eh.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nv,this.ref=0,this.reconnectTimer=null,this.vsn=v1,this.logger=nv,this.conn=null,this.sendBuffer=[],this.serializer=new Qz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${nx.websocket}`,this.httpEndpoint=kT(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=qz.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case ga.connecting:return va.Connecting;case ga.open:return va.Open;case ga.closing:return va.Closing;default:return va.Closed}}isConnected(){return this.connectionState()===va.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Qb(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Yz,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},eh.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===ga.open||this.conn.readyState===ga.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(bn.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([a7],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Gz};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(bn.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ET(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},eh.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,o,l,c,u,d,h,f,m;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:rx,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:eh.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t==null?void 0:t.heartbeatCallback)!==null&&l!==void 0?l:nv,this.vsn=(c=t==null?void 0:t.vsn)!==null&&c!==void 0?c:v1,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t==null?void 0:t.reconnectAfterMs)!==null&&u!==void 0?u:g=>s7[g-1]||i7,this.vsn){case ST:this.encode=(d=t==null?void 0:t.encode)!==null&&d!==void 0?d:(g,y)=>y(JSON.stringify(g)),this.decode=(h=t==null?void 0:t.decode)!==null&&h!==void 0?h:(g,y)=>y(JSON.parse(g));break;case Kz:this.encode=(f=t==null?void 0:t.encode)!==null&&f!==void 0?f:this.serializer.encode.bind(this.serializer),this.decode=(m=t==null?void 0:t.decode)!==null&&m!==void 0?m:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Jb extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function ut(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class l7 extends Jb{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ix extends Jb{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Zb=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),c7=()=>Response,ax=e=>{if(Array.isArray(e))return e.map(r=>ax(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ax(n)}),t},u7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},sv=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},d7=(e,t,r)=>ie(void 0,void 0,void 0,function*(){const n=yield c7();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,o=(s==null?void 0:s.statusCode)||i+"";t(new l7(sv(s),i,o))}).catch(s=>{t(new ix(sv(s),s))}):t(new ix(sv(e),e))}),h7=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(u7(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function nd(e,t,r,n,s,i){return ie(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,h7(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>d7(c,l,n))})})}function ju(e,t,r,n){return ie(this,void 0,void 0,function*(){return nd(e,"GET",t,r,n)})}function Un(e,t,r,n,s){return ie(this,void 0,void 0,function*(){return nd(e,"POST",t,n,s,r)})}function ox(e,t,r,n,s){return ie(this,void 0,void 0,function*(){return nd(e,"PUT",t,n,s,r)})}function f7(e,t,r,n){return ie(this,void 0,void 0,function*(){return nd(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function ew(e,t,r,n,s){return ie(this,void 0,void 0,function*(){return nd(e,"DELETE",t,n,s,r)})}class m7{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}})}}var AT;class p7{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[AT]="BlobDownloadBuilder",this.promise=null}asStream(){return new m7(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ut(t))return{data:null,error:t};throw t}})}}AT=Symbol.toStringTag;const g7={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},w1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class v7{constructor(t,r={},n,s){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Zb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,s){return ie(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},w1),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?ox:Un)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ut(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return ie(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:w1.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield ox(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ut(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ie(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Un(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Jb("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}update(t,r,n){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}copy(t,r,n){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Un(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return ie(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield Un(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return ie(this,void 0,void 0,function*(){try{const s=yield Un(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}download(t,r){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),c=()=>ju(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new p7(c,this.shouldThrowOnError)}info(t){return ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield ju(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ax(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}exists(t){return ie(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield f7(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n)&&n instanceof ix){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ie(this,void 0,void 0,function*(){try{return{data:yield ew(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}list(t,r,n){return ie(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},g7),r),{prefix:t||""});return{data:yield Un(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}listV2(t,r){return ie(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Un(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const PT="2.83.0",OT={"X-Client-Info":`storage-js/${PT}`};class x7{constructor(t,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OT),r),this.fetch=Zb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return ie(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield ju(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}getBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}createBucket(t){return ie(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Un(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ut(s))return{data:null,error:s};throw s}})}updateBucket(t,r){return ie(this,void 0,void 0,function*(){try{return{data:yield ox(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ut(n))return{data:null,error:n};throw n}})}emptyBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield ew(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class y7{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},OT),r),this.fetch=Zb(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield Un(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}listBuckets(t){return ie(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const n=r.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield ju(this.fetch,s,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield ew(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ut(r))return{data:null,error:r};throw r}})}}const tw={"X-Client-Info":`storage-js/${PT}`,"Content-Type":"application/json"};class TT extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Zr(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class iv extends TT{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class b7 extends TT{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var _1;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_1||(_1={}));const rw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),w7=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},j1=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_7=(e,t,r)=>ie(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!(r!=null&&r.noResolveJson)){const s=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||s+"";t(new iv(j1(o),s,l))}).catch(()=>{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new iv(l,s,o))});else{const o=s+"",l=i.statusText||`HTTP ${s} error`;t(new iv(l,s,o))}}else t(new b7(j1(e),e))}),j7=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return n?(w7(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function N7(e,t,r,n,s,i){return ie(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,j7(t,n,s,i)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const u=c.headers.get("content-type");return!u||!u.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>_7(c,l,n))})})}function en(e,t,r,n,s){return ie(this,void 0,void 0,function*(){return N7(e,"POST",t,n,s,r)})}class S7{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tw),r),this.fetch=rw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return ie(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}getIndex(t,r){return ie(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}})}listIndexes(t){return ie(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return ie(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Zr(n))return{data:null,error:n};throw n}})}}class E7{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tw),r),this.fetch=rw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return ie(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield en(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}getVectors(t){return ie(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}listVectors(t){return ie(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield en(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}queryVectors(t){return ie(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}deleteVectors(t){return ie(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield en(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}}class C7{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},tw),r),this.fetch=rw(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}getBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:yield en(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}listBuckets(){return ie(this,arguments,void 0,function*(t={}){try{return{data:yield en(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return ie(this,void 0,void 0,function*(){try{return{data:(yield en(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Zr(r))return{data:null,error:r};throw r}})}}class k7 extends C7{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new A7(this.url,this.headers,t,this.fetch)}}class A7 extends S7{constructor(t,r,n,s){super(t,r,s),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ie(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ie(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ie(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ie(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new P7(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class P7 extends E7{constructor(t,r,n,s,i){super(t,r,i),this.vectorBucketName=n,this.indexName=s}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ie(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ie(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ie(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ie(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ie(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class O7 extends x7{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new v7(this.url,this.headers,t,this.fetch)}get vectors(){return new k7(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new y7(this.url+"/iceberg",this.headers,this.fetch)}}const T7="2.83.0";let Nc="";typeof Deno<"u"?Nc="deno":typeof document<"u"?Nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Nc="react-native":Nc="node";const I7={"X-Client-Info":`supabase-js-${Nc}/${T7}`},D7={headers:I7},R7={schema:"public"},M7={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L7={},$7=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),U7=()=>Headers,F7=(e,t,r)=>{const n=$7(r),s=U7();return async(i,o)=>{var l;const c=(l=await t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))}};function B7(e){return e.endsWith("/")?e:e+"/"}function z7(e,t){var r,n;const{db:s,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}function W7(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(B7(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const IT="2.83.0",No=30*1e3,lx=3,av=lx*No,H7="http://localhost:9999",q7="supabase.auth.token",V7={"X-Client-Info":`gotrue-js/${IT}`},cx="X-Supabase-Api-Version",DT={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},G7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K7=10*60*1e3;class Nu extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function oe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Y7 extends Nu{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function X7(e){return oe(e)&&e.name==="AuthApiError"}class xa extends Nu{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class ea extends Nu{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Kr extends ea{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Q7(e){return oe(e)&&e.name==="AuthSessionMissingError"}class go extends ea{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class th extends ea{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class rh extends ea{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J7(e){return oe(e)&&e.name==="AuthImplicitGrantRedirectError"}class N1 extends ea{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ux extends ea{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function ov(e){return oe(e)&&e.name==="AuthRetryableFetchError"}class S1 extends ea{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class dx extends ea{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),E1=` 	
\r=`.split(""),Z7=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<E1.length;t+=1)e[E1[t].charCodeAt(0)]=-2;for(let t=0;t<Rf.length;t+=1)e[Rf[t].charCodeAt(0)]=t;return e})();function C1(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rf[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Rf[n]),t.queuedBits-=6}}function RT(e,t,r){const n=Z7[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function k1(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{r9(o,n,r)};for(let o=0;o<e.length;o+=1)RT(e.charCodeAt(o),s,i);return t.join("")}function e9(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function t9(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}e9(n,t)}}function r9(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Qo(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)RT(e.charCodeAt(s),r,n);return new Uint8Array(t)}function n9(e){const t=[];return t9(e,r=>t.push(r)),new Uint8Array(t)}function Na(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>C1(s,r,n)),C1(null,r,n),t.join("")}function s9(e){return Math.round(Date.now()/1e3)+e}function i9(){return Symbol("auth-callback")}const rr=()=>typeof window<"u"&&typeof document<"u",ia={tested:!1,writable:!1},MT=()=>{if(!rr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ia.tested)return ia.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ia.tested=!0,ia.writable=!0}catch{ia.tested=!0,ia.writable=!1}return ia.writable};function a9(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const LT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),o9=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",So=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},aa=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},pi=async(e,t)=>{await e.removeItem(t)};class up{constructor(){this.promise=new up.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}up.promiseConstructor=Promise;function lv(e){const t=e.split(".");if(t.length!==3)throw new dx("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!G7.test(t[n]))throw new dx("JWT not in base64url format");return{header:JSON.parse(k1(t[0])),payload:JSON.parse(k1(t[1])),signature:Qo(t[2]),raw:{header:t[0],payload:t[1]}}}async function l9(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function c9(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){s(o);return}}})()})}function u9(e){return("0"+e.toString(16)).substr(-2)}function d9(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,u9).join("")}async function h9(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function f9(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await h9(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(e,t,r=!1){const n=d9();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await So(e,`${t}-code-verifier`,s);const i=await f9(n);return[i,n===i?"plain":"s256"]}const m9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function p9(e){const t=e.headers.get(cx);if(!t||!t.match(m9))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function g9(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function v9(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const x9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xo(e){if(!x9.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cv(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function y9(e,t){return new Proxy(e,{get:(r,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,s)}return!t.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,n,s)}})}function A1(e){return JSON.parse(JSON.stringify(e))}const da=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),b9=[502,503,504];async function P1(e){var t;if(!o9(e))throw new ux(da(e),0);if(b9.includes(e.status))throw new ux(da(e),e.status);let r;try{r=await e.json()}catch(i){throw new xa(da(i),i)}let n;const s=p9(e);if(s&&s.getTime()>=DT["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new S1(da(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Kr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new S1(da(r),e.status,r.weak_password.reasons);throw new Y7(da(r),e.status||500,n)}const w9=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ue(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[cx]||(i[cx]=DT["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await _9(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function _9(e,t,r,n,s,i){const o=w9(t,n,s,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new ux(da(c),0)}if(l.ok||await P1(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await P1(c)}}function Ln(e){var t;let r=null;S9(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=s9(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function O1(e){const t=Ln(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _i(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function j9(e){return{data:e,error:null}}function N9(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=$l(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function T1(e){return e}function S9(e){return e.access_token&&e.refresh_token&&e.expires_in}const uv=["global","local","others"];class E9{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=LT(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=uv[0]){if(uv.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uv.join(", ")}`);try{return await ue(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(oe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await ue(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:_i})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=$l(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ue(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N9,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(oe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_i})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:T1});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(oe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){xo(t);try{return await ue(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_i})}catch(r){if(oe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){xo(t);try{return await ue(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:_i})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){xo(t);try{return await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:_i})}catch(n){if(oe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){xo(t.userId);try{const{data:r,error:n}=await ue(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){xo(t.userId),xo(t.id);try{return{data:await ue(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,s,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:T1});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(g=>{const y=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),p=JSON.parse(g.split(";")[1].split("=")[1]);u[`${p}Page`]=y}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(oe(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await ue(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await ue(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(oe(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(t){try{return await ue(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(oe(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await ue(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(oe(r))return{data:null,error:r};throw r}}}function I1(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const yo={debug:!!(globalThis&&MT()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class $T extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class C9 extends $T{}async function k9(e,t,r){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new C9(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(yo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function A9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function UT(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function P9(e){return parseInt(e,16)}function O9(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function T9(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:c,resources:u,scheme:d,uri:h,version:f}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=UT(e.address),g=d?`${d}://${n}`:n,y=e.statement?`${e.statement}
`:"",p=`${g} wants you to sign in with your Ethereum account:
${m}

${y}`;let v=`URI: ${h}
Version: ${f}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(v+=`
Expiration Time: ${s.toISOString()}`),l&&(v+=`
Not Before: ${l.toISOString()}`),c&&(v+=`
Request ID: ${c}`),u){let b=`
Resources:`;for(const w of u){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);b+=`
- ${w}`}v+=b}return`${p}
${v}`}class Et extends Error{constructor({message:t,code:r,cause:n,name:s}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class Mf extends Et{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function I9({error:e,options:t}){var r,n,s;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Et({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Et({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Et({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Et({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Et({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Et({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Et({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Et({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(FT(o)){if(i.rp.id!==o)return new Et({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Et({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function D9({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Et({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Et({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(FT(n)){if(r.rpId!==n)return new Et({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Et({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Et({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Et({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class R9{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const M9=new R9;function L9(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=$l(e,["challenge","user","excludeCredentials"]),i=Qo(t).buffer,o=Object.assign(Object.assign({},r),{id:Qo(r.id).buffer}),l=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const u=n[c];l.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Qo(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return l}function $9(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=$l(e,["challenge","allowCredentials"]),s=Qo(t).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Qo(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function U9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Na(new Uint8Array(e.response.attestationObject)),clientDataJSON:Na(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function F9(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Na(new Uint8Array(s.authenticatorData)),clientDataJSON:Na(new Uint8Array(s.clientDataJSON)),signature:Na(new Uint8Array(s.signature)),userHandle:s.userHandle?Na(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function FT(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function D1(){var e,t;return!!(rr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function B9(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",t)}:{data:null,error:new Mf("Empty credential response",t)}}catch(t){return{data:null,error:I9({error:t,options:e})}}}async function z9(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Mf("Browser returned unexpected credential type",t)}:{data:null,error:new Mf("Empty credential response",t)}}catch(t){return{data:null,error:D9({error:t,options:e})}}}const W9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},H9={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lf(...e){const t=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),r=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of e)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=Lf(l,o):n[i]=Lf(o)}else n[i]=o}return n}function q9(e,t){return Lf(W9,e,t||{})}function V9(e,t){return Lf(H9,e,t||{})}class G9{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:s},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const c=s??M9.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:u}=o.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${n}`),u.displayName||(u.displayName=u.name)}switch(o.webauthn.type){case"create":{const u=q9(o.webauthn.credential_options.publicKey,i==null?void 0:i.create),{data:d,error:h}=await B9({publicKey:u,signal:c});return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}case"request":{const u=V9(o.webauthn.credential_options.publicKey,i==null?void 0:i.request),{data:d,error:h}=await z9(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:u,signal:c}));return d?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:d}},error:null}:{data:null,error:h}}}}catch(o){return oe(o)?{data:null,error:o}:{data:null,error:new xa("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Nu("rpId is required for WebAuthn authentication")};try{if(!D1())return{data:null,error:new xa("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:l};const{webauthn:c}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return oe(o)?{data:null,error:o}:{data:null,error:new xa("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},i){if(!r)return{data:null,error:new Nu("rpId is required for WebAuthn registration")};try{if(!D1())return{data:null,error:new xa("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(d=>{var h;return(h=d.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===t&&f.status!=="unverified")}).then(d=>d?this.client.mfa.unenroll({factorId:d==null?void 0:d.id}):void 0),{data:null,error:l};const{data:c,error:u}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(o){return oe(o)?{data:null,error:o}:{data:null,error:new xa("Unexpected error in register",o)}}}}A9();const K9={url:H7,storageKey:q7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:V7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function R1(e,t,r){return await r()}const bo={};class Su{get jwks(){var t,r;return(r=(t=bo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=bo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){bo[this.storageKey]=Object.assign(Object.assign({},bo[this.storageKey]),{cachedAt:t})}constructor(t){var r,n,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const i=Object.assign(Object.assign({},K9),t);if(this.storageKey=i.storageKey,this.instanceID=(r=Su.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Su.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.instanceID>0&&rr()){const o=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(o),this.logDebugMessages&&console.trace(o)}if(this.persistSession=i.persistSession,this.autoRefreshToken=i.autoRefreshToken,this.admin=new E9({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=LT(i.fetch),this.lock=i.lock||R1,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,this.throwOnError=i.throwOnError,i.lock?this.lock=i.lock:rr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=k9:this.lock=R1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new G9(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:MT()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=I1(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=I1(this.memoryStorage)),rr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async o=>{this._debug("received broadcast notification from other tab or client",o),await this._notifyAllSubscribers(o.data.event,o.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${IT}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},n="none";if(rr()&&(r=a9(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),rr()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),J7(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return oe(r)?this._returnResult({error:r}):this._returnResult({error:new xa("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:Ln}),{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,g=null;this.flowType==="pkce"&&([m,g]=await vo(this.storage,this.storageKey)),i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:g},xform:Ln})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await ue(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ln})}else throw new th("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return this._returnResult({data:{user:null,session:null},error:l});const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:O1})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await ue(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:O1})}else throw new th("You must provide either an email or phone number and a password");const{data:n,error:s}=r;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new go;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,s,i,o,l,c,u,d,h,f;let m,g;if("message"in t)m=t.message,g=t.signature;else{const{chain:y,wallet:p,statement:v,options:b}=t;let w;if(rr())if(typeof p=="object")w=p;else{const S=window;if("ethereum"in S&&typeof S.ethereum=="object"&&"request"in S.ethereum&&typeof S.ethereum.request=="function")w=S.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof p!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=p}const _=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href),j=await w.request({method:"eth_requestAccounts"}).then(S=>S).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!j||j.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=UT(j[0]);let E=(n=b==null?void 0:b.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!E){const S=await w.request({method:"eth_chainId"});E=P9(S)}const T={domain:_.host,address:N,statement:v,uri:_.href,version:"1",chainId:E,nonce:(s=b==null?void 0:b.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b==null?void 0:b.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=b==null?void 0:b.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(c=b==null?void 0:b.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(u=b==null?void 0:b.signInWithEthereum)===null||u===void 0?void 0:u.requestId,resources:(d=b==null?void 0:b.signInWithEthereum)===null||d===void 0?void 0:d.resources};m=T9(T),g=await w.request({method:"personal_sign",params:[O9(m),N]})}try{const{data:y,error:p}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:g},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=t.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Ln});if(p)throw p;if(!y||!y.session||!y.user){const v=new go;return this._returnResult({data:{user:null,session:null},error:v})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:p})}catch(y){if(oe(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(t){var r,n,s,i,o,l,c,u,d,h,f,m;let g,y;if("message"in t)g=t.message,y=t.signature;else{const{chain:p,wallet:v,statement:b,options:w}=t;let _;if(rr())if(typeof v=="object")_=v;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))_=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=v}const j=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const N=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),b?{statement:b}:null));let E;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")E=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)E=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)g=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),y=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${j.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const N=await _.signMessage(new TextEncoder().encode(g),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=N}}try{const{data:p,error:v}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:Na(y)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ln});if(v)throw v;if(!p||!p.session||!p.user){const b=new go;return this._returnResult({data:{user:null,session:null},error:b})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:Object.assign({},p),error:v})}catch(p){if(oe(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async _exchangeCodeForSession(t){const r=await aa(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ue(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ln});if(await pi(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const l=new go;return this._returnResult({data:{user:null,session:null,redirectType:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(oe(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=t,l=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ln}),{data:c,error:u}=l;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c||!c.session||!c.user){const d=new go;return this._returnResult({data:{user:null,session:null},error:d})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:u})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,n,s,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await vo(this.storage,this.storageKey));const{error:h}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await ue(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d})}throw new th("You must provide either an email or phone number.")}catch(l){if(oe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await ue(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Ln});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:u,session:c},error:null})}catch(s){if(oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(t){var r,n,s,i,o;try{let l=null,c=null;this.flowType==="pkce"&&([l,c]=await vo(this.storage,this.storageKey));const u=await ue(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:c}),headers:this.headers,xform:j9});return!((i=u.data)===null||i===void 0)&&i.url&&rr()&&!(!((o=t.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(u.data.url),this._returnResult(u)}catch(l){if(oe(l))return this._returnResult({data:null,error:l});throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Kr;const{error:s}=await ue(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(t){if(oe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:o}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:o,error:l}=await ue(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l})}throw new th("You must provide either an email or phone number and a type")}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await aa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<av:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await aa(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=cv()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};t.user=y9(t.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_i}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kr}:await ue(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:_i})})}catch(r){if(oe(r))return Q7(r)&&(await this._removeSession(),await pi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Kr;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await vo(this.storage,this.storageKey));const{data:u,error:d}=await ue(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:_i});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(oe(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Kr;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=lv(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{data:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(r){if(oe(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Kr;const{data:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(oe(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!rr())throw new rh("No browser detected.");if(t.error||t.error_description||t.error_code)throw new rh(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new N1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rh("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new N1("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new rh("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=No&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const g=f-h;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,f,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,f,d);const{data:y,error:p}=await this._getUser(i);if(p)throw p;const v={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:v,redirectType:t.type},error:null})}catch(n){if(oe(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await aa(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(X7(l)&&(l.status===404||l.status===401||l.status===403)))return this._returnResult({error:l})}return t!=="others"&&(await this._removeSession(),await pi(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=i9(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await vo(this.storage,this.storageKey,!0));try{return await ue(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(oe(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ue(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return rr()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:t.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(oe(n))return this._returnResult({data:{provider:t.provider,url:null},error:n});throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:s,data:{session:i}}=r;if(s)throw s;const{options:o,provider:l,token:c,access_token:u,nonce:d}=t,h=await ue(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i==null?void 0:i.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:c,access_token:u,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Ln}),{data:f,error:m}=h;return m?this._returnResult({data:{user:null,session:null},error:m}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new go}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:m}))}catch(s){if(oe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ue(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await c9(async s=>(s>0&&await l9(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ue(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ln})),(s,i)=>{const o=200*Math.pow(2,s);return i&&ov(i)&&Date.now()+o-n<No})}catch(n){if(this._debug(r,"error",n),oe(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),rr()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await aa(this.storage,this.storageKey);if(s&&this.userStorage){let o=await aa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await So(this.userStorage,this.storageKey+"-user",o)),s.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:cv()}else if(s&&!s.user&&!s.user){const o=await aa(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await pi(this.storage,this.storageKey+"-user"),await So(this.storage,this.storageKey,s)):s.user=cv()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<av;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${av}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),ov(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(s.access_token);!l&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new up;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Kr;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),oe(i)){const o={data:null,error:i};return ov(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await So(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=A1(s);await So(this.storage,this.storageKey,i)}else{const s=A1(r);await So(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await pi(this.storage,this.storageKey),await pi(this.storage,this.storageKey+"-code-verifier"),await pi(this.storage,this.storageKey+"-user"),this.userStorage&&await pi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&rr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),No);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/No);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${No}ms, refresh threshold is ${lx} ticks`),s<=lx&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof $T)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await vo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?this._returnResult({data:null,error:i}):await ue(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:c,error:u}=await ue(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?this._returnResult({data:null,error:u}):(t.factorType==="totp"&&c.type==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?U9(t.webauthn.credential_response):F9(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:c}=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),this._returnResult({data:l,error:c}))})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return this._returnResult({data:null,error:i});const o=await ue(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:L9(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:$9(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=lv(n.access_token);let o=null;i.aal&&(o=i.aal);let l=o;((r=(t=n.user.factors)===null||t===void 0?void 0:t.filter(d=>d.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=i.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:u},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ue(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Kr})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Kr});const o=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&rr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(t,r){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Kr});const o=await ue(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:l=>({data:l,error:null})});return o.data&&o.data.redirect_url&&rr()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(o.data.redirect_url),o})}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ue(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Kr})})}catch(t){if(oe(t))return this._returnResult({data:null,error:t});throw t}}async _revokeOAuthGrant(t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;return s?this._returnResult({data:null,error:s}):n?await ue(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:t.clientId},xform:()=>({data:{},error:null})}):this._returnResult({data:null,error:new Kr})})}catch(r){if(oe(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+K7>s)return n;const{data:i,error:o}=await ue(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:g}=await this.getSession();if(g||!m.session)return this._returnResult({data:null,error:g});n=m.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:c}}=lv(n);r!=null&&r.allowExpired||g9(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:o},error:null}}const d=v9(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,n9(`${l}.${c}`)))throw new dx("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(oe(n))return this._returnResult({data:null,error:n});throw n}}}Su.nextInstanceID={};const Y9=Su;class X9 extends Y9{constructor(t){super(t)}}class Q9{constructor(t,r,n){var s,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=W7(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,u={db:R7,realtime:L7,auth:Object.assign(Object.assign({},M7),{storageKey:c}),global:D7},d=z7(n??{},u);this.storageKey=(s=d.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=d.global.headers)!==null&&i!==void 0?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=F7(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.accessToken&&this.accessToken().then(h=>this.realtime.setAuth(h)).catch(h=>console.warn("Failed to set initial Realtime auth token:",h)),this.rest=new Hz(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new O7(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new Bz(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:l,lock:c,debug:u,throwOnError:d},h,f){const m={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new X9({url:this.authUrl.href,headers:Object.assign(Object.assign({},m),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:l,lock:c,debug:u,throwOnError:d,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(g=>g.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new o7(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const J9=(e,t,r)=>new Q9(e,t,r);function Z9(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}Z9()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const eW="https://orvifghgqqlzbmicatch.supabase.co",tW="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ydmlmZ2hncXFsemJtaWNhdGNoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjkyNzkxNjcsImV4cCI6MjA4NDg1NTE2N30.jx899gHw8jBhJ82Lzu43Dg0wc4_Xiw8ybYEUXlVezQU",Yt=J9(eW,tW),M1={login:async(e,t)=>{const{data:r,error:n}=await Yt.from("counselors").select("id, email, name, password_hash, role").eq("email",e).maybeSingle();if(n||!r)throw new Error("Invalid credentials");if(r.password_hash!==`demo_hash_${t}`)throw new Error("Invalid credentials");const s={id:r.id,email:r.email,name:r.name,role:r.role};return localStorage.setItem("counselor",JSON.stringify(s)),s},logout:()=>{localStorage.removeItem("counselor")},getCurrentCounselor:()=>{const e=localStorage.getItem("counselor");return e?JSON.parse(e):null},isAuthenticated:()=>!!localStorage.getItem("counselor")};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nW=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(e,t)=>{const r=x.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>x.createElement("svg",{ref:d,...rW,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${nW(e)}`,l].join(" "),...u},[...t.map(([h,f])=>x.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sW=Z("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ps=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cn=Z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Z("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iW=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oW=Z("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=Z("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=Z("Briefcase",[["rect",{width:"20",height:"14",x:"2",y:"7",rx:"2",ry:"2",key:"eto64e"}],["path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"zwj3tp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=Z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=Z("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rh=Z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=Z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=Z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cW=Z("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=Z("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=Z("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bl=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zl=Z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=Z("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=Z("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=Z("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=Z("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=Z("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=Z("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=Z("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=Z("Infinity",[["path",{d:"M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z",key:"1z0uae"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=Z("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=Z("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=Z("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L1=Z("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=Z("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sd=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=Z("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=Z("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nw=Z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Z("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=Z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=Z("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xW=Z("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=Z("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=Z("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qc=Z("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=Z("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=Z("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=Z("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=Z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const to=Z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=Z("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=Z("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=Z("Underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=Z("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gl=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zn=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),EW=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=x.useState(""),[s,i]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),p=async v=>{v.preventDefault(),h(""),m(""),y(""),u(!0);try{const b=await MO.authenticateUser({email:r,password:s});if(b.success&&b.user)if(console.log("Login successful:",b.user),b.user.role==="pool_management"||b.user.role==="essay"){console.log("Routing to counselor dashboard");const w={id:b.user.username,email:b.user.username,name:b.user.name,role:b.user.role};t(w)}else console.log("Routing to student dashboard"),e(b.user);else switch(b.error){case"USER_NOT_FOUND":h(b.message||"Email not found");break;case"WRONG_PASSWORD":m(b.message||"Incorrect password");break;case"NETWORK_ERROR":default:y(b.message||"Login failed. Please try again.");break}}catch(b){console.error("Login error:",b),y("Login failed. Please try again.")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center p-4 sm:p-6 lg:p-8",children:a.jsxs("div",{className:"max-w-md w-full mx-auto",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl p-6 sm:p-8 border border-blue-100 animate-fade-in",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-12 h-12 object-contain opacity-90"})}),a.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"EduCare"}),a.jsx("p",{className:"text-base sm:text-lg text-[#04adee] font-semibold",children:"University Guidance"}),a.jsx("p",{className:"text-sm sm:text-base text-gray-600 mt-2 mb-6",children:"Empowering your academic journey"})]}),g&&a.jsx("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-600 text-sm",children:g})}),a.jsxs("form",{onSubmit:p,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(sd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",id:"email",value:r,onChange:v=>n(v.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(XT,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:o?"text":"password",id:"password",value:s,onChange:v=>i(v.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent transition-all duration-200 text-sm sm:text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600 transition-colors",children:o?a.jsx(HT,{className:"w-5 h-5"}):a.jsx(qT,{className:"w-5 h-5"})})]}),f&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-3 px-4 rounded-lg hover:bg-blue-600 focus:ring-2 focus:ring-[#04adee] focus:ring-offset-2 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign in to EduCare"})]})]}),a.jsx("div",{className:"text-center mt-6 text-xs sm:text-sm text-gray-500",children:" 2025 EduCare. Enhancing education through efficiency."})]})})},CW=({currentPage:e,setCurrentPage:t,onLogout:r,isOpen:n,onClose:s,isCollapsed:i=!1,onToggleCollapse:o})=>{const l=[{id:"profile",label:"My Profile",icon:gl},{id:"admit-profiles",label:"Admission Stories",icon:Rt},{id:"scholarships",label:"Scholarships",icon:hr},{id:"applications",label:"Applications",icon:Ce},{id:"essay-editor",label:"Essay Editor",icon:yW},{id:"resources",label:"Resources",icon:cr},{id:"counselors",label:"Counselors",icon:Eu},{id:"chat",label:"Inbox",icon:Ha}],c=u=>{t(u),s()};return a.jsxs("div",{className:`
      fixed lg:static inset-y-0 left-0 z-40 bg-white shadow-lg border-r border-gray-200 flex flex-col
      transform transition-all duration-300 ease-in-out
      ${n?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      ${i?"w-20":"w-64"}
    `,children:[a.jsx("div",{className:"p-4 lg:p-6 border-b border-gray-200 mt-16 lg:mt-0 flex-shrink-0",children:a.jsxs("div",{className:`flex items-center ${i?"justify-center":""}`,children:[a.jsx("img",{src:"/white_logo.png",alt:"EduCare Logo",className:"w-8 h-8 lg:w-10 lg:h-10 object-contain"}),!i&&a.jsxs("div",{className:"ml-3",children:[a.jsx("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"EduCare"}),a.jsx("p",{className:"text-xs lg:text-sm text-[#04adee]",children:"University Guidance"})]})]})}),o&&a.jsx("button",{onClick:o,className:"hidden lg:flex absolute -right-3 top-24 bg-white border border-gray-200 rounded-full p-1.5 shadow-md hover:bg-gray-50 transition-colors z-50",title:i?"Expand sidebar":"Collapse sidebar",children:i?a.jsx(WT,{className:"w-4 h-4 text-gray-600"}):a.jsx(zT,{className:"w-4 h-4 text-gray-600"})}),a.jsx("nav",{className:"flex-1 py-4 lg:py-6 overflow-y-auto",children:a.jsx("ul",{className:`space-y-2 ${i?"px-2":"px-3 lg:px-4"}`,children:l.map(u=>{const d=u.icon,h=e===u.id;return a.jsx("li",{children:a.jsxs("button",{onClick:()=>c(u.id),className:`w-full flex items-center rounded-lg transition-all duration-200 ${i?"justify-center p-3":"px-4 py-3"} ${h?"bg-[#04adee] bg-opacity-10 text-[#04adee] border border-[#04adee] border-opacity-20 shadow-sm":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,title:i?u.label:void 0,children:[a.jsx(d,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"} ${h?"text-[#04adee]":"text-gray-500"}`}),!i&&a.jsx("span",{className:"font-medium text-sm lg:text-base",children:u.label})]})},u.id)})})}),a.jsx("div",{className:`border-t border-gray-200 flex-shrink-0 ${i?"p-2":"p-3 lg:p-4"}`,children:a.jsxs("button",{onClick:r,className:`w-full flex items-center text-gray-700 hover:bg-red-50 hover:text-red-600 rounded-lg transition-all duration-200 touch-manipulation ${i?"justify-center p-3":"px-4 py-3"}`,title:i?"Logout":void 0,children:[a.jsx(Ff,{className:`w-4 h-4 lg:w-5 lg:h-5 ${i?"":"mr-3"}`}),!i&&a.jsx("span",{className:"font-medium text-sm lg:text-base",children:"Logout"})]})})]})};function eI(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=eI(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function it(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=eI(e))&&(n&&(n+=" "),n+=t);return n}var kW=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function sw(e){if(typeof e!="string")return!1;var t=kW;return t.includes(e)}var AW=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],PW=new Set(AW);function tI(e){return typeof e!="string"?!1:PW.has(e)}function rI(e){return typeof e=="string"&&e.startsWith("data-")}function Vs(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(tI(r)||rI(r))&&(t[r]=e[r]);return t}function iw(e){if(e==null)return null;if(x.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return Vs(t)}return typeof e=="object"&&!Array.isArray(e)?Vs(e):null}function Pn(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(tI(r)||rI(r)||sw(r))&&(t[r]=e[r]);return t}var OW=["children","width","height","viewBox","className","style","title","desc"];function fx(){return fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fx.apply(null,arguments)}function TW(e,t){if(e==null)return{};var r,n,s=IW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function IW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nI=x.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=TW(e,OW),h=i||{width:n,height:s,x:0,y:0},f=it("recharts-surface",o);return x.createElement("svg",fx({},Pn(d),{className:f,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),x.createElement("title",null,c),x.createElement("desc",null,u),r)}),DW=["children","className"];function mx(){return mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mx.apply(null,arguments)}function RW(e,t){if(e==null)return{};var r,n,s=MW(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function MW(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gs=x.forwardRef((e,t)=>{var{children:r,className:n}=e,s=RW(e,DW),i=it("recharts-layer",n);return x.createElement("g",mx({className:i},Pn(s),{ref:t}),r)}),LW=x.createContext(null);function Xe(e){return function(){return e}}const sI=Math.cos,Bf=Math.sin,ns=Math.sqrt,zf=Math.PI,hp=2*zf,px=Math.PI,gx=2*px,ha=1e-6,$W=gx-ha;function iI(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function UW(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iI;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class FW{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iI:UW(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>ha)if(!(Math.abs(h*c-u*d)>ha)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=n-o,g=s-l,y=c*c+u*u,p=m*m+g*g,v=Math.sqrt(y),b=Math.sqrt(f),w=i*Math.tan((px-Math.acos((y+f-p)/(2*v*b)))/2),_=w/b,j=w/v;Math.abs(_-1)>ha&&this._append`L${t+_*d},${r+_*h}`,this._append`A${i},${i},0,0,${+(h*m>d*g)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,h=1^o,f=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>ha||Math.abs(this._y1-d)>ha)&&this._append`L${u},${d}`,n&&(f<0&&(f=f%gx+gx),f>$W?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=u},${this._y1=d}`:f>ha&&this._append`A${n},${n},0,${+(f>=px)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function aw(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new FW(t)}function ow(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function aI(e){this._context=e}aI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function fp(e){return new aI(e)}function oI(e){return e[0]}function lI(e){return e[1]}function cI(e,t){var r=Xe(!0),n=null,s=fp,i=null,o=aw(l);e=typeof e=="function"?e:e===void 0?oI:Xe(e),t=typeof t=="function"?t:t===void 0?lI:Xe(t);function l(c){var u,d=(c=ow(c)).length,h,f=!1,m;for(n==null&&(i=s(m=o())),u=0;u<=d;++u)!(u<d&&r(h=c[u],u,c))===f&&((f=!f)?i.lineStart():i.lineEnd()),f&&i.point(+e(h,u,c),+t(h,u,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Xe(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Xe(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Xe(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function nh(e,t,r){var n=null,s=Xe(!0),i=null,o=fp,l=null,c=aw(u);e=typeof e=="function"?e:e===void 0?oI:Xe(+e),t=typeof t=="function"?t:Xe(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?lI:Xe(+r);function u(h){var f,m,g,y=(h=ow(h)).length,p,v=!1,b,w=new Array(y),_=new Array(y);for(i==null&&(l=o(b=c())),f=0;f<=y;++f){if(!(f<y&&s(p=h[f],f,h))===v)if(v=!v)m=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=f-1;g>=m;--g)l.point(w[g],_[g]);l.lineEnd(),l.areaEnd()}v&&(w[f]=+e(p,f,h),_[f]=+t(p,f,h),l.point(n?+n(p,f,h):w[f],r?+r(p,f,h):_[f]))}if(b)return l=null,b+""||null}function d(){return cI().defined(s).curve(o).context(i)}return u.x=function(h){return arguments.length?(e=typeof h=="function"?h:Xe(+h),n=null,u):e},u.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Xe(+h),u):e},u.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Xe(+h),u):n},u.y=function(h){return arguments.length?(t=typeof h=="function"?h:Xe(+h),r=null,u):t},u.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Xe(+h),u):t},u.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:Xe(+h),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(h){return arguments.length?(s=typeof h=="function"?h:Xe(!!h),u):s},u.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),u):o},u.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),u):i},u}class uI{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function BW(e){return new uI(e,!0)}function zW(e){return new uI(e,!1)}const lw={draw(e,t){const r=ns(t/zf);e.moveTo(r,0),e.arc(0,0,r,0,hp)}},WW={draw(e,t){const r=ns(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},dI=ns(1/3),HW=dI*2,qW={draw(e,t){const r=ns(t/HW),n=r*dI;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},VW={draw(e,t){const r=ns(t),n=-r/2;e.rect(n,n,r,r)}},GW=.8908130915292852,hI=Bf(zf/10)/Bf(7*zf/10),KW=Bf(hp/10)*hI,YW=-sI(hp/10)*hI,XW={draw(e,t){const r=ns(t*GW),n=KW*r,s=YW*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=hp*i/5,l=sI(o),c=Bf(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},dv=ns(3),QW={draw(e,t){const r=-ns(t/(dv*3));e.moveTo(0,r*2),e.lineTo(-dv*r,-r),e.lineTo(dv*r,-r),e.closePath()}},vn=-.5,xn=ns(3)/2,vx=1/ns(12),JW=(vx/2+1)*3,ZW={draw(e,t){const r=ns(t/JW),n=r/2,s=r*vx,i=n,o=r*vx+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(vn*n-xn*s,xn*n+vn*s),e.lineTo(vn*i-xn*o,xn*i+vn*o),e.lineTo(vn*l-xn*c,xn*l+vn*c),e.lineTo(vn*n+xn*s,vn*s-xn*n),e.lineTo(vn*i+xn*o,vn*o-xn*i),e.lineTo(vn*l+xn*c,vn*c-xn*l),e.closePath()}};function eH(e,t){let r=null,n=aw(s);e=typeof e=="function"?e:Xe(e||lw),t=typeof t=="function"?t:Xe(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Xe(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Xe(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Wf(){}function Hf(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function fI(e){this._context=e}fI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Hf(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Hf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tH(e){return new fI(e)}function mI(e){this._context=e}mI.prototype={areaStart:Wf,areaEnd:Wf,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Hf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rH(e){return new mI(e)}function pI(e){this._context=e}pI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Hf(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nH(e){return new pI(e)}function gI(e){this._context=e}gI.prototype={areaStart:Wf,areaEnd:Wf,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function sH(e){return new gI(e)}function U1(e){return e<0?-1:1}function F1(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(U1(i)+U1(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function B1(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function hv(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function qf(e){this._context=e}qf.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hv(this,this._t0,B1(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hv(this,B1(this,r=F1(this,e,t)),r);break;default:hv(this,this._t0,r=F1(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function vI(e){this._context=new xI(e)}(vI.prototype=Object.create(qf.prototype)).point=function(e,t){qf.prototype.point.call(this,t,e)};function xI(e){this._context=e}xI.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function iH(e){return new qf(e)}function aH(e){return new vI(e)}function yI(e){this._context=e}yI.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=z1(e),s=z1(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function z1(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function oH(e){return new yI(e)}function mp(e,t){this._context=e,this._t=t}mp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function lH(e){return new mp(e,.5)}function cH(e){return new mp(e,0)}function uH(e){return new mp(e,1)}function qa(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function xx(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function dH(e,t){return e[t]}function hH(e){const t=[];return t.key=e,t}function fH(){var e=Xe([]),t=xx,r=qa,n=dH;function s(i){var o=Array.from(e.apply(this,arguments),hH),l,c=o.length,u=-1,d;for(const h of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(h,o[l].key,u,i)]).data=h;for(l=0,d=ow(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Xe(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Xe(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?xx:typeof i=="function"?i:Xe(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??qa,s):r},s}function mH(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}qa(e,t)}}function pH(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}qa(e,t)}}function gH(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],h=d[n][1]||0,f=d[n-1][1]||0,m=(h-f)/2,g=0;g<l;++g){var y=e[t[g]],p=y[n][1]||0,v=y[n-1][1]||0;m+=p-v}c+=h,u+=m*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,qa(e,t)}}var pp={},bI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(bI);var cw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(cw);var gp={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(gp);var vp={},wI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(r==null)return"";if(typeof r=="string")return r;if(Array.isArray(r))return r.map(t).join(",");const n=String(r);return n==="0"&&Object.is(Number(r),-0)?"-0":n}e.toString=t})(wI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=wI,r=gp;function n(s){if(Array.isArray(s))return s.map(r.toKey);if(typeof s=="symbol")return[s];s=t.toString(s);const i=[],o=s.length;if(o===0)return i;let l=0,c="",u="",d=!1;for(s.charCodeAt(0)===46&&(i.push(""),l++);l<o;){const h=s[l];u?h==="\\"&&l+1<o?(l++,c+=s[l]):h===u?u="":c+=h:d?h==='"'||h==="'"?u=h:h==="]"?(d=!1,i.push(c),c=""):c+=h:h==="["?(d=!0,c&&(i.push(c),c="")):h==="."?c&&(i.push(c),c=""):c+=h,l++}return c&&i.push(c),i}e.toPath=n})(vp);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=bI,r=cw,n=gp,s=vp;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,s.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let h=0;h<c.length;h++){if(d==null||t.isUnsafeProperty(c[h]))return u;d=d[c[h]]}return d===void 0?u:d}e.get=i})(pp);var vH=pp.get;const vl=ti(vH);var xH=4;function Ci(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xH,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function xt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((s,i,o)=>{var l=r[o-1];return typeof l=="string"?s+l+i:l!==void 0?s+Ci(l)+i:s+i},"")}var Fr=e=>e===0?0:e>0?1:-1,es=e=>typeof e=="number"&&e!=+e,Ks=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,ae=e=>(typeof e=="number"||e instanceof Number)&&!es(e),gs=e=>ae(e)||typeof e=="string",yH=0,ku=e=>{var t=++yH;return"".concat(e||"").concat(t)},ts=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ae(t)&&typeof t!="string")return n;var i;if(Ks(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return es(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},_I=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function ar(e,t,r){return ae(e)&&ae(t)?Ci(e+r*(t-e)):t}function bH(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):vl(n,t))===r)}var Jt=e=>e===null||typeof e>"u",id=e=>Jt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function wH(e){return e!=null}function ad(){}var _H=["type","size","sizeType"];function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}function W1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function H1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W1(Object(r),!0).forEach(function(n){jH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jH(e,t,r){return(t=NH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EH(e,t){if(e==null)return{};var r,n,s=CH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function CH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var jI={symbolCircle:lw,symbolCross:WW,symbolDiamond:qW,symbolSquare:VW,symbolStar:XW,symbolTriangle:QW,symbolWye:ZW},kH=Math.PI/180,AH=e=>{var t="symbol".concat(id(e));return jI[t]||lw},PH=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*kH;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},OH=(e,t)=>{jI["symbol".concat(id(e))]=t},NI=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=EH(e,_H),i=H1(H1({},s),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var f=AH(o),m=eH().type(f).size(PH(r,n,o)),g=m();if(g!==null)return g},{className:c,cx:u,cy:d}=i,h=Pn(i);return ae(u)&&ae(d)&&ae(r)?x.createElement("path",yx({},h,{className:it("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};NI.registerSymbol=OH;var SI=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,TH=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(x.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{sw(s)&&(n[s]=i=>r[s](r,i))}),n},IH=(e,t,r)=>n=>(e(t,r,n),null),uw=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];sw(s)&&typeof i=="function"&&(n||(n={}),n[s]=IH(i,t,r))}),n};function q1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DH(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q1(Object(r),!0).forEach(function(n){RH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q1(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RH(e,t,r){return(t=MH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MH(e){var t=LH(e,"string");return typeof t=="symbol"?t:t+""}function LH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pn(e,t){var r=DH({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var EI={},CI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t})(CI);var dw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(dw);var kI={},xp={},AI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(AI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=AI;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(xp);var PI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(PI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xp,r=PI;function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n})(kI);var OI={},TI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=pp;function r(n){return function(s){return t.get(s,n)}}e.property=r})(TI);var II={},hw={},DI={},fw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(fw);var mw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(mw);var pw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(pw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fw,r=mw,n=pw;function s(d,h,f){return typeof f!="function"?s(d,h,()=>{}):i(d,h,function m(g,y,p,v,b,w){const _=f(g,y,p,v,b,w);return _!==void 0?!!_:i(g,y,m,w)},new Map)}function i(d,h,f,m){if(h===d)return!0;switch(typeof h){case"object":return o(d,h,f,m);case"function":return Object.keys(h).length>0?i(d,{...h},f,m):n.eq(d,h);default:return t.isObject(d)?typeof h=="string"?h==="":!0:n.eq(d,h)}}function o(d,h,f,m){if(h==null)return!0;if(Array.isArray(h))return c(d,h,f,m);if(h instanceof Map)return l(d,h,f,m);if(h instanceof Set)return u(d,h,f,m);const g=Object.keys(h);if(d==null||r.isPrimitive(d))return g.length===0;if(g.length===0)return!0;if(m!=null&&m.has(h))return m.get(h)===d;m==null||m.set(h,d);try{for(let y=0;y<g.length;y++){const p=g[y];if(!r.isPrimitive(d)&&!(p in d)||h[p]===void 0&&d[p]!==void 0||h[p]===null&&d[p]!==null||!f(d[p],h[p],p,d,h,m))return!1}return!0}finally{m==null||m.delete(h)}}function l(d,h,f,m){if(h.size===0)return!0;if(!(d instanceof Map))return!1;for(const[g,y]of h.entries()){const p=d.get(g);if(f(p,y,g,d,h,m)===!1)return!1}return!0}function c(d,h,f,m){if(h.length===0)return!0;if(!Array.isArray(d))return!1;const g=new Set;for(let y=0;y<h.length;y++){const p=h[y];let v=!1;for(let b=0;b<d.length;b++){if(g.has(b))continue;const w=d[b];let _=!1;if(f(w,p,y,d,h,m)&&(_=!0),_){g.add(b),v=!0;break}}if(!v)return!1}return!0}function u(d,h,f,m){return h.size===0?!0:d instanceof Set?c([...d],[...h],f,m):!1}e.isMatchWith=s,e.isSetMatch=u})(DI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=DI;function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r})(hw);var RI={},gw={},MI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(MI);var vw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(vw);var xw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",h="[object Function]",f="[object ArrayBuffer]",m="[object Object]",g="[object Error]",y="[object DataView]",p="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",_="[object BigUint64Array]",j="[object Int8Array]",N="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",S="[object Float32Array]",D="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=f,e.arrayTag=d,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=_,e.booleanTag=s,e.dataViewTag=y,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=S,e.float64ArrayTag=D,e.functionTag=h,e.int16ArrayTag=N,e.int32ArrayTag=E,e.int8ArrayTag=j,e.mapTag=c,e.numberTag=n,e.objectTag=m,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=p,e.uint8ClampedArrayTag=v})(xw);var LI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(LI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=MI,r=vw,n=xw,s=mw,i=LI;function o(d,h){return l(d,void 0,d,new Map,h)}function l(d,h,f,m=new Map,g=void 0){const y=g==null?void 0:g(d,h,f,m);if(y!==void 0)return y;if(s.isPrimitive(d))return d;if(m.has(d))return m.get(d);if(Array.isArray(d)){const p=new Array(d.length);m.set(d,p);for(let v=0;v<d.length;v++)p[v]=l(d[v],v,f,m,g);return Object.hasOwn(d,"index")&&(p.index=d.index),Object.hasOwn(d,"input")&&(p.input=d.input),p}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const p=new RegExp(d.source,d.flags);return p.lastIndex=d.lastIndex,p}if(d instanceof Map){const p=new Map;m.set(d,p);for(const[v,b]of d)p.set(v,l(b,v,f,m,g));return p}if(d instanceof Set){const p=new Set;m.set(d,p);for(const v of d)p.add(l(v,void 0,f,m,g));return p}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const p=new(Object.getPrototypeOf(d)).constructor(d.length);m.set(d,p);for(let v=0;v<d.length;v++)p[v]=l(d[v],v,f,m,g);return p}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const p=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return m.set(d,p),c(p,d,f,m,g),p}if(typeof File<"u"&&d instanceof File){const p=new File([d],d.name,{type:d.type});return m.set(d,p),c(p,d,f,m,g),p}if(typeof Blob<"u"&&d instanceof Blob){const p=new Blob([d],{type:d.type});return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof Error){const p=new d.constructor;return m.set(d,p),p.message=d.message,p.name=d.name,p.stack=d.stack,p.cause=d.cause,c(p,d,f,m,g),p}if(d instanceof Boolean){const p=new Boolean(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof Number){const p=new Number(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(d instanceof String){const p=new String(d.valueOf());return m.set(d,p),c(p,d,f,m,g),p}if(typeof d=="object"&&u(d)){const p=Object.create(Object.getPrototypeOf(d));return m.set(d,p),c(p,d,f,m,g),p}return d}function c(d,h,f=d,m,g){const y=[...Object.keys(h),...t.getSymbols(h)];for(let p=0;p<y.length;p++){const v=y[p],b=Object.getOwnPropertyDescriptor(d,v);(b==null||b.writable)&&(d[v]=l(h[v],v,f,m,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(gw);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(RI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hw,r=RI;function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n})(II);var $I={},UI={},FI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gw,r=xw;function n(s,i){return t.cloneDeepWith(s,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!==void 0)return d;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s==null?void 0:s.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n})(FI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=FI;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(UI);var BI={},yw={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(yw);var zI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=vw;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(zI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cw,r=yw,n=zI,s=vp;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=s.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const h=c[d];if((u==null||!Object.hasOwn(u,h))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(h)&&h<u.length))return!1;u=u[h]}return!0}e.has=i})(BI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hw,r=gp,n=UI,s=pp,i=BI;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=s.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})($I);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dw,r=TI,n=II,s=$I;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(OI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=CI,r=dw,n=kI,s=OI;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i})(EI);var $H=EI.uniqBy;const V1=ti($H);function UH(e,t,r){return t===!0?V1(e,r):typeof t=="function"?V1(e,t):e}var WI={exports:{}},HI={},qI={exports:{}},VI={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xl=x;function FH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var BH=typeof Object.is=="function"?Object.is:FH,zH=xl.useState,WH=xl.useEffect,HH=xl.useLayoutEffect,qH=xl.useDebugValue;function VH(e,t){var r=t(),n=zH({inst:{value:r,getSnapshot:t}}),s=n[0].inst,i=n[1];return HH(function(){s.value=r,s.getSnapshot=t,fv(s)&&i({inst:s})},[e,r,t]),WH(function(){return fv(s)&&i({inst:s}),e(function(){fv(s)&&i({inst:s})})},[e]),qH(r),r}function fv(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!BH(e,r)}catch{return!0}}function GH(e,t){return t()}var KH=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?GH:VH;VI.useSyncExternalStore=xl.useSyncExternalStore!==void 0?xl.useSyncExternalStore:KH;qI.exports=VI;var YH=qI.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp=x,XH=YH;function QH(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var JH=typeof Object.is=="function"?Object.is:QH,ZH=XH.useSyncExternalStore,eq=yp.useRef,tq=yp.useEffect,rq=yp.useMemo,nq=yp.useDebugValue;HI.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=eq(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=rq(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,JH(d,m))return g;var y=n(m);return s!==void 0&&s(g,y)?(d=m,g):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=ZH(e,i[0],i[1]);return tq(function(){o.hasValue=!0,o.value=l},[l]),nq(l),l};WI.exports=HI;var sq=WI.exports,bw=x.createContext(null),iq=e=>e,St=()=>{var e=x.useContext(bw);return e?e.store.dispatch:iq},Mh=()=>{},aq=()=>Mh,oq=(e,t)=>e===t;function ce(e){var t=x.useContext(bw);return sq.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:aq,t?t.store.getState:Mh,t?t.store.getState:Mh,t?e:Mh,oq)}function lq(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function cq(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function uq(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var G1=e=>Array.isArray(e)?e:[e];function dq(e){const t=Array.isArray(e[0])?e[0]:e;return uq(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function hq(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var fq=class{constructor(e){this.value=e}deref(){return this.value}},mq=typeof WeakRef<"u"?WeakRef:fq,pq=0,K1=1;function sh(){return{s:pq,v:void 0,o:null,p:null}}function GI(e,t={}){let r=sh();const{resultEqualityCheck:n}=t;let s,i=0;function o(){var h;let l=r;const{length:c}=arguments;for(let f=0,m=c;f<m;f++){const g=arguments[f];if(typeof g=="function"||typeof g=="object"&&g!==null){let y=l.o;y===null&&(l.o=y=new WeakMap);const p=y.get(g);p===void 0?(l=sh(),y.set(g,l)):l=p}else{let y=l.p;y===null&&(l.p=y=new Map);const p=y.get(g);p===void 0?(l=sh(),y.set(g,l)):l=p}}const u=l;let d;if(l.s===K1)d=l.v;else if(d=e.apply(null,arguments),i++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,d)&&(d=f,i!==0&&i--),s=typeof d=="object"&&d!==null||typeof d=="function"?new mq(d):d}return u.s=K1,u.v=d,d}return o.clearCache=()=>{r=sh(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function gq(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},u=s.pop();typeof u=="object"&&(c=u,u=s.pop()),lq(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:h,memoizeOptions:f=[],argsMemoize:m=GI,argsMemoizeOptions:g=[]}=d,y=G1(f),p=G1(g),v=dq(s),b=h(function(){return i++,u.apply(null,arguments)},...y),w=m(function(){o++;const j=hq(v,arguments);return l=b.apply(null,j),l},...p);return Object.assign(w,{resultFunc:u,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:m})};return Object.assign(n,{withTypes:()=>n}),n}var F=gq(GI),vq=Object.assign((e,t=F)=>{cq(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>vq}),KI={},YI={},XI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(XI);var QI={},ww={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(ww);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ww,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s})(QI);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=XI,r=QI,n=vp;function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(m=>String(m));const u=(m,g)=>{let y=m;for(let p=0;p<g.length&&y!=null;++p)y=y[g[p]];return y},d=(m,g)=>g==null||m==null?g:typeof m=="object"&&"key"in m?Object.hasOwn(g,m.key)?g[m.key]:u(g,m.path):typeof m=="function"?m(g):Array.isArray(m)?u(g,m):typeof g=="object"?g[m]:g,h=o.map(m=>(Array.isArray(m)&&m.length===1&&(m=m[0]),m==null||typeof m=="function"||Array.isArray(m)||r.isKey(m)?m:{key:m,path:n.toPath(m)}));return i.map(m=>({original:m,criteria:h.map(g=>d(g,m))})).slice().sort((m,g)=>{for(let y=0;y<h.length;y++){const p=t.compareValues(m.criteria[y],g.criteria[y],l[y]);if(p!==0)return p}return 0}).map(m=>m.original)}e.orderBy=s})(YI);var JI={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):s.push(d)}};return o(r,0),s}e.flatten=t})(JI);var _w={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yw,r=xp,n=fw,s=pw;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i})(_w);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=YI,r=JI,n=_w;function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s})(KI);var xq=KI.sortBy;const bp=ti(xq);var ZI=e=>e.legend.settings,yq=e=>e.legend.size,bq=e=>e.legend.payload;F([bq,ZI],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?bp(n,r):n});var ih=1;function wq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=x.useState({height:0,left:0,top:0,width:0}),n=x.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>ih||Math.abs(o.left-t.left)>ih||Math.abs(o.top-t.top)>ih||Math.abs(o.width-t.width)>ih)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function nr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var _q=typeof Symbol=="function"&&Symbol.observable||"@@observable",Y1=_q,mv=()=>Math.random().toString(36).substring(7).split("").join("."),jq={INIT:`@@redux/INIT${mv()}`,REPLACE:`@@redux/REPLACE${mv()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${mv()}`},Vf=jq;function jw(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function e4(e,t,r){if(typeof e!="function")throw new Error(nr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(nr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(nr(1));return r(e4)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((p,v)=>{o.set(v,p)}))}function d(){if(c)throw new Error(nr(3));return s}function h(p){if(typeof p!="function")throw new Error(nr(4));if(c)throw new Error(nr(5));let v=!0;u();const b=l++;return o.set(b,p),function(){if(v){if(c)throw new Error(nr(6));v=!1,u(),o.delete(b),i=null}}}function f(p){if(!jw(p))throw new Error(nr(7));if(typeof p.type>"u")throw new Error(nr(8));if(typeof p.type!="string")throw new Error(nr(17));if(c)throw new Error(nr(9));try{c=!0,s=n(s,p)}finally{c=!1}return(i=o).forEach(b=>{b()}),p}function m(p){if(typeof p!="function")throw new Error(nr(10));n=p,f({type:Vf.REPLACE})}function g(){const p=h;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(nr(11));function b(){const _=v;_.next&&_.next(d())}return b(),{unsubscribe:p(b)}},[Y1](){return this}}}return f({type:Vf.INIT}),{dispatch:f,subscribe:h,getState:d,replaceReducer:m,[Y1]:g}}function Nq(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:Vf.INIT})>"u")throw new Error(nr(12));if(typeof r(void 0,{type:Vf.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(nr(13))})}function t4(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{Nq(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const u={};for(let d=0;d<n.length;d++){const h=n[d],f=r[h],m=o[h],g=f(m,l);if(typeof g>"u")throw l&&l.type,new Error(nr(14));u[h]=g,c=c||g!==m}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Gf(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Sq(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(nr(15))};const o={getState:s.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=Gf(...l)(s.dispatch),{...s,dispatch:i}}}function r4(e){return jw(e)&&"type"in e&&typeof e.type=="string"}var n4=Symbol.for("immer-nothing"),X1=Symbol.for("immer-draftable"),Tr=Symbol.for("immer-state");function Wn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var sn=Object,yl=sn.getPrototypeOf,Kf="constructor",wp="prototype",bx="configurable",Yf="enumerable",Lh="writable",Au="value",Ys=e=>!!e&&!!e[Tr];function rs(e){var t;return e?s4(e)||_p(e)||!!e[X1]||!!((t=e[Kf])!=null&&t[X1])||jp(e)||Np(e):!1}var Eq=sn[wp][Kf].toString(),Q1=new WeakMap;function s4(e){if(!e||!Nw(e))return!1;const t=yl(e);if(t===null||t===sn[wp])return!0;const r=sn.hasOwnProperty.call(t,Kf)&&t[Kf];if(r===Object)return!0;if(!Eo(r))return!1;let n=Q1.get(r);return n===void 0&&(n=Function.toString.call(r),Q1.set(r,n)),n===Eq}function od(e,t,r=!0){ld(e)===0?(r?Reflect.ownKeys(e):sn.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function ld(e){const t=e[Tr];return t?t.type_:_p(e)?1:jp(e)?2:Np(e)?3:0}var J1=(e,t,r=ld(e))=>r===2?e.has(t):sn[wp].hasOwnProperty.call(e,t),wx=(e,t,r=ld(e))=>r===2?e.get(t):e[t],Xf=(e,t,r,n=ld(e))=>{n===2?e.set(t,r):n===3?e.add(r):e[t]=r};function Cq(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var _p=Array.isArray,jp=e=>e instanceof Map,Np=e=>e instanceof Set,Nw=e=>typeof e=="object",Eo=e=>typeof e=="function",pv=e=>typeof e=="boolean",Ss=e=>e.copy_||e.base_,Sw=e=>e.modified_?e.copy_:e.base_;function _x(e,t){if(jp(e))return new Map(e);if(Np(e))return new Set(e);if(_p(e))return Array[wp].slice.call(e);const r=s4(e);if(t===!0||t==="class_only"&&!r){const n=sn.getOwnPropertyDescriptors(e);delete n[Tr];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l[Lh]===!1&&(l[Lh]=!0,l[bx]=!0),(l.get||l.set)&&(n[o]={[bx]:!0,[Lh]:!0,[Yf]:l[Yf],[Au]:e[o]})}return sn.create(yl(e),n)}else{const n=yl(e);if(n!==null&&r)return{...e};const s=sn.create(n);return sn.assign(s,e)}}function Ew(e,t=!1){return Sp(e)||Ys(e)||!rs(e)||(ld(e)>1&&sn.defineProperties(e,{set:ah,add:ah,clear:ah,delete:ah}),sn.freeze(e),t&&od(e,(r,n)=>{Ew(n,!0)},!1)),e}function kq(){Wn(2)}var ah={[Au]:kq};function Sp(e){return e===null||!Nw(e)?!0:sn.isFrozen(e)}var Qf="MapSet",jx="Patches",i4={};function bl(e){const t=i4[e];return t||Wn(0,e),t}var Aq=e=>!!i4[e],Pu,a4=()=>Pu,Pq=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:Aq(Qf)?bl(Qf):void 0});function Z1(e,t){t&&(e.patchPlugin_=bl(jx),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Nx(e){Sx(e),e.drafts_.forEach(Oq),e.drafts_=null}function Sx(e){e===Pu&&(Pu=e.parent_)}var eS=e=>Pu=Pq(Pu,e);function Oq(e){const t=e[Tr];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function tS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];if(e!==void 0&&e!==r){r[Tr].modified_&&(Nx(t),Wn(4)),rs(e)&&(e=rS(t,e));const{patchPlugin_:s}=t;s&&s.generateReplacementPatches_(r[Tr].base_,e,t)}else e=rS(t,r);return Tq(t,e,!0),Nx(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==n4?e:void 0}function rS(e,t){if(Sp(t))return t;const r=t[Tr];if(!r)return Cw(t,e.handledSet_,e);if(!Ep(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){const{callbacks_:n}=r;if(n)for(;n.length>0;)n.pop()(e);c4(r,e)}return r.copy_}function Tq(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ew(t,r)}function o4(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var Ep=(e,t)=>e.scope_===t,Iq=[];function l4(e,t,r,n){const s=Ss(e),i=e.type_;if(n!==void 0&&wx(s,n,i)===t){Xf(s,n,r,i);return}if(!e.draftLocations_){const l=e.draftLocations_=new Map;od(s,(c,u)=>{if(Ys(u)){const d=l.get(u)||[];d.push(c),l.set(u,d)}})}const o=e.draftLocations_.get(t)??Iq;for(const l of o)Xf(s,l,r,i)}function Dq(e,t,r){e.callbacks_.push(function(s){var l;const i=t;if(!i||!Ep(i,s))return;(l=s.mapSetPlugin_)==null||l.fixSetContents(i);const o=Sw(i);l4(e,i.draft_??i,o,r),c4(i,s)})}function c4(e,t){var n;if(e.modified_&&!e.finalized_&&(e.type_===3||(((n=e.assigned_)==null?void 0:n.size)??0)>0)){const{patchPlugin_:s}=t;if(s){const i=s.getPath(e);i&&s.generatePatches_(e,i,t)}o4(e)}}function Rq(e,t,r){const{scope_:n}=e;if(Ys(r)){const s=r[Tr];Ep(s,n)&&s.callbacks_.push(function(){$h(e);const o=Sw(s);l4(e,r,o,t)})}else rs(r)&&e.callbacks_.push(function(){const i=Ss(e);wx(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&Cw(wx(e.copy_,t,e.type_),n.handledSet_,n)})}function Cw(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||Ys(e)||t.has(e)||!rs(e)||Sp(e)||(t.add(e),od(e,(n,s)=>{if(Ys(s)){const i=s[Tr];if(Ep(i,r)){const o=Sw(i);Xf(e,n,o,e.type_),o4(i)}}else rs(s)&&Cw(s,t,r)})),e}function Mq(e,t){const r=_p(e),n={type_:r?1:0,scope_:t?t.scope_:a4(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let s=n,i=kw;r&&(s=[n],i=Ou);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,[l,n]}var kw={get(e,t){if(t===Tr)return e;const r=Ss(e);if(!J1(r,t,e.type_))return Lq(e,r,t);const n=r[t];if(e.finalized_||!rs(n))return n;if(n===gv(e.base_,t)){$h(e);const s=e.type_===1?+t:t,i=Cx(e.scope_,n,e,s);return e.copy_[s]=i}return n},has(e,t){return t in Ss(e)},ownKeys(e){return Reflect.ownKeys(Ss(e))},set(e,t,r){const n=u4(Ss(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=gv(Ss(e),t),i=s==null?void 0:s[Tr];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if(Cq(r,s)&&(r!==void 0||J1(e.base_,t,e.type_)))return!0;$h(e),Ex(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_.set(t,!0),Rq(e,t,r)),!0},deleteProperty(e,t){return $h(e),gv(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Ex(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Ss(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{[Lh]:!0,[bx]:e.type_!==1||t!=="length",[Yf]:n[Yf],[Au]:r[t]}},defineProperty(){Wn(11)},getPrototypeOf(e){return yl(e.base_)},setPrototypeOf(){Wn(12)}},Ou={};od(kw,(e,t)=>{Ou[e]=function(){const r=arguments;return r[0]=r[0][0],t.apply(this,r)}});Ou.deleteProperty=function(e,t){return Ou.set.call(this,e,t,void 0)};Ou.set=function(e,t,r){return kw.set.call(this,e[0],t,r,e[0])};function gv(e,t){const r=e[Tr];return(r?Ss(r):e)[t]}function Lq(e,t,r){var s;const n=u4(t,r);return n?Au in n?n[Au]:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function u4(e,t){if(!(t in e))return;let r=yl(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=yl(r)}}function Ex(e){e.modified_||(e.modified_=!0,e.parent_&&Ex(e.parent_))}function $h(e){e.copy_||(e.assigned_=new Map,e.copy_=_x(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var $q=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(r,n,s)=>{if(Eo(r)&&!Eo(n)){const o=n;n=r;const l=this;return function(u=o,...d){return l.produce(u,h=>n.call(this,h,...d))}}Eo(n)||Wn(6),s!==void 0&&!Eo(s)&&Wn(7);let i;if(rs(r)){const o=eS(this),l=Cx(o,r,void 0);let c=!0;try{i=n(l),c=!1}finally{c?Nx(o):Sx(o)}return Z1(o,s),tS(i,o)}else if(!r||!Nw(r)){if(i=n(r),i===void 0&&(i=r),i===n4&&(i=void 0),this.autoFreeze_&&Ew(i,!0),s){const o=[],l=[];bl(jx).generateReplacementPatches_(r,i,{patches_:o,inversePatches_:l}),s(o,l)}return i}else Wn(1,r)},this.produceWithPatches=(r,n)=>{if(Eo(r))return(l,...c)=>this.produceWithPatches(l,u=>r(u,...c));let s,i;return[this.produce(r,n,(l,c)=>{s=l,i=c}),s,i]},pv(t==null?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),pv(t==null?void 0:t.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),pv(t==null?void 0:t.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){rs(t)||Wn(8),Ys(t)&&(t=Qn(t));const r=eS(this),n=Cx(r,t,void 0);return n[Tr].isManual_=!0,Sx(r),n}finishDraft(t,r){const n=t&&t[Tr];(!n||!n.isManual_)&&Wn(9);const{scope_:s}=n;return Z1(s,r),tS(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,r){let n;for(n=r.length-1;n>=0;n--){const i=r[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(r=r.slice(n+1));const s=bl(jx).applyPatches_;return Ys(t)?s(t,r):this.produce(t,i=>s(i,r))}};function Cx(e,t,r,n){const[s,i]=jp(t)?bl(Qf).proxyMap_(t,r):Np(t)?bl(Qf).proxySet_(t,r):Mq(t,r);return((r==null?void 0:r.scope_)??a4()).drafts_.push(s),i.callbacks_=(r==null?void 0:r.callbacks_)??[],i.key_=n,r&&n!==void 0?Dq(r,i,n):i.callbacks_.push(function(c){var d;(d=c.mapSetPlugin_)==null||d.fixSetContents(i);const{patchPlugin_:u}=c;i.modified_&&u&&u.generatePatches_(i,[],c)}),s}function Qn(e){return Ys(e)||Wn(10,e),d4(e)}function d4(e){if(!rs(e)||Sp(e))return e;const t=e[Tr];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=_x(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=_x(e,!0);return od(r,(s,i)=>{Xf(r,s,d4(i))},n),t&&(t.finalized_=!1),r}var Uq=new $q,h4=Uq.produce;function f4(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var Fq=f4(),Bq=f4,zq=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Gf:Gf.apply(null,arguments)};function On(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(on(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>r4(n)&&n.type===e,r}var m4=class Sc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Sc.prototype)}static get[Symbol.species](){return Sc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Sc(...t[0].concat(this)):new Sc(...t.concat(this))}};function nS(e){return rs(e)?h4(e,()=>{}):e}function oh(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Wq(e){return typeof e=="boolean"}var Hq=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new m4;return r&&(Wq(r)?o.push(Fq):o.push(Bq(r.extraArgument))),o},p4="RTK_autoBatch",at=()=>e=>({payload:e,meta:{[p4]:!0}}),sS=e=>t=>{setTimeout(t,e)},g4=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:sS(10):e.type==="callback"?e.queueNotification:sS(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>s&&d(),f=n.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return s=!((h=d==null?void 0:d.meta)!=null&&h[p4]),i=!s,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{s=!0}}})},qq=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new m4(e);return n&&s.push(g4(typeof n=="object"?n:void 0)),s};function Vq(e){const t=Hq(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(jw(r))l=t4(r);else throw new Error(on(1));let c;typeof n=="function"?c=n(t):c=t();let u=Gf;s&&(u=zq({trace:!1,...typeof s=="object"&&s}));const d=Sq(...c),h=qq(d);let f=typeof o=="function"?o(h):h();const m=u(...f);return e4(l,i,m)}function v4(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(on(28));if(l in t)throw new Error(on(29));return t[l]=o,s},addAsyncThunk(i,o){return o.pending&&(t[i.pending.type]=o.pending),o.rejected&&(t[i.rejected.type]=o.rejected),o.fulfilled&&(t[i.fulfilled.type]=o.fulfilled),o.settled&&r.push({matcher:i.settled,reducer:o.settled}),s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function Gq(e){return typeof e=="function"}function Kq(e,t){let[r,n,s]=v4(t),i;if(Gq(e))i=()=>nS(e());else{const l=nS(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[s]),u.reduce((d,h)=>{if(h)if(Ys(d)){const m=h(d,c);return m===void 0?d:m}else{if(rs(d))return h4(d,f=>h(f,c));{const f=h(d,c);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return o.getInitialState=i,o}var Yq="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Xq=(e=21)=>{let t="",r=e;for(;r--;)t+=Yq[Math.random()*64|0];return t},Qq=Symbol.for("rtk-slice-createasyncthunk");function Jq(e,t){return`${e}/${t}`}function Zq({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[Qq];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(on(11));const l=(typeof s.reducers=="function"?s.reducers(tV()):s.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(_,j){const N=typeof _=="string"?_:_.type;if(!N)throw new Error(on(12));if(N in u.sliceCaseReducersByType)throw new Error(on(13));return u.sliceCaseReducersByType[N]=j,d},addMatcher(_,j){return u.sliceMatchers.push({matcher:_,reducer:j}),d},exposeAction(_,j){return u.actionCreators[_]=j,d},exposeCaseReducer(_,j){return u.sliceCaseReducersByName[_]=j,d}};c.forEach(_=>{const j=l[_],N={reducerName:_,type:Jq(i,_),createNotation:typeof s.reducers=="function"};nV(j)?iV(N,j,d,t):rV(N,j,d)});function h(){const[_={},j=[],N=void 0]=typeof s.extraReducers=="function"?v4(s.extraReducers):[s.extraReducers],E={..._,...u.sliceCaseReducersByType};return Kq(s.initialState,T=>{for(let S in E)T.addCase(S,E[S]);for(let S of u.sliceMatchers)T.addMatcher(S.matcher,S.reducer);for(let S of j)T.addMatcher(S.matcher,S.reducer);N&&T.addDefaultCase(N)})}const f=_=>_,m=new Map,g=new WeakMap;let y;function p(_,j){return y||(y=h()),y(_,j)}function v(){return y||(y=h()),y.getInitialState()}function b(_,j=!1){function N(T){let S=T[_];return typeof S>"u"&&j&&(S=oh(g,N,v)),S}function E(T=f){const S=oh(m,j,()=>new WeakMap);return oh(S,T,()=>{const D={};for(const[O,C]of Object.entries(s.selectors??{}))D[O]=eV(C,T,()=>oh(g,T,v),j);return D})}return{reducerPath:_,getSelectors:E,get selectors(){return E(N)},selectSlice:N}}const w={name:i,reducer:p,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...b(o),injectInto(_,{reducerPath:j,...N}={}){const E=j??o;return _.inject({reducerPath:E,reducer:p},N),{...w,...b(E,!0)}}};return w}}function eV(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var qr=Zq();function tV(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function rV({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!sV(n))throw new Error(on(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?On(e,o):On(e))}function nV(e){return e._reducerDefinitionType==="asyncThunk"}function sV(e){return e._reducerDefinitionType==="reducerWithPrepare"}function iV({type:e,reducerName:t},r,n,s){if(!s)throw new Error(on(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,h=s(e,i,d);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(t,{fulfilled:o||lh,pending:l||lh,rejected:c||lh,settled:u||lh})}function lh(){}var aV="task",x4="listener",y4="completed",Aw="cancelled",oV=`task-${Aw}`,lV=`task-${y4}`,kx=`${x4}-${Aw}`,cV=`${x4}-${y4}`,Cp=class{constructor(e){ho(this,"name","TaskAbortError");ho(this,"message");this.code=e,this.message=`${aV} ${Aw} (reason: ${e})`}},Pw=(e,t)=>{if(typeof e!="function")throw new TypeError(on(32))},Jf=()=>{},b4=(e,t=Jf)=>(e.catch(t),e),w4=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),Ta=e=>{if(e.aborted)throw new Cp(e.reason)};function _4(e,t){let r=Jf;return new Promise((n,s)=>{const i=()=>s(new Cp(e.reason));if(e.aborted){i();return}r=w4(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=Jf})}var uV=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof Cp?"cancelled":"rejected",error:r}}finally{t==null||t()}},Zf=e=>t=>b4(_4(e,t).then(r=>(Ta(e),r))),j4=e=>{const t=Zf(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:Jo}=Object,iS={},kp="listenerMiddleware",dV=(e,t)=>{const r=n=>w4(e,()=>n.abort(e.reason));return(n,s)=>{Pw(n);const i=new AbortController;r(i);const o=uV(async()=>{Ta(e),Ta(i.signal);const l=await n({pause:Zf(i.signal),delay:j4(i.signal),signal:i.signal});return Ta(i.signal),l},()=>i.abort(lV));return s!=null&&s.autoJoin&&t.push(o.catch(Jf)),{result:Zf(e)(o),cancel(){i.abort(oV)}}}},hV=(e,t)=>{const r=async(n,s)=>{Ta(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(h,f)=>{f.unsubscribe(),c([h,f.getState(),f.getOriginalState()])}});i=()=>{d(),u()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await _4(t,Promise.race(l));return Ta(t),c}finally{i()}};return(n,s)=>b4(r(n,s))},N4=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=On(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(on(21));return Pw(i),{predicate:s,type:t,effect:i}},S4=Jo(e=>{const{type:t,predicate:r,effect:n}=N4(e);return{id:Xq(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(on(22))}}},{withTypes:()=>S4}),aS=(e,t)=>{const{type:r,effect:n,predicate:s}=N4(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},Ax=e=>{e.pending.forEach(t=>{t.abort(kx)})},fV=(e,t)=>()=>{for(const r of t.keys())Ax(r);e.clear()},oS=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},E4=Jo(On(`${kp}/add`),{withTypes:()=>E4}),mV=On(`${kp}/removeAll`),C4=Jo(On(`${kp}/remove`),{withTypes:()=>C4}),pV=(...e)=>{console.error(`${kp}/error`,...e)},cd=(e={})=>{const t=new Map,r=new Map,n=m=>{const g=r.get(m)??0;r.set(m,g+1)},s=m=>{const g=r.get(m)??1;g===1?r.delete(m):r.set(m,g-1)},{extra:i,onError:o=pV}=e;Pw(o);const l=m=>(m.unsubscribe=()=>t.delete(m.id),t.set(m.id,m),g=>{m.unsubscribe(),g!=null&&g.cancelActive&&Ax(m)}),c=m=>{const g=aS(t,m)??S4(m);return l(g)};Jo(c,{withTypes:()=>c});const u=m=>{const g=aS(t,m);return g&&(g.unsubscribe(),m.cancelActive&&Ax(g)),!!g};Jo(u,{withTypes:()=>u});const d=async(m,g,y,p)=>{const v=new AbortController,b=hV(c,v.signal),w=[];try{m.pending.add(v),n(m),await Promise.resolve(m.effect(g,Jo({},y,{getOriginalState:p,condition:(_,j)=>b(_,j).then(Boolean),take:b,delay:j4(v.signal),pause:Zf(v.signal),extra:i,signal:v.signal,fork:dV(v.signal,w),unsubscribe:m.unsubscribe,subscribe:()=>{t.set(m.id,m)},cancelActiveListeners:()=>{m.pending.forEach((_,j,N)=>{_!==v&&(_.abort(kx),N.delete(_))})},cancel:()=>{v.abort(kx),m.pending.delete(v)},throwIfCancelled:()=>{Ta(v.signal)}})))}catch(_){_ instanceof Cp||oS(o,_,{raisedBy:"effect"})}finally{await Promise.all(w),v.abort(cV),s(m),m.pending.delete(v)}},h=fV(t,r);return{middleware:m=>g=>y=>{if(!r4(y))return g(y);if(E4.match(y))return c(y.payload);if(mV.match(y)){h();return}if(C4.match(y))return u(y.payload);let p=m.getState();const v=()=>{if(p===iS)throw new Error(on(23));return p};let b;try{if(b=g(y),t.size>0){const w=m.getState(),_=Array.from(t.values());for(const j of _){let N=!1;try{N=j.predicate(y,w,p)}catch(E){N=!1,oS(o,E,{raisedBy:"predicate"})}N&&d(j,y,m,v)}}}finally{p=iS}return b},startListening:c,stopListening:u,clearListeners:h}};function on(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var gV={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},k4=qr({name:"chartLayout",initialState:gV,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,s,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(s=t.payload.bottom)!==null&&s!==void 0?s:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:vV,setLayout:xV,setChartSize:yV,setScale:bV}=k4.actions,wV=k4.reducer;function A4(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function gt(e){return Number.isFinite(e)}function vs(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lS(Object(r),!0).forEach(function(n){_V(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _V(e,t,r){return(t=jV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jV(e){var t=NV(e,"string");return typeof t=="symbol"?t:t+""}function NV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ur(e,t,r){return Jt(e)||Jt(t)?r:gs(t)?vl(e,t,r):typeof t=="function"?t(e):r}var SV=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&ae(e[i]))return Fo(Fo({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&ae(e[o]))return Fo(Fo({},e),{},{[o]:e[o]+(s||0)})}return e},ro=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",P4=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},O4=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:h,niceTicks:f,axisType:m}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,y=s==="category"&&o.bandwidth?o.bandwidth()/g:0;if(y=m==="angleAxis"&&i&&i.length>=2?Fr(i[0]-i[1])*2*y:y,h||f){var p=(h||f||[]).map((v,b)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+y,value:v,offset:y,index:b}});return p.filter(v=>!es(v.coordinate))}return c&&u?u.map((v,b)=>({coordinate:o(v)+y,value:v,index:b,offset:y})):o.ticks&&d!=null?o.ticks(d).map((v,b)=>({coordinate:o(v)+y,value:v,offset:y,index:b})):o.domain().map((v,b)=>({coordinate:o(v)+y,value:n?n[v]:v,index:b,offset:y}))},cS=1e-4,EV=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-cS,i=Math.max(n[0],n[1])+cS,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},CV=(e,t)=>{if(!t||t.length!==2||!ae(t[0])||!ae(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),s=[e[0],e[1]];return(!ae(e[0])||e[0]<r)&&(s[0]=r),(!ae(e[1])||e[1]>n)&&(s[1]=n),s[0]>n&&(s[0]=n),s[1]<r&&(s[1]=r),s},kV=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,o=0,l=0;l<r;++l){var c=e[l],u=c==null?void 0:c[s];if(u!=null){var d=u[1],h=u[0],f=es(d)?h:d;f>=0?(u[0]=i,u[1]=i+f,i=d):(u[0]=o,u[1]=o+f,o=d)}}}},AV=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var s=0;s<n;++s)for(var i=0,o=0;o<r;++o){var l=e[o],c=l==null?void 0:l[s];if(c!=null){var u=es(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},PV={sign:kV,expand:mH,none:qa,silhouette:pH,wiggle:gH,positive:AV},OV=(e,t,r)=>{var n,s=(n=PV[r])!==null&&n!==void 0?n:qa,i=fH().keys(t).value((l,c)=>Number(ur(l,c,0))).order(xx).offset(s),o=i(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var h=ur(e[d],t[c],0);Array.isArray(h)&&h.length===2&&ae(h[0])&&ae(h[1])&&(u[0]=h[0],u[1]=h[1])})}),o};function TV(e){return e==null?void 0:String(e)}var uS=e=>{var{axis:t,ticks:r,offset:n,bandSize:s,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=ur(i,t.dataKey,t.scale.domain()[o]);return Jt(l)?null:t.scale(l)-s/2+n},IV=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]);return n<=0&&s>=0?0:s<0?s:n}return r[0]},DV=e=>{var t=e.flat(2).filter(ae);return[Math.min(...t),Math.max(...t)]},RV=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],MV=(e,t,r)=>{if(e!=null)return RV(Object.keys(e).reduce((n,s)=>{var i=e[s];if(!i)return n;var{stackedData:o}=i,l=o.reduce((c,u)=>{var d=A4(u,t,r),h=DV(d);return!gt(h[0])||!gt(h[1])?c:[Math.min(c[0],h[0]),Math.max(c[1],h[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},dS=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hS=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,em=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=bp(t,d=>d.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],u=s[o-1];i=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),i)}return i===1/0?0:i}return r?void 0:0};function fS(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Fo(Fo({},t),{},{dataKey:r,payload:n,value:s,name:i})}function T4(e,t){if(e)return String(e);if(typeof t=="string")return t}var LV=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},$V=(e,t)=>t==="centric"?e.angle:e.radius,si=e=>e.layout.width,ii=e=>e.layout.height,UV=e=>e.layout.scale,I4=e=>e.layout.margin,Ap=F(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Pp=F(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),FV="data-recharts-item-index",BV="data-recharts-item-id",ud=60;function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ch(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mS(Object(r),!0).forEach(function(n){zV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zV(e,t,r){return(t=WV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function WV(e){var t=HV(e,"string");return typeof t=="symbol"?t:t+""}function HV(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qV=e=>e.brush.height;function VV(e){var t=Pp(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:ud;return r+s}return r},0)}function GV(e){var t=Pp(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var s=typeof n.width=="number"?n.width:ud;return r+s}return r},0)}function KV(e){var t=Ap(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function YV(e){var t=Ap(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var Zt=F([si,ii,I4,qV,VV,GV,KV,YV,ZI,yq],(e,t,r,n,s,i,o,l,c,u)=>{var d={left:(r.left||0)+s,right:(r.right||0)+i},h={top:(r.top||0)+o,bottom:(r.bottom||0)+l},f=ch(ch({},h),d),m=f.bottom;f.bottom+=n,f=SV(f,c,u);var g=e-f.left-f.right,y=t-f.top-f.bottom;return ch(ch({brushBottom:m},f),{},{width:Math.max(g,0),height:Math.max(y,0)})}),XV=F(Zt,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),Ow=F(si,ii,(e,t)=>({x:0,y:0,width:e,height:t})),QV=x.createContext(null),Vr=()=>x.useContext(QV)!=null,Op=e=>e.brush,Tp=F([Op,Zt,I4],(e,t,r)=>({height:e.height,x:ae(e.x)?e.x:t.left,y:ae(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:ae(e.width)?e.width:t.width})),D4={},R4={},M4={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:s,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},h=()=>{u&&d(),y()};let f=null;const m=()=>{f!=null&&clearTimeout(f),f=setTimeout(()=>{f=null,h()},n)},g=()=>{f!==null&&(clearTimeout(f),f=null)},y=()=>{g(),o=void 0,l=null},p=()=>{d()},v=function(...b){if(s!=null&&s.aborted)return;o=this,l=b;const w=f==null;m(),c&&w&&d()};return v.schedule=m,v.cancel=y,v.flush=p,s==null||s.addEventListener("abort",y,{once:!0}),v}e.debounce=t})(M4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=M4;function r(n,s=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,h=null;const f=t.debounce(function(...y){d=n.apply(this,y),h=null},s,{edges:u}),m=function(...y){return c!=null&&(h===null&&(h=Date.now()),Date.now()-h>=c)?(d=n.apply(this,y),h=Date.now(),f.cancel(),f.schedule(),d):(f.apply(this,y),d)},g=()=>(f.flush(),d);return m.cancel=f.cancel,m.flush=g,m}e.debounce=r})(R4);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=R4;function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r})(D4);var JV=D4.throttle;const ZV=ti(JV);var tm=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>s[o++]))}},L4=(e,t,r)=>{var{width:n="100%",height:s="100%",aspect:i,maxHeight:o}=r,l=Ks(n)?e:Number(n),c=Ks(s)?t:Number(s);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},eG={width:0,height:0,overflow:"visible"},tG={width:0,overflowX:"visible"},rG={height:0,overflowY:"visible"},nG={},sG=e=>{var{width:t,height:r}=e,n=Ks(t),s=Ks(r);return n&&s?eG:n?tG:s?rG:nG};function iG(e){var{width:t,height:r,aspect:n}=e,s=t,i=r;return s===void 0&&i===void 0?(s="100%",i="100%"):s===void 0?s=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:s,height:i}}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Px.apply(null,arguments)}function pS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pS(Object(r),!0).forEach(function(n){aG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aG(e,t,r){return(t=oG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oG(e){var t=lG(e,"string");return typeof t=="symbol"?t:t+""}function lG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $4=x.createContext({width:-1,height:-1});function cG(e){return vs(e.width)&&vs(e.height)}function U4(e){var{children:t,width:r,height:n}=e,s=x.useMemo(()=>({width:r,height:n}),[r,n]);return cG(s)?x.createElement($4.Provider,{value:s},t):null}var Tw=()=>x.useContext($4),uG=x.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:h,className:f,onResize:m,style:g={}}=e,y=x.useRef(null),p=x.useRef();p.current=m,x.useImperativeHandle(t,()=>y.current);var[v,b]=x.useState({containerWidth:n.width,containerHeight:n.height}),w=x.useCallback((T,S)=>{b(D=>{var O=Math.round(T),C=Math.round(S);return D.containerWidth===O&&D.containerHeight===C?D:{containerWidth:O,containerHeight:C}})},[]);x.useEffect(()=>{if(y.current==null||typeof ResizeObserver>"u")return ad;var T=C=>{var k,{width:I,height:R}=C[0].contentRect;w(I,R),(k=p.current)===null||k===void 0||k.call(p,I,R)};d>0&&(T=ZV(T,d,{trailing:!0,leading:!1}));var S=new ResizeObserver(T),{width:D,height:O}=y.current.getBoundingClientRect();return w(D,O),S.observe(y.current),()=>{S.disconnect()}},[w,d]);var{containerWidth:_,containerHeight:j}=v;tm(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:N,calculatedHeight:E}=L4(_,j,{width:s,height:i,aspect:r,maxHeight:c});return tm(N!=null&&N>0||E!=null&&E>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,N,E,s,i,o,l,r),x.createElement("div",{id:h?"".concat(h):void 0,className:it("recharts-responsive-container",f),style:gS(gS({},g),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:y},x.createElement("div",{style:sG({width:s,height:i})},x.createElement(U4,{width:N,height:E},u)))}),F4=x.forwardRef((e,t)=>{var r=Tw();if(vs(r.width)&&vs(r.height))return e.children;var{width:n,height:s}=iG({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=L4(void 0,void 0,{width:n,height:s,aspect:e.aspect,maxHeight:e.maxHeight});return ae(i)&&ae(o)?x.createElement(U4,{width:i,height:o},e.children):x.createElement(uG,Px({},e,{width:n,height:s,ref:t}))});function B4(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Ip=()=>{var e,t=Vr(),r=ce(XV),n=ce(Tp),s=(e=ce(Op))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},dG={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},z4=()=>{var e;return(e=ce(Zt))!==null&&e!==void 0?e:dG},W4=()=>ce(si),H4=()=>ce(ii),$e=e=>e.layout.layoutType,dd=()=>ce($e),hG=()=>{var e=dd();return e!==void 0},Dp=e=>{var t=St(),r=Vr(),{width:n,height:s}=e,i=Tw(),o=n,l=s;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:s),x.useEffect(()=>{!r&&vs(o)&&vs(l)&&t(yV({width:o,height:l}))},[t,r,o,l]),null},q4=Symbol.for("immer-nothing"),vS=Symbol.for("immer-draftable"),dn=Symbol.for("immer-state");function Hn(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tu=Object.getPrototypeOf;function wl(e){return!!e&&!!e[dn]}function Va(e){var t;return e?V4(e)||Array.isArray(e)||!!e[vS]||!!((t=e.constructor)!=null&&t[vS])||hd(e)||Mp(e):!1}var fG=Object.prototype.constructor.toString(),xS=new WeakMap;function V4(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if(typeof r!="function")return!1;let n=xS.get(r);return n===void 0&&(n=Function.toString.call(r),xS.set(r,n)),n===fG}function rm(e,t,r=!0){Rp(e)===0?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(s=>{t(s,e[s],e)}):e.forEach((n,s)=>t(s,n,e))}function Rp(e){const t=e[dn];return t?t.type_:Array.isArray(e)?1:hd(e)?2:Mp(e)?3:0}function Ox(e,t){return Rp(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function G4(e,t,r){const n=Rp(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function mG(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function hd(e){return e instanceof Map}function Mp(e){return e instanceof Set}function fa(e){return e.copy_||e.base_}function Tx(e,t){if(hd(e))return new Map(e);if(Mp(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=V4(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[dn];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Tu(e),n)}else{const n=Tu(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function Iw(e,t=!1){return Lp(e)||wl(e)||!Va(e)||(Rp(e)>1&&Object.defineProperties(e,{set:uh,add:uh,clear:uh,delete:uh}),Object.freeze(e),t&&Object.values(e).forEach(r=>Iw(r,!0))),e}function pG(){Hn(2)}var uh={value:pG};function Lp(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var gG={};function Ga(e){const t=gG[e];return t||Hn(0,e),t}var Iu;function K4(){return Iu}function vG(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yS(e,t){t&&(Ga("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ix(e){Dx(e),e.drafts_.forEach(xG),e.drafts_=null}function Dx(e){e===Iu&&(Iu=e.parent_)}function bS(e){return Iu=vG(Iu,e)}function xG(e){const t=e[dn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function wS(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[dn].modified_&&(Ix(t),Hn(4)),Va(e)&&(e=nm(t,e),t.parent_||sm(t,e)),t.patches_&&Ga("Patches").generateReplacementPatches_(r[dn].base_,e,t.patches_,t.inversePatches_)):e=nm(t,r,[]),Ix(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==q4?e:void 0}function nm(e,t,r){if(Lp(t))return t;const n=e.immer_.shouldUseStrictIteration(),s=t[dn];if(!s)return rm(t,(i,o)=>_S(e,s,t,i,o,r),n),t;if(s.scope_!==e)return t;if(!s.modified_)return sm(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const i=s.copy_;let o=i,l=!1;s.type_===3&&(o=new Set(i),i.clear(),l=!0),rm(o,(c,u)=>_S(e,s,i,c,u,r,l),n),sm(e,i,!1),r&&e.patches_&&Ga("Patches").generatePatches_(s,r,e.patches_,e.inversePatches_)}return s.copy_}function _S(e,t,r,n,s,i,o){if(s==null||typeof s!="object"&&!o)return;const l=Lp(s);if(!(l&&!o)){if(wl(s)){const c=i&&t&&t.type_!==3&&!Ox(t.assigned_,n)?i.concat(n):void 0,u=nm(e,s,c);if(G4(r,n,u),wl(u))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(Va(s)&&!l){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===s&&l)return;nm(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&(hd(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&sm(e,s)}}}function sm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Iw(t,r)}function yG(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:K4(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Dw;r&&(s=[n],i=Du);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var Dw={get(e,t){if(t===dn)return e;const r=fa(e);if(!Ox(r,t))return bG(e,r,t);const n=r[t];return e.finalized_||!Va(n)?n:n===vv(e.base_,t)?(xv(e),e.copy_[t]=Mx(n,e)):n},has(e,t){return t in fa(e)},ownKeys(e){return Reflect.ownKeys(fa(e))},set(e,t,r){const n=Y4(fa(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=vv(fa(e),t),i=s==null?void 0:s[dn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(mG(r,s)&&(r!==void 0||Ox(e.base_,t)))return!0;xv(e),Rx(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return vv(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,xv(e),Rx(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=fa(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){Hn(11)},getPrototypeOf(e){return Tu(e.base_)},setPrototypeOf(){Hn(12)}},Du={};rm(Dw,(e,t)=>{Du[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Du.deleteProperty=function(e,t){return Du.set.call(this,e,t,void 0)};Du.set=function(e,t,r){return Dw.set.call(this,e[0],t,r,e[0])};function vv(e,t){const r=e[dn];return(r?fa(r):e)[t]}function bG(e,t,r){var s;const n=Y4(t,r);return n?"value"in n?n.value:(s=n.get)==null?void 0:s.call(e.draft_):void 0}function Y4(e,t){if(!(t in e))return;let r=Tu(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Tu(r)}}function Rx(e){e.modified_||(e.modified_=!0,e.parent_&&Rx(e.parent_))}function xv(e){e.copy_||(e.copy_=Tx(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var wG=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&Hn(6),n!==void 0&&typeof n!="function"&&Hn(7);let s;if(Va(t)){const i=bS(this),o=Mx(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?Ix(i):Dx(i)}return yS(i,n),wS(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===q4&&(s=void 0),this.autoFreeze_&&Iw(s,!0),n){const i=[],o=[];Ga("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else Hn(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof(e==null?void 0:e.useStrictIteration)=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Va(e)||Hn(8),wl(e)&&(e=_G(e));const t=bS(this),r=Mx(e,void 0);return r[dn].isManual_=!0,Dx(t),r}finishDraft(e,t){const r=e&&e[dn];(!r||!r.isManual_)&&Hn(9);const{scope_:n}=r;return yS(n,t),wS(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=Ga("Patches").applyPatches_;return wl(e)?n(e,t):this.produce(e,s=>n(s,t))}};function Mx(e,t){const r=hd(e)?Ga("MapSet").proxyMap_(e,t):Mp(e)?Ga("MapSet").proxySet_(e,t):yG(e,t);return(t?t.scope_:K4()).drafts_.push(r),r}function _G(e){return wl(e)||Hn(10,e),X4(e)}function X4(e){if(!Va(e)||Lp(e))return e;const t=e[dn];let r,n=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Tx(e,t.scope_.immer_.useStrictShallowCopy_),n=t.scope_.immer_.shouldUseStrictIteration()}else r=Tx(e,!0);return rm(r,(s,i)=>{G4(r,s,X4(i))},n),t&&(t.finalized_=!1),r}var jG=new wG;jG.produce;var NG={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},Q4=qr({name:"legend",initialState:NG,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:at()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Qn(e).payload.indexOf(r);s>-1&&(e.payload[s]=n)},prepare:at()},removeLegendPayload:{reducer(e,t){var r=Qn(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:at()}}}),{setLegendSize:nle,setLegendSettings:sle,addLegendPayload:SG,replaceLegendPayload:EG,removeLegendPayload:CG}=Q4.actions,kG=Q4.reducer;function Lx(){return Lx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lx.apply(null,arguments)}function jS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function yv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jS(Object(r),!0).forEach(function(n){AG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AG(e,t,r){return(t=PG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PG(e){var t=OG(e,"string");return typeof t=="symbol"?t:t+""}function OG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TG(e){return Array.isArray(e)&&gs(e[0])&&gs(e[1])?e.join(" ~ "):e}var IG=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:h,accessibilityLayer:f=!1}=e,m=()=>{if(i&&i.length){var j={padding:0,margin:0},N=(l?bp(i,l):i).map((E,T)=>{if(E.type==="none")return null;var S=E.formatter||o||TG,{value:D,name:O}=E,C=D,k=O;if(S){var I=S(D,O,E,T,i);if(Array.isArray(I))[C,k]=I;else if(I!=null)C=I;else return null}var R=yv({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return x.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:R},gs(k)?x.createElement("span",{className:"recharts-tooltip-item-name"},k):null,gs(k)?x.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,x.createElement("span",{className:"recharts-tooltip-item-value"},C),x.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return x.createElement("ul",{className:"recharts-tooltip-item-list",style:j},N)}return null},g=yv({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),y=yv({margin:0},s),p=!Jt(d),v=p?d:"",b=it("recharts-default-tooltip",c),w=it("recharts-tooltip-label",u);p&&h&&i!==void 0&&i!==null&&(v=h(d,i));var _=f?{role:"status","aria-live":"assertive"}:{};return x.createElement("div",Lx({className:b,style:g},_),x.createElement("p",{className:w,style:y},x.isValidElement(v)?v:"".concat(v)),m())},hc="recharts-tooltip-wrapper",DG={visibility:"hidden"};function RG(e){var{coordinate:t,translateX:r,translateY:n}=e;return it(hc,{["".concat(hc,"-right")]:ae(r)&&t&&ae(t.x)&&r>=t.x,["".concat(hc,"-left")]:ae(r)&&t&&ae(t.x)&&r<t.x,["".concat(hc,"-bottom")]:ae(n)&&t&&ae(t.y)&&n>=t.y,["".concat(hc,"-top")]:ae(n)&&t&&ae(t.y)&&n<t.y})}function NS(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&ae(i[n]))return i[n];var d=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?d:h;var f=c[n];if(f==null)return 0;if(o[n]){var m=d,g=f;return m<g?Math.max(h,f):Math.max(d,f)}if(u==null)return 0;var y=h+l,p=f+u;return y>p?Math.max(d,f):Math.max(h,f)}function MG(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function LG(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,h;return o.height>0&&o.width>0&&r?(d=NS({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=NS({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=MG({translateX:d,translateY:h,useTranslate3d:l})):u=DG,{cssProperties:u,cssClasses:RG({translateX:d,translateY:h,coordinate:r})}}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){$x(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $x(e,t,r){return(t=$G(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $G(e){var t=UG(e,"string");return typeof t=="symbol"?t:t+""}function UG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FG extends x.PureComponent{constructor(){super(...arguments),$x(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),$x(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:h,useTranslate3d:f,viewBox:m,wrapperStyle:g,lastBoundingBox:y,innerRef:p,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:w}=LG({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:h,tooltipBox:{height:y.height,width:y.width},useTranslate3d:f,viewBox:m}),_=v?{}:dh(dh({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),j=dh(dh({},_),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return x.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:j,ref:p},i)}}var J4=()=>{var e;return(e=ce(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Ux(){return Ux=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ux.apply(null,arguments)}function ES(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ES(Object(r),!0).forEach(function(n){BG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ES(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BG(e,t,r){return(t=zG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zG(e){var t=WG(e,"string");return typeof t=="symbol"?t:t+""}function WG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kS={curveBasisClosed:rH,curveBasisOpen:nH,curveBasis:tH,curveBumpX:BW,curveBumpY:zW,curveLinearClosed:sH,curveLinear:fp,curveMonotoneX:iH,curveMonotoneY:aH,curveNatural:oH,curveStep:lH,curveStepAfter:uH,curveStepBefore:cH},im=e=>gt(e.x)&&gt(e.y),AS=e=>e.base!=null&&im(e.base)&&im(e),fc=e=>e.x,mc=e=>e.y,HG=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(id(e));return(r==="curveMonotone"||r==="curveBump")&&t?kS["".concat(r).concat(t==="vertical"?"Y":"X")]:kS[r]||fp},qG=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=HG(t,s),l=i?r.filter(im):r,c;if(Array.isArray(n)){var u=r.map((m,g)=>CS(CS({},m),{},{base:n[g]}));s==="vertical"?c=nh().y(mc).x1(fc).x0(m=>m.base.x):c=nh().x(fc).y1(mc).y0(m=>m.base.y);var d=c.defined(AS).curve(o),h=i?u.filter(AS):u;return d(h)}s==="vertical"&&ae(n)?c=nh().y(mc).x1(fc).x0(n):ae(n)?c=nh().x(fc).y1(mc).y0(n):c=cI().x(fc).y(mc);var f=c.defined(im).curve(o);return f(l)},Z4=e=>{var{className:t,points:r,path:n,pathRef:s}=e,i=dd();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=r&&r.length?qG(o):n;return x.createElement("path",Ux({},Vs(e),TH(e),{className:it("recharts-curve",t),d:l===null?void 0:l,ref:s}))},VG=["x","y","top","left","width","height","className"];function Fx(){return Fx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fx.apply(null,arguments)}function PS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GG(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PS(Object(r),!0).forEach(function(n){KG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KG(e,t,r){return(t=YG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YG(e){var t=XG(e,"string");return typeof t=="symbol"?t:t+""}function XG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QG(e,t){if(e==null)return{};var r,n,s=JG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function JG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ZG=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),eK=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=QG(e,VG),u=GG({x:t,y:r,top:n,left:s,width:i,height:o},c);return!ae(t)||!ae(r)||!ae(i)||!ae(o)||!ae(n)||!ae(s)?null:x.createElement("path",Fx({},Pn(u),{className:it("recharts-cross",l),d:ZG(t,r,i,o,n,s)}))};function tK(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function OS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OS(Object(r),!0).forEach(function(n){rK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rK(e,t,r){return(t=nK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nK(e){var t=sK(e,"string");return typeof t=="symbol"?t:t+""}function sK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iK=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),eD=(e,t,r)=>e.map(n=>"".concat(iK(n)," ").concat(t,"ms ").concat(r)).join(","),aK=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),Ru=(e,t)=>Object.keys(t).reduce((r,n)=>TS(TS({},r),{},{[n]:e(n,t[n])}),{});function IS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IS(Object(r),!0).forEach(function(n){oK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oK(e,t,r){return(t=lK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lK(e){var t=cK(e,"string");return typeof t=="symbol"?t:t+""}function cK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var am=(e,t,r)=>e+(t-e)*r,Bx=e=>{var{from:t,to:r}=e;return t!==r},tD=(e,t,r)=>{var n=Ru((s,i)=>{if(Bx(i)){var[o,l]=e(i.from,i.to,i.velocity);return Tt(Tt({},i),{},{from:o,velocity:l})}return i},t);return r<1?Ru((s,i)=>Bx(i)&&n[s]!=null?Tt(Tt({},i),{},{velocity:am(i.velocity,n[s].velocity,r),from:am(i.from,n[s].from,r)}):i,t):tD(e,n,r-1)};function uK(e,t,r,n,s,i){var o,l=n.reduce((f,m)=>Tt(Tt({},f),{},{[m]:{from:e[m],velocity:0,to:t[m]}}),{}),c=()=>Ru((f,m)=>m.from,l),u=()=>!Object.values(l).filter(Bx).length,d=null,h=f=>{o||(o=f);var m=f-o,g=m/r.dt;l=tD(r,l,g),s(Tt(Tt(Tt({},e),t),c())),o=f,u()||(d=i.setTimeout(h))};return()=>(d=i.setTimeout(h),()=>{var f;(f=d)===null||f===void 0||f()})}function dK(e,t,r,n,s,i,o){var l=null,c=s.reduce((h,f)=>{var m=e[f],g=t[f];return m==null||g==null?h:Tt(Tt({},h),{},{[f]:[m,g]})},{}),u,d=h=>{u||(u=h);var f=(h-u)/n,m=Ru((y,p)=>am(...p,r(f)),c);if(i(Tt(Tt(Tt({},e),t),m)),f<1)l=o.setTimeout(d);else{var g=Ru((y,p)=>am(...p,r(1)),c);i(Tt(Tt(Tt({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{var h;(h=l)===null||h===void 0||h()})}const hK=(e,t,r,n,s,i)=>{var o=aK(e,t);return r==null?()=>(s(Tt(Tt({},e),t)),()=>{}):r.isStepper===!0?uK(e,t,r,o,s,i):dK(e,t,r,n,o,s,i)};var om=1e-4,rD=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],nD=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),DS=(e,t)=>r=>{var n=rD(e,t);return nD(n,r)},fK=(e,t)=>r=>{var n=rD(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return nD(s,r)},mK=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var s=n.map(i=>parseFloat(i));return[s[0],s[1],s[2],s[3]]},pK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var s=mK(r[0]);if(s)return s}}return r.length===4?r:[0,0,1,1]},gK=(e,t,r,n)=>{var s=DS(e,r),i=DS(t,n),o=fK(e,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,h=d,f=0;f<8;++f){var m=s(h)-d,g=o(h);if(Math.abs(m-d)<om||g<om)return i(h);h=l(h-m/g)}return i(h)};return c.isStepper=!1,c},RS=function(){return gK(...pK(...arguments))},vK=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,h=c+(u-d)*s/1e3,f=c*s/1e3+o;return Math.abs(f-l)<om&&Math.abs(h)<om?[l,0]:[f,h]};return i.isStepper=!0,i.dt=s,i},xK=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return RS(e);case"spring":return vK();default:if(e.split("(")[0]==="cubic-bezier")return RS(e)}return typeof e=="function"?e:null};function yK(e){var t,r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,u),c);return}i(c),s=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class bK{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{s!=null&&cancelAnimationFrame(s)}}}function wK(){return yK(new bK)}var _K=x.createContext(wK);function jK(e,t){var r=x.useContext(_K);return x.useMemo(()=>t??r(e),[e,t,r])}var NK=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),$p={isSsr:NK()},SK={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},MS={t:0},bv={t:1};function Rw(e){var t=pn(e,SK),{isActive:r,canBegin:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=r==="auto"?!$p.isSsr:r,h=jK(t.animationId,t.animationManager),[f,m]=x.useState(d?MS:bv),g=x.useRef(null);return x.useEffect(()=>{d||m(bv)},[d]),x.useEffect(()=>{if(!d||!n)return ad;var y=hK(MS,bv,xK(i),s,m,h.getTimeoutController()),p=()=>{g.current=y()};return h.start([c,o,p,s,l]),()=>{h.stop(),g.current&&g.current(),l()}},[d,n,s,i,o,c,l,h]),u(f.t)}function Mw(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=x.useRef(ku(t)),n=x.useRef(e);return n.current!==e&&(r.current=ku(t),n.current=e),r.current}var EK=["radius"],CK=["radius"],LS,$S,US,FS,BS,zS,WS,HS,qS,VS;function GS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function KS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GS(Object(r),!0).forEach(function(n){kK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kK(e,t,r){return(t=AK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AK(e){var t=PK(e,"string");return typeof t=="symbol"?t:t+""}function PK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lm(){return lm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lm.apply(null,arguments)}function YS(e,t){if(e==null)return{};var r,n,s=OK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function OK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function as(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var XS=(e,t,r,n,s)=>{var i=Ci(r),o=Ci(n),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,h;if(l>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,g=4;m<g;m++)f[m]=s[m]>l?l:s[m];h=xt(LS||(LS=as(["M",",",""])),e,t+c*f[0]),f[0]>0&&(h+=xt($S||($S=as(["A ",",",",0,0,",",",",",""])),f[0],f[0],d,e+u*f[0],t)),h+=xt(US||(US=as(["L ",",",""])),e+r-u*f[1],t),f[1]>0&&(h+=xt(FS||(FS=as(["A ",",",",0,0,",`,
        `,",",""])),f[1],f[1],d,e+r,t+c*f[1])),h+=xt(BS||(BS=as(["L ",",",""])),e+r,t+n-c*f[2]),f[2]>0&&(h+=xt(zS||(zS=as(["A ",",",",0,0,",`,
        `,",",""])),f[2],f[2],d,e+r-u*f[2],t+n)),h+=xt(WS||(WS=as(["L ",",",""])),e+u*f[3],t+n),f[3]>0&&(h+=xt(HS||(HS=as(["A ",",",",0,0,",`,
        `,",",""])),f[3],f[3],d,e,t+n-c*f[3])),h+="Z"}else if(l>0&&s===+s&&s>0){var y=Math.min(l,s);h=xt(qS||(qS=as(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*y,y,y,d,e+u*y,t,e+r-u*y,t,y,y,d,e+r,t+c*y,e+r,t+n-c*y,y,y,d,e+r-u*y,t+n,e+u*y,t+n,y,y,d,e,t+n-c*y)}else h=xt(VS||(VS=as(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return h},QS={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},sD=e=>{var t=pn(e,QS),r=x.useRef(null),[n,s]=x.useState(-1);x.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var P=r.current.getTotalLength();P&&s(P)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:h,animationDuration:f,animationBegin:m,isAnimationActive:g,isUpdateAnimationActive:y}=t,p=x.useRef(l),v=x.useRef(c),b=x.useRef(i),w=x.useRef(o),_=x.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),j=Mw(_,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var N=it("recharts-rectangle",d);if(!y){var E=Pn(t),{radius:T}=E,S=YS(E,EK);return x.createElement("path",lm({},S,{x:Ci(i),y:Ci(o),width:Ci(l),height:Ci(c),radius:typeof u=="number"?u:void 0,className:N,d:XS(i,o,l,c,u)}))}var D=p.current,O=v.current,C=b.current,k=w.current,I="0px ".concat(n===-1?1:n,"px"),R="".concat(n,"px 0px"),M=eD(["strokeDasharray"],f,typeof h=="string"?h:QS.animationEasing);return x.createElement(Rw,{animationId:j,key:j,canBegin:n>0,duration:f,easing:h,isActive:y,begin:m},P=>{var A=ar(D,l,P),$=ar(O,c,P),L=ar(C,i,P),z=ar(k,o,P);r.current&&(p.current=A,v.current=$,b.current=L,w.current=z);var K;g?P>0?K={transition:M,strokeDasharray:R}:K={strokeDasharray:I}:K={strokeDasharray:R};var se=Pn(t),{radius:fe}=se,he=YS(se,CK);return x.createElement("path",lm({},he,{radius:typeof u=="number"?u:void 0,className:N,d:XS(L,z,A,$,u),ref:r,style:KS(KS({},K),t.style)}))})};function JS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ZS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JS(Object(r),!0).forEach(function(n){TK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TK(e,t,r){return(t=IK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cm=Math.PI/180,RK=e=>e*180/Math.PI,or=(e,t,r,n)=>({x:e+Math.cos(-cm*n)*r,y:t+Math.sin(-cm*n)*r}),MK=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},LK=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},$K=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=LK({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:RK(c),angleInRadian:c}},UK=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},FK=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},BK=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:s,angle:i}=$K({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:u}=UK(t),d=i,h;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;h=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;h=d>=u&&d<=c}return h?ZS(ZS({},t),{},{radius:s,angle:FK(d,t)}):null};function iD(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=or(t,r,n,s),l=or(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}var eE,tE,rE,nE,sE,iE,aE;function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zx.apply(null,arguments)}function Sa(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var zK=(e,t)=>{var r=Fr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},hh=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/cm,h=c?s:s+i*d,f=or(t,r,u,h),m=or(t,r,n,h),g=c?s-i*d:s,y=or(t,r,u*Math.cos(d*cm),g);return{center:f,circleTangency:m,lineTangency:y,theta:d}},aD=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=zK(i,o),c=i+l,u=or(t,r,s,i),d=or(t,r,s,c),h=xt(eE||(eE=Sa(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,s,s,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(n>0){var f=or(t,r,n,i),m=or(t,r,n,c);h+=xt(tE||(tE=Sa(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),m.x,m.y,n,n,+(Math.abs(l)>180),+(i<=c),f.x,f.y)}else h+=xt(rE||(rE=Sa(["L ",","," Z"])),t,r);return h},WK=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=Fr(u-c),{circleTangency:h,lineTangency:f,theta:m}=hh({cx:t,cy:r,radius:s,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:y,theta:p}=hh({cx:t,cy:r,radius:s,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-m-p;if(v<0)return o?xt(nE||(nE=Sa(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),f.x,f.y,i,i,i*2,i,i,-i*2):aD({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:u});var b=xt(sE||(sE=Sa(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),f.x,f.y,i,i,+(d<0),h.x,h.y,s,s,+(v>180),+(d<0),g.x,g.y,i,i,+(d<0),y.x,y.y);if(n>0){var{circleTangency:w,lineTangency:_,theta:j}=hh({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:N,lineTangency:E,theta:T}=hh({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),S=l?Math.abs(c-u):Math.abs(c-u)-j-T;if(S<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+=xt(iE||(iE=Sa(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),E.x,E.y,i,i,+(d<0),N.x,N.y,n,n,+(S>180),+(d>0),w.x,w.y,i,i,+(d<0),_.x,_.y)}else b+=xt(aE||(aE=Sa(["L",",","Z"])),t,r);return b},HK={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},oD=e=>{var t=pn(e,HK),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:h}=t;if(i<s||u===d)return null;var f=it("recharts-sector",h),m=i-s,g=ts(o,m,0,!0),y;return g>0&&Math.abs(u-d)<360?y=WK({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(g,m/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):y=aD({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d}),x.createElement("path",zx({},Pn(t),{className:f,d:y}))};function qK(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(SI(t)){if(e==="centric"){var{cx:n,cy:s,innerRadius:i,outerRadius:o,angle:l}=t,c=or(n,s,i,l),u=or(n,s,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return iD(t)}}var lD={},cD={},uD={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ww;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(uD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=uD;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(cD);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=_w,r=cD;function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=s,s+=o;return c}e.range=n})(lD);var VK=lD.range;const dD=ti(VK);function zi(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GK(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lw(e){let t,r,n;e.length!==2?(t=zi,r=(l,c)=>zi(e(l),c),n=(l,c)=>e(l)-c):(t=e===zi||e===GK?e:KK,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<0?u=h+1:d=h}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const h=u+d>>>1;r(l[h],c)<=0?u=h+1:d=h}while(u<d)}return u}function o(l,c,u=0,d=l.length){const h=s(l,c,u,d-1);return h>u&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function KK(){return 0}function hD(e){return e===null?NaN:+e}function*YK(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const XK=Lw(zi),fd=XK.right;Lw(hD).center;class oE extends Map{constructor(t,r=ZK){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(lE(this,t))}has(t){return super.has(lE(this,t))}set(t,r){return super.set(QK(this,t),r)}delete(t){return super.delete(JK(this,t))}}function lE({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function QK({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function JK({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function ZK(e){return e!==null&&typeof e=="object"?e.valueOf():e}function eY(e=zi){if(e===zi)return fD;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function fD(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tY=Math.sqrt(50),rY=Math.sqrt(10),nY=Math.sqrt(2);function um(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=tY?10:i>=rY?5:i>=nY?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?um(e,t,r*2):[l,c,u]}function Wx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?um(t,e,r):um(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function Hx(e,t,r){return t=+t,e=+e,r=+r,um(e,t,r)[2]}function qx(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Hx(t,e,r):Hx(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function cE(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function uE(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function mD(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?fD:eY(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),h=.5*Math.exp(2*d/3),f=.5*Math.sqrt(d*h*(c-h)/c)*(u-c/2<0?-1:1),m=Math.max(r,Math.floor(t-u*h/c+f)),g=Math.min(n,Math.floor(t+(c-u)*h/c+f));mD(e,t,m,g,s)}const i=e[t];let o=r,l=n;for(pc(e,r,t),s(e[n],i)>0&&pc(e,r,n);o<l;){for(pc(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?pc(e,r,l):(++l,pc(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function pc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function sY(e,t,r){if(e=Float64Array.from(YK(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return uE(e);if(t>=1)return cE(e);var n,s=(n-1)*t,i=Math.floor(s),o=cE(mD(e,i).subarray(0,i+1)),l=uE(e.subarray(i+1));return o+(l-o)*(s-i)}}function iY(e,t,r=hD){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function aY(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function In(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ai(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Vx=Symbol("implicit");function $w(){var e=new oE,t=[],r=[],n=Vx;function s(i){let o=e.get(i);if(o===void 0){if(n!==Vx)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new oE;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return $w(t,r).unknown(n)},In.apply(s,arguments),s}function Uw(){var e=$w().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function h(){var f=t().length,m=s<n,g=m?s:n,y=m?n:s;i=(y-g)/Math.max(1,f-c+u*2),l&&(i=Math.floor(i)),g+=(y-g-i*(f-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var p=aY(f).map(function(v){return g+i*v});return r(m?p.reverse():p)}return e.domain=function(f){return arguments.length?(t(f),h()):t()},e.range=function(f){return arguments.length?([n,s]=f,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(f){return[n,s]=f,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(f){return arguments.length?(l=!!f,h()):l},e.padding=function(f){return arguments.length?(c=Math.min(1,u=+f),h()):c},e.paddingInner=function(f){return arguments.length?(c=Math.min(1,f),h()):c},e.paddingOuter=function(f){return arguments.length?(u=+f,h()):u},e.align=function(f){return arguments.length?(d=Math.max(0,Math.min(1,f)),h()):d},e.copy=function(){return Uw(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},In.apply(h(),arguments)}function pD(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pD(t())},e}function oY(){return pD(Uw.apply(null,arguments).paddingInner(1))}function Fw(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function gD(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function md(){}var Mu=.7,dm=1/Mu,Zo="\\s*([+-]?\\d+)\\s*",Lu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ms="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lY=/^#([0-9a-f]{3,8})$/,cY=new RegExp(`^rgb\\(${Zo},${Zo},${Zo}\\)$`),uY=new RegExp(`^rgb\\(${ms},${ms},${ms}\\)$`),dY=new RegExp(`^rgba\\(${Zo},${Zo},${Zo},${Lu}\\)$`),hY=new RegExp(`^rgba\\(${ms},${ms},${ms},${Lu}\\)$`),fY=new RegExp(`^hsl\\(${Lu},${ms},${ms}\\)$`),mY=new RegExp(`^hsla\\(${Lu},${ms},${ms},${Lu}\\)$`),dE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fw(md,$u,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:hE,formatHex:hE,formatHex8:pY,formatHsl:gY,formatRgb:fE,toString:fE});function hE(){return this.rgb().formatHex()}function pY(){return this.rgb().formatHex8()}function gY(){return vD(this).formatHsl()}function fE(){return this.rgb().formatRgb()}function $u(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=lY.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?mE(t):r===3?new Br(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cY.exec(e))?new Br(t[1],t[2],t[3],1):(t=uY.exec(e))?new Br(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=dY.exec(e))?fh(t[1],t[2],t[3],t[4]):(t=hY.exec(e))?fh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fY.exec(e))?vE(t[1],t[2]/100,t[3]/100,1):(t=mY.exec(e))?vE(t[1],t[2]/100,t[3]/100,t[4]):dE.hasOwnProperty(e)?mE(dE[e]):e==="transparent"?new Br(NaN,NaN,NaN,0):null}function mE(e){return new Br(e>>16&255,e>>8&255,e&255,1)}function fh(e,t,r,n){return n<=0&&(e=t=r=NaN),new Br(e,t,r,n)}function vY(e){return e instanceof md||(e=$u(e)),e?(e=e.rgb(),new Br(e.r,e.g,e.b,e.opacity)):new Br}function Gx(e,t,r,n){return arguments.length===1?vY(e):new Br(e,t,r,n??1)}function Br(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Fw(Br,Gx,gD(md,{brighter(e){return e=e==null?dm:Math.pow(dm,e),new Br(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Mu:Math.pow(Mu,e),new Br(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Br(Ia(this.r),Ia(this.g),Ia(this.b),hm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:pE,formatHex:pE,formatHex8:xY,formatRgb:gE,toString:gE}));function pE(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}`}function xY(){return`#${Ea(this.r)}${Ea(this.g)}${Ea(this.b)}${Ea((isNaN(this.opacity)?1:this.opacity)*255)}`}function gE(){const e=hm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ia(this.r)}, ${Ia(this.g)}, ${Ia(this.b)}${e===1?")":`, ${e})`}`}function hm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ia(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ea(e){return e=Ia(e),(e<16?"0":"")+e.toString(16)}function vE(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new qn(e,t,r,n)}function vD(e){if(e instanceof qn)return new qn(e.h,e.s,e.l,e.opacity);if(e instanceof md||(e=$u(e)),!e)return new qn;if(e instanceof qn)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new qn(o,l,c,e.opacity)}function yY(e,t,r,n){return arguments.length===1?vD(e):new qn(e,t,r,n??1)}function qn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Fw(qn,yY,gD(md,{brighter(e){return e=e==null?dm:Math.pow(dm,e),new qn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Mu:Math.pow(Mu,e),new qn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Br(wv(e>=240?e-240:e+120,s,n),wv(e,s,n),wv(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new qn(xE(this.h),mh(this.s),mh(this.l),hm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=hm(this.opacity);return`${e===1?"hsl(":"hsla("}${xE(this.h)}, ${mh(this.s)*100}%, ${mh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xE(e){return e=(e||0)%360,e<0?e+360:e}function mh(e){return Math.max(0,Math.min(1,e||0))}function wv(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Bw=e=>()=>e;function bY(e,t){return function(r){return e+r*t}}function wY(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function _Y(e){return(e=+e)==1?xD:function(t,r){return r-t?wY(t,r,e):Bw(isNaN(t)?r:t)}}function xD(e,t){var r=t-e;return r?bY(e,r):Bw(isNaN(e)?t:e)}const yE=function e(t){var r=_Y(t);function n(s,i){var o=r((s=Gx(s)).r,(i=Gx(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=xD(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n}(1);function jY(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function NY(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function SY(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Hl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function EY(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function fm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function CY(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Hl(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var Kx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_v=new RegExp(Kx.source,"g");function kY(e){return function(){return e}}function AY(e){return function(t){return e(t)+""}}function PY(e,t){var r=Kx.lastIndex=_v.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=Kx.exec(e))&&(s=_v.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:fm(n,s)})),r=_v.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?AY(c[0].x):kY(t):(t=c.length,function(u){for(var d=0,h;d<t;++d)l[(h=c[d]).i]=h.x(u);return l.join("")})}function Hl(e,t){var r=typeof t,n;return t==null||r==="boolean"?Bw(t):(r==="number"?fm:r==="string"?(n=$u(t))?(t=n,yE):PY:t instanceof $u?yE:t instanceof Date?EY:NY(t)?jY:Array.isArray(t)?SY:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?CY:fm)(e,t)}function zw(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function OY(e,t){t===void 0&&(t=e,e=Hl);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function TY(e){return function(){return e}}function mm(e){return+e}var bE=[0,1];function Cr(e){return e}function Yx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:TY(isNaN(t)?NaN:.5)}function IY(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function DY(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Yx(s,n),i=r(o,i)):(n=Yx(n,s),i=r(i,o)),function(l){return i(n(l))}}function RY(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Yx(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=fd(e,l,1,n)-1;return i[c](s[c](l))}}function pd(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Up(){var e=bE,t=bE,r=Hl,n,s,i,o=Cr,l,c,u;function d(){var f=Math.min(e.length,t.length);return o!==Cr&&(o=IY(e[0],e[f-1])),l=f>2?RY:DY,c=u=null,h}function h(f){return f==null||isNaN(f=+f)?i:(c||(c=l(e.map(n),t,r)))(n(o(f)))}return h.invert=function(f){return o(s((u||(u=l(t,e.map(n),fm)))(f)))},h.domain=function(f){return arguments.length?(e=Array.from(f,mm),d()):e.slice()},h.range=function(f){return arguments.length?(t=Array.from(f),d()):t.slice()},h.rangeRound=function(f){return t=Array.from(f),r=zw,d()},h.clamp=function(f){return arguments.length?(o=f?!0:Cr,d()):o!==Cr},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(i=f,h):i},function(f,m){return n=f,s=m,d()}}function Ww(){return Up()(Cr,Cr)}function MY(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function pm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function _l(e){return e=pm(Math.abs(e)),e?e[1]:NaN}function LY(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function $Y(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var UY=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Uu(e){if(!(t=UY.exec(e)))throw new Error("invalid format: "+e);var t;return new Hw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Uu.prototype=Hw.prototype;function Hw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Hw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function FY(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var yD;function BY(e,t){var r=pm(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(yD=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+pm(e,Math.max(0,t+i-1))[0]}function wE(e,t){var r=pm(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const _E={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MY,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>wE(e*100,t),r:wE,s:BY,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function jE(e){return e}var NE=Array.prototype.map,SE=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zY(e){var t=e.grouping===void 0||e.thousands===void 0?jE:LY(NE.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?jE:$Y(NE.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(h){h=Uu(h);var f=h.fill,m=h.align,g=h.sign,y=h.symbol,p=h.zero,v=h.width,b=h.comma,w=h.precision,_=h.trim,j=h.type;j==="n"?(b=!0,j="g"):_E[j]||(w===void 0&&(w=12),_=!0,j="g"),(p||f==="0"&&m==="=")&&(p=!0,f="0",m="=");var N=y==="$"?r:y==="#"&&/[boxX]/.test(j)?"0"+j.toLowerCase():"",E=y==="$"?n:/[%p]/.test(j)?o:"",T=_E[j],S=/[defgprs%]/.test(j);w=w===void 0?6:/[gprs]/.test(j)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function D(O){var C=N,k=E,I,R,M;if(j==="c")k=T(O)+k,O="";else{O=+O;var P=O<0||1/O<0;if(O=isNaN(O)?c:T(Math.abs(O),w),_&&(O=FY(O)),P&&+O==0&&g!=="+"&&(P=!1),C=(P?g==="("?g:l:g==="-"||g==="("?"":g)+C,k=(j==="s"?SE[8+yD/3]:"")+k+(P&&g==="("?")":""),S){for(I=-1,R=O.length;++I<R;)if(M=O.charCodeAt(I),48>M||M>57){k=(M===46?s+O.slice(I+1):O.slice(I))+k,O=O.slice(0,I);break}}}b&&!p&&(O=t(O,1/0));var A=C.length+O.length+k.length,$=A<v?new Array(v-A+1).join(f):"";switch(b&&p&&(O=t($+O,$.length?v-k.length:1/0),$=""),m){case"<":O=C+O+k+$;break;case"=":O=C+$+O+k;break;case"^":O=$.slice(0,A=$.length>>1)+C+O+k+$.slice(A);break;default:O=$+C+O+k;break}return i(O)}return D.toString=function(){return h+""},D}function d(h,f){var m=u((h=Uu(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(_l(f)/3)))*3,y=Math.pow(10,-g),p=SE[8+g/3];return function(v){return m(y*v)+p}}return{format:u,formatPrefix:d}}var ph,qw,bD;WY({thousands:",",grouping:[3],currency:["$",""]});function WY(e){return ph=zY(e),qw=ph.format,bD=ph.formatPrefix,ph}function HY(e){return Math.max(0,-_l(Math.abs(e)))}function qY(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_l(t)/3)))*3-_l(Math.abs(e)))}function VY(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_l(t)-_l(e))+1}function wD(e,t,r,n){var s=qx(e,t,r),i;switch(n=Uu(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=qY(s,o))&&(n.precision=i),bD(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=VY(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=HY(s))&&(n.precision=i-(n.type==="%")*2);break}}return qw(n)}function ta(e){var t=e.domain;return e.ticks=function(r){var n=t();return Wx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return wD(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=Hx(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function _D(){var e=Ww();return e.copy=function(){return pd(e,_D())},In.apply(e,arguments),ta(e)}function jD(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,mm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return jD(e).unknown(t)},e=arguments.length?Array.from(e,mm):[0,1],ta(r)}function ND(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function EE(e){return Math.log(e)}function CE(e){return Math.exp(e)}function GY(e){return-Math.log(-e)}function KY(e){return-Math.exp(-e)}function YY(e){return isFinite(e)?+("1e"+e):e<0?0:e}function XY(e){return e===10?YY:e===Math.E?Math.exp:t=>Math.pow(e,t)}function QY(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function kE(e){return(t,r)=>-e(-t,r)}function Vw(e){const t=e(EE,CE),r=t.domain;let n=10,s,i;function o(){return s=QY(n),i=XY(n),r()[0]<0?(s=kE(s),i=kE(i),e(GY,KY)):e(EE,CE),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const h=d<u;h&&([u,d]=[d,u]);let f=s(u),m=s(d),g,y;const p=l==null?10:+l;let v=[];if(!(n%1)&&m-f<p){if(f=Math.floor(f),m=Math.ceil(m),u>0){for(;f<=m;++f)for(g=1;g<n;++g)if(y=f<0?g/i(-f):g*i(f),!(y<u)){if(y>d)break;v.push(y)}}else for(;f<=m;++f)for(g=n-1;g>=1;--g)if(y=f>0?g/i(-f):g*i(f),!(y<u)){if(y>d)break;v.push(y)}v.length*2<p&&(v=Wx(u,d,p))}else v=Wx(f,m,Math.min(m-f,p)).map(i);return h?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Uu(c)).precision==null&&(c.trim=!0),c=qw(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let h=d/i(Math.round(s(d)));return h*n<n-.5&&(h*=n),h<=u?c(d):""}},t.nice=()=>r(ND(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function SD(){const e=Vw(Up()).domain([1,10]);return e.copy=()=>pd(e,SD()).base(e.base()),In.apply(e,arguments),e}function AE(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function PE(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Gw(e){var t=1,r=e(AE(t),PE(t));return r.constant=function(n){return arguments.length?e(AE(t=+n),PE(t)):t},ta(r)}function ED(){var e=Gw(Up());return e.copy=function(){return pd(e,ED()).constant(e.constant())},In.apply(e,arguments)}function OE(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function JY(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ZY(e){return e<0?-e*e:e*e}function Kw(e){var t=e(Cr,Cr),r=1;function n(){return r===1?e(Cr,Cr):r===.5?e(JY,ZY):e(OE(r),OE(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},ta(t)}function Yw(){var e=Kw(Up());return e.copy=function(){return pd(e,Yw()).exponent(e.exponent())},In.apply(e,arguments),e}function eX(){return Yw.apply(null,arguments).exponent(.5)}function TE(e){return Math.sign(e)*e*e}function tX(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function CD(){var e=Ww(),t=[0,1],r=!1,n;function s(i){var o=tX(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(TE(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,mm)).map(TE)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return CD(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},In.apply(s,arguments),ta(s)}function kD(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=iY(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[fd(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(zi),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return kD().domain(e).range(t).unknown(n)},In.apply(i,arguments)}function AD(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[fd(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return AD().domain([e,t]).range(s).unknown(i)},In.apply(ta(o),arguments)}function PD(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[fd(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return PD().domain(e).range(t).unknown(r)},In.apply(s,arguments)}const jv=new Date,Nv=new Date;function Mt(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Mt(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(jv.setTime(+i),Nv.setTime(+o),e(jv),e(Nv),Math.floor(r(jv,Nv))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const gm=Mt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Mt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):gm);gm.range;const Is=1e3,Sn=Is*60,Ds=Sn*60,Xs=Ds*24,Xw=Xs*7,IE=Xs*30,Sv=Xs*365,Ca=Mt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Is)},(e,t)=>(t-e)/Is,e=>e.getUTCSeconds());Ca.range;const Qw=Mt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is)},(e,t)=>{e.setTime(+e+t*Sn)},(e,t)=>(t-e)/Sn,e=>e.getMinutes());Qw.range;const Jw=Mt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Sn)},(e,t)=>(t-e)/Sn,e=>e.getUTCMinutes());Jw.range;const Zw=Mt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Is-e.getMinutes()*Sn)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getHours());Zw.range;const e_=Mt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Ds)},(e,t)=>(t-e)/Ds,e=>e.getUTCHours());e_.range;const gd=Mt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Sn)/Xs,e=>e.getDate()-1);gd.range;const Fp=Mt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xs,e=>e.getUTCDate()-1);Fp.range;const OD=Mt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Xs,e=>Math.floor(e/Xs));OD.range;function no(e){return Mt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Sn)/Xw)}const Bp=no(0),vm=no(1),rX=no(2),nX=no(3),jl=no(4),sX=no(5),iX=no(6);Bp.range;vm.range;rX.range;nX.range;jl.range;sX.range;iX.range;function so(e){return Mt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Xw)}const zp=so(0),xm=so(1),aX=so(2),oX=so(3),Nl=so(4),lX=so(5),cX=so(6);zp.range;xm.range;aX.range;oX.range;Nl.range;lX.range;cX.range;const t_=Mt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());t_.range;const r_=Mt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());r_.range;const Qs=Mt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Qs.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Qs.range;const Js=Mt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Js.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Mt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Js.range;function TD(e,t,r,n,s,i){const o=[[Ca,1,Is],[Ca,5,5*Is],[Ca,15,15*Is],[Ca,30,30*Is],[i,1,Sn],[i,5,5*Sn],[i,15,15*Sn],[i,30,30*Sn],[s,1,Ds],[s,3,3*Ds],[s,6,6*Ds],[s,12,12*Ds],[n,1,Xs],[n,2,2*Xs],[r,1,Xw],[t,1,IE],[t,3,3*IE],[e,1,Sv]];function l(u,d,h){const f=d<u;f&&([u,d]=[d,u]);const m=h&&typeof h.range=="function"?h:c(u,d,h),g=m?m.range(u,+d+1):[];return f?g.reverse():g}function c(u,d,h){const f=Math.abs(d-u)/h,m=Lw(([,,p])=>p).right(o,f);if(m===o.length)return e.every(qx(u/Sv,d/Sv,h));if(m===0)return gm.every(Math.max(qx(u,d,h),1));const[g,y]=o[f/o[m-1][2]<o[m][2]/f?m-1:m];return g.every(y)}return[l,c]}const[uX,dX]=TD(Js,r_,zp,OD,e_,Jw),[hX,fX]=TD(Qs,t_,Bp,gd,Zw,Qw);function Ev(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Cv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function gc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function mX(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=vc(s),d=xc(s),h=vc(i),f=xc(i),m=vc(o),g=xc(o),y=vc(l),p=xc(l),v=vc(c),b=xc(c),w={a:P,A,b:$,B:L,c:null,d:UE,e:UE,f:LX,g:GX,G:YX,H:DX,I:RX,j:MX,L:ID,m:$X,M:UX,p:z,q:K,Q:zE,s:WE,S:FX,u:BX,U:zX,V:WX,w:HX,W:qX,x:null,X:null,y:VX,Y:KX,Z:XX,"%":BE},_={a:se,A:fe,b:he,B:ye,c:null,d:FE,e:FE,f:eQ,g:uQ,G:hQ,H:QX,I:JX,j:ZX,L:RD,m:tQ,M:rQ,p:q,q:te,Q:zE,s:WE,S:nQ,u:sQ,U:iQ,V:aQ,w:oQ,W:lQ,x:null,X:null,y:cQ,Y:dQ,Z:fQ,"%":BE},j={a:D,A:O,b:C,B:k,c:I,d:LE,e:LE,f:PX,g:ME,G:RE,H:$E,I:$E,j:EX,L:AX,m:SX,M:CX,p:S,q:NX,Q:TX,s:IX,S:kX,u:yX,U:bX,V:wX,w:xX,W:_X,x:R,X:M,y:ME,Y:RE,Z:jX,"%":OX};w.x=N(r,w),w.X=N(n,w),w.c=N(t,w),_.x=N(r,_),_.X=N(n,_),_.c=N(t,_);function N(U,H){return function(ee){var B=[],ve=-1,xe=0,Ue=U.length,Te,tr,hi;for(ee instanceof Date||(ee=new Date(+ee));++ve<Ue;)U.charCodeAt(ve)===37&&(B.push(U.slice(xe,ve)),(tr=DE[Te=U.charAt(++ve)])!=null?Te=U.charAt(++ve):tr=Te==="e"?" ":"0",(hi=H[Te])&&(Te=hi(ee,tr)),B.push(Te),xe=ve+1);return B.push(U.slice(xe,ve)),B.join("")}}function E(U,H){return function(ee){var B=gc(1900,void 0,1),ve=T(B,U,ee+="",0),xe,Ue;if(ve!=ee.length)return null;if("Q"in B)return new Date(B.Q);if("s"in B)return new Date(B.s*1e3+("L"in B?B.L:0));if(H&&!("Z"in B)&&(B.Z=0),"p"in B&&(B.H=B.H%12+B.p*12),B.m===void 0&&(B.m="q"in B?B.q:0),"V"in B){if(B.V<1||B.V>53)return null;"w"in B||(B.w=1),"Z"in B?(xe=Cv(gc(B.y,0,1)),Ue=xe.getUTCDay(),xe=Ue>4||Ue===0?xm.ceil(xe):xm(xe),xe=Fp.offset(xe,(B.V-1)*7),B.y=xe.getUTCFullYear(),B.m=xe.getUTCMonth(),B.d=xe.getUTCDate()+(B.w+6)%7):(xe=Ev(gc(B.y,0,1)),Ue=xe.getDay(),xe=Ue>4||Ue===0?vm.ceil(xe):vm(xe),xe=gd.offset(xe,(B.V-1)*7),B.y=xe.getFullYear(),B.m=xe.getMonth(),B.d=xe.getDate()+(B.w+6)%7)}else("W"in B||"U"in B)&&("w"in B||(B.w="u"in B?B.u%7:"W"in B?1:0),Ue="Z"in B?Cv(gc(B.y,0,1)).getUTCDay():Ev(gc(B.y,0,1)).getDay(),B.m=0,B.d="W"in B?(B.w+6)%7+B.W*7-(Ue+5)%7:B.w+B.U*7-(Ue+6)%7);return"Z"in B?(B.H+=B.Z/100|0,B.M+=B.Z%100,Cv(B)):Ev(B)}}function T(U,H,ee,B){for(var ve=0,xe=H.length,Ue=ee.length,Te,tr;ve<xe;){if(B>=Ue)return-1;if(Te=H.charCodeAt(ve++),Te===37){if(Te=H.charAt(ve++),tr=j[Te in DE?H.charAt(ve++):Te],!tr||(B=tr(U,ee,B))<0)return-1}else if(Te!=ee.charCodeAt(B++))return-1}return B}function S(U,H,ee){var B=u.exec(H.slice(ee));return B?(U.p=d.get(B[0].toLowerCase()),ee+B[0].length):-1}function D(U,H,ee){var B=m.exec(H.slice(ee));return B?(U.w=g.get(B[0].toLowerCase()),ee+B[0].length):-1}function O(U,H,ee){var B=h.exec(H.slice(ee));return B?(U.w=f.get(B[0].toLowerCase()),ee+B[0].length):-1}function C(U,H,ee){var B=v.exec(H.slice(ee));return B?(U.m=b.get(B[0].toLowerCase()),ee+B[0].length):-1}function k(U,H,ee){var B=y.exec(H.slice(ee));return B?(U.m=p.get(B[0].toLowerCase()),ee+B[0].length):-1}function I(U,H,ee){return T(U,t,H,ee)}function R(U,H,ee){return T(U,r,H,ee)}function M(U,H,ee){return T(U,n,H,ee)}function P(U){return o[U.getDay()]}function A(U){return i[U.getDay()]}function $(U){return c[U.getMonth()]}function L(U){return l[U.getMonth()]}function z(U){return s[+(U.getHours()>=12)]}function K(U){return 1+~~(U.getMonth()/3)}function se(U){return o[U.getUTCDay()]}function fe(U){return i[U.getUTCDay()]}function he(U){return c[U.getUTCMonth()]}function ye(U){return l[U.getUTCMonth()]}function q(U){return s[+(U.getUTCHours()>=12)]}function te(U){return 1+~~(U.getUTCMonth()/3)}return{format:function(U){var H=N(U+="",w);return H.toString=function(){return U},H},parse:function(U){var H=E(U+="",!1);return H.toString=function(){return U},H},utcFormat:function(U){var H=N(U+="",_);return H.toString=function(){return U},H},utcParse:function(U){var H=E(U+="",!0);return H.toString=function(){return U},H}}}var DE={"-":"",_:" ",0:"0"},er=/^\s*\d+/,pX=/^%/,gX=/[\\^$*+?|[\]().{}]/g;function Oe(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function vX(e){return e.replace(gX,"\\$&")}function vc(e){return new RegExp("^(?:"+e.map(vX).join("|")+")","i")}function xc(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function xX(e,t,r){var n=er.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function yX(e,t,r){var n=er.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function bX(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function wX(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function _X(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function RE(e,t,r){var n=er.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ME(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function jX(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function NX(e,t,r){var n=er.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function SX(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function LE(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function EX(e,t,r){var n=er.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function $E(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function CX(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function kX(e,t,r){var n=er.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function AX(e,t,r){var n=er.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function PX(e,t,r){var n=er.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function OX(e,t,r){var n=pX.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function TX(e,t,r){var n=er.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IX(e,t,r){var n=er.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function UE(e,t){return Oe(e.getDate(),t,2)}function DX(e,t){return Oe(e.getHours(),t,2)}function RX(e,t){return Oe(e.getHours()%12||12,t,2)}function MX(e,t){return Oe(1+gd.count(Qs(e),e),t,3)}function ID(e,t){return Oe(e.getMilliseconds(),t,3)}function LX(e,t){return ID(e,t)+"000"}function $X(e,t){return Oe(e.getMonth()+1,t,2)}function UX(e,t){return Oe(e.getMinutes(),t,2)}function FX(e,t){return Oe(e.getSeconds(),t,2)}function BX(e){var t=e.getDay();return t===0?7:t}function zX(e,t){return Oe(Bp.count(Qs(e)-1,e),t,2)}function DD(e){var t=e.getDay();return t>=4||t===0?jl(e):jl.ceil(e)}function WX(e,t){return e=DD(e),Oe(jl.count(Qs(e),e)+(Qs(e).getDay()===4),t,2)}function HX(e){return e.getDay()}function qX(e,t){return Oe(vm.count(Qs(e)-1,e),t,2)}function VX(e,t){return Oe(e.getFullYear()%100,t,2)}function GX(e,t){return e=DD(e),Oe(e.getFullYear()%100,t,2)}function KX(e,t){return Oe(e.getFullYear()%1e4,t,4)}function YX(e,t){var r=e.getDay();return e=r>=4||r===0?jl(e):jl.ceil(e),Oe(e.getFullYear()%1e4,t,4)}function XX(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Oe(t/60|0,"0",2)+Oe(t%60,"0",2)}function FE(e,t){return Oe(e.getUTCDate(),t,2)}function QX(e,t){return Oe(e.getUTCHours(),t,2)}function JX(e,t){return Oe(e.getUTCHours()%12||12,t,2)}function ZX(e,t){return Oe(1+Fp.count(Js(e),e),t,3)}function RD(e,t){return Oe(e.getUTCMilliseconds(),t,3)}function eQ(e,t){return RD(e,t)+"000"}function tQ(e,t){return Oe(e.getUTCMonth()+1,t,2)}function rQ(e,t){return Oe(e.getUTCMinutes(),t,2)}function nQ(e,t){return Oe(e.getUTCSeconds(),t,2)}function sQ(e){var t=e.getUTCDay();return t===0?7:t}function iQ(e,t){return Oe(zp.count(Js(e)-1,e),t,2)}function MD(e){var t=e.getUTCDay();return t>=4||t===0?Nl(e):Nl.ceil(e)}function aQ(e,t){return e=MD(e),Oe(Nl.count(Js(e),e)+(Js(e).getUTCDay()===4),t,2)}function oQ(e){return e.getUTCDay()}function lQ(e,t){return Oe(xm.count(Js(e)-1,e),t,2)}function cQ(e,t){return Oe(e.getUTCFullYear()%100,t,2)}function uQ(e,t){return e=MD(e),Oe(e.getUTCFullYear()%100,t,2)}function dQ(e,t){return Oe(e.getUTCFullYear()%1e4,t,4)}function hQ(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Nl(e):Nl.ceil(e),Oe(e.getUTCFullYear()%1e4,t,4)}function fQ(){return"+0000"}function BE(){return"%"}function zE(e){return+e}function WE(e){return Math.floor(+e/1e3)}var wo,LD,$D;mQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function mQ(e){return wo=mX(e),LD=wo.format,wo.parse,$D=wo.utcFormat,wo.utcParse,wo}function pQ(e){return new Date(e)}function gQ(e){return e instanceof Date?+e:+new Date(+e)}function n_(e,t,r,n,s,i,o,l,c,u){var d=Ww(),h=d.invert,f=d.domain,m=u(".%L"),g=u(":%S"),y=u("%I:%M"),p=u("%I %p"),v=u("%a %d"),b=u("%b %d"),w=u("%B"),_=u("%Y");function j(N){return(c(N)<N?m:l(N)<N?g:o(N)<N?y:i(N)<N?p:n(N)<N?s(N)<N?v:b:r(N)<N?w:_)(N)}return d.invert=function(N){return new Date(h(N))},d.domain=function(N){return arguments.length?f(Array.from(N,gQ)):f().map(pQ)},d.ticks=function(N){var E=f();return e(E[0],E[E.length-1],N??10)},d.tickFormat=function(N,E){return E==null?j:u(E)},d.nice=function(N){var E=f();return(!N||typeof N.range!="function")&&(N=t(E[0],E[E.length-1],N??10)),N?f(ND(E,N)):d},d.copy=function(){return pd(d,n_(e,t,r,n,s,i,o,l,c,u))},d}function vQ(){return In.apply(n_(hX,fX,Qs,t_,Bp,gd,Zw,Qw,Ca,LD).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xQ(){return In.apply(n_(uX,dX,Js,r_,zp,Fp,e_,Jw,Ca,$D).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Wp(){var e=0,t=1,r,n,s,i,o=Cr,l=!1,c;function u(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}u.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(h){return arguments.length?(l=!!h,u):l},u.interpolator=function(h){return arguments.length?(o=h,u):o};function d(h){return function(f){var m,g;return arguments.length?([m,g]=f,o=h(m,g),u):[o(0),o(1)]}}return u.range=d(Hl),u.rangeRound=d(zw),u.unknown=function(h){return arguments.length?(c=h,u):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),u}}function ra(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function UD(){var e=ta(Wp()(Cr));return e.copy=function(){return ra(e,UD())},ai.apply(e,arguments)}function FD(){var e=Vw(Wp()).domain([1,10]);return e.copy=function(){return ra(e,FD()).base(e.base())},ai.apply(e,arguments)}function BD(){var e=Gw(Wp());return e.copy=function(){return ra(e,BD()).constant(e.constant())},ai.apply(e,arguments)}function s_(){var e=Kw(Wp());return e.copy=function(){return ra(e,s_()).exponent(e.exponent())},ai.apply(e,arguments)}function yQ(){return s_.apply(null,arguments).exponent(.5)}function zD(){var e=[],t=Cr;function r(n){if(n!=null&&!isNaN(n=+n))return t((fd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(zi),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>sY(e,i/n))},r.copy=function(){return zD(t).domain(e)},ai.apply(r,arguments)}function Hp(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=Cr,d,h=!1,f;function m(y){return isNaN(y=+y)?f:(y=.5+((y=+d(y))-i)*(n*y<n*i?l:c),u(h?Math.max(0,Math.min(1,y)):y))}m.domain=function(y){return arguments.length?([e,t,r]=y,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m):[e,t,r]},m.clamp=function(y){return arguments.length?(h=!!y,m):h},m.interpolator=function(y){return arguments.length?(u=y,m):u};function g(y){return function(p){var v,b,w;return arguments.length?([v,b,w]=p,u=OY(y,[v,b,w]),m):[u(0),u(.5),u(1)]}}return m.range=g(Hl),m.rangeRound=g(zw),m.unknown=function(y){return arguments.length?(f=y,m):f},function(y){return d=y,s=y(e),i=y(t),o=y(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,m}}function WD(){var e=ta(Hp()(Cr));return e.copy=function(){return ra(e,WD())},ai.apply(e,arguments)}function HD(){var e=Vw(Hp()).domain([.1,1,10]);return e.copy=function(){return ra(e,HD()).base(e.base())},ai.apply(e,arguments)}function qD(){var e=Gw(Hp());return e.copy=function(){return ra(e,qD()).constant(e.constant())},ai.apply(e,arguments)}function i_(){var e=Kw(Hp());return e.copy=function(){return ra(e,i_()).exponent(e.exponent())},ai.apply(e,arguments)}function bQ(){return i_.apply(null,arguments).exponent(.5)}const Ec=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Uw,scaleDiverging:WD,scaleDivergingLog:HD,scaleDivergingPow:i_,scaleDivergingSqrt:bQ,scaleDivergingSymlog:qD,scaleIdentity:jD,scaleImplicit:Vx,scaleLinear:_D,scaleLog:SD,scaleOrdinal:$w,scalePoint:oY,scalePow:Yw,scaleQuantile:kD,scaleQuantize:AD,scaleRadial:CD,scaleSequential:UD,scaleSequentialLog:FD,scaleSequentialPow:s_,scaleSequentialQuantile:zD,scaleSequentialSqrt:yQ,scaleSequentialSymlog:BD,scaleSqrt:eX,scaleSymlog:ED,scaleThreshold:PD,scaleTime:vQ,scaleUtc:xQ,tickFormat:wD},Symbol.toStringTag,{value:"Module"}));var oi=e=>e.chartData,VD=F([oi],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),GD=(e,t,r,n)=>n?VD(e):oi(e),wQ=(e,t,r)=>r?VD(e):oi(e);function Yi(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(gt(t)&&gt(r))return!0}return!1}function HE(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function KD(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(gt(r))s=r;else if(typeof r=="function")return;if(gt(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(Yi(o))return o}}function _Q(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(Yi(n))return HE(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(ae(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t==null?void 0:t[0]))}catch{}else if(typeof s=="string"&&dS.test(s)){var c=dS.exec(s);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(ae(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&hS.test(i)){var d=hS.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var h=+d[1];l=t[1]+h}}else l=t==null?void 0:t[1];var f=[o,l];if(Yi(f))return t==null?f:HE(f,t,r)}}}var ql=1e9,jQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o_,ct=!0,Tn="[DecimalError] ",Da=Tn+"Invalid argument: ",a_=Tn+"Exponent out of range: ",Vl=Math.floor,ma=Math.pow,NQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,tn,Wt=1e7,tt=7,YD=9007199254740991,ym=Vl(YD/tt),ne={};ne.absoluteValue=ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};ne.comparedTo=ne.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};ne.decimalPlaces=ne.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*tt;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};ne.dividedBy=ne.div=function(e){return $s(this,new this.constructor(e))};ne.dividedToIntegerBy=ne.idiv=function(e){var t=this,r=t.constructor;return qe($s(t,new r(e),0,1),r.precision)};ne.equals=ne.eq=function(e){return!this.cmp(e)};ne.exponent=function(){return At(this)};ne.greaterThan=ne.gt=function(e){return this.cmp(e)>0};ne.greaterThanOrEqualTo=ne.gte=function(e){return this.cmp(e)>=0};ne.isInteger=ne.isint=function(){return this.e>this.d.length-2};ne.isNegative=ne.isneg=function(){return this.s<0};ne.isPositive=ne.ispos=function(){return this.s>0};ne.isZero=function(){return this.s===0};ne.lessThan=ne.lt=function(e){return this.cmp(e)<0};ne.lessThanOrEqualTo=ne.lte=function(e){return this.cmp(e)<1};ne.logarithm=ne.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(tn))throw Error(Tn+"NaN");if(r.s<1)throw Error(Tn+(r.s?"NaN":"-Infinity"));return r.eq(tn)?new n(0):(ct=!1,t=$s(Fu(r,i),Fu(e,i),i),ct=!0,qe(t,s))};ne.minus=ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?JD(t,e):XD(t,(e.s=-e.s,e))};ne.modulo=ne.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Tn+"NaN");return r.s?(ct=!1,t=$s(r,e,0,1).times(e),ct=!0,r.minus(t)):qe(new n(r),s)};ne.naturalExponential=ne.exp=function(){return QD(this)};ne.naturalLogarithm=ne.ln=function(){return Fu(this)};ne.negated=ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};ne.plus=ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XD(t,e):JD(t,(e.s=-e.s,e))};ne.precision=ne.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Da+e);if(t=At(s)+1,n=s.d.length-1,r=n*tt+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};ne.squareRoot=ne.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Tn+"NaN")}for(e=At(l),ct=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=ds(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Vl((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus($s(l,i,o+2)).times(.5),ds(i.d).slice(0,o)===(t=ds(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(qe(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return ct=!0,qe(n,r)};ne.times=ne.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,h=d.constructor,f=d.d,m=(e=new h(e)).d;if(!d.s||!e.s)return new h(0);for(e.s*=d.s,r=d.e+e.e,c=f.length,u=m.length,c<u&&(i=f,f=m,m=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+m[n]*f[s-n-1]+t,i[s--]=l%Wt|0,t=l/Wt|0;i[s]=(i[s]+t)%Wt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ct?qe(e,h.precision):e};ne.toDecimalPlaces=ne.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(xs(e,0,ql),t===void 0?t=n.rounding:xs(t,0,8),qe(r,e+At(r)+1,t))};ne.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Ka(n,!0):(xs(e,0,ql),t===void 0?t=s.rounding:xs(t,0,8),n=qe(new s(n),e+1,t),r=Ka(n,!0,e+1)),r};ne.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Ka(s):(xs(e,0,ql),t===void 0?t=i.rounding:xs(t,0,8),n=qe(new i(s),e+At(s)+1,t),r=Ka(n.abs(),!1,e+At(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};ne.toInteger=ne.toint=function(){var e=this,t=e.constructor;return qe(new t(e),At(e)+1,t.rounding)};ne.toNumber=function(){return+this};ne.toPower=ne.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(tn);if(l=new c(l),!l.s){if(e.s<1)throw Error(Tn+"Infinity");return l}if(l.eq(tn))return l;if(n=c.precision,e.eq(tn))return qe(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=YD){for(s=new c(tn),t=Math.ceil(n/tt+4),ct=!1;r%2&&(s=s.times(l),VE(s.d,t)),r=Vl(r/2),r!==0;)l=l.times(l),VE(l.d,t);return ct=!0,e.s<0?new c(tn).div(s):qe(s,n)}}else if(i<0)throw Error(Tn+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ct=!1,s=e.times(Fu(l,n+u)),ct=!0,s=QD(s),s.s=i,s};ne.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=At(s),n=Ka(s,r<=i.toExpNeg||r>=i.toExpPos)):(xs(e,1,ql),t===void 0?t=i.rounding:xs(t,0,8),s=qe(new i(s),e,t),r=At(s),n=Ka(s,e<=r||r<=i.toExpNeg,e)),n};ne.toSignificantDigits=ne.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(xs(e,1,ql),t===void 0?t=n.rounding:xs(t,0,8)),qe(new n(r),e,t)};ne.toString=ne.valueOf=ne.val=ne.toJSON=ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=At(e),r=e.constructor;return Ka(e,t<=r.toExpNeg||t>=r.toExpPos)};function XD(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,h=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ct?qe(t,h):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(h/tt),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Wt|0,c[i]%=Wt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,ct?qe(t,h):t}function xs(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Da+e)}function ds(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=tt-n.length,r&&(i+=xi(r)),i+=n;o=e[t],n=o+"",r=tt-n.length,r&&(i+=xi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var $s=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Wt|0,o=i/Wt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Wt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,h,f,m,g,y,p,v,b,w,_,j,N,E,T,S=n.constructor,D=n.s==s.s?1:-1,O=n.d,C=s.d;if(!n.s)return new S(n);if(!s.s)throw Error(Tn+"Division by zero");for(c=n.e-s.e,E=C.length,j=O.length,m=new S(D),g=m.d=[],u=0;C[u]==(O[u]||0);)++u;if(C[u]>(O[u]||0)&&--c,i==null?b=i=S.precision:o?b=i+(At(n)-At(s))+1:b=i,b<0)return new S(0);if(b=b/tt+2|0,u=0,E==1)for(d=0,C=C[0],b++;(u<j||d)&&b--;u++)w=d*Wt+(O[u]||0),g[u]=w/C|0,d=w%C|0;else{for(d=Wt/(C[0]+1)|0,d>1&&(C=e(C,d),O=e(O,d),E=C.length,j=O.length),_=E,y=O.slice(0,E),p=y.length;p<E;)y[p++]=0;T=C.slice(),T.unshift(0),N=C[0],C[1]>=Wt/2&&++N;do d=0,l=t(C,y,E,p),l<0?(v=y[0],E!=p&&(v=v*Wt+(y[1]||0)),d=v/N|0,d>1?(d>=Wt&&(d=Wt-1),h=e(C,d),f=h.length,p=y.length,l=t(h,y,f,p),l==1&&(d--,r(h,E<f?T:C,f))):(d==0&&(l=d=1),h=C.slice()),f=h.length,f<p&&h.unshift(0),r(y,h,p),l==-1&&(p=y.length,l=t(C,y,E,p),l<1&&(d++,r(y,E<p?T:C,p))),p=y.length):l===0&&(d++,y=[0]),g[u++]=d,l&&y[0]?y[p++]=O[_]||0:(y=[O[_]],p=1);while((_++<j||y[0]!==void 0)&&b--)}return g[0]||g.shift(),m.e=c,qe(m,o?i+At(m)+1:i)}}();function QD(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,h=d.precision;if(At(e)>16)throw Error(a_+At(e));if(!e.s)return new d(tn);for(ct=!1,l=h,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(ma(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(tn),d.precision=l;;){if(s=qe(s.times(e),l),r=r.times(++c),o=i.plus($s(s,r,l)),ds(o.d).slice(0,l)===ds(i.d).slice(0,l)){for(;u--;)i=qe(i.times(i),l);return d.precision=h,t==null?(ct=!0,qe(i,h)):i}i=o}}function At(e){for(var t=e.e*tt,r=e.d[0];r>=10;r/=10)t++;return t}function kv(e,t,r){if(t>e.LN10.sd())throw ct=!0,r&&(e.precision=r),Error(Tn+"LN10 precision limit exceeded");return qe(new e(e.LN10),t)}function xi(e){for(var t="";e--;)t+="0";return t}function Fu(e,t){var r,n,s,i,o,l,c,u,d,h=1,f=10,m=e,g=m.d,y=m.constructor,p=y.precision;if(m.s<1)throw Error(Tn+(m.s?"NaN":"-Infinity"));if(m.eq(tn))return new y(0);if(t==null?(ct=!1,u=p):u=t,m.eq(10))return t==null&&(ct=!0),kv(y,u);if(u+=f,y.precision=u,r=ds(g),n=r.charAt(0),i=At(m),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)m=m.times(e),r=ds(m.d),n=r.charAt(0),h++;i=At(m),n>1?(m=new y("0."+r),i++):m=new y(n+"."+r.slice(1))}else return c=kv(y,u+2,p).times(i+""),m=Fu(new y(n+"."+r.slice(1)),u-f).plus(c),y.precision=p,t==null?(ct=!0,qe(m,p)):m;for(l=o=m=$s(m.minus(tn),m.plus(tn),u),d=qe(m.times(m),u),s=3;;){if(o=qe(o.times(d),u),c=l.plus($s(o,new y(s),u)),ds(c.d).slice(0,u)===ds(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(kv(y,u+2,p).times(i+""))),l=$s(l,new y(h),u),y.precision=p,t==null?(ct=!0,qe(l,p)):l;l=c,s+=2}}function qE(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Vl(r/tt),e.d=[],n=(r+1)%tt,r<0&&(n+=tt),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=tt;n<s;)e.d.push(+t.slice(n,n+=tt));t=t.slice(n),n=tt-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),ct&&(e.e>ym||e.e<-ym))throw Error(a_+r)}else e.s=0,e.e=0,e.d=[0];return e}function qe(e,t,r){var n,s,i,o,l,c,u,d,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=tt,s=t,u=h[d=0];else{if(d=Math.ceil((n+1)/tt),i=h.length,d>=i)return e;for(u=i=h[d],o=1;i>=10;i/=10)o++;n%=tt,s=n-tt+o}if(r!==void 0&&(i=ma(10,o-s-1),l=u/i%10|0,c=t<0||h[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/ma(10,o-s):0:h[d-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=At(e),h.length=1,t=t-i-1,h[0]=ma(10,(tt-t%tt)%tt),e.e=Vl(-t/tt)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=d,i=1,d--):(h.length=d+1,i=ma(10,tt-n),h[d]=s>0?(u/ma(10,o-s)%ma(10,s)|0)*i:0),c)for(;;)if(d==0){(h[0]+=i)==Wt&&(h[0]=1,++e.e);break}else{if(h[d]+=i,h[d]!=Wt)break;h[d--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(ct&&(e.e>ym||e.e<-ym))throw Error(a_+At(e));return e}function JD(e,t){var r,n,s,i,o,l,c,u,d,h,f=e.constructor,m=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),ct?qe(t,m):t;if(c=e.d,h=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=h.length):(r=h,n=u,l=c.length),s=Math.max(Math.ceil(m/tt),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){d=c[s]<h[s];break}o=0}for(d&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=Wt-1;--c[i],c[s]+=Wt}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ct?qe(t,m):t):new f(0)}function Ka(e,t,r){var n,s=At(e),i=ds(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+xi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+xi(-s-1)+i,r&&(n=r-o)>0&&(i+=xi(n))):s>=o?(i+=xi(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+xi(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=xi(n))),e.s<0?"-"+i:i}function VE(e,t){if(e.length>t)return e.length=t,!0}function ZD(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Da+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return qE(o,i.toString())}else if(typeof i!="string")throw Error(Da+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,NQ.test(i))qE(o,i);else throw Error(Da+i)}if(s.prototype=ne,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=ZD,s.config=s.set=SQ,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function SQ(e){if(!e||typeof e!="object")throw Error(Tn+"Object expected");var t,r,n,s=["precision",1,ql,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Vl(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Da+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Da+r+": "+n);return this}var o_=ZD(jQ);tn=new o_(1);const De=o_;var EQ=e=>e,eR={},tR=e=>e===eR,GE=e=>function t(){return arguments.length===0||arguments.length===1&&tR(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},rR=(e,t)=>e===1?t:GE(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==eR).length;return i>=e?t(...n):rR(e-i,GE(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>tR(d)?l.shift():d);return t(...u,...l)}))}),CQ=e=>rR(e.length,e),Xx=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},kQ=CQ((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),AQ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return EQ;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function nR(e){var t;return e===0?t=1:t=Math.floor(new De(e).abs().log(10).toNumber())+1,t}function sR(e,t,r){for(var n=new De(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var iR=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},aR=(e,t,r)=>{if(e.lte(0))return new De(0);var n=nR(e.toNumber()),s=new De(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new De(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new De(c.toNumber()):new De(Math.ceil(c.toNumber()))},PQ=(e,t,r)=>{var n=new De(1),s=new De(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new De(10).pow(nR(e)-1),s=new De(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new De(Math.floor(e)))}else e===0?s=new De(Math.floor((t-1)/2)):r||(s=new De(Math.floor(e)));var o=Math.floor((t-1)/2),l=AQ(kQ(c=>s.add(new De(c-o).mul(n)).toNumber()),Xx);return l(0,t)},oR=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new De(0),tickMin:new De(0),tickMax:new De(0)};var o=aR(new De(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new De(0):(l=new De(t).add(r).div(2),l=l.sub(new De(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new De(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?oR(t,r,n,s,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new De(c).mul(o)),tickMax:l.add(new De(u).mul(o))})},OQ=function(t){var[r,n]=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),[l,c]=iR([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...Xx(0,s-1).map(()=>1/0)]:[...Xx(0,s-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return PQ(l,s,i);var{step:d,tickMin:h,tickMax:f}=oR(l,c,o,i,0),m=sR(h,f.add(new De(.1).mul(d)),d);return r>n?m.reverse():m},TQ=function(t,r){var[n,s]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=iR([n,s]);if(o===-1/0||l===1/0)return[n,s];if(o===l)return[o];var c=Math.max(r,2),u=aR(new De(l).sub(o).div(c-1),i,0),d=[...sR(new De(o),new De(l),u),l];return i===!1&&(d=d.map(h=>Math.round(h))),n>s?d.reverse():d},lR=e=>e.rootProps.maxBarSize,IQ=e=>e.rootProps.barGap,cR=e=>e.rootProps.barCategoryGap,DQ=e=>e.rootProps.barSize,qp=e=>e.rootProps.stackOffset,uR=e=>e.rootProps.reverseStackOrder,l_=e=>e.options.chartName,c_=e=>e.rootProps.syncId,dR=e=>e.rootProps.syncMethod,u_=e=>e.options.eventEmitter,kr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Cs={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Xr={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},Vp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},RQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Cs.angleAxisId,includeHidden:!1,name:void 0,reversed:Cs.reversed,scale:Cs.scale,tick:Cs.tick,tickCount:void 0,ticks:void 0,type:Cs.type,unit:void 0},MQ={allowDataOverflow:Xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xr.scale,tick:Xr.tick,tickCount:Xr.tickCount,ticks:void 0,type:Xr.type,unit:void 0},LQ={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Cs.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Cs.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Cs.scale,tick:Cs.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},$Q={allowDataOverflow:Xr.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Xr.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Xr.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Xr.scale,tick:Xr.tick,tickCount:Xr.tickCount,ticks:void 0,type:"category",unit:void 0},d_=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?LQ:RQ,h_=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?$Q:MQ,Gp=e=>e.polarOptions,f_=F([si,ii,Zt],MK),hR=F([Gp,f_],(e,t)=>{if(e!=null)return ts(e.innerRadius,t,0)}),fR=F([Gp,f_],(e,t)=>{if(e!=null)return ts(e.outerRadius,t,t*.8)}),UQ=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},mR=F([Gp],UQ);F([d_,mR],Vp);var pR=F([f_,hR,fR],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});F([h_,pR],Vp);var gR=F([$e,Gp,hR,fR,si,ii],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:ts(o,s,s/2),cy:ts(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Lt=(e,t)=>t,Kp=(e,t,r)=>r;function m_(e){return e==null?void 0:e.id}function vR(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:s,dataKey:i}=r,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=m_(l);u.forEach((h,f)=>{var m=i==null||s?f:String(ur(h,i,null)),g=ur(h,l.dataKey,0),y;o.has(m)?y=o.get(m):y={},Object.assign(y,{[d]:g}),o.set(m,y)})}}),Array.from(o.values())}function Yp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Xp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Qp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function FQ(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var $t=e=>{var t=$e(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Gl=e=>e.tooltip.settings.axisId;function KE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KE(Object(r),!0).forEach(function(n){BQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BQ(e,t,r){return(t=zQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zQ(e){var t=WQ(e,"string");return typeof t=="symbol"?t:t+""}function WQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qx=[0,"auto"],Ft={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},xR=(e,t)=>e.cartesianAxis.xAxis[t],li=(e,t)=>{var r=xR(e,t);return r??Ft},Bt={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Qx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ud},yR=(e,t)=>e.cartesianAxis.yAxis[t],ci=(e,t)=>{var r=yR(e,t);return r??Bt},HQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},p_=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??HQ},Rr=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"zAxis":return p_(e,r);case"angleAxis":return d_(e,r);case"radiusAxis":return h_(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},qQ=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},vd=(e,t,r)=>{switch(t){case"xAxis":return li(e,r);case"yAxis":return ci(e,r);case"angleAxis":return d_(e,r);case"radiusAxis":return h_(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},bR=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function wR(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var g_=e=>e.graphicalItems.cartesianItems,VQ=F([Lt,Kp],wR),_R=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),xd=F([g_,Rr,VQ],_R,{memoizeOptions:{resultEqualityCheck:Qp}}),jR=F([xd],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Yp)),NR=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),GQ=F([xd],NR),SR=e=>e.map(t=>t.data).filter(Boolean).flat(1),KQ=F([xd],SR,{memoizeOptions:{resultEqualityCheck:Qp}}),ER=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},v_=F([KQ,GD],ER),CR=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:ur(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:ur(s,n)}))):e.map(n=>({value:n})),Jp=F([v_,Rr,xd],CR);function kR(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Uh(e){if(gs(e)||e instanceof Date){var t=Number(e);if(gt(t))return t}}function YE(e){if(Array.isArray(e)){var t=[Uh(e[0]),Uh(e[1])];return Yi(t)?t:void 0}var r=Uh(e);if(r!=null)return[r,r]}function Zs(e){return e.map(Uh).filter(wH)}function YQ(e,t,r){return!r||typeof t!="number"||es(t)?[]:r.length?Zs(r.flatMap(n=>{var s=ur(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!gt(i)||!gt(o)))return[t-i,t+o]})):[]}var Ut=e=>{var t=$t(e),r=Gl(e);return vd(e,t,r)},yd=F([Ut],e=>e==null?void 0:e.dataKey),XQ=F([jR,GD,Ut],vR),AR=(e,t,r,n)=>{var s={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},s);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(m_);return[l,{stackedData:OV(e,d,r),graphicalItems:u}]}))},Jx=F([XQ,jR,qp,uR],AR),PR=(e,t,r,n)=>{var{dataStartIndex:s,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=MV(e,s,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},QQ=F([Rr],e=>e.allowDataOverflow),x_=e=>{var t;if(e==null||!("domain"in e))return Qx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=Zs(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:Qx},OR=F([Rr],x_),TR=F([OR,QQ],KD),JQ=F([Jx,oi,Lt,TR],PR,{memoizeOptions:{resultEqualityCheck:Xp}}),y_=e=>e.errorBars,ZQ=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>kR(r,n)),wm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},IR=(e,t,r,n,s)=>{var i,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var u,d,h=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>kR(s,v)),f=ur(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),m=YQ(l,f,h);if(m.length>=2){var g=Math.min(...m),y=Math.max(...m);(i==null||g<i)&&(i=g),(o==null||y>o)&&(o=y)}var p=YE(f);p!=null&&(i=i==null?p[0]:Math.min(i,p[0]),o=o==null?p[1]:Math.max(o,p[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=YE(ur(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),gt(i)&&gt(o))return[i,o]},eJ=F([v_,Rr,GQ,y_,Lt],IR,{memoizeOptions:{resultEqualityCheck:Xp}});function tJ(e){var{value:t}=e;if(gs(t)||t instanceof Date)return t}var rJ=(e,t,r)=>{var n=e.map(tJ).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&_I(n))?dD(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},DR=e=>e.referenceElements.dots,Kl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),nJ=F([DR,Lt,Kp],Kl),RR=e=>e.referenceElements.areas,sJ=F([RR,Lt,Kp],Kl),MR=e=>e.referenceElements.lines,iJ=F([MR,Lt,Kp],Kl),LR=(e,t)=>{if(e!=null){var r=Zs(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},aJ=F(nJ,Lt,LR),$R=(e,t)=>{if(e!=null){var r=Zs(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},oJ=F([sJ,Lt],$R);function lJ(e){var t;if(e.x!=null)return Zs([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:Zs(r)}function cJ(e){var t;if(e.y!=null)return Zs([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:Zs(r)}var UR=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?lJ(n):cJ(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},uJ=F([iJ,Lt],UR),dJ=F(aJ,uJ,oJ,(e,t,r)=>wm(e,r,t)),FR=(e,t,r,n,s,i,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?wm(n,i,s):wm(i,s);return _Q(t,u,e.allowDataOverflow)},hJ=F([Rr,OR,TR,JQ,eJ,dJ,$e,Lt],FR,{memoizeOptions:{resultEqualityCheck:Xp}}),fJ=[0,1],BR=(e,t,r,n,s,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=ro(t,i);if(u&&l==null){var d;return dD(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?rJ(n,e,u):s==="expand"?fJ:o}},b_=F([Rr,$e,v_,Jp,qp,Lt,hJ],BR),zR=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(id(i));return l in Ec?l:"point"}}},bd=F([Rr,$e,bR,l_,Lt],zR);function mJ(e){if(e!=null){if(e in Ec)return Ec[e]();var t="scale".concat(id(e));if(t in Ec)return Ec[t]()}}function w_(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=mJ(t);if(s!=null){var i=s.domain(r).range(n);return EV(i),i}}}var WR=(e,t,r)=>{var n=x_(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&Yi(e))return OQ(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Yi(e))return TQ(e,t.tickCount,t.allowDecimals)}},__=F([b_,vd,bd],WR),HR=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&Yi(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},pJ=F([Rr,b_,__,Lt],HR),gJ=F(Jp,Rr,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Zs(e.map(h=>h.value))).sort((h,f)=>h-f),s=n[0],i=n[n.length-1];if(s==null||i==null)return 1/0;var o=i-s;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),qR=F(gJ,$e,cR,Zt,(e,t,r,n,s)=>s,(e,t,r,n,s)=>{if(!gt(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=ts(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),vJ=(e,t,r)=>{var n=li(e,t);return n==null||typeof n.padding!="string"?0:qR(e,"xAxis",t,r,n.padding)},xJ=(e,t,r)=>{var n=ci(e,t);return n==null||typeof n.padding!="string"?0:qR(e,"yAxis",t,r,n.padding)},yJ=F(li,vJ,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),bJ=F(ci,xJ,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),wJ=F([Zt,yJ,Tp,Op,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),_J=F([Zt,$e,bJ,Tp,Op,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),wd=(e,t,r,n)=>{var s;switch(t){case"xAxis":return wJ(e,r,n);case"yAxis":return _J(e,r,n);case"zAxis":return(s=p_(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return mR(e);case"radiusAxis":return pR(e,r);default:return}},VR=F([Rr,wd],Vp),Zp=F([Rr,bd,pJ,VR],w_);F([xd,y_,Lt],ZQ);function GR(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var eg=(e,t)=>t,tg=(e,t,r)=>r,jJ=F(Ap,eg,tg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(GR)),NJ=F(Pp,eg,tg,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(GR)),KR=(e,t)=>({width:e.width,height:t.height}),SJ=(e,t)=>{var r=typeof t.width=="number"?t.width:ud;return{width:r,height:e.height}},YR=F(Zt,li,KR),EJ=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},CJ=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},kJ=F(ii,Zt,jJ,eg,tg,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=KR(t,l);o==null&&(o=EJ(t,n,e));var u=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),AJ=F(si,Zt,NJ,eg,tg,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=SJ(t,l);o==null&&(o=CJ(t,n,e));var u=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),PJ=(e,t)=>{var r=li(e,t);if(r!=null)return kJ(e,r.orientation,r.mirror)},OJ=F([Zt,li,PJ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:e.left,y:0}:{x:e.left,y:s}}}),TJ=(e,t)=>{var r=ci(e,t);if(r!=null)return AJ(e,r.orientation,r.mirror)},IJ=F([Zt,ci,TJ,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var s=r==null?void 0:r[n];return s==null?{x:0,y:e.top}:{x:s,y:e.top}}}),XR=F(Zt,ci,(e,t)=>{var r=typeof t.width=="number"?t.width:ud;return{width:r,height:e.height}}),XE=(e,t,r)=>{switch(t){case"xAxis":return YR(e,r).width;case"yAxis":return XR(e,r).height;default:return}},QR=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=ro(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&s&&_I(c))return c}},j_=F([$e,Jp,Rr,Lt],QR),JR=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=ro(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},N_=F([$e,Jp,vd,Lt],JR),QE=F([$e,qQ,bd,Zp,j_,N_,wd,__,Lt],(e,t,r,n,s,i,o,l,c)=>{if(t!=null){var u=ro(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}}),DJ=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var u=ro(e,c),{type:d,ticks:h,tickCount:f}=t,m=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/m:0;g=c==="angleAxis"&&i!=null&&i.length>=2?Fr(i[0]-i[1])*2*g:g;var y=h||s;if(y){var p=y.map((v,b)=>{var w=o?o.indexOf(v):v;return{index:b,coordinate:n(w)+g,value:v,offset:g}});return p.filter(v=>gt(v.coordinate))}return u&&l?l.map((v,b)=>({coordinate:n(v)+g,value:v,index:b,offset:g})).filter(v=>gt(v.coordinate)):n.ticks?n.ticks(f).map(v=>({coordinate:n(v)+g,value:v,offset:g})):n.domain().map((v,b)=>({coordinate:n(v)+g,value:o?o[v]:v,index:b,offset:g}))}},ZR=F([$e,vd,bd,Zp,__,wd,j_,N_,Lt],DJ),RJ=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=ro(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?Fr(n[0]-n[1])*2*u:u,l&&i?i.map((d,h)=>({coordinate:r(d)+u,value:d,index:h,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,h)=>({coordinate:r(d)+u,value:s?s[d]:d,index:h,offset:u}))}},Sl=F([$e,vd,Zp,wd,j_,N_,Lt],RJ),El=F(Rr,Zp,(e,t)=>{if(!(e==null||t==null))return bm(bm({},e),{},{scale:t})}),MJ=F([Rr,bd,b_,VR],w_);F((e,t,r)=>p_(e,r),MJ,(e,t)=>{if(!(e==null||t==null))return bm(bm({},e),{},{scale:t})});var LJ=F([$e,Ap,Pp],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),e3=e=>e.options.defaultTooltipEventType,t3=e=>e.options.validateTooltipEventTypes;function r3(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function S_(e,t){var r=e3(e),n=t3(e);return r3(t,r,n)}function $J(e){return ce(t=>S_(t,e))}var n3=(e,t)=>{var r,n=Number(t);if(!(es(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},UJ=e=>e.tooltip.settings,ji={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},FJ={itemInteraction:{click:ji,hover:ji},axisInteraction:{click:ji,hover:ji},keyboardInteraction:ji,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},s3=qr({name:"tooltip",initialState:FJ,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:at()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Qn(e).tooltipItemPayloads.indexOf(r);s>-1&&(e.tooltipItemPayloads[s]=n)},prepare:at()},removeTooltipEntrySettings:{reducer(e,t){var r=Qn(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:at()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:BJ,replaceTooltipEntrySettings:zJ,removeTooltipEntrySettings:WJ,setTooltipSettingsState:HJ,setActiveMouseOverItemIndex:i3,mouseLeaveItem:qJ,mouseLeaveChart:a3,setActiveClickItemIndex:VJ,setMouseOverAxisIndex:o3,setMouseClickAxisIndex:GJ,setSyncInteraction:Zx,setKeyboardInteraction:ey}=s3.actions,KJ=s3.reducer;function JE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JE(Object(r),!0).forEach(function(n){YJ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function YJ(e,t,r){return(t=XJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=QJ(e,"string");return typeof t=="symbol"?t:t+""}function QJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JJ(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function ZJ(e){return e.index!=null}var l3=(e,t,r,n)=>{if(t==null)return ji;var s=JJ(e,t,r);if(s==null)return ji;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(ZJ(s)){if(i)return gh(gh({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return gh(gh({},ji),{},{coordinate:s.coordinate})};function eZ(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function tZ(e,t){var r=eZ(e),n=t[0],s=t[1];if(r===void 0)return!1;var i=Math.min(n,s),o=Math.max(n,s);return r>=i&&r<=o}function rZ(e,t,r){if(r==null||t==null)return!0;var n=ur(e,t);return n==null||!Yi(r)?!0:tZ(n,r)}var E_=(e,t,r,n)=>{var s=e==null?void 0:e.index;if(s==null)return null;var i=Number(s);if(!gt(i))return s;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),u=t[c];return u==null||rZ(u,r,n)?String(c):null},c3=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=s==null?void 0:s[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},u3=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;if(r==="hover"?s=e.itemInteraction.hover.graphicalItemId:s=e.itemInteraction.click.graphicalItemId,s==null&&n!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===s})},_d=e=>e.options.tooltipPayloadSearcher,Yl=e=>e.tooltip;function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function e2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(n){nZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nZ(e,t,r){return(t=sZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sZ(e){var t=iZ(e,"string");return typeof t=="symbol"?t:t+""}function iZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aZ(e,t){return e??t}var d3=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,h=[];return e.reduce((f,m)=>{var g,{dataDefinedOnItem:y,settings:p}=m,v=aZ(y,l),b=Array.isArray(v)?A4(v,u,d):v,w=(g=p==null?void 0:p.dataKey)!==null&&g!==void 0?g:n,_=p==null?void 0:p.nameKey,j;if(n&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?j=bH(b,n,s):j=i(b,t,c,_),Array.isArray(j))j.forEach(E=>{var T=e2(e2({},p),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});f.push(fS({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:ur(E.payload,E.dataKey),name:E.name}))});else{var N;f.push(fS({tooltipEntrySettings:p,dataKey:w,payload:j,value:ur(j,w),name:(N=ur(j,_))!==null&&N!==void 0?N:p==null?void 0:p.name}))}return f},h)}},C_=F([Ut,$e,bR,l_,$t],zR),oZ=F([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),lZ=F([$t,Gl],wR),Xl=F([oZ,Ut,lZ],_R,{memoizeOptions:{resultEqualityCheck:Qp}}),cZ=F([Xl],e=>e.filter(Yp)),uZ=F([Xl],SR,{memoizeOptions:{resultEqualityCheck:Qp}}),Ql=F([uZ,oi],ER),dZ=F([cZ,oi,Ut],vR),k_=F([Ql,Ut,Xl],CR),h3=F([Ut],x_),hZ=F([Ut],e=>e.allowDataOverflow),f3=F([h3,hZ],KD),fZ=F([Xl],e=>e.filter(Yp)),mZ=F([dZ,fZ,qp,uR],AR),pZ=F([mZ,oi,$t,f3],PR),gZ=F([Xl],NR),vZ=F([Ql,Ut,gZ,y_,$t],IR,{memoizeOptions:{resultEqualityCheck:Xp}}),xZ=F([DR,$t,Gl],Kl),yZ=F([xZ,$t],LR),bZ=F([RR,$t,Gl],Kl),wZ=F([bZ,$t],$R),_Z=F([MR,$t,Gl],Kl),jZ=F([_Z,$t],UR),NZ=F([yZ,jZ,wZ],wm),SZ=F([Ut,h3,f3,pZ,vZ,NZ,$e,$t],FR),jd=F([Ut,$e,Ql,k_,qp,$t,SZ],BR),EZ=F([jd,Ut,C_],WR),CZ=F([Ut,jd,EZ,$t],HR),m3=e=>{var t=$t(e),r=Gl(e),n=!1;return wd(e,t,r,n)},p3=F([Ut,m3],Vp),g3=F([Ut,C_,CZ,p3],w_),kZ=F([$e,k_,Ut,$t],QR),AZ=F([$e,k_,Ut,$t],JR),PZ=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,u=ro(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return h=l==="angleAxis"&&s!=null&&(s==null?void 0:s.length)>=2?Fr(s[0]-s[1])*2*h:h,u&&o?o.map((f,m)=>({coordinate:n(f)+h,value:f,index:m,offset:h})):n.domain().map((f,m)=>({coordinate:n(f)+h,value:i?i[f]:f,index:m,offset:h}))}}},ui=F([$e,Ut,C_,g3,m3,kZ,AZ,$t],PZ),A_=F([e3,t3,UJ],(e,t,r)=>r3(r.shared,e,t)),v3=e=>e.tooltip.settings.trigger,P_=e=>e.tooltip.settings.defaultIndex,Nd=F([Yl,A_,v3,P_],l3),Cl=F([Nd,Ql,yd,jd],E_),x3=F([ui,Cl],n3),y3=F([Nd],e=>{if(e)return e.dataKey});F([Nd],e=>{if(e)return e.graphicalItemId});var b3=F([Yl,A_,v3,P_],u3),OZ=F([si,ii,$e,Zt,ui,P_,b3,_d],c3),TZ=F([Nd,OZ],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),IZ=F([Nd],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),DZ=F([b3,Cl,oi,yd,x3,_d,A_],d3);F([DZ],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function t2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function r2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?t2(Object(r),!0).forEach(function(n){RZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RZ(e,t,r){return(t=MZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MZ(e){var t=LZ(e,"string");return typeof t=="symbol"?t:t+""}function LZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $Z=()=>ce(Ut),UZ=()=>{var e=$Z(),t=ce(ui),r=ce(g3);return em(!e||!r?void 0:r2(r2({},e),{},{scale:r}),t)};function n2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _o(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(r),!0).forEach(function(n){FZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FZ(e,t,r){return(t=BZ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BZ(e){var t=zZ(e,"string");return typeof t=="symbol"?t:t+""}function zZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WZ=(e,t,r,n)=>{var s=t.find(i=>i&&i.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:s.coordinate}}return{x:0,y:0}},HZ=(e,t,r,n)=>{var s=t.find(u=>u&&u.index===r);if(s){if(e==="centric"){var i=s.coordinate,{radius:o}=n;return _o(_o(_o({},n),or(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return _o(_o(_o({},n),or(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function qZ(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var w3=(e,t,r,n,s)=>{var i,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,h,f,m=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,g=(d=r[l])===null||d===void 0?void 0:d.coordinate,y=l>=o-1?(h=r[0])===null||h===void 0?void 0:h.coordinate:(f=r[l+1])===null||f===void 0?void 0:f.coordinate,p=void 0;if(!(m==null||g==null||y==null))if(Fr(g-m)!==Fr(y-g)){var v=[];if(Fr(y-g)===Fr(s[1]-s[0])){p=y;var b=g+s[1]-s[0];v[0]=Math.min(b,(b+m)/2),v[1]=Math.max(b,(b+m)/2)}else{p=m;var w=y+s[1]-s[0];v[0]=Math.min(g,(w+g)/2),v[1]=Math.max(g,(w+g)/2)}var _=[Math.min(g,(p+g)/2),Math.max(g,(p+g)/2)];if(e>_[0]&&e<=_[1]||e>=v[0]&&e<=v[1]){var j;return(j=r[l])===null||j===void 0?void 0:j.index}}else{var N=Math.min(m,y),E=Math.max(m,y);if(e>(N+g)/2&&e<=(E+g)/2){var T;return(T=r[l])===null||T===void 0?void 0:T.index}}}else if(t)for(var S=0;S<o;S++){var D=t[S];if(D!=null){var O=t[S+1],C=t[S-1];if(S===0&&O!=null&&e<=(D.coordinate+O.coordinate)/2||S===o-1&&C!=null&&e>(D.coordinate+C.coordinate)/2||S>0&&S<o-1&&C!=null&&O!=null&&e>(D.coordinate+C.coordinate)/2&&e<=(D.coordinate+O.coordinate)/2)return D.index}}return-1},VZ=()=>ce(l_),O_=(e,t)=>t,_3=(e,t,r)=>r,T_=(e,t,r,n)=>n,GZ=F(ui,e=>bp(e,t=>t.coordinate)),I_=F([Yl,O_,_3,T_],l3),D_=F([I_,Ql,yd,jd],E_),KZ=(e,t,r)=>{if(t!=null){var n=Yl(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},j3=F([Yl,O_,_3,T_],u3),_m=F([si,ii,$e,Zt,ui,T_,j3,_d],c3),YZ=F([I_,_m],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),N3=F([ui,D_],n3),XZ=F([j3,D_,oi,yd,N3,_d,O_],d3),QZ=F([I_,D_],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),JZ=(e,t,r,n,s,i,o)=>{if(!(!e||!r||!n||!s)&&qZ(e,o)){var l=LV(e,t),c=w3(l,i,s,r,n),u=WZ(t,s,c,e);return{activeIndex:String(c),activeCoordinate:u}}},ZZ=(e,t,r,n,s,i,o)=>{if(!(!e||!n||!s||!i||!r)){var l=BK(e,r);if(l){var c=$V(l,t),u=w3(c,o,i,n,s),d=HZ(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},eee=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i))return t==="horizontal"||t==="vertical"?JZ(e,t,n,s,i,o,l):ZZ(e,t,r,n,s,i,o)},tee=F(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),ree=F(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(kr)),r=Array.from(new Set(t));return r.sort((n,s)=>n-s)},{memoizeOptions:{resultEqualityCheck:FQ}});function s2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function i2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?s2(Object(r),!0).forEach(function(n){nee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nee(e,t,r){return(t=see(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function see(e){var t=iee(e,"string");return typeof t=="symbol"?t:t+""}function iee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aee={},oee={zIndexMap:Object.values(kr).reduce((e,t)=>i2(i2({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),aee)},lee=new Set(Object.values(kr));function cee(e){return lee.has(e)}var S3=qr({name:"zIndex",initialState:oee,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:at()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!cee(r)&&delete e.zIndexMap[r])},prepare:at()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:s}=t.payload;e.zIndexMap[r]?s?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:s?void 0:n,panoramaElement:s?n:void 0}},prepare:at()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:at()}}}),{registerZIndexPortal:uee,unregisterZIndexPortal:dee,registerZIndexPortalElement:hee,unregisterZIndexPortalElement:fee}=S3.actions,mee=S3.reducer;function di(e){var{zIndex:t,children:r}=e,n=hG(),s=n&&t!==void 0&&t!==0,i=Vr(),o=St();x.useLayoutEffect(()=>s?(o(uee({zIndex:t})),()=>{o(dee({zIndex:t}))}):ad,[o,t,s]);var l=ce(c=>tee(c,t,i));return s?l?ab.createPortal(r,l):null:r}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(null,arguments)}function a2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?a2(Object(r),!0).forEach(function(n){pee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pee(e,t,r){return(t=gee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gee(e){var t=vee(e,"string");return typeof t=="symbol"?t:t+""}function vee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xee(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return x.isValidElement(t)?x.cloneElement(t,n):x.createElement(r,n)}function yee(e){var t,{coordinate:r,payload:n,index:s,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,h=r,f=n,m=s;if(!c||!h||d!=="ScatterChart"&&u!=="axis")return null;var g,y,p;if(d==="ScatterChart")g=h,y=eK,p=kr.cursorLine;else if(d==="BarChart")g=tK(l,h,i,o),y=sD,p=kr.cursorRectangle;else if(l==="radial"&&SI(h)){var{cx:v,cy:b,radius:w,startAngle:_,endAngle:j}=iD(h);g={cx:v,cy:b,startAngle:_,endAngle:j,innerRadius:w,outerRadius:w},y=oD,p=kr.cursorLine}else g={points:qK(l,h,i)},y=Z4,p=kr.cursorLine;var N=typeof c=="object"&&"className"in c?c.className:void 0,E=vh(vh(vh(vh({stroke:"#ccc",pointerEvents:"none"},i),g),iw(c)),{},{payload:f,payloadIndex:m,className:it("recharts-tooltip-cursor",N)});return x.createElement(di,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:p},x.createElement(xee,{cursor:c,cursorComp:y,cursorProps:E}))}function bee(e){var t=UZ(),r=z4(),n=dd(),s=VZ();return t==null||r==null||n==null||s==null?null:x.createElement(yee,ty({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var E3=x.createContext(null),wee=()=>x.useContext(E3),C3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,h,f){if(typeof d!="function")throw new TypeError("The listener must be a function");var m=new s(d,h||c,f),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],m]:c._events[g].push(m):(c._events[g]=m,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,h;if(this._eventsCount===0)return u;for(h in d=this._events)t.call(d,h)&&u.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,h=this._events[d];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,m=h.length,g=new Array(m);f<m;f++)g[f]=h[f].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,h=this._events[d];return h?h.fn?1:h.length:0},l.prototype.emit=function(u,d,h,f,m,g){var y=r?r+u:u;if(!this._events[y])return!1;var p=this._events[y],v=arguments.length,b,w;if(p.fn){switch(p.once&&this.removeListener(u,p.fn,void 0,!0),v){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,d),!0;case 3:return p.fn.call(p.context,d,h),!0;case 4:return p.fn.call(p.context,d,h,f),!0;case 5:return p.fn.call(p.context,d,h,f,m),!0;case 6:return p.fn.call(p.context,d,h,f,m,g),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];p.fn.apply(p.context,b)}else{var _=p.length,j;for(w=0;w<_;w++)switch(p[w].once&&this.removeListener(u,p[w].fn,void 0,!0),v){case 1:p[w].fn.call(p[w].context);break;case 2:p[w].fn.call(p[w].context,d);break;case 3:p[w].fn.call(p[w].context,d,h);break;case 4:p[w].fn.call(p[w].context,d,h,f);break;default:if(!b)for(j=1,b=new Array(v-1);j<v;j++)b[j-1]=arguments[j];p[w].fn.apply(p[w].context,b)}}return!0},l.prototype.on=function(u,d,h){return i(this,u,d,h,!1)},l.prototype.once=function(u,d,h){return i(this,u,d,h,!0)},l.prototype.removeListener=function(u,d,h,f){var m=r?r+u:u;if(!this._events[m])return this;if(!d)return o(this,m),this;var g=this._events[m];if(g.fn)g.fn===d&&(!f||g.once)&&(!h||g.context===h)&&o(this,m);else{for(var y=0,p=[],v=g.length;y<v;y++)(g[y].fn!==d||f&&!g[y].once||h&&g[y].context!==h)&&p.push(g[y]);p.length?this._events[m]=p.length===1?p[0]:p:o(this,m)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(C3);var _ee=C3.exports;const jee=ti(_ee);var Bu=new jee,ry="recharts.syncEvent.tooltip",o2="recharts.syncEvent.brush";function Nee(e,t){if(t){var r=Number.parseInt(t,10);if(!es(r))return e==null?void 0:e[r]}}var See={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},k3=qr({name:"options",initialState:See,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Eee=k3.reducer,{createEventEmitter:Cee}=k3.actions;function kee(e){return e.tooltip.syncInteraction}var Aee={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},A3=qr({name:"chartData",initialState:Aee,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:l2,setDataStartEndIndexes:Pee,setComputedData:ile}=A3.actions,Oee=A3.reducer,Tee=["x","y"];function c2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?c2(Object(r),!0).forEach(function(n){Iee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Iee(e,t,r){return(t=Dee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dee(e){var t=Ree(e,"string");return typeof t=="symbol"?t:t+""}function Ree(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mee(e,t){if(e==null)return{};var r,n,s=Lee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Lee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function $ee(){var e=ce(c_),t=ce(u_),r=St(),n=ce(dR),s=ce(ui),i=dd(),o=Ip(),l=ce(c=>c.rootProps.className);x.useEffect(()=>{if(e==null)return ad;var c=(u,d,h)=>{if(t!==h&&e===u){if(n==="index"){var f;if(o&&d!==null&&d!==void 0&&(f=d.payload)!==null&&f!==void 0&&f.coordinate&&d.payload.sourceViewBox){var m=d.payload.coordinate,{x:g,y}=m,p=Mee(m,Tee),{x:v,y:b,width:w,height:_}=d.payload.sourceViewBox,j=jo(jo({},p),{},{x:o.x+(w?(g-v)/w:0)*o.width,y:o.y+(_?(y-b)/_:0)*o.height});r(jo(jo({},d),{},{payload:jo(jo({},d.payload),{},{coordinate:j})}))}else r(d);return}if(s!=null){var N;if(typeof n=="function"){var E={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},T=n(s,E);N=s[T]}else n==="value"&&(N=s.find(M=>String(M.value)===d.payload.label));var{coordinate:S}=d.payload;if(N==null||d.payload.active===!1||S==null||o==null){r(Zx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:D,y:O}=S,C=Math.min(D,o.x+o.width),k=Math.min(O,o.y+o.height),I={x:i==="horizontal"?N.coordinate:C,y:i==="horizontal"?k:N.coordinate},R=Zx({active:d.payload.active,coordinate:I,dataKey:d.payload.dataKey,index:String(N.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(R)}}};return Bu.on(ry,c),()=>{Bu.off(ry,c)}},[l,r,t,e,n,s,i,o])}function Uee(){var e=ce(c_),t=ce(u_),r=St();x.useEffect(()=>{if(e==null)return ad;var n=(s,i,o)=>{t!==o&&e===s&&r(Pee(i))};return Bu.on(o2,n),()=>{Bu.off(o2,n)}},[r,t,e])}function Fee(){var e=St();x.useEffect(()=>{e(Cee())},[e]),$ee(),Uee()}function Bee(e,t,r,n,s,i){var o=ce(m=>KZ(m,e,t)),l=ce(u_),c=ce(c_),u=ce(dR),d=ce(kee),h=d==null?void 0:d.active,f=Ip();x.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=Zx({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n,sourceViewBox:f,graphicalItemId:void 0});Bu.emit(ry,c,m,l)}},[h,r,o,s,n,l,c,u,i,f])}function u2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function d2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?u2(Object(r),!0).forEach(function(n){zee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zee(e,t,r){return(t=Wee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wee(e){var t=Hee(e,"string");return typeof t=="symbol"?t:t+""}function Hee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qee(e){return e.dataKey}function Vee(e,t){return x.isValidElement(e)?x.cloneElement(e,t):typeof e=="function"?x.createElement(e,t):x.createElement(IG,t)}var h2=[],Gee={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function P3(e){var t,r,n=pn(e,Gee),{active:s,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:h,payloadUniqBy:f,position:m,reverseDirection:g,useTranslate3d:y,wrapperStyle:p,cursor:v,shared:b,trigger:w,defaultIndex:_,portal:j,axisId:N}=n,E=St(),T=typeof _=="number"?String(_):_;x.useEffect(()=>{E(HJ({shared:b,trigger:w,axisId:N,active:s,defaultIndex:T}))},[E,b,w,N,s,T]);var S=Ip(),D=J4(),O=$J(b),{activeIndex:C,isActive:k}=(t=ce(q=>QZ(q,O,w,T)))!==null&&t!==void 0?t:{},I=ce(q=>XZ(q,O,w,T)),R=ce(q=>N3(q,O,w,T)),M=ce(q=>YZ(q,O,w,T)),P=I,A=wee(),$=(r=s??k)!==null&&r!==void 0?r:!1,[L,z]=wq([P,$]),K=O==="axis"?R:void 0;Bee(O,w,M,K,C,$);var se=j??A;if(se==null||S==null||O==null)return null;var fe=P??h2;$||(fe=h2),u&&fe.length&&(fe=UH(fe.filter(q=>q.value!=null&&(q.hide!==!0||n.includeHidden)),f,qee));var he=fe.length>0,ye=x.createElement(FG,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:d,active:$,coordinate:M,hasPayload:he,offset:h,position:m,reverseDirection:g,useTranslate3d:y,viewBox:S,wrapperStyle:p,lastBoundingBox:L,innerRef:z,hasPortalFromProps:!!j},Vee(c,d2(d2({},n),{},{payload:fe,label:K,active:$,activeIndex:C,coordinate:M,accessibilityLayer:D})));return x.createElement(x.Fragment,null,ab.createPortal(ye,se),$&&x.createElement(bee,{cursor:v,tooltipEventType:O,coordinate:M,payload:fe,index:C}))}var rg=e=>null;rg.displayName="Cell";function Kee(e,t,r){return(t=Yee(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yee(e){var t=Xee(e,"string");return typeof t=="symbol"?t:t+""}function Xee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Qee{constructor(t){Kee(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function f2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jee(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f2(Object(r),!0).forEach(function(n){Zee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zee(e,t,r){return(t=ete(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ete(e){var t=tte(e,"string");return typeof t=="symbol"?t:t+""}function tte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rte={cacheSize:2e3,enableCache:!0},O3=Jee({},rte),m2=new Qee(O3.cacheSize),nte={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},p2="recharts_measurement_span";function ste(e,t){var r=t.fontSize||"",n=t.fontFamily||"",s=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(s,"|").concat(i,"|").concat(o,"|").concat(l)}var g2=(e,t)=>{try{var r=document.getElementById(p2);r||(r=document.createElement("span"),r.setAttribute("id",p2),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,nte,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Gc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||$p.isSsr)return{width:0,height:0};if(!O3.enableCache)return g2(t,r);var n=ste(t,r),s=m2.get(n);if(s)return s;var i=g2(t,r);return m2.set(n,i),i},T3;function ite(e,t,r){return(t=ate(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ate(e){var t=ote(e,"string");return typeof t=="symbol"?t:t+""}function ote(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var v2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,x2=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,lte=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,cte=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ute={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},dte=["cm","mm","pt","pc","in","Q","px"];function hte(e){return dte.includes(e)}var Bo="NaN";function fte(e,t){return e*ute[t]}class ir{static parse(t){var r,[,n,s]=(r=cte.exec(t))!==null&&r!==void 0?r:[];return n==null?ir.NaN:new ir(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,es(t)&&(this.unit=""),r!==""&&!lte.test(r)&&(this.num=NaN,this.unit=""),hte(r)&&(this.num=fte(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new ir(NaN,""):new ir(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new ir(NaN,""):new ir(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return es(this.num)}}T3=ir;ite(ir,"NaN",new T3(NaN,""));function I3(e){if(e==null||e.includes(Bo))return Bo;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=v2.exec(t))!==null&&r!==void 0?r:[],o=ir.parse(n??""),l=ir.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Bo;t=t.replace(v2,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,h,f]=(u=x2.exec(t))!==null&&u!==void 0?u:[],m=ir.parse(d??""),g=ir.parse(f??""),y=h==="+"?m.add(g):m.subtract(g);if(y.isNaN())return Bo;t=t.replace(x2,y.toString())}return t}var y2=/\(([^()]*)\)/;function mte(e){for(var t=e,r;(r=y2.exec(t))!=null;){var[,n]=r;t=t.replace(y2,I3(n))}return t}function pte(e){var t=e.replace(/\s+/g,"");return t=mte(t),t=I3(t),t}function gte(e){try{return pte(e)}catch{return Bo}}function Av(e){var t=gte(e.slice(5,-1));return t===Bo?"":t}var vte=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],xte=["dx","dy","angle","className","breakAll"];function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(null,arguments)}function b2(e,t){if(e==null)return{};var r,n,s=yte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var D3=/[ \f\n\r\t\v\u2028\u2029]+/,R3=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];Jt(t)||(r?s=t.toString().split(""):s=t.toString().split(D3));var i=s.map(l=>({word:l,width:Gc(l,n).width})),o=r?0:Gc("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function bte(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var M3=(e,t,r,n)=>e.reduce((s,i)=>{var{word:o,width:l}=i,c=s[s.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};s.push(u)}return s},[]),L3=e=>e.reduce((t,r)=>t.width>r.width?t:r),wte="",w2=(e,t,r,n,s,i,o,l)=>{var c=e.slice(0,t),u=R3({breakAll:r,style:n,children:c+wte});if(!u)return[!1,[]];var d=M3(u.wordsWithComputedWidth,i,o,l),h=d.length>s||L3(d).width>Number(i);return[h,d]},_te=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=ae(i),d=String(o),h=M3(t,n,r,s);if(!u||s)return h;var f=h.length>i||L3(h).width>Number(n);if(!f)return h;for(var m=0,g=d.length-1,y=0,p;m<=g&&y<=d.length-1;){var v=Math.floor((m+g)/2),b=v-1,[w,_]=w2(d,b,c,l,i,n,r,s),[j]=w2(d,v,c,l,i,n,r,s);if(!w&&!j&&(m=v+1),w&&j&&(g=v-1),!w&&j){p=_;break}y++}return p||h},_2=e=>{var t=Jt(e)?[]:e.toString().split(D3);return[{words:t,width:void 0}]},jte=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!$p.isSsr){var l,c,u=R3({breakAll:i,children:n,style:s});if(u){var{wordsWithComputedWidth:d,spaceWidth:h}=u;l=d,c=h}else return _2(n);return _te({breakAll:i,children:n,maxLines:o,style:s},l,c,t,!!r)}return _2(n)},$3="#808080",Nte={angle:0,breakAll:!1,capHeight:"0.71em",fill:$3,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},R_=x.forwardRef((e,t)=>{var r=pn(e,Nte),{x:n,y:s,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,h=b2(r,vte),f=x.useMemo(()=>jte({breakAll:h.breakAll,children:h.children,maxLines:h.maxLines,scaleToFit:c,style:h.style,width:h.width}),[h.breakAll,h.children,h.maxLines,c,h.style,h.width]),{dx:m,dy:g,angle:y,className:p,breakAll:v}=h,b=b2(h,xte);if(!gs(n)||!gs(s)||f.length===0)return null;var w=Number(n)+(ae(m)?m:0),_=Number(s)+(ae(g)?g:0);if(!gt(w)||!gt(_))return null;var j;switch(d){case"start":j=Av("calc(".concat(o,")"));break;case"middle":j=Av("calc(".concat((f.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:j=Av("calc(".concat(f.length-1," * -").concat(i,")"));break}var N=[];if(c){var E=f[0].width,{width:T}=h;N.push("scale(".concat(ae(T)&&ae(E)?T/E:1,")"))}return y&&N.push("rotate(".concat(y,", ").concat(w,", ").concat(_,")")),N.length&&(b.transform=N.join(" ")),x.createElement("text",ny({},Pn(b),{ref:t,x:w,y:_,className:it("recharts-text",p),textAnchor:u,fill:l.includes("url")?$3:l}),f.map((S,D)=>{var O=S.words.join(v?"":" ");return x.createElement("tspan",{x:w,dy:D===0?j:i,key:"".concat(O,"-").concat(D)},O)}))});R_.displayName="Text";var Ste=["labelRef"],Ete=["content"];function j2(e,t){if(e==null)return{};var r,n,s=Cte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Cte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function N2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(r),!0).forEach(function(n){kte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kte(e,t,r){return(t=Ate(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ate(e){var t=Pte(e,"string");return typeof t=="symbol"?t:t+""}function Pte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ks(){return ks=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ks.apply(null,arguments)}var U3=x.createContext(null),Ote=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o,children:l}=e,c=x.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:s,width:i,height:o}),[t,r,n,s,i,o]);return x.createElement(U3.Provider,{value:c},l)},F3=()=>{var e=x.useContext(U3),t=Ip();return e||B4(t)},Tte=x.createContext(null),Ite=()=>{var e=x.useContext(Tte),t=ce(gR);return e||t},Dte=e=>{var{value:t,formatter:r}=e,n=Jt(e.children)?t:e.children;return typeof r=="function"?r(n):n},M_=e=>e!=null&&typeof e=="function",Rte=(e,t)=>{var r=Fr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Mte=(e,t,r,n,s)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:h,endAngle:f,clockWise:m}=s,g=(u+d)/2,y=Rte(h,f),p=y>=0?1:-1,v,b;switch(t){case"insideStart":v=h+p*i,b=m;break;case"insideEnd":v=f-p*i,b=!m;break;case"end":v=f+p*i,b=m;break;default:throw new Error("Unsupported position ".concat(t))}b=y<=0?b:!b;var w=or(l,c,g,v),_=or(l,c,g,v+(b?1:-1)*359),j="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(_.x,",").concat(_.y),N=Jt(e.id)?ku("recharts-radial-line-"):e.id;return x.createElement("text",ks({},n,{dominantBaseline:"central",className:it("recharts-radial-bar-label",o)}),x.createElement("defs",null,x.createElement("path",{id:N,d:j})),x.createElement("textPath",{xlinkHref:"#".concat(N)},r))},Lte=(e,t,r)=>{var{cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:h}=or(n,s,o+t,u);return{x:d,y:h,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:s,textAnchor:"middle",verticalAnchor:"end"};var f=(i+o)/2,{x:m,y:g}=or(n,s,f,u);return{x:m,y:g,textAnchor:"middle",verticalAnchor:"middle"}},sy=e=>"cx"in e&&ae(e.cx),$te=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,i;r!=null&&!sy(r)&&(i=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,h=o,f=o+(c-u)/2,m=(h+f)/2,g=(c+u)/2,y=h+c/2,p=d>=0?1:-1,v=p*n,b=p>0?"end":"start",w=p>0?"start":"end",_=c>=0?1:-1,j=_*n,N=_>0?"end":"start",E=_>0?"start":"end";if(s==="top"){var T={x:h+c/2,y:l-v,textAnchor:"middle",verticalAnchor:b};return _t(_t({},T),i?{height:Math.max(l-i.y,0),width:c}:{})}if(s==="bottom"){var S={x:f+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:w};return _t(_t({},S),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(s==="left"){var D={x:m-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"};return _t(_t({},D),i?{width:Math.max(D.x-i.x,0),height:d}:{})}if(s==="right"){var O={x:m+g+j,y:l+d/2,textAnchor:E,verticalAnchor:"middle"};return _t(_t({},O),i?{width:Math.max(i.x+i.width-O.x,0),height:d}:{})}var C=i?{width:g,height:d}:{};return s==="insideLeft"?_t({x:m+j,y:l+d/2,textAnchor:E,verticalAnchor:"middle"},C):s==="insideRight"?_t({x:m+g-j,y:l+d/2,textAnchor:N,verticalAnchor:"middle"},C):s==="insideTop"?_t({x:h+c/2,y:l+v,textAnchor:"middle",verticalAnchor:w},C):s==="insideBottom"?_t({x:f+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:b},C):s==="insideTopLeft"?_t({x:h+j,y:l+v,textAnchor:E,verticalAnchor:w},C):s==="insideTopRight"?_t({x:h+c-j,y:l+v,textAnchor:N,verticalAnchor:w},C):s==="insideBottomLeft"?_t({x:f+j,y:l+d-v,textAnchor:E,verticalAnchor:b},C):s==="insideBottomRight"?_t({x:f+u-j,y:l+d-v,textAnchor:N,verticalAnchor:b},C):s&&typeof s=="object"&&(ae(s.x)||Ks(s.x))&&(ae(s.y)||Ks(s.y))?_t({x:o+ts(s.x,g),y:l+ts(s.y,d),textAnchor:"end",verticalAnchor:"end"},C):_t({x:y,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},C)},Ute={angle:0,offset:5,zIndex:kr.label,position:"middle",textBreakAll:!1};function yi(e){var t=pn(e,Ute),{viewBox:r,position:n,value:s,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=Ite(),h=F3(),f=n==="center"?h:d??h,m,g,y;if(r==null?m=f:sy(r)?m=r:m=B4(r),!m||Jt(s)&&Jt(i)&&!x.isValidElement(o)&&typeof o!="function")return null;var p=_t(_t({},t),{},{viewBox:m});if(x.isValidElement(o)){var{labelRef:v}=p,b=j2(p,Ste);return x.cloneElement(o,b)}if(typeof o=="function"){var{content:w}=p,_=j2(p,Ete);if(g=x.createElement(o,_),x.isValidElement(g))return g}else g=Dte(t);var j=Pn(t);if(sy(m)){if(n==="insideStart"||n==="insideEnd"||n==="end")return Mte(t,n,g,j,m);y=Lte(m,t.offset,t.position)}else y=$te(t,m);return x.createElement(di,{zIndex:t.zIndex},x.createElement(R_,ks({ref:u,className:it("recharts-label",l)},j,y,{textAnchor:bte(j.textAnchor)?j.textAnchor:y.textAnchor,breakAll:c}),g))}yi.displayName="Label";var Fte=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?x.createElement(yi,ks({key:"label-implicit"},n)):gs(e)?x.createElement(yi,ks({key:"label-implicit",value:e},n)):x.isValidElement(e)?e.type===yi?x.cloneElement(e,_t({key:"label-implicit"},n)):x.createElement(yi,ks({key:"label-implicit",content:e},n)):M_(e)?x.createElement(yi,ks({key:"label-implicit",content:e},n)):e&&typeof e=="object"?x.createElement(yi,ks({},e,{key:"label-implicit"},n)):null};function Bte(e){var{label:t,labelRef:r}=e,n=F3();return Fte(t,n,r)||null}var B3={},z3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(z3);var W3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(W3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=z3,r=W3,n=xp;function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s})(B3);var zte=B3.last;const Wte=ti(zte);var Hte=["valueAccessor"],qte=["dataKey","clockWise","id","textBreakAll","zIndex"];function jm(){return jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jm.apply(null,arguments)}function S2(e,t){if(e==null)return{};var r,n,s=Vte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Vte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Gte=e=>Array.isArray(e.value)?Wte(e.value):e.value,H3=x.createContext(void 0),Kte=H3.Provider,q3=x.createContext(void 0);q3.Provider;function Yte(){return x.useContext(H3)}function Xte(){return x.useContext(q3)}function Fh(e){var{valueAccessor:t=Gte}=e,r=S2(e,Hte),{dataKey:n,clockWise:s,id:i,textBreakAll:o,zIndex:l}=r,c=S2(r,qte),u=Yte(),d=Xte(),h=u||d;return!h||!h.length?null:x.createElement(di,{zIndex:l??kr.label},x.createElement(Gs,{className:"recharts-label-list"},h.map((f,m)=>{var g,y=Jt(n)?t(f,m):ur(f&&f.payload,n),p=Jt(i)?{}:{id:"".concat(i,"-").concat(m)};return x.createElement(yi,jm({key:"label-".concat(m)},Pn(f),c,p,{fill:(g=r.fill)!==null&&g!==void 0?g:f.fill,parentViewBox:f.parentViewBox,value:y,textBreakAll:o,viewBox:f.viewBox,index:m,zIndex:0}))})))}Fh.displayName="LabelList";function Qte(e){var{label:t}=e;return t?t===!0?x.createElement(Fh,{key:"labelList-implicit"}):x.isValidElement(t)||M_(t)?x.createElement(Fh,{key:"labelList-implicit",content:t}):typeof t=="object"?x.createElement(Fh,jm({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}var Jte={radiusAxis:{},angleAxis:{}},V3=qr({name:"polarAxis",initialState:Jte,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:ale,removeRadiusAxis:ole,addAngleAxis:lle,removeAngleAxis:cle}=V3.actions,Zte=V3.reducer,G3={exports:{}},Ve={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L_=Symbol.for("react.transitional.element"),$_=Symbol.for("react.portal"),ng=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),ig=Symbol.for("react.profiler"),ag=Symbol.for("react.consumer"),og=Symbol.for("react.context"),lg=Symbol.for("react.forward_ref"),cg=Symbol.for("react.suspense"),ug=Symbol.for("react.suspense_list"),dg=Symbol.for("react.memo"),hg=Symbol.for("react.lazy"),ere=Symbol.for("react.view_transition"),tre=Symbol.for("react.client.reference");function Dn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case L_:switch(e=e.type,e){case ng:case ig:case sg:case cg:case ug:case ere:return e;default:switch(e=e&&e.$$typeof,e){case og:case lg:case hg:case dg:return e;case ag:return e;default:return t}}case $_:return t}}}Ve.ContextConsumer=ag;Ve.ContextProvider=og;Ve.Element=L_;Ve.ForwardRef=lg;Ve.Fragment=ng;Ve.Lazy=hg;Ve.Memo=dg;Ve.Portal=$_;Ve.Profiler=ig;Ve.StrictMode=sg;Ve.Suspense=cg;Ve.SuspenseList=ug;Ve.isContextConsumer=function(e){return Dn(e)===ag};Ve.isContextProvider=function(e){return Dn(e)===og};Ve.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===L_};Ve.isForwardRef=function(e){return Dn(e)===lg};Ve.isFragment=function(e){return Dn(e)===ng};Ve.isLazy=function(e){return Dn(e)===hg};Ve.isMemo=function(e){return Dn(e)===dg};Ve.isPortal=function(e){return Dn(e)===$_};Ve.isProfiler=function(e){return Dn(e)===ig};Ve.isStrictMode=function(e){return Dn(e)===sg};Ve.isSuspense=function(e){return Dn(e)===cg};Ve.isSuspenseList=function(e){return Dn(e)===ug};Ve.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ng||e===ig||e===sg||e===cg||e===ug||typeof e=="object"&&e!==null&&(e.$$typeof===hg||e.$$typeof===dg||e.$$typeof===og||e.$$typeof===ag||e.$$typeof===lg||e.$$typeof===tre||e.getModuleId!==void 0)};Ve.typeOf=Dn;G3.exports=Ve;var rre=G3.exports,E2=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",C2=null,Pv=null,K3=e=>{if(e===C2&&Array.isArray(Pv))return Pv;var t=[];return x.Children.forEach(e,r=>{Jt(r)||(rre.isFragment(r)?t=t.concat(K3(r.props.children)):t.push(r))}),Pv=t,C2=e,t};function nre(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>E2(s)):n=[E2(t)],K3(e).forEach(s=>{var i=vl(s,"type.displayName")||vl(s,"type.name");i&&n.indexOf(i)!==-1&&r.push(s)}),r}var Y3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var s;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((s=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&s.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(Y3);var sre=Y3.isPlainObject;const ire=ti(sre);var k2,A2,P2,O2,T2;function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){are(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function are(e,t,r){return(t=ore(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ore(e){var t=lre(e,"string");return typeof t=="symbol"?t:t+""}function lre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nm.apply(null,arguments)}function yc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var R2=(e,t,r,n,s)=>{var i=r-n,o;return o=xt(k2||(k2=yc(["M ",",",""])),e,t),o+=xt(A2||(A2=yc(["L ",",",""])),e+r,t),o+=xt(P2||(P2=yc(["L ",",",""])),e+r-i/2,t+s),o+=xt(O2||(O2=yc(["L ",",",""])),e+r-i/2-n,t+s),o+=xt(T2||(T2=yc(["L ",","," Z"])),e,t),o},cre={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ure=e=>{var t=pn(e,cre),{x:r,y:n,upperWidth:s,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:h}=t,f=x.useRef(null),[m,g]=x.useState(-1),y=x.useRef(s),p=x.useRef(i),v=x.useRef(o),b=x.useRef(r),w=x.useRef(n),_=Mw(e,"trapezoid-");if(x.useEffect(()=>{if(f.current&&f.current.getTotalLength)try{var I=f.current.getTotalLength();I&&g(I)}catch{}},[]),r!==+r||n!==+n||s!==+s||i!==+i||o!==+o||s===0&&i===0||o===0)return null;var j=it("recharts-trapezoid",l);if(!h)return x.createElement("g",null,x.createElement("path",Nm({},Pn(t),{className:j,d:R2(r,n,s,i,o)})));var N=y.current,E=p.current,T=v.current,S=b.current,D=w.current,O="0px ".concat(m===-1?1:m,"px"),C="".concat(m,"px 0px"),k=eD(["strokeDasharray"],u,c);return x.createElement(Rw,{animationId:_,key:_,canBegin:m>0,duration:u,easing:c,isActive:h,begin:d},I=>{var R=ar(N,s,I),M=ar(E,i,I),P=ar(T,o,I),A=ar(S,r,I),$=ar(D,n,I);f.current&&(y.current=R,p.current=M,v.current=P,b.current=A,w.current=$);var L=I>0?{transition:k,strokeDasharray:C}:{strokeDasharray:O};return x.createElement("path",Nm({},Pn(t),{className:j,d:R2(A,$,R,M,P),ref:f,style:D2(D2({},L),t.style)}))})},dre=["option","shapeType","activeClassName"];function hre(e,t){if(e==null)return{};var r,n,s=fre(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fre(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function M2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(r),!0).forEach(function(n){mre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mre(e,t,r){return(t=pre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pre(e){var t=gre(e,"string");return typeof t=="symbol"?t:t+""}function gre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vre(e,t){return Sm(Sm({},t),e)}function xre(e,t){return e==="symbols"}function L2(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return x.createElement(sD,r);case"trapezoid":return x.createElement(ure,r);case"sector":return x.createElement(oD,r);case"symbols":if(xre(t))return x.createElement(NI,r);break;case"curve":return x.createElement(Z4,r);default:return null}}function yre(e){return x.isValidElement(e)?e.props:e}function bre(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,s=hre(e,dre),i;if(x.isValidElement(t))i=x.cloneElement(t,Sm(Sm({},s),yre(t)));else if(typeof t=="function")i=t(s,s.index);else if(ire(t)&&typeof t!="boolean"){var o=vre(t,s);i=x.createElement(L2,{shapeType:r,elementProps:o})}else{var l=s;i=x.createElement(L2,{shapeType:r,elementProps:l})}return s.isActive?x.createElement(Gs,{className:n},i):i}var X3=(e,t,r)=>{var n=St();return(s,i)=>o=>{e==null||e(s,i,o),n(i3({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}},Q3=e=>{var t=St();return(r,n)=>s=>{e==null||e(r,n,s),t(qJ())}},J3=(e,t,r)=>{var n=St();return(s,i)=>o=>{e==null||e(s,i,o),n(VJ({activeIndex:String(i),activeDataKey:t,activeCoordinate:s.tooltipPosition,activeGraphicalItemId:r}))}};function wre(e){var{tooltipEntrySettings:t}=e,r=St(),n=Vr(),s=x.useRef(null);return x.useLayoutEffect(()=>{n||(s.current===null?r(BJ(t)):s.current!==t&&r(zJ({prev:s.current,next:t})),s.current=t)},[t,r,n]),x.useLayoutEffect(()=>()=>{s.current&&(r(WJ(s.current)),s.current=null)},[r]),null}function _re(e){var{legendPayload:t}=e,r=St(),n=Vr(),s=x.useRef(null);return x.useLayoutEffect(()=>{n||(s.current===null?r(SG(t)):s.current!==t&&r(EG({prev:s.current,next:t})),s.current=t)},[r,n,t]),x.useLayoutEffect(()=>()=>{s.current&&(r(CG(s.current)),s.current=null)},[r]),null}var Ov,jre=()=>{var[e]=x.useState(()=>ku("uid-"));return e},Nre=(Ov=cM.useId)!==null&&Ov!==void 0?Ov:jre;function Sre(e,t){var r=Nre();return t||(e?"".concat(e,"-").concat(r):r)}var Ere=x.createContext(void 0),Cre=e=>{var{id:t,type:r,children:n}=e,s=Sre("recharts-".concat(r),t);return x.createElement(Ere.Provider,{value:s},n(s))},kre={cartesianItems:[],polarItems:[]},Z3=qr({name:"graphicalItems",initialState:kre,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:at()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,s=Qn(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},prepare:at()},removeCartesianGraphicalItem:{reducer(e,t){var r=Qn(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:at()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:at()},removePolarGraphicalItem:{reducer(e,t){var r=Qn(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:at()}}}),{addCartesianGraphicalItem:Are,replaceCartesianGraphicalItem:Pre,removeCartesianGraphicalItem:Ore,addPolarGraphicalItem:ule,removePolarGraphicalItem:dle}=Z3.actions,Tre=Z3.reducer,Ire=e=>{var t=St(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(Are(e)):r.current!==e&&t(Pre({prev:r.current,next:e})),r.current=e},[t,e]),x.useLayoutEffect(()=>()=>{r.current&&(t(Ore(r.current)),r.current=null)},[t]),null},Dre=x.memo(Ire);function $2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$2(Object(r),!0).forEach(function(n){Rre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rre(e,t,r){return(t=Mre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mre(e){var t=Lre(e,"string");return typeof t=="symbol"?t:t+""}function Lre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var e5=0,$re={xAxis:{},yAxis:{},zAxis:{}},t5=qr({name:"cartesianAxis",initialState:$re,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:at()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:at()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:at()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:at()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:at()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:at()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:at()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:at()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:at()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,s=e.yAxis[r];if(s){var i=s.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==s.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=U2(U2({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:Ure,replaceXAxis:Fre,removeXAxis:Bre,addYAxis:zre,replaceYAxis:Wre,removeYAxis:Hre,addZAxis:hle,replaceZAxis:fle,removeZAxis:mle,updateYAxisWidth:qre}=t5.actions,Vre=t5.reducer,Gre=F([Zt],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Kre=F([Gre,si,ii],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),r5=()=>ce(Kre),F2=(e,t,r)=>{var n=r??e;if(!Jt(n))return ts(n,t,0)},Yre=(e,t,r)=>{var n={},s=e.filter(Yp),i=e.filter(u=>u.stackId==null),o=s.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,h]=u,f=h.map(g=>g.dataKey),m=F2(t,r,h[0].barSize);return{stackId:d,dataKeys:f,barSize:m}}),c=i.map(u=>{var d=[u.dataKey].filter(f=>f!=null),h=F2(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:h}});return[...l,...c]};function B2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?B2(Object(r),!0).forEach(function(n){Xre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xre(e,t,r){return(t=Qre(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qre(e){var t=Jre(e,"string");return typeof t=="symbol"?t:t+""}function Jre(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zre(e,t,r,n,s){var i=n.length;if(!(i<1)){var o=ts(e,r,0,!0),l,c=[];if(gt(n[0].barSize)){var u=!1,d=r/i,h=n.reduce((v,b)=>v+(b.barSize||0),0);h+=(i-1)*o,h>=r&&(h-=(i-1)*o,o=0),h>=r&&d>0&&(u=!0,d*=.9,h=i*d);var f=(r-h)/2>>0,m={offset:f-o,size:0};l=n.reduce((v,b)=>{var w,_={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:m.offset+m.size+o,size:u?d:(w=b.barSize)!==null&&w!==void 0?w:0}},j=[...v,_];return m=j[j.length-1].position,j},c)}else{var g=ts(t,r,0,!0);r-2*g-(i-1)*o<=0&&(o=0);var y=(r-2*g-(i-1)*o)/i;y>1&&(y>>=0);var p=gt(s)?Math.min(y,s):y;l=n.reduce((v,b,w)=>[...v,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:g+(y+o)*w+(y-p)/2,size:p}}],c)}return l}}var ene=(e,t,r,n,s,i,o)=>{var l=Jt(o)?t:o,c=Zre(r,n,s!==i?s:i,e,l);return s!==i&&c!=null&&(c=c.map(u=>xh(xh({},u),{},{position:xh(xh({},u.position),{},{offset:u.position.offset-s/2})}))),c},tne=(e,t)=>{var r=m_(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var s=e[n];if(s){var{stackedData:i}=s;if(i)return i.find(o=>o.key===r)}}}};function rne(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&gt(e.zIndex)?e.zIndex:t}var nne=e=>{var{chartData:t}=e,r=St(),n=Vr();return x.useEffect(()=>n?()=>{}:(r(l2(t)),()=>{r(l2(void 0))}),[t,r,n]),null},z2={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},n5=qr({name:"brush",initialState:z2,reducers:{setBrushSettings(e,t){return t.payload==null?z2:t.payload}}}),{setBrushSettings:ple}=n5.actions,sne=n5.reducer;function ine(e,t,r){return(t=ane(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ane(e){var t=one(e,"string");return typeof t=="symbol"?t:t+""}function one(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class U_{static create(t){return new U_(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}ine(U_,"EPS",1e-4);function lne(e){return(e%180+180)%180}var cne=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=lne(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},une={dots:[],areas:[],lines:[]},s5=qr({name:"referenceElements",initialState:une,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=Qn(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=Qn(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=Qn(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:gle,removeDot:vle,addArea:xle,removeArea:yle,addLine:ble,removeLine:wle}=s5.actions,dne=s5.reducer,hne=x.createContext(void 0),fne=e=>{var{children:t}=e,[r]=x.useState("".concat(ku("recharts"),"-clip")),n=r5();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return x.createElement(hne.Provider,{value:r},x.createElement("defs",null,x.createElement("clipPath",{id:r},x.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function i5(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var s=e[n];s!==void 0&&r.push(s)}return r}function mne(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return cne(n,r)}function pne(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function zu(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function gne(e,t){return i5(e,t+1)}function vne(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,h=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:i5(n,u)};var y=c,p,v=()=>(p===void 0&&(p=r(g,y)),p),b=g.coordinate,w=c===0||zu(e,b,v,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(v()/2+s),c+=u)},f;u<=i.length;)if(f=h(),f)return f.v;return[]}function xne(e,t,r,n,s){var i=(n||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,h=l,f=!0,m=function(){var b=n[g],w=g,_,j=()=>(_===void 0&&(_=r(b,w)),_),N=b.coordinate,E=g===d||zu(e,N,j,h,c);if(!E)return f=!1,1;E&&(h=N+e*(j()/2+s))},g=d;g<o&&!m();g+=u);if(f){for(var y=[],p=d;p<o;p+=u)y.push(n[p]);return y}}return[]}function W2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(r),!0).forEach(function(n){yne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yne(e,t,r){return(t=bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bne(e){var t=wne(e,"string");return typeof t=="symbol"?t:t+""}function wne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _ne(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(f){var m=i[f],g,y=()=>(g===void 0&&(g=r(m,f)),g);if(f===o-1){var p=e*(m.coordinate+e*y()/2-c);i[f]=m=gr(gr({},m),{},{tickCoord:p>0?m.coordinate-p*e:m.coordinate})}else i[f]=m=gr(gr({},m),{},{tickCoord:m.coordinate});if(m.tickCoord!=null){var v=zu(e,m.tickCoord,y,l,c);v&&(c=m.tickCoord-e*(y()/2+s),i[f]=gr(gr({},m),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return i}function jne(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],h=r(d,l-1),f=e*(d.coordinate+e*h/2-u);if(o[l-1]=d=gr(gr({},d),{},{tickCoord:f>0?d.coordinate-f*e:d.coordinate}),d.tickCoord!=null){var m=zu(e,d.tickCoord,()=>h,c,u);m&&(u=d.tickCoord-e*(h/2+s),o[l-1]=gr(gr({},d),{},{isShow:!0}))}}for(var g=i?l-1:l,y=function(b){var w=o[b],_,j=()=>(_===void 0&&(_=r(w,b)),_);if(b===0){var N=e*(w.coordinate-e*j()/2-c);o[b]=w=gr(gr({},w),{},{tickCoord:N<0?w.coordinate-N*e:w.coordinate})}else o[b]=w=gr(gr({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var E=zu(e,w.tickCoord,j,c,u);E&&(c=w.tickCoord+e*(j()/2+s),o[b]=gr(gr({},w),{},{isShow:!0}))}},p=0;p<g;p++)y(p);return o}function F_(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:h}=e;if(!s||!s.length||!n)return[];if(ae(c)||$p.isSsr){var f;return(f=gne(s,ae(c)?c:0))!==null&&f!==void 0?f:[]}var m=[],g=l==="top"||l==="bottom"?"width":"height",y=d&&g==="width"?Gc(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=(w,_)=>{var j=typeof u=="function"?u(w.value,_):w.value;return g==="width"?mne(Gc(j,{fontSize:t,letterSpacing:r}),y,h):Gc(j,{fontSize:t,letterSpacing:r})[g]},v=s.length>=2?Fr(s[1].coordinate-s[0].coordinate):1,b=pne(i,v,g);return c==="equidistantPreserveStart"?vne(v,b,p,s,o):c==="equidistantPreserveEnd"?xne(v,b,p,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=jne(v,b,p,s,o,c==="preserveStartEnd"):m=_ne(v,b,p,s,o),m.filter(w=>w.isShow))}var Nne=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var h=d.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},Sne=["axisLine","width","height","className","hide","ticks","axisType"];function Ene(e,t){if(e==null)return{};var r,n,s=Cne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Cne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ya(){return Ya=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ya.apply(null,arguments)}function H2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?H2(Object(r),!0).forEach(function(n){kne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kne(e,t,r){return(t=Ane(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ane(e){var t=Pne(e,"string");return typeof t=="symbol"?t:t+""}function Pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Us={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:kr.axis};function One(e){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=Ct(Ct(Ct({},c),Vs(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=Ct(Ct({},u),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var h=+(i==="left"&&!o||i==="right"&&o);u=Ct(Ct({},u),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+s})}return x.createElement("line",Ya({},u,{className:it("recharts-cartesian-axis-line",vl(l,"className"))}))}function Tne(e,t,r,n,s,i,o,l,c){var u,d,h,f,m,g,y=l?-1:1,p=e.tickSize||o,v=ae(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,f=r+ +!l*s,h=f-y*p,g=h-y*c,m=v;break;case"left":h=f=e.coordinate,d=t+ +!l*n,u=d-y*p,m=u-y*c,g=v;break;case"right":h=f=e.coordinate,d=t+ +l*n,u=d+y*p,m=u+y*c,g=v;break;default:u=d=e.coordinate,f=r+ +l*s,h=f+y*p,g=h+y*c,m=v;break}return{line:{x1:u,y1:h,x2:d,y2:f},tick:{x:m,y:g}}}function Ine(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Dne(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Rne(e){var{option:t,tickProps:r,value:n}=e,s,i=it(r.className,"recharts-cartesian-axis-tick-value");if(x.isValidElement(t))s=x.cloneElement(t,Ct(Ct({},r),{},{className:i}));else if(typeof t=="function")s=t(Ct(Ct({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=it(o,t==null?void 0:t.className)),s=x.createElement(R_,Ya({},r,{className:o}),n)}return s}var Mne=x.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:s,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:h,x:f,y:m,width:g,height:y,tickSize:p,tickMargin:v,fontSize:b,letterSpacing:w,getTicksConfig:_,events:j,axisType:N}=e,E=F_(Ct(Ct({},_),{},{ticks:r}),b,w),T=Ine(d,h),S=Dne(d,h),D=Vs(_),O=iw(n),C={};typeof s=="object"&&(C=s);var k=Ct(Ct({},D),{},{fill:"none"},C),I=E.map(P=>Ct({entry:P},Tne(P,f,m,g,y,d,p,h,v))),R=I.map(P=>{var{entry:A,line:$}=P;return x.createElement(Gs,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(A.value,"-").concat(A.coordinate,"-").concat(A.tickCoord)},s&&x.createElement("line",Ya({},k,$,{className:it("recharts-cartesian-axis-tick-line",vl(s,"className"))})))}),M=I.map((P,A)=>{var{entry:$,tick:L}=P,z=Ct(Ct(Ct(Ct({textAnchor:T,verticalAnchor:S},D),{},{stroke:"none",fill:i},O),L),{},{index:A,payload:$,visibleTicksCount:E.length,tickFormatter:o,padding:c},u);return x.createElement(Gs,Ya({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},uw(j,$,A)),n&&x.createElement(Rne,{option:n,tickProps:z,value:"".concat(typeof o=="function"?o($.value,A):$.value).concat(l||"")}))});return x.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(N,"-ticks")},M.length>0&&x.createElement(di,{zIndex:kr.label},x.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(N,"-tick-labels"),ref:t},M)),R.length>0&&x.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(N,"-tick-lines")},R))}),Lne=x.forwardRef((e,t)=>{var{axisLine:r,width:n,height:s,className:i,hide:o,ticks:l,axisType:c}=e,u=Ene(e,Sne),[d,h]=x.useState(""),[f,m]=x.useState(""),g=x.useRef(null);x.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var p;return Nne({ticks:g.current,label:(p=e.labelRef)===null||p===void 0?void 0:p.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var y=x.useCallback(p=>{if(p){var v=p.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=v;var b=v[0];if(b){var w=window.getComputedStyle(b),_=w.fontSize,j=w.letterSpacing;(_!==d||j!==f)&&(h(_),m(j))}}},[d,f]);return o||n!=null&&n<=0||s!=null&&s<=0?null:x.createElement(di,{zIndex:e.zIndex},x.createElement(Gs,{className:it("recharts-cartesian-axis",i)},x.createElement(One,{x:e.x,y:e.y,width:n,height:s,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:Vs(e)}),x.createElement(Mne,{ref:y,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),x.createElement(Ote,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},x.createElement(Bte,{label:e.label,labelRef:e.labelRef}),e.children)))}),B_=x.forwardRef((e,t)=>{var r=pn(e,Us);return x.createElement(Lne,Ya({},r,{ref:t}))});B_.displayName="CartesianAxis";var $ne=["x1","y1","x2","y2","key"],Une=["offset"],Fne=["xAxisId","yAxisId"],Bne=["xAxisId","yAxisId"];function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(n){zne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zne(e,t,r){return(t=Wne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wne(e){var t=Hne(e,"string");return typeof t=="symbol"?t:t+""}function Hne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ka(){return ka=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ka.apply(null,arguments)}function Em(e,t){if(e==null)return{};var r,n,s=qne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function qne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Vne=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return x.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function a5(e){var{option:t,lineItemProps:r}=e,n;if(x.isValidElement(t))n=x.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var s,{x1:i,y1:o,x2:l,y2:c,key:u}=r,d=Em(r,$ne),h=(s=Vs(d))!==null&&s!==void 0?s:{},{offset:f}=h,m=Em(h,Une);n=x.createElement("line",ka({},m,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:u}))}return n}function Gne(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Em(e,Fne),c=s.map((u,d)=>{var h=xr(xr({},l),{},{x1:t,y1:u,x2:t+r,y2:u,key:"line-".concat(d),index:d});return x.createElement(a5,{key:"line-".concat(d),option:n,lineItemProps:h})});return x.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function Kne(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=Em(e,Bne),c=s.map((u,d)=>{var h=xr(xr({},l),{},{x1:u,y1:t,x2:u,y2:t+r,key:"line-".concat(d),index:d});return x.createElement(a5,{option:n,lineItemProps:h,key:"line-".concat(d)})});return x.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function Yne(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],g=m?s+o-h:u[f+1]-h;if(g<=0)return null;var y=f%t.length;return x.createElement("rect",{key:"react-".concat(f),y:h,x:n,height:g,width:i,stroke:"none",fill:t[y],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Xne(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(h=>Math.round(h+s-s)).sort((h,f)=>h-f);s!==u[0]&&u.unshift(0);var d=u.map((h,f)=>{var m=!u[f+1],g=m?s+o-h:u[f+1]-h;if(g<=0)return null;var y=f%r.length;return x.createElement("rect",{key:"react-".concat(f),x:h,y:i,width:g,height:l,stroke:"none",fill:r[y],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return x.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Qne=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return P4(F_(xr(xr(xr({},Us),r),{},{ticks:O4(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},Jne=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return P4(F_(xr(xr(xr({},Us),r),{},{ticks:O4(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},Zne={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:kr.grid};function z_(e){var t=W4(),r=H4(),n=z4(),s=xr(xr({},pn(e,Zne)),{},{x:ae(e.x)?e.x:n.left,y:ae(e.y)?e.y:n.top,width:ae(e.width)?e.width:n.width,height:ae(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:h,horizontalValues:f,verticalValues:m}=s,g=Vr(),y=ce(S=>QE(S,"xAxis",i,g)),p=ce(S=>QE(S,"yAxis",o,g));if(!vs(u)||!vs(d)||!ae(l)||!ae(c))return null;var v=s.verticalCoordinatesGenerator||Qne,b=s.horizontalCoordinatesGenerator||Jne,{horizontalPoints:w,verticalPoints:_}=s;if((!w||!w.length)&&typeof b=="function"){var j=f&&f.length,N=b({yAxis:p?xr(xr({},p),{},{ticks:j?f:p.ticks}):void 0,width:t??u,height:r??d,offset:n},j?!0:h);tm(Array.isArray(N),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof N,"]")),Array.isArray(N)&&(w=N)}if((!_||!_.length)&&typeof v=="function"){var E=m&&m.length,T=v({xAxis:y?xr(xr({},y),{},{ticks:E?m:y.ticks}):void 0,width:t??u,height:r??d,offset:n},E?!0:h);tm(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(_=T)}return x.createElement(di,{zIndex:s.zIndex},x.createElement("g",{className:"recharts-cartesian-grid"},x.createElement(Vne,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),x.createElement(Yne,ka({},s,{horizontalPoints:w})),x.createElement(Xne,ka({},s,{verticalPoints:_})),x.createElement(Gne,ka({},s,{offset:n,horizontalPoints:w,xAxis:y,yAxis:p})),x.createElement(Kne,ka({},s,{offset:n,verticalPoints:_,xAxis:y,yAxis:p}))))}z_.displayName="CartesianGrid";var ese={},o5=qr({name:"errorBars",initialState:ese,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:s}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?s:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(s=>s.dataKey!==n.dataKey||s.direction!==n.direction))}}}),{addErrorBar:_le,replaceErrorBar:jle,removeErrorBar:Nle}=o5.actions,tse=o5.reducer,rse=["children"];function nse(e,t){if(e==null)return{};var r,n,s=sse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function sse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ise={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ase=x.createContext(ise);function ose(e){var{children:t}=e,r=nse(e,rse);return x.createElement(ase.Provider,{value:r},t)}function l5(e,t){var r,n,s=ce(u=>li(u,e)),i=ce(u=>ci(u,t)),o=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Ft.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Bt.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function lse(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=r5(),{needClipX:i,needClipY:o,needClip:l}=l5(t,r);if(!l||!s)return null;var{x:c,y:u,width:d,height:h}=s;return x.createElement("clipPath",{id:"clipPath-".concat(n)},x.createElement("rect",{x:i?c:c-d/2,y:o?u:u-h/2,width:i?d:d*2,height:o?h:h*2}))}var cse={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd=x;function use(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var dse=typeof Object.is=="function"?Object.is:use,hse=Sd.useSyncExternalStore,fse=Sd.useRef,mse=Sd.useEffect,pse=Sd.useMemo,gse=Sd.useDebugValue;cse.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var i=fse(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=pse(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var g=o.value;if(s(g,m))return h=g}return h=m}if(g=h,dse(d,m))return g;var y=n(m);return s!==void 0&&s(g,y)?(d=m,g):(d=m,h=y)}var u=!1,d,h,f=r===void 0?null:r;return[function(){return c(t())},f===null?void 0:function(){return c(f())}]},[t,r,n,s]);var l=hse(e,i[0],i[1]);return mse(function(){o.hasValue=!0,o.value=l},[l]),gse(l),l};function vse(e){e()}function xse(){let e=null,t=null;return{clear(){e=null,t=null},notify(){vse(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var V2={notify(){},get:()=>[]};function yse(e,t){let r,n=V2,s=0,i=!1;function o(y){d();const p=n.subscribe(y);let v=!1;return()=>{v||(v=!0,p(),h())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){s++,r||(r=e.subscribe(c),n=xse())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=V2)}function f(){i||(i=!0,d())}function m(){i&&(i=!1,h())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:m,getListeners:()=>n};return g}var bse=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wse=bse(),_se=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jse=_se(),Nse=()=>wse||jse?x.useLayoutEffect:x.useEffect,Sse=Nse();function G2(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function Ese(e,t){if(G2(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(t,r[s])||!G2(e[r[s]],t[r[s]]))return!1;return!0}var Tv=Symbol.for("react-redux-context"),Iv=typeof globalThis<"u"?globalThis:{};function Cse(){if(!x.createContext)return{};const e=Iv[Tv]??(Iv[Tv]=new Map);let t=e.get(x.createContext);return t||(t=x.createContext(null),e.set(x.createContext,t)),t}var kse=Cse();function Ase(e){const{children:t,context:r,serverState:n,store:s}=e,i=x.useMemo(()=>{const c=yse(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=x.useMemo(()=>s.getState(),[s]);Sse(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||kse;return x.createElement(l.Provider,{value:i},t)}var Pse=Ase,Ose=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Tse(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function W_(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(Ose.has(n)){if(e[n]==null&&t[n]==null)continue;if(!Ese(e[n],t[n]))return!1}else if(!Tse(e[n],t[n]))return!1;return!0}function io(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:e5}function ao(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(s=>s.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:e5}var Ise="Invariant failed";function Dse(e,t){throw new Error(Ise)}function iy(){return iy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(null,arguments)}function Cm(e){return x.createElement(bre,iy({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Rse=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,s)=>{if(ae(t))return t;var i=ae(n)||Jt(n);return i?t(n,s):(i||Dse(),r)}},Mse=(e,t,r)=>r,Lse=(e,t)=>t,Ed=F([g_,Lse],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),$se=F([Ed],e=>e==null?void 0:e.maxBarSize),Use=(e,t,r,n)=>n,Fse=F([$e,g_,io,ao,Mse],(e,t,r,n,s)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===s).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),Bse=(e,t,r)=>{var n=$e(e),s=io(e,t),i=ao(e,t);if(!(s==null||i==null))return n==="horizontal"?Jx(e,"yAxis",i,r):Jx(e,"xAxis",s,r)},zse=(e,t)=>{var r=$e(e),n=io(e,t),s=ao(e,t);if(!(n==null||s==null))return r==="horizontal"?XE(e,"xAxis",n):XE(e,"yAxis",s)},Wse=F([Fse,DQ,zse],Yre),Hse=(e,t,r)=>{var n,s,i=Ed(e,t);if(i!=null){var o=io(e,t),l=ao(e,t);if(!(o==null||l==null)){var c=$e(e),u=lR(e),{maxBarSize:d}=i,h=Jt(d)?u:d,f,m;return c==="horizontal"?(f=El(e,"xAxis",o,r),m=Sl(e,"xAxis",o,r)):(f=El(e,"yAxis",l,r),m=Sl(e,"yAxis",l,r)),(n=(s=em(f,m,!0))!==null&&s!==void 0?s:h)!==null&&n!==void 0?n:0}}},c5=(e,t,r)=>{var n=$e(e),s=io(e,t),i=ao(e,t);if(!(s==null||i==null)){var o,l;return n==="horizontal"?(o=El(e,"xAxis",s,r),l=Sl(e,"xAxis",s,r)):(o=El(e,"yAxis",i,r),l=Sl(e,"yAxis",i,r)),em(o,l)}},qse=F([Wse,lR,IQ,cR,Hse,c5,$se],ene),Vse=(e,t,r)=>{var n=io(e,t);if(n!=null)return El(e,"xAxis",n,r)},Gse=(e,t,r)=>{var n=ao(e,t);if(n!=null)return El(e,"yAxis",n,r)},Kse=(e,t,r)=>{var n=io(e,t);if(n!=null)return Sl(e,"xAxis",n,r)},Yse=(e,t,r)=>{var n=ao(e,t);if(n!=null)return Sl(e,"yAxis",n,r)},Xse=F([qse,Ed],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),Qse=F([Bse,Ed],tne),Jse=F([Zt,Ow,Vse,Gse,Kse,Yse,Xse,$e,wQ,c5,Qse,Ed,Use],(e,t,r,n,s,i,o,l,c,u,d,h,f)=>{var{chartData:m,dataStartIndex:g,dataEndIndex:y}=c;if(!(h==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||s==null||i==null||u==null)){var{data:p}=h,v;if(p!=null&&p.length>0?v=p:v=m==null?void 0:m.slice(g,y+1),v!=null)return Cie({layout:l,barSettings:h,pos:o,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:s,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:f,dataStartIndex:g})}}),Zse=["index"];function ay(){return ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ay.apply(null,arguments)}function eie(e,t){if(e==null)return{};var r,n,s=tie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function tie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var u5=x.createContext(void 0),rie=e=>{var t=x.useContext(u5);if(t!=null)return t.stackId;if(e!=null)return TV(e)},nie=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),sie=e=>{var t=x.useContext(u5);if(t!=null){var{stackId:r}=t;return"url(#".concat(nie(r,e),")")}},iie=e=>{var{index:t}=e,r=eie(e,Zse),n=sie(t);return x.createElement(Gs,ay({className:"recharts-bar-stack-layer",clipPath:n},r))},aie=["onMouseEnter","onMouseLeave","onClick"],oie=["value","background","tooltipPosition"],lie=["id"],cie=["onMouseEnter","onClick","onMouseLeave"];function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ei.apply(null,arguments)}function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){uie(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uie(e,t,r){return(t=die(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function die(e){var t=hie(e,"string");return typeof t=="symbol"?t:t+""}function hie(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function km(e,t){if(e==null)return{};var r,n,s=fie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function fie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var mie=e=>{var{dataKey:t,name:r,fill:n,legendType:s,hide:i}=e;return[{inactive:i,dataKey:t,type:s,color:n,value:T4(r,t),payload:e}]},pie=x.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:s,name:i,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:s,dataKey:t,nameKey:void 0,name:T4(i,t),hide:o,type:c,color:s,unit:l,graphicalItemId:u}};return x.createElement(wre,{tooltipEntrySettings:d})});function gie(e){var t=ce(Cl),{data:r,dataKey:n,background:s,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=km(i,aie),d=X3(o,n,i.id),h=Q3(l),f=J3(c,n,i.id);if(!s||r==null)return null;var m=iw(s);return x.createElement(di,{zIndex:rne(s,kr.barBackground)},r.map((g,y)=>{var{value:p,background:v,tooltipPosition:b}=g,w=km(g,oie);if(!v)return null;var _=d(g,y),j=h(g,y),N=f(g,y),E=Sr(Sr(Sr(Sr(Sr({option:s,isActive:String(y)===t},w),{},{fill:"#eee"},v),m),uw(u,g,y)),{},{onMouseEnter:_,onMouseLeave:j,onClick:N,dataKey:n,index:y,className:"recharts-bar-background-rectangle"});return x.createElement(Cm,ei({key:"background-bar-".concat(y)},E))}))}function vie(e){var{showLabels:t,children:r,rects:n}=e,s=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Sr(Sr({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return x.createElement(Kte,{value:t?s:void 0},r)}function xie(e){var{shape:t,activeBar:r,baseProps:n,entry:s,index:i,dataKey:o}=e,l=ce(Cl),c=ce(y3),u=r&&String(i)===l&&(c==null||o===c),d=u?r:t;return u?x.createElement(di,{zIndex:kr.activeBar},x.createElement(Cm,ei({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:o}))):x.createElement(Cm,ei({},n,{name:String(n.name)},s,{isActive:u,option:d,index:i,dataKey:o}))}function yie(e){var{shape:t,baseProps:r,entry:n,index:s,dataKey:i}=e;return x.createElement(Cm,ei({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:s,dataKey:i}))}function bie(e){var t,{data:r,props:n}=e,s=(t=Vs(n))!==null&&t!==void 0?t:{},{id:i}=s,o=km(s,lie),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:h,onMouseLeave:f}=n,m=km(n,cie),g=X3(d,c,i),y=Q3(f),p=J3(h,c,i);return r?x.createElement(x.Fragment,null,r.map((v,b)=>x.createElement(iie,ei({index:b,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(b),className:"recharts-bar-rectangle"},uw(m,v,b),{onMouseEnter:g(v,b),onMouseLeave:y(v,b),onClick:p(v,b)}),u?x.createElement(xie,{shape:l,activeBar:u,baseProps:o,entry:v,index:b,dataKey:c}):x.createElement(yie,{shape:l,baseProps:o,entry:v,index:b,dataKey:c})))):null}function wie(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:s,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,h=r.current,f=Mw(t,"recharts-bar-"),[m,g]=x.useState(!1),y=!m,p=x.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=x.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return x.createElement(vie,{showLabels:y,rects:n},x.createElement(Rw,{animationId:f,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:p,onAnimationStart:v,key:f},b=>{var w=b===1?n:n==null?void 0:n.map((_,j)=>{var N=h&&h[j];if(N)return Sr(Sr({},_),{},{x:ar(N.x,_.x,b),y:ar(N.y,_.y,b),width:ar(N.width,_.width,b),height:ar(N.height,_.height,b)});if(s==="horizontal"){var E=ar(0,_.height,b),T=ar(_.stackedBarStart,_.y,b);return Sr(Sr({},_),{},{y:T,height:E})}var S=ar(0,_.width,b),D=ar(_.stackedBarStart,_.x,b);return Sr(Sr({},_),{},{width:S,x:D})});return b>0&&(r.current=w??null),w==null?null:x.createElement(Gs,null,x.createElement(bie,{props:t,data:w}))}),x.createElement(Qte,{label:t.label}),t.children)}function _ie(e){var t=x.useRef(null);return x.createElement(wie,{previousRectanglesRef:t,props:e})}var d5=0,jie=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:ur(e,t)}};class Nie extends x.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:s,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||r==null)return null;var d=it("recharts-bar",s),h=u;return x.createElement(Gs,{className:d,id:u},l&&x.createElement("defs",null,x.createElement(lse,{clipPathId:h,xAxisId:i,yAxisId:o})),x.createElement(Gs,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(h,")"):void 0},x.createElement(gie,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),x.createElement(_ie,this.props)))}}var Sie={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:d5,xAxisId:0,yAxisId:0,zIndex:kr.bar};function Eie(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:h}=l5(t,r),f=dd(),m=Vr(),g=nre(e.children,rg),y=ce(b=>Jse(b,e.id,m,g));if(f!=="vertical"&&f!=="horizontal")return null;var p,v=y==null?void 0:y[0];return v==null||v.height==null||v.width==null?p=0:p=f==="vertical"?v.height/2:v.width/2,x.createElement(ose,{xAxisId:t,yAxisId:r,data:y,dataPointFormatter:jie,errorBarOffset:p},x.createElement(Nie,ei({},e,{layout:f,needClip:h,data:y,xAxisId:t,yAxisId:r,hide:n,legendType:s,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function Cie(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:s,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:h,offset:f,cells:m,parentViewBox:g,dataStartIndex:y}=e,p=t==="horizontal"?l:o,v=d?p.scale.domain():null,b=IV({numericAxis:p}),w=p.scale(b);return h.map((_,j)=>{var N,E,T,S,D,O;if(d){var C=d[j+y];if(C==null)return null;N=CV(C,v)}else N=ur(_,r),Array.isArray(N)||(N=[b,N]);var k=Rse(n,d5)(N[1],j);if(t==="horizontal"){var I,[R,M]=[l.scale(N[0]),l.scale(N[1])];E=uS({axis:o,ticks:c,bandSize:i,offset:s.offset,entry:_,index:j}),T=(I=M??R)!==null&&I!==void 0?I:void 0,S=s.size;var P=R-M;if(D=es(P)?0:P,O={x:E,y:f.top,width:S,height:f.height},Math.abs(k)>0&&Math.abs(D)<Math.abs(k)){var A=Fr(D||k)*(Math.abs(k)-Math.abs(D));T-=A,D+=A}}else{var[$,L]=[o.scale(N[0]),o.scale(N[1])];if(E=$,T=uS({axis:l,ticks:u,bandSize:i,offset:s.offset,entry:_,index:j}),S=L-$,D=s.size,O={x:f.left,y:T,width:f.width,height:D},Math.abs(k)>0&&Math.abs(S)<Math.abs(k)){var z=Fr(S||k)*(Math.abs(k)-Math.abs(S));S+=z}}if(E==null||T==null||S==null||D==null)return null;var K=Sr(Sr({},_),{},{stackedBarStart:w,x:E,y:T,width:S,height:D,value:d?N:N[1],payload:_,background:O,tooltipPosition:{x:E+S/2,y:T+D/2},parentViewBox:g},m&&m[j]&&m[j].props);return K}).filter(Boolean)}function kie(e){var t=pn(e,Sie),r=rie(t.stackId),n=Vr();return x.createElement(Cre,{id:t.id,type:"bar"},s=>x.createElement(x.Fragment,null,x.createElement(_re,{legendPayload:mie(t)}),x.createElement(pie,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:s}),x.createElement(Dre,{type:"bar",id:s,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),x.createElement(di,{zIndex:t.zIndex},x.createElement(Eie,ei({},t,{id:s})))))}var H_=x.memo(kie,W_);H_.displayName="Bar";var Aie=["domain","range"],Pie=["domain","range"];function Y2(e,t){if(e==null)return{};var r,n,s=Oie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function X2(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function h5(e,t){if(e===t)return!0;var{domain:r,range:n}=e,s=Y2(e,Aie),{domain:i,range:o}=t,l=Y2(t,Pie);return!X2(r,i)||!X2(n,o)?!1:W_(s,l)}var Tie=["dangerouslySetInnerHTML","ticks","scale"],Iie=["id","scale"];function oy(){return oy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},oy.apply(null,arguments)}function Q2(e,t){if(e==null)return{};var r,n,s=Die(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Die(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Rie(e){var t=St(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(Ure(e)):r.current!==e&&t(Fre({prev:r.current,next:e})),r.current=e},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(Bre(r.current)),r.current=null)},[t]),null}var Mie=e=>{var{xAxisId:t,className:r}=e,n=ce(Ow),s=Vr(),i="xAxis",o=ce(v=>ZR(v,i,t,s)),l=ce(v=>YR(v,t)),c=ce(v=>OJ(v,t)),u=ce(v=>xR(v,t));if(l==null||c==null||u==null)return null;var{dangerouslySetInnerHTML:d,ticks:h,scale:f}=e,m=Q2(e,Tie),{id:g,scale:y}=u,p=Q2(u,Iie);return x.createElement(B_,oy({},m,p,{x:c.x,y:c.y,width:l.width,height:l.height,className:it("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},Lie={allowDataOverflow:Ft.allowDataOverflow,allowDecimals:Ft.allowDecimals,allowDuplicatedCategory:Ft.allowDuplicatedCategory,angle:Ft.angle,axisLine:Us.axisLine,height:Ft.height,hide:!1,includeHidden:Ft.includeHidden,interval:Ft.interval,minTickGap:Ft.minTickGap,mirror:Ft.mirror,orientation:Ft.orientation,padding:Ft.padding,reversed:Ft.reversed,scale:Ft.scale,tick:Ft.tick,tickCount:Ft.tickCount,tickLine:Us.tickLine,tickSize:Us.tickSize,type:Ft.type,xAxisId:0},$ie=e=>{var t=pn(e,Lie);return x.createElement(x.Fragment,null,x.createElement(Rie,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),x.createElement(Mie,t))},q_=x.memo($ie,h5);q_.displayName="XAxis";var Uie=["dangerouslySetInnerHTML","ticks","scale"],Fie=["id","scale"];function ly(){return ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ly.apply(null,arguments)}function J2(e,t){if(e==null)return{};var r,n,s=Bie(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Bie(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function zie(e){var t=St(),r=x.useRef(null);return x.useLayoutEffect(()=>{r.current===null?t(zre(e)):r.current!==e&&t(Wre({prev:r.current,next:e})),r.current=e},[e,t]),x.useLayoutEffect(()=>()=>{r.current&&(t(Hre(r.current)),r.current=null)},[t]),null}var Wie=e=>{var{yAxisId:t,className:r,width:n,label:s}=e,i=x.useRef(null),o=x.useRef(null),l=ce(Ow),c=Vr(),u=St(),d="yAxis",h=ce(N=>XR(N,t)),f=ce(N=>IJ(N,t)),m=ce(N=>ZR(N,d,t,c)),g=ce(N=>yR(N,t));if(x.useLayoutEffect(()=>{if(!(n!=="auto"||!h||M_(s)||x.isValidElement(s)||g==null)){var N=i.current;if(N){var E=N.getCalculatedWidth();Math.round(h.width)!==Math.round(E)&&u(qre({id:t,width:E}))}}},[m,h,u,s,t,n,g]),h==null||f==null||g==null)return null;var{dangerouslySetInnerHTML:y,ticks:p,scale:v}=e,b=J2(e,Uie),{id:w,scale:_}=g,j=J2(g,Fie);return x.createElement(B_,ly({},b,j,{ref:i,labelRef:o,x:f.x,y:f.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:h.width,height:h.height,className:it("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:m,axisType:d}))},Hie={allowDataOverflow:Bt.allowDataOverflow,allowDecimals:Bt.allowDecimals,allowDuplicatedCategory:Bt.allowDuplicatedCategory,angle:Bt.angle,axisLine:Us.axisLine,hide:!1,includeHidden:Bt.includeHidden,interval:Bt.interval,minTickGap:Bt.minTickGap,mirror:Bt.mirror,orientation:Bt.orientation,padding:Bt.padding,reversed:Bt.reversed,scale:Bt.scale,tick:Bt.tick,tickCount:Bt.tickCount,tickLine:Us.tickLine,tickSize:Us.tickSize,type:Bt.type,width:Bt.width,yAxisId:0},qie=e=>{var t=pn(e,Hie);return x.createElement(x.Fragment,null,x.createElement(zie,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),x.createElement(Wie,t))},V_=x.memo(qie,h5);V_.displayName="YAxis";var Vie=(e,t)=>t,G_=F([Vie,$e,gR,$t,p3,ui,GZ,Zt],eee),K_=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},f5=On("mouseClick"),m5=cd();m5.startListening({actionCreator:f5,effect:(e,t)=>{var r=e.payload,n=G_(t.getState(),K_(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(GJ({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var cy=On("mouseMove"),p5=cd(),yh=null;p5.startListening({actionCreator:cy,effect:(e,t)=>{var r=e.payload;yh!==null&&cancelAnimationFrame(yh);var n=K_(r);yh=requestAnimationFrame(()=>{var s=t.getState(),i=S_(s,s.tooltip.settings.shared);if(i==="axis"){var o=G_(s,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(o3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(a3())}yh=null})}});function Gie(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var Z2={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},g5=qr({name:"rootProps",initialState:Z2,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:Z2.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),Kie=g5.reducer,{updateOptions:Yie}=g5.actions,v5=qr({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:Sle}=v5.actions,Xie=v5.reducer,x5=On("keyDown"),y5=On("focus"),Y_=cd();Y_.startListening({actionCreator:x5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=E_(s,Ql(r),yd(r),jd(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=ui(r);if(i==="Enter"){var u=_m(r,"axis","hover",String(s.index));t.dispatch(ey({active:!s.active,activeIndex:s.index,activeCoordinate:u}));return}var d=LJ(r),h=d==="left-to-right"?1:-1,f=i==="ArrowRight"?1:-1,m=l+f*h;if(!(c==null||m>=c.length||m<0)){var g=_m(r,"axis","hover",String(m));t.dispatch(ey({active:!0,activeIndex:m.toString(),activeCoordinate:g}))}}}}}});Y_.startListening({actionCreator:y5,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=_m(r,"axis","hover",String(i));t.dispatch(ey({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var yn=On("externalEvent"),b5=cd(),Dv=new Map;b5.startListening({actionCreator:yn,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var s=n.type,i=Dv.get(s);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:TZ(l),activeDataKey:y3(l),activeIndex:Cl(l),activeLabel:x3(l),activeTooltipIndex:Cl(l),isTooltipActive:IZ(l)};r(c,n)}finally{Dv.delete(s)}});Dv.set(s,o)}}});var Qie=F([Yl],e=>e.tooltipItemPayloads),Jie=F([Qie,_d,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.graphicalItemId===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),w5=On("touchMove"),_5=cd();_5.startListening({actionCreator:w5,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),s=S_(n,n.tooltip.settings.shared);if(s==="axis"){var i=r.touches[0];if(i==null)return;var o=G_(n,K_({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(o3({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(s==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(FV),h=(l=u.getAttribute(BV))!==null&&l!==void 0?l:void 0,f=Xl(n).find(y=>y.id===h);if(d==null||f==null||h==null)return;var{dataKey:m}=f,g=Jie(n,d,h);t.dispatch(i3({activeDataKey:m,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:h}))}}}});var Zie=t4({brush:sne,cartesianAxis:Vre,chartData:Oee,errorBars:tse,graphicalItems:Tre,layout:wV,legend:kG,options:Eee,polarAxis:Zte,polarOptions:Xie,referenceElements:dne,rootProps:Kie,tooltip:KJ,zIndex:mee}),eae=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Vq({reducer:Zie,preloadedState:t,middleware:n=>{var s;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((s="es6")!==null&&s!==void 0?s:"")}).concat([m5.middleware,p5.middleware,Y_.middleware,b5.middleware,_5.middleware])},enhancers:n=>{var s=n;return typeof n=="function"&&(s=n()),s.concat(g4({type:"raf"}))},devTools:{serialize:{replacer:Gie},name:"recharts-".concat(r)}})};function tae(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Vr(),i=x.useRef(null);if(s)return r;i.current==null&&(i.current=eae(t,n));var o=bw;return x.createElement(Pse,{context:o,store:i.current},r)}function rae(e){var{layout:t,margin:r}=e,n=St(),s=Vr();return x.useEffect(()=>{s||(n(xV(t)),n(vV(r)))},[n,s,t,r]),null}var nae=x.memo(rae,W_);function sae(e){var t=St();return x.useEffect(()=>{t(Yie(e))},[t,e]),null}function eC(e){var{zIndex:t,isPanorama:r}=e,n=x.useRef(null),s=St();return x.useLayoutEffect(()=>(n.current&&s(hee({zIndex:t,element:n.current,isPanorama:r})),()=>{s(fee({zIndex:t,isPanorama:r}))}),[s,t,r]),x.createElement("g",{tabIndex:-1,ref:n})}function tC(e){var{children:t,isPanorama:r}=e,n=ce(ree);if(!n||n.length===0)return t;var s=n.filter(o=>o<0),i=n.filter(o=>o>0);return x.createElement(x.Fragment,null,s.map(o=>x.createElement(eC,{key:o,zIndex:o,isPanorama:r})),t,i.map(o=>x.createElement(eC,{key:o,zIndex:o,isPanorama:r})))}var iae=["children"];function aae(e,t){if(e==null)return{};var r,n,s=oae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function oae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(null,arguments)}var lae={width:"100%",height:"100%",display:"block"},cae=x.forwardRef((e,t)=>{var r=W4(),n=H4(),s=J4();if(!vs(r)||!vs(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=s?0:void 0,typeof o.role=="string"?d=o.role:d=s?"application":void 0),x.createElement(nI,Am({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:lae,ref:t}),i)}),uae=e=>{var{children:t}=e,r=ce(Tp);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return x.createElement(nI,{width:n,height:s,x:o,y:i},t)},rC=x.forwardRef((e,t)=>{var{children:r}=e,n=aae(e,iae),s=Vr();return s?x.createElement(uae,null,x.createElement(tC,{isPanorama:!0},r)):x.createElement(cae,Am({ref:t},n),x.createElement(tC,{isPanorama:!1},r))});function dae(){var e=St(),[t,r]=x.useState(null),n=ce(UV);return x.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;gt(i)&&i!==n&&e(bV(i))}},[t,e,n]),r}function nC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hae(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nC(Object(r),!0).forEach(function(n){fae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fae(e,t,r){return(t=mae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mae(e){var t=pae(e,"string");return typeof t=="symbol"?t:t+""}function pae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xa(){return Xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xa.apply(null,arguments)}var gae=()=>(Fee(),null);function Pm(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var vae=x.forwardRef((e,t)=>{var r,n,s=x.useRef(null),[i,o]=x.useState({containerWidth:Pm((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:Pm((n=e.style)===null||n===void 0?void 0:n.height)}),l=x.useCallback((u,d)=>{o(h=>{var f=Math.round(u),m=Math.round(d);return h.containerWidth===f&&h.containerHeight===m?h:{containerWidth:f,containerHeight:m}})},[]),c=x.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:h}=u.getBoundingClientRect();l(d,h);var f=g=>{var{width:y,height:p}=g[0].contentRect;l(y,p)},m=new ResizeObserver(f);m.observe(u),s.current=m}},[t,l]);return x.useEffect(()=>()=>{var u=s.current;u!=null&&u.disconnect()},[l]),x.createElement(x.Fragment,null,x.createElement(Dp,{width:i.containerWidth,height:i.containerHeight}),x.createElement("div",Xa({ref:c},e)))}),xae=x.forwardRef((e,t)=>{var{width:r,height:n}=e,[s,i]=x.useState({containerWidth:Pm(r),containerHeight:Pm(n)}),o=x.useCallback((c,u)=>{i(d=>{var h=Math.round(c),f=Math.round(u);return d.containerWidth===h&&d.containerHeight===f?d:{containerWidth:h,containerHeight:f}})},[]),l=x.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return x.createElement(x.Fragment,null,x.createElement(Dp,{width:s.containerWidth,height:s.containerHeight}),x.createElement("div",Xa({ref:l},e)))}),yae=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return x.createElement(x.Fragment,null,x.createElement(Dp,{width:r,height:n}),x.createElement("div",Xa({ref:t},e)))}),bae=x.forwardRef((e,t)=>{var{width:r,height:n}=e;return Ks(r)||Ks(n)?x.createElement(xae,Xa({},e,{ref:t})):x.createElement(yae,Xa({},e,{ref:t}))});function wae(e){return e===!0?vae:bae}var _ae=x.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:h,onMouseUp:f,onTouchEnd:m,onTouchMove:g,onTouchStart:y,style:p,width:v,responsive:b,dispatchTouchEvents:w=!0}=e,_=x.useRef(null),j=St(),[N,E]=x.useState(null),[T,S]=x.useState(null),D=dae(),O=Tw(),C=(O==null?void 0:O.width)>0?O.width:v,k=(O==null?void 0:O.height)>0?O.height:s,I=x.useCallback(U=>{D(U),typeof t=="function"&&t(U),E(U),S(U),U!=null&&(_.current=U)},[D,t,E,S]),R=x.useCallback(U=>{j(f5(U)),j(yn({handler:i,reactEvent:U}))},[j,i]),M=x.useCallback(U=>{j(cy(U)),j(yn({handler:u,reactEvent:U}))},[j,u]),P=x.useCallback(U=>{j(a3()),j(yn({handler:d,reactEvent:U}))},[j,d]),A=x.useCallback(U=>{j(cy(U)),j(yn({handler:h,reactEvent:U}))},[j,h]),$=x.useCallback(()=>{j(y5())},[j]),L=x.useCallback(U=>{j(x5(U.key))},[j]),z=x.useCallback(U=>{j(yn({handler:o,reactEvent:U}))},[j,o]),K=x.useCallback(U=>{j(yn({handler:l,reactEvent:U}))},[j,l]),se=x.useCallback(U=>{j(yn({handler:c,reactEvent:U}))},[j,c]),fe=x.useCallback(U=>{j(yn({handler:f,reactEvent:U}))},[j,f]),he=x.useCallback(U=>{j(yn({handler:y,reactEvent:U}))},[j,y]),ye=x.useCallback(U=>{w&&j(w5(U)),j(yn({handler:g,reactEvent:U}))},[j,w,g]),q=x.useCallback(U=>{j(yn({handler:m,reactEvent:U}))},[j,m]),te=wae(b);return x.createElement(E3.Provider,{value:N},x.createElement(LW.Provider,{value:T},x.createElement(te,{width:C??(p==null?void 0:p.width),height:k??(p==null?void 0:p.height),className:it("recharts-wrapper",n),style:hae({position:"relative",cursor:"default",width:C,height:k},p),onClick:R,onContextMenu:z,onDoubleClick:K,onFocus:$,onKeyDown:L,onMouseDown:se,onMouseEnter:M,onMouseLeave:P,onMouseMove:A,onMouseUp:fe,onTouchEnd:q,onTouchMove:ye,onTouchStart:he,ref:I},x.createElement(gae,null),r)))}),jae=["width","height","responsive","children","className","style","compact","title","desc"];function Nae(e,t){if(e==null)return{};var r,n,s=Sae(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Sae(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Eae=x.forwardRef((e,t)=>{var{width:r,height:n,responsive:s,children:i,className:o,style:l,compact:c,title:u,desc:d}=e,h=Nae(e,jae),f=Vs(h);return c?x.createElement(x.Fragment,null,x.createElement(Dp,{width:r,height:n}),x.createElement(rC,{otherAttributes:f,title:u,desc:d},i)):x.createElement(_ae,{className:o,style:l,width:r,height:n,responsive:s??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},x.createElement(rC,{otherAttributes:f,title:u,desc:d,ref:t},x.createElement(fne,null,i)))});function uy(){return uy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},uy.apply(null,arguments)}var Cae={top:5,right:5,bottom:5,left:5},kae={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Cae,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Aae=x.forwardRef(function(t,r){var n,s=pn(t.categoricalChartProps,kae),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return x.createElement(tae,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},x.createElement(nne,{chartData:u.data}),x.createElement(nae,{layout:s.layout,margin:s.margin}),x.createElement(sae,{baseValue:s.baseValue,accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className,reverseStackOrder:s.reverseStackOrder}),x.createElement(Eae,uy({},s,{ref:r})))}),Pae=["axis","item"],j5=x.forwardRef((e,t)=>x.createElement(Aae,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Pae,tooltipPayloadSearcher:Nee,categoricalChartProps:e,ref:t}));const Oae=async e=>{try{console.log("=== FETCHING COUNSELOR ACADEMIC DATA (FIREBASE) ==="),console.log("Counselor Name:",e);const t=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",t);const r=G(V,t),n=await le(r);if(console.log("1. Caseload Query Result:"),console.log("   - Exists:",n.exists()),console.log("   - Raw Data:",n.val()),!n.exists())return console.log(" No caseload found for counselor:",e),{totalStudents:0,averageGrade:0,students:[]};const s=n.val(),i=Object.keys(s);console.log("2. Student Names in Caseload:",i),console.log("   - Count:",i.length);const o=[];for(const u of i){console.log(`
--- Processing Student: ${u} ---`);const d=`University Data/Student Academics/${u}`;console.log("   Firebase Path:",d);const h=G(V,d),f=await le(h);if(console.log("   Snapshot Exists:",f.exists()),console.log("   Raw Data:",f.val()),f.exists()){const m=f.val(),g=m["Overall Average"]||0;console.log("   Overall Average:",g);const y=[];if(m["Subject Averages"]){const b=m["Subject Averages"];console.log("   Subject Averages Data:",b);for(const w in b)y.push({subject:w,grade:b[w]});console.log("   Parsed Subject Averages:",y)}else console.log("    No Subject Averages found for",u);const p=[];if(m["Previous averages"]){const b=m["Previous averages"];for(const w in b){const _=b[w],j=[];let N=0;for(const E in _)E==="Overall Average"?N=_[E]:j.push({subject:E,grade:_[E]});p.push({year:w,overallAverage:N,subjects:j})}}const v={studentName:u,overallAverage:g,numCourses:y.length,subjectAverages:y,previousAverages:p};console.log("    Added Student Record:",v),o.push(v)}else console.log(`    No academic data found for: ${u}`)}const l=o.length,c=l>0?o.reduce((u,d)=>u+d.overallAverage,0)/l:0;return console.log(`
=== FINAL SUMMARY ===`),console.log("Total Students:",l),console.log("Average Grade:",Math.round(c*10)/10),console.log("Students Array:",o),console.log(`=== END FETCH ===
`),{totalStudents:l,averageGrade:Math.round(c*10)/10,students:o}}catch(t){throw console.error(" ERROR in getCounselorAcademicData:",t),t}},Tae=async e=>{try{const t=G(V,`University Data/Student Academics/${e}`),r=await le(t);if(!r.exists())return null;const n=r.val(),s=n["Overall Average"]||0,i=[];if(n["Subject Averages"]){const l=n["Subject Averages"];for(const c in l)i.push({subject:c,grade:l[c]})}const o=[];if(n["Previous averages"]){const l=n["Previous averages"];for(const c in l){const u=l[c],d=[];let h=0;for(const f in u)f==="Overall Average"?h=u[f]:d.push({subject:f,grade:u[f]});o.push({year:c,overallAverage:h,subjects:d})}}return{studentName:e,overallAverage:s,numCourses:i.length,subjectAverages:i,previousAverages:o}}catch(t){throw console.error("Error fetching student academic details:",t),t}},N5=async e=>{try{console.log(` Fetching profile data for: ${e}`);const t=G(V,`University Data/Student Academics/${e}`),r=G(V,`University Data/Student Profiles/${e}`),n=G(V,`University Data/Essays/${e}`),[s,i,o]=await Promise.all([le(t),le(r),le(n)]),l={};if(s.exists()){const c=s.val();l.sat=c.SAT,l.act=c.ACT}if(i.exists()){const c=i.val();l.dob=c.DOB,l.nationality=c.Nationality,l.budget=c.Budget,l.specialCircumstances=c["Special Circumstances"],c["Career interests"]&&(l.careerInterests=Object.keys(c["Career interests"]))}if(o.exists()){const c=o.val(),u=[],d=[];let h=null;for(const f in c){const m=c[f],g=m.essayType;g==="personal_statement"?u.push({title:f,text:m.essayText||"",createdAt:m.createdAt||"",reviewed:!!m.reviewData,type:"personal_statement"}):g==="supplement"?d.push({title:f,text:m.essayText||"",createdAt:m.createdAt||"",reviewed:!!m.reviewData,universityName:m.universityName,type:"supplement"}):m.activities&&(!h||m.createdAt>h.createdAt)&&(h={createdAt:m.createdAt,activities:m.activities})}if(u.length>0&&(u.sort((f,m)=>m.createdAt.localeCompare(f.createdAt)),l.personalStatement=u[0]),l.supplementaryEssays=d,h){const f=[],m=h.activities;for(const g in m){const y=m[g];y&&y.id&&f.push({id:y.id,name:y.name||"",description:y.description||""})}l.activitiesList=f}}return l}catch(t){return console.error("Error fetching student profile data:",t),{}}},S5=e=>{if(!e)return"N/A";try{const t=new Date(e),r=new Date;let n=r.getFullYear()-t.getFullYear(),s=r.getMonth()-t.getMonth();return s<0&&(n--,s+=12),r.getDate()<t.getDate()&&(s--,s<0&&(n--,s+=12)),`${n} yrs ${s} mont`}catch{return"N/A"}},sC=({user:e,onNavigateToEssayEditor:t})=>{var $;const[r,n]=x.useState(null),[s,i]=x.useState(null),[o,l]=x.useState(!0),[c,u]=x.useState({academicHistory:!1,personalStatement:!1,activities:!1,supplementaryEssays:!1,careerInterests:!1}),[d,h]=x.useState(!1),[f,m]=x.useState(!1),[g,y]=x.useState(!1),[p,v]=x.useState(""),[b,w]=x.useState([]),[_,j]=x.useState(""),[N,E]=x.useState(""),[T,S]=x.useState(!1),D=(e==null?void 0:e.name)||(($=lt.getStoredUser())==null?void 0:$.name)||"Student";x.useEffect(()=>{(async()=>{try{l(!0),console.log(" Fetching data for student:",D);const[z,K]=await Promise.all([Tae(D),N5(D)]);n(z),i(K)}catch(z){console.error("Error fetching student data:",z)}finally{l(!1)}})()},[D]);const O=L=>{u(z=>({...z,[L]:!z[L]}))},C=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),k=L=>{if(!L)return 0;const z=L.replace(/[$,]/g,""),K=parseInt(z);return isNaN(K)?0:K},I=async L=>{try{S(!0);const z=G(V,`University Data/Student Profiles/${D}/Budget`);await Me(z,`$${L}`),i(K=>K&&{...K,budget:`$${L}`}),h(!1),v("")}catch(z){console.error("Error saving budget:",z),alert("Failed to save budget. Please try again.")}finally{S(!1)}},R=async L=>{try{S(!0);const z=G(V,`University Data/Student Profiles/${D}/Career interests`),K={};L.forEach(se=>{K[se]=!0}),await Me(z,K),i(se=>se&&{...se,careerInterests:L}),m(!1),w([]),j("")}catch(z){console.error("Error saving career interests:",z),alert("Failed to save career interests. Please try again.")}finally{S(!1)}},M=async L=>{try{S(!0);const z=G(V,`University Data/Student Profiles/${D}/Special Circumstances`);await Me(z,L),i(K=>K&&{...K,specialCircumstances:L}),y(!1),E("")}catch(z){console.error("Error saving special circumstances:",z),alert("Failed to save special circumstances. Please try again.")}finally{S(!1)}},P=L=>{t&&t(L)};if(o)return a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your profile..."})]})});const A=(r==null?void 0:r.subjectAverages.map(L=>({name:L.subject.length>12?L.subject.substring(0,12)+"...":L.subject,grade:L.grade,fullName:L.subject})))||[];return a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 rounded-t-lg px-8 py-5",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:D}),o?a.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading profile data..."})]}):a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[r&&a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Overall Average"}),a.jsxs("div",{className:"text-lg font-bold text-[#04ADEE]",children:[r.overallAverage,"%"]})]}),((s==null?void 0:s.sat)||(s==null?void 0:s.act))&&a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:s!=null&&s.sat?"SAT":"ACT"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:(s==null?void 0:s.sat)||(s==null?void 0:s.act)||"N/A"})]}),(s==null?void 0:s.dob)&&a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Age"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:S5(s.dob)})]}),(s==null?void 0:s.nationality)&&a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Nationality"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.nationality})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[a.jsx("div",{className:"text-xs text-slate-600",children:"Budget"}),a.jsx("button",{onClick:()=>{v(s!=null&&s.budget?k(s.budget).toString():""),h(!0)},className:"text-[#04ADEE] hover:text-[#0396d5] transition-colors",title:"Edit budget",children:a.jsx(qc,{className:"w-3 h-3"})})]}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s!=null&&s.budget?`$${k(s.budget).toLocaleString()}`:"Add"})]})]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-b-lg px-8 py-6 pb-8 space-y-4 border-x border-b border-slate-200",children:[r&&A.length>0&&a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Course Grades"}),a.jsx(F4,{width:"100%",height:240,children:a.jsxs(j5,{data:A,barSize:35,children:[a.jsx(z_,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(q_,{dataKey:"name",tick:{fontSize:12}}),a.jsx(V_,{domain:[0,100],tick:{fontSize:12}}),a.jsx(P3,{content:({active:L,payload:z})=>L&&z&&z.length?a.jsxs("div",{className:"bg-white p-2 border border-slate-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:z[0].payload.fullName}),a.jsxs("p",{className:"text-base font-bold text-[#04ADEE]",children:["Grade: ",z[0].value,"%"]})]}):null}),a.jsx(H_,{dataKey:"grade",radius:[6,6,0,0],children:A.map((L,z)=>{const K=["#04ADEE","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return a.jsx(rg,{fill:K[z%K.length]},`cell-${z}`)})})]})})]}),r&&r.previousAverages&&r.previousAverages.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>O("academicHistory"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Academic History"})]}),c.academicHistory?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),c.academicHistory&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-3 mt-3",children:r.previousAverages.map((L,z)=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-800",children:L.year}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Overall Average:"}),a.jsxs("span",{className:"text-base font-bold text-[#04ADEE]",children:[L.overallAverage,"%"]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Subject Grades"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:L.subjects.map((K,se)=>a.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-slate-200",children:[a.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:K.subject}),a.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[K.grade,"%"]})]},se))})]})]},z))})})]}),(s==null?void 0:s.personalStatement)&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>O("personalStatement"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Personal Statement"}),s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold",children:"Reviewed"}),!s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold",children:"Unreviewed"})]}),c.personalStatement?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),c.personalStatement&&a.jsxs("div",{className:"px-4 pb-4 border-t border-slate-200 mt-3",children:[a.jsx("button",{onClick:()=>P(s.personalStatement.title),className:"text-lg font-semibold text-slate-900 hover:text-slate-700 hover:underline mb-3 block text-left",children:s.personalStatement.title}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:s.personalStatement.text}})]})]}),(s==null?void 0:s.activitiesList)&&s.activitiesList.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>O("activities"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Extra Curricular Activities"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.activitiesList.length})]}),c.activities?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),c.activities&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-3 mt-3",children:s.activitiesList.map((L,z)=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-[#04ADEE] text-white rounded-full flex items-center justify-center text-xs font-bold",children:z+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:L.name}),a.jsx("p",{className:"text-sm text-slate-600",children:L.description})]})]})},L.id))})})]}),(s==null?void 0:s.supplementaryEssays)&&s.supplementaryEssays.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>O("supplementaryEssays"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Supplementary Essays"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.supplementaryEssays.length})]}),c.supplementaryEssays?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),c.supplementaryEssays&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-3 mt-3",children:s.supplementaryEssays.map((L,z)=>a.jsx("button",{onClick:()=>P(L.title),className:"w-full text-left bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-[#04ADEE] hover:bg-blue-50 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:L.title}),L.universityName&&a.jsx("p",{className:"text-xs text-slate-600 mb-2",children:L.universityName}),a.jsx("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(wt,{className:"w-3.5 h-3.5"}),C(L.createdAt)]})})]}),a.jsx("div",{className:"flex flex-col items-end gap-2",children:L.reviewed?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-700",children:[a.jsx(yr,{className:"w-3.5 h-3.5"}),"Reviewed"]}):a.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold bg-amber-100 text-amber-700",children:[a.jsx(Or,{className:"w-3.5 h-3.5"}),"Unreviewed"]})})]})},z))})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>O("careerInterests"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(BT,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Career Interests"}),a.jsx("button",{onClick:L=>{L.stopPropagation(),w((s==null?void 0:s.careerInterests)||[]),m(!0)},className:"text-[#04ADEE] hover:text-[#0396d5] transition-colors ml-2",title:s!=null&&s.careerInterests&&s.careerInterests.length>0?"Edit career interests":"Add career interests",children:a.jsx(qc,{className:"w-4 h-4"})})]}),c.careerInterests?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),c.careerInterests&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:s!=null&&s.careerInterests&&s.careerInterests.length>0?a.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.careerInterests.map((L,z)=>a.jsx("span",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full text-sm font-medium",children:L},z))}):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-sm text-slate-500",children:"No career interests added yet"})})})]}),a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ps,{className:"w-5 h-5 text-amber-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Special Circumstances"})]}),a.jsx("button",{onClick:()=>{E((s==null?void 0:s.specialCircumstances)||""),y(!0)},className:"text-[#04ADEE] hover:text-[#0396d5] transition-colors",title:s!=null&&s.specialCircumstances?"Edit special circumstances":"Add special circumstances",children:a.jsx(qc,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"prose max-w-none",children:s!=null&&s.specialCircumstances?a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s.specialCircumstances}):a.jsx("p",{className:"text-gray-500 italic",children:"No special circumstances added yet"})})]})]}),d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Budget"}),a.jsx("button",{onClick:()=>{h(!1),v("")},className:"text-slate-400 hover:text-slate-600",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Annual Budget (USD)"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),a.jsx("input",{type:"number",value:p,onChange:L=>v(L.target.value),placeholder:"5000",className:"w-full pl-8 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>I(p),disabled:!p||T,className:"flex-1 flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Bi,{className:"w-4 h-4"}),"Save"]}),a.jsx("button",{onClick:()=>{h(!1),v("")},className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Career Interests"}),a.jsx("button",{onClick:()=>{m(!1),w([]),j("")},className:"text-slate-400 hover:text-slate-600",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex gap-2 mb-3",children:[a.jsx("input",{type:"text",value:_,onChange:L=>j(L.target.value),onKeyPress:L=>{L.key==="Enter"&&_.trim()&&(w([...b,_.trim()]),j(""))},placeholder:"e.g., Software Engineering",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),a.jsx("button",{onClick:()=>{_.trim()&&(w([...b,_.trim()]),j(""))},className:"bg-[#04ADEE] text-white p-2 rounded-lg hover:bg-[#0396d5] transition-colors",children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:b.map((L,z)=>a.jsxs("span",{className:"bg-blue-100 text-blue-700 px-3 py-1.5 rounded-full text-sm font-medium flex items-center gap-2",children:[L,a.jsx("button",{onClick:()=>{w(b.filter((K,se)=>se!==z))},className:"hover:text-blue-900",children:a.jsx(rt,{className:"w-3 h-3"})})]},z))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>R(b),disabled:T,className:"flex-1 flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Bi,{className:"w-4 h-4"}),"Save"]}),a.jsx("button",{onClick:()=>{m(!1),w([]),j("")},className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Edit Special Circumstances"}),a.jsx("button",{onClick:()=>{y(!1),E("")},className:"text-slate-400 hover:text-slate-600",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Special Circumstances"}),a.jsx("textarea",{value:N,onChange:L=>E(L.target.value),placeholder:"Describe any special circumstances that may have affected your academic performance or life situation...",rows:6,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent resize-none"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>M(N),disabled:T,className:"flex-1 flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[T?a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):a.jsx(Bi,{className:"w-4 h-4"}),"Save"]}),a.jsx("button",{onClick:()=>{y(!1),E("")},className:"px-4 py-2 border border-slate-300 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"})]})]})})]})},Iae="Soofia International School",Dae="Admission Stories",X_=async()=>{try{const e=G(V,`Schoolss/${Iae}/${Dae}`),t=await le(e);if(!t.exists())return console.log("No admission stories found"),[];const r=t.val(),n=[];return Object.keys(r).forEach(s=>{const i=r[s],o=[];i["Extra Curricular Activities"]&&Object.keys(i["Extra Curricular Activities"]).forEach(c=>{i["Extra Curricular Activities"][c]&&o.push(c)});const l={id:s.replace(/\s+/g,"-").toLowerCase(),name:i.Name||s,country:i.Country||"",profile_image_url:i["Profile Picture"]||"",current_university:i["Accepted to"]||"",university_location:i["Uni Location"]||"",application_round:i["Application round"]||"",graduation_year:i["Graduation Class"]||"",extracurricular_activities:o,personal_statement:i["Personal Statement"]||"",university_experience:i["Uni Experience"]||"",financial_aid_received:i["Financial Aid"]||"N/A",first_generation:i["First gen"]==="Yes",linkedin_handle:i.Linkedin!=="N/A"?i.Linkedin:void 0,instagram_handle:i.Instagram!=="N/A"?i.Instagram:void 0,current_major:i.Major||"",overall_percentage:i["Overall Average"]?parseFloat(i["Overall Average"].replace("%","")):void 0,sat_score:i["SAT score"]||void 0,act_score:i["ACT score"]||void 0,university_image_url:i["background picture"]||void 0,high_school_gpa_history:i["Highschool History"]||{},subject_grades:i["Latest Transcripts Submitted"]||{}};n.push(l)}),n}catch(e){throw console.error("Error fetching Firebase admission stories:",e),e}},E5=async e=>{try{return(await X_()).find(r=>r.id===e)||null}catch(t){throw console.error("Error fetching Firebase admit profile by ID:",t),t}},fg=e=>`https://flagcdn.com/w40/${({Lesotho:"LS","South Africa":"ZA",Botswana:"BW",Zimbabwe:"ZW",Namibia:"NA",Zambia:"ZM",Malawi:"MW",Kenya:"KE",Nigeria:"NG",Ghana:"GH",Tanzania:"TZ",Uganda:"UG",Rwanda:"RW",Ethiopia:"ET",Mozambique:"MZ",Eswatini:"SZ",Swaziland:"SZ","United States":"US","United Kingdom":"GB",Canada:"CA",Australia:"AU",India:"IN",China:"CN",Japan:"JP",Germany:"DE",France:"FR",Brazil:"BR",Mexico:"MX",Argentina:"AR"}[e]||"UN").toLowerCase()}.png`;function Rae({onViewProfile:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,o]=x.useState(!0),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{m()},[]),x.useEffect(()=>{g()},[l,u,h,t]);const m=async()=>{try{o(!0);const v=await X_();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{o(!1)}},g=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},y=Array.from(new Set(t.map(v=>v.country))).sort(),p=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admit Profiles"}),a.jsx("p",{className:"text-gray-600",children:"Explore profiles of students who were successfully admitted to top universities"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name, university, country...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Countries"}),y.map(v=>a.jsx("option",{value:v,children:v},v))]}),a.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Majors"}),p.map(v=>a.jsx("option",{value:v,children:v},v))]})]})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:n.map(v=>a.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-all cursor-pointer group",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"})}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-sm mb-2 line-clamp-1",children:v.name}),a.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-2",children:[a.jsx("img",{src:fg(v.country),alt:v.country,className:"w-5 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),a.jsx("span",{className:"line-clamp-1",children:v.country})]}),a.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-2",children:[a.jsx(Rt,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),a.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No admit profiles found matching your search."})})]})})}function We({end:e,duration:t=2e3,decimals:r=0,suffix:n="",className:s=""}){const[i,o]=x.useState(0),l=x.useRef(0),[c,u]=x.useState(!1),d=x.useRef(null);return x.useEffect(()=>{const h=new IntersectionObserver(([f])=>{f.isIntersecting&&u(!0)},{threshold:.1});return d.current&&h.observe(d.current),()=>{d.current&&h.unobserve(d.current)}},[]),x.useEffect(()=>{if(!c)return;const h=Date.now(),f=0,m=()=>{const p=Date.now()-h,v=Math.min(p/t,1),b=1-Math.pow(1-v,4),w=f+(e-f)*b;l.current=w,o(w),v<1?requestAnimationFrame(m):o(e)},g=requestAnimationFrame(m);return()=>{cancelAnimationFrame(g)}},[e,t,c]),a.jsxs("span",{ref:d,className:s,children:[i.toFixed(r),n]})}function Mae({profileId:e,onBack:t}){const[r,n]=x.useState(null),[s,i]=x.useState(!0),[o,l]=x.useState(null),[c,u]=x.useState(!1);x.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await E5(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-96",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o||!r?a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800",children:o||"Profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30",children:a.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[a.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors mb-6 group",children:[a.jsx(cn,{className:"w-5 h-5 mr-2 group-hover:-translate-x-1 transition-transform"}),a.jsx("span",{className:"font-medium",children:"Back to Admit Profiles"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[a.jsxs("div",{className:"relative h-48 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&a.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),a.jsx("div",{className:"absolute -bottom-16 left-8 z-10",children:a.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-32 h-32 rounded-2xl border-4 border-white object-cover shadow-xl"})})]}),a.jsxs("div",{className:"pt-20 px-8 pb-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"flex items-center gap-3 mb-2",children:a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r.name})}),a.jsx("p",{className:"text-lg text-gray-600 mb-3",children:r.current_major}),a.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("img",{src:fg(r.country),alt:`${r.country} flag`,className:"w-5 h-4 object-cover rounded-sm"}),a.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&a.jsxs("div",{className:"flex gap-3 mb-8",children:[r.linkedin_handle&&a.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-all text-sm font-medium",children:[a.jsx(YT,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&a.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg hover:bg-pink-100 transition-all text-sm font-medium",children:[a.jsx(KT,{className:"w-4 h-4"}),"Instagram"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-6 mb-4 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Rt,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Accepted To:"})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-600 mb-1",children:r.current_university}),a.jsx("p",{className:"text-gray-600",children:r.university_location}),r.graduation_year&&a.jsxs("p",{className:"text-sm text-gray-600 mt-2 font-medium",children:["Class of ",r.graduation_year]})]}),a.jsx("div",{className:"mb-8",children:a.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["Application submitted to ",r.current_university]})}),a.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-5 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(to,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Average"})]}),a.jsx("p",{className:"text-3xl font-bold text-blue-600",children:r.overall_percentage?a.jsxs(a.Fragment,{children:[a.jsx(We,{end:r.overall_percentage,decimals:1}),a.jsx("span",{children:"%"})]}):"N/A"}),a.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Aggregate Percentage"})]}),r.sat_score&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-5 border border-purple-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(hr,{className:"w-4 h-4 text-purple-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT Score"})]}),a.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a.jsx(We,{end:r.sat_score})})]}),r.act_score&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-5 border border-orange-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(hr,{className:"w-4 h-4 text-orange-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT Score"})]}),a.jsx("p",{className:"text-3xl font-bold text-orange-600",children:a.jsx(We,{end:r.act_score})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-5 border border-green-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Application Round"})]}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.application_round})]})]}),a.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-yellow-50 rounded-xl p-5 border border-yellow-100",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Vt,{className:"w-4 h-4 text-yellow-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"First Generation Student"})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:r.first_generation?"Yes":"No"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-5 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Bl,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:"Financial Aid Received"})]}),a.jsx("p",{className:"text-gray-700 text-sm",children:r.financial_aid_received})]})]}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Ce,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm line-clamp-4",children:r.personal_statement}),a.jsx("button",{onClick:()=>u(!0),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm underline",children:"Read Full Statement"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",onClick:()=>u(!1),children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100",children:""})]}),a.jsx("div",{className:"px-6 py-6 overflow-y-auto max-h-[calc(90vh-80px)]",children:a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Rt,{className:"w-5 h-5 text-purple-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:Object.entries(r.subject_grades).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{children:a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h})}),a.jsx("span",{className:"text-2xl font-bold text-purple-600",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx(Gn,{className:"w-5 h-5 text-green-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"High School Performance History"})]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4 italic",children:"Overall grade percentages by year"}),a.jsx("div",{className:"grid md:grid-cols-3 gap-3",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-4 border border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:h}),a.jsx("span",{className:"text-xl font-bold text-blue-600",children:f})]})},m))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Zn,{className:"w-5 h-5 text-orange-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),a.jsx("ul",{className:"space-y-2",children:r.extracurricular_activities.map((h,f)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-3 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 text-sm",children:h})]},f))})]}),r.university_experience&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-6 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Vt,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Their Journey: University Experience"})]}),a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-sm italic",children:r.university_experience})]})]})]})]})]})})}class Lae{constructor(){ho(this,"SCHOOL_NAME","Soofia International School")}async fetchScholarshipsFromFirebase(){try{console.log("=== FETCHING SCHOLARSHIPS FROM FIREBASE ===");const t=G(V,`Schoolss/${this.SCHOOL_NAME}/Scholarships`),r=await le(t);if(!r.exists())return console.log("No Scholarships node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found scholarships data:",n);const s=[];return Object.entries(n).forEach(([i,o])=>{if(o&&typeof o=="object"){const l=o,c=[];l["Eligibility Criteria"]&&Object.values(l["Eligibility Criteria"]).forEach(d=>{d&&c.push(d)});const u=[];l.Requirements&&Object.values(l.Requirements).forEach(d=>{d&&u.push(d)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),name:i,amount:l["Award amount"]||"",deadline:l.Deadline||"",description:l.Description||"",link:l.Link||"",iconUrl:l["Icon link"],eligibility:c,requirements:u}),console.log(`Extracted scholarship: ${i}`,{amount:l["Award amount"],deadline:l.Deadline,iconUrl:l["Icon link"],eligibilityCriteria:c.length,requirements:u.length})}}),console.log(` Successfully fetched ${s.length} scholarships`),s}catch(t){return console.error(" Error fetching scholarships from Firebase:",t),[]}}}const $ae=new Lae,Uae=()=>{const[e,t]=x.useState(""),[r,n]=x.useState([]),[s,i]=x.useState(!0);x.useEffect(()=>{(async()=>{i(!0);const c=await $ae.fetchScholarshipsFromFirebase();n(c),i(!1)})()},[]);const o=r.filter(l=>l.name.toLowerCase().includes(e.toLowerCase())||l.description.toLowerCase().includes(e.toLowerCase()));return s?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(hx,{className:"w-12 h-12 text-[#04adee] animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading scholarships..."})]})})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Scholarship Opportunities"}),a.jsx("p",{className:"text-gray-600",children:"Discover scholarships that match your profile and financial needs"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.map(l=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[a.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[l.iconUrl&&a.jsx("img",{src:l.iconUrl,alt:`${l.name} logo`,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:l.name}),a.jsx("p",{className:"text-gray-700 text-sm",children:l.description})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-[#04adee] bg-opacity-10 rounded-lg",children:[a.jsx(Bl,{className:"w-6 h-6 text-[#04adee] mx-auto mb-1"}),a.jsx("div",{className:"text-lg font-bold text-gray-900",children:l.amount}),a.jsx("div",{className:"text-sm text-gray-600",children:"Award Amount"})]}),a.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[a.jsx(wt,{className:"w-6 h-6 text-gray-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:l.deadline}),a.jsx("div",{className:"text-sm text-gray-600",children:"Deadline"})]})]}),l.eligibility.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Eligibility Criteria:"}),a.jsx("ul",{className:"space-y-1",children:l.eligibility.map((c,u)=>a.jsxs("li",{className:"flex items-center text-sm text-gray-700",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-2"}),c]},u))})]}),l.requirements.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Requirements:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:l.requirements.map((c,u)=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:c},u))})]}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:a.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium w-full",children:["Learn More & Apply",a.jsx(zl,{className:"w-4 h-4 ml-2"})]})})]},l.id))}),o.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(hr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No scholarships found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},C5=[".","#","$","/","[","]"],Fae=e=>C5.filter(t=>e.includes(t)),Bae=e=>{if(!e||typeof e!="string")return"";let t=e.trim();return C5.forEach(r=>{t=t.replace(new RegExp(`\\${r}`,"g"),"_")}),t=t.replace(/_+/g,"_"),t=t.replace(/^_+|_+$/g,""),t||"requirement"},dy=e=>{if(!e||e.trim()==="")return"Requirement name cannot be empty";const t=Fae(e);return t.length>0?`Cannot contain these characters: ${t.join(", ")}`:null};class zae{async calculateStudentProgress(t,r){try{console.log(`=== CALCULATING PROGRESS FOR ${r} IN ${t} ===`);const n=G(V,`Schoolss/${t}/Applications/${r}`),s=await le(n);if(!s.exists())return console.log("No applications found for student"),0;const i=s.val();console.log("Applications data:",i);let o=0,l=0;Object.entries(i).forEach(([u,d])=>{console.log(`Processing university: ${u}`),d&&typeof d=="object"&&Object.entries(d).forEach(([h,f])=>{o++,f&&l++,console.log(`  Requirement: ${h} = ${f}`)})});const c=o>0?Math.round(l/o*100):0;return console.log(`Total requirements: ${o}, Completed: ${l}`),console.log(`Calculated completion percentage: ${c}%`),c}catch(n){return console.error("Error calculating student progress:",n),0}}async updateStudentProgress(t,r){try{console.log(`=== UPDATING APPLICATION PROGRESS FOR ${r} ===`);const n=await this.calculateStudentProgress(t,r),s=G(V,`Schoolss/${t}/Application Progress/${r}`);await Me(s,n),console.log(` Updated Application Progress for ${r}: ${n}%`)}catch(n){throw console.error(" Error updating student progress:",n),n}}async updateCurrentUserProgress(){try{const t=lt.getCurrentUser();if(!t||!t.name||!t.school){console.log("No user data found, cannot update progress");return}await this.updateStudentProgress(t.school,t.name)}catch(t){throw console.error("Error updating current user progress:",t),t}}async getStudentProgress(t,r){try{const n=G(V,`Schoolss/${t}/Application Progress/${r}`),s=await le(n);if(s.exists())return s.val();const i=await this.calculateStudentProgress(t,r);return await this.updateStudentProgress(t,r),i}catch(n){return console.error("Error getting student progress:",n),0}}async getCurrentUserProgress(){try{const t=lt.getCurrentUser();return!t||!t.name||!t.school?(console.log("No user data found, cannot get progress"),0):await this.getStudentProgress(t.school,t.name)}catch(t){return console.error("Error getting current user progress:",t),0}}}const Om=new zae,Wae=()=>{const[e,t]=x.useState([]),[r,n]=x.useState({}),[s,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});x.useEffect(()=>{p()},[]);const p=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE (Desktop) ===");const O=lt.getCurrentUser();if(!O||!O.name||!O.school){console.log("No user data found, cannot load applications:",O);return}console.log("Loading applications for user:",O.name,"in school:",O.school);const C=G(V,`Schoolss/${O.school}/Applications/${O.name}`);console.log("Firebase path:",`Schoolss/${O.school}/Applications/${O.name}`);const k=await le(C);if(k.exists()){const I=k.val();console.log("Found applications data:",I);const R=[];Object.entries(I).forEach(([M,P],A)=>{if(console.log(`Processing university: ${M}`,P),P&&typeof P=="object"){const $=[];Object.entries(P).forEach(([K,se],fe)=>{console.log(`  Requirement: ${K} = ${se}`),$.push({id:Date.now()+A*100+fe,name:K,completed:se})});const L=$.filter(K=>K.completed).length,z=Math.round(L/$.length*100);console.log(`  University: ${M}, Completion: ${z}%`),R.push({id:Date.now()+A,universityName:M,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:z===100?"Submitted":"In Progress",completionPercentage:z,requirements:$,notes:""})}}),console.log("Loaded applications:",R),t(R)}else console.log("No applications found in Firebase"),t([])}catch(O){console.error("Error loading applications from Firebase:",O),t([])}},v=async O=>{try{const C=O.split("@")[0].toLowerCase();console.log("Looking for username:",C);const k=G(V,"Schoolss"),I=await le(k);if(!I.exists())return console.log("No Schoolss node found"),null;const R=I.val();console.log("Found schools:",Object.keys(R));for(const[M,P]of Object.entries(R))if(console.log(`Checking school: ${M}`),P&&typeof P=="object"&&"users"in P){const A=P.users;if(A&&C in A)return console.log(`Found user ${C} in school: ${M}`),M}return console.log("User not found in any school"),null}catch(C){return console.error("Error finding user school:",C),null}},b=(O,C)=>{t(k=>k.map(I=>{if(I.id===O){const R=I.requirements.map($=>$.id===C?{...$,completed:!$.completed}:$),M=R.filter($=>$.completed).length,P=Math.round(M/R.length*100),A=I.requirements.find($=>$.id===C);return A&&w(I.universityName,A.name,!A.completed),{...I,requirements:R,completionPercentage:P}}return I}))},w=async(O,C,k)=>{try{const I=lt.getCurrentUser();if(I&&I.name&&I.school){const R=G(V,`Schoolss/${I.school}/Applications/${I.name}/${O}/${C}`);await Me(R,k),console.log(`Updated requirement ${C} to ${k} for ${O}`),await Om.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(I){console.error("Error updating requirement in Firebase:",I)}},_=async O=>{try{console.log("=== STARTING FIREBASE SAVE (Desktop) ==="),console.log("Application data:",O);const C=lt.getCurrentUser();if(console.log("Current stored user:",C),!C)throw new Error("No user data found in storage. Please log in again.");const k=`${C.username}@gmail.com`;console.log("Reconstructed email:",k);const I=await v(k);if(console.log("Found school:",I),!I)throw new Error("Could not find your school in the database. Please contact support.");const R=G(V,`Schoolss/${I}/users/${C.username}`),M=await le(R);if(!M.exists())throw new Error("User data not found in school database.");const P=M.val(),A=P.Name||P.name||C.name;console.log("Using user name for Applications:",A);const $=`Schoolss/${I}/Applications/${A}/${O.universityName}`;console.log("Firebase application path:",$);const L={};if(O.requirements.forEach(K=>{K.trim()&&(L[K.trim()]=!1)}),console.log("Requirements data to save:",L),Object.keys(L).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const z=G(V,$);return await Me(z,L),console.log(" Application saved successfully to Firebase!"),!0}catch(C){throw console.error(" Error saving application to Firebase:",C),C instanceof Error&&console.error("Error message:",C.message),new Error(`Failed to save application: ${C instanceof Error?C.message:"Unknown error"}`)}},j=async()=>{if(g.universityName&&g.program&&g.requirements.length>0){u(!0);try{await _(g);const O=g.requirements.map((k,I)=>({id:Date.now()+I,name:k,completed:!1})),C={id:Date.now(),universityName:g.universityName,program:g.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:O};t(k=>[...k,C]),y({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),h("Application has been added to tracker successfully!"),setTimeout(()=>h(""),3e3),await Om.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await p()}catch(O){console.error("Error adding application:",O),m(`Error adding application: ${O instanceof Error?O.message:"Please try again."}`),setTimeout(()=>m(""),5e3)}finally{u(!1)}}},N=()=>{g.requirements.length<15&&y(O=>({...O,requirements:[...O.requirements,""]}))},E=O=>{y(C=>({...C,requirements:C.requirements.filter((k,I)=>I!==O)}))},T=(O,C)=>{const k=dy(C);n(I=>{const R={...I};return k?R[O]=k:delete R[O],R}),y(I=>({...I,requirements:I.requirements.map((R,M)=>M===O?C:R)}))},S=O=>{switch(O){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},D={avgCompletion:Math.round(e.reduce((O,C)=>O+C.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(O=>O.status==="In Progress").length,submitted:e.filter(O=>O.status==="Submitted").length};return a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[d&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(yr,{className:"w-5 h-5 mr-2"}),d]})}),f&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rt,{className:"w-5 h-5 mr-2"}),f]})}),a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[a.jsx(br,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Gn,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[D.avgCompletion,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"w-6 h-6 text-[#04adee]"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Or,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.inProgress}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(yr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:D.submitted}),a.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),a.jsx("div",{className:"space-y-6",children:e.map(O=>{const C=O.requirements.filter(I=>I.completed).length,k=Math.ceil((new Date(O.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:O.universityName}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${S(O.status)}`,children:O.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:O.program}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(O.deadline).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Or,{className:"w-4 h-4 mr-1"}),k>0?`${k} days left`:"Overdue"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[O.completionPercentage,"%"]}),a.jsx(to,{className:"w-5 h-5 text-[#04adee]"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[C," of ",O.requirements.length," completed"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${O.completionPercentage}%`}})})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:O.requirements.map(I=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>b(O.id,I.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${I.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:I.completed&&a.jsx(yr,{className:"w-3 h-3"})}),a.jsx("span",{className:`flex-1 ${I.completed?"line-through text-gray-500":"text-gray-700"}`,children:I.name}),I.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(I.dueDate).toLocaleDateString()]})]},I.id))})]}),O.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 text-sm",children:O.notes})]})]},O.id)})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Add New Application"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:g.universityName,onChange:O=>y(C=>({...C,universityName:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),a.jsx("input",{type:"text",value:g.program,onChange:O=>y(C=>({...C,program:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.requirements.map((O,C)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:O,onChange:k=>T(C,k.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[C]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>E(C),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(un,{className:"w-4 h-4"})})]}),r[C]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[C]})]},C))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:j,disabled:c||!g.universityName||!g.program||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors font-medium",children:"Cancel"})]})]})}),e.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),a.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:g.universityName,onChange:O=>y(C=>({...C,universityName:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),a.jsx("input",{type:"text",value:g.program,onChange:O=>y(C=>({...C,program:O.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:g.requirements.map((O,C)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:O,onChange:k=>T(C,k.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${r[C]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>E(C),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(un,{className:"w-4 h-4"})})]}),r[C]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:r[C]})]},C))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:j,disabled:c||!g.universityName.trim()||!g.program.trim()||Object.keys(r).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})};class Hae{constructor(){ho(this,"SCHOOL_NAME","Soofia International School")}async fetchResourcesFromFirebase(){try{console.log("=== FETCHING RESOURCES FROM FIREBASE ===");const t=G(V,`Schoolss/${this.SCHOOL_NAME}/Resources`),r=await le(t);if(!r.exists())return console.log("No Resources node found for",this.SCHOOL_NAME),[];const n=r.val();console.log("Found resources data:",n);const s=[];return Object.entries(n).forEach(([i,o])=>{if(o&&typeof o=="object"){const l=o,c=[];l["Key Words"]&&Object.keys(l["Key Words"]).forEach(u=>{l["Key Words"][u]&&c.push(u)}),s.push({id:i.replace(/\s+/g,"-").toLowerCase(),title:i,type:l["Resource Type"]||"Article",author:l.Owner||"Unknown",description:l.Description||"",url:l.Link||"",category:l["Helps with"]||"General",duration:l.Duration,keywords:c}),console.log(`Extracted resource: ${i}`,{type:l["Resource Type"],author:l.Owner,category:l["Helps with"],keywords:c})}}),console.log(` Successfully fetched ${s.length} resources`),s}catch(t){return console.error(" Error fetching resources from Firebase:",t),[]}}}const qae=new Hae,Vae=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(""),[s,i]=x.useState(""),[o,l]=x.useState([]),[c,u]=x.useState(!0);x.useEffect(()=>{d()},[]);const d=async()=>{u(!0);try{const p=await qae.fetchResourcesFromFirebase();l(p)}catch(p){console.error("Error loading resources:",p)}finally{u(!1)}},h=["Essays","Applications","Financial Aid","University Selection","Test Prep","General"],f=["Article","Video","Guide","Template","Webinar"],m=o.filter(p=>{const v=p.title.toLowerCase().includes(e.toLowerCase())||p.description.toLowerCase().includes(e.toLowerCase())||p.author.toLowerCase().includes(e.toLowerCase())||p.keywords.some(_=>_.toLowerCase().includes(e.toLowerCase())),b=r===""||p.category===r,w=s===""||p.type===s;return v&&b&&w}),g=p=>{switch(p){case"Video":return Wl;case"Article":return Ce;case"Guide":return cr;case"Template":return dp;case"Webinar":return Zn;default:return Ce}},y=p=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800",Webinar:"bg-orange-100 text-orange-800"})[p]||"bg-gray-100 text-gray-800";return c?a.jsx("div",{className:"p-6 max-w-7xl mx-auto flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-16 h-16 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading resources..."})]})}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Resources & Guides"}),a.jsx("p",{className:"text-gray-600",children:"Comprehensive resources to help you succeed in your university applications"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search resources, authors, or topics...",value:e,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(fW,{className:"w-5 h-5 text-gray-500 mr-2"}),a.jsxs("select",{value:r,onChange:p=>n(p.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Categories"}),h.map(p=>a.jsx("option",{value:p,children:p},p))]})]}),a.jsx("div",{children:a.jsxs("select",{value:s,onChange:p=>i(p.target.value),className:"px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Types"}),f.map(p=>a.jsx("option",{value:p,children:p},p))]})})]})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-xl p-4 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vt,{className:"w-6 h-6 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee]",children:"Curated Resources"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Hand-picked resources from successful students and admissions experts."})]})]})}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(p=>{const v=g(p.type);return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-lg transition-shadow duration-300",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(v,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y(p.type)}`,children:p.type})]}),a.jsx("div",{className:"text-xs text-gray-600 bg-gray-50 px-3 py-1 rounded-full font-medium",children:p.category})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:p.title}),a.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["by ",p.author]}),a.jsx("p",{className:"text-gray-700 mb-3",children:p.description}),p.keywords.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 mb-2",children:"Key Topics:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:p.keywords.map(b=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full font-medium border border-[#04adee] border-opacity-20",children:b},b))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:p.duration&&a.jsx("span",{children:p.duration})}),a.jsxs("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:["Access Resource",a.jsx(zl,{className:"w-4 h-4 ml-2"})]})]})]},p.id)})}),m.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No resources found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria or filters."})]})]})},Q_=({counselorEmail:e,counselorName:t,counselorUniversity:r,counselorImage:n,onBack:s})=>{const[i,o]=x.useState([]),[l,c]=x.useState(null),[u,d]=x.useState(""),[h,f]=x.useState(!0),[m,g]=x.useState(!1),[y,p]=x.useState(null),[v,b]=x.useState(!1);x.useEffect(()=>{w()},[t]);const w=async()=>{try{f(!0),p(null);const E=`University Data/Timeslots/${t}`,T=G(V,E),S=await le(T);if(S.exists()){const D=S.val(),O=[];Object.entries(D).forEach(([C,k])=>{const[I,R]=C.split("_");O.push({id:C,date:I,timeRange:R,isAvailable:k===!1,rawKey:C})}),O.sort((C,k)=>{const I=C.date.localeCompare(k.date);return I!==0?I:C.timeRange.localeCompare(k.timeRange)}),o(O)}else o([]),p("No timeslots available for this counselor")}catch(E){console.error("Error loading timeslots:",E),p(`Failed to load timeslots: ${E instanceof Error?E.message:"Unknown error"}`),o([])}finally{f(!1)}},_=async()=>{if(!l||!u.trim()){p("Please select a time slot and provide an agenda");return}try{g(!0),p(null);const E=lt.getStoredUser();if(!E||!E.name){p("Unable to identify logged-in student"),g(!1);return}const T=E.name,S=new Date().toISOString(),O=`https://meet.jit.si/educare-meeting-${`${Date.now()}-${Math.random().toString(36).substr(2,9)}`}`,C=`University Data/Timeslots/${t}/${l.rawKey}`,k=G(V,C);await Me(k,!0);const I=`Upcoming meetings/${t}/${T}/${l.rawKey}`,R=G(V,I);await Me(R,{agenda:u.trim(),requestedAt:S,meetingLink:O,studentEmail:E.email||"",counselorName:t}),g(!1),b(!0),setTimeout(()=>{s()},2500)}catch(E){console.error("Error creating meeting request:",E),p("Failed to submit meeting request"),g(!1)}},j=E=>new Date(E).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),N=()=>{const E={};return i.forEach(T=>{E[T.date]||(E[T.date]=[]),E[T.date].push(T)}),E};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 text-white shadow-lg",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6 py-6",children:[a.jsxs("button",{onClick:s,className:"flex items-center text-white hover:bg-white hover:bg-opacity-20 rounded-lg px-4 py-2 transition-colors mb-4",children:[a.jsx(cn,{className:"w-5 h-5 mr-2"}),"Back to Counselors"]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:n,alt:t,className:"w-20 h-20 rounded-full object-cover mr-5 border-4 border-white shadow-lg",onError:E=>{E.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Book a Meeting"}),a.jsx("p",{className:"text-xl text-blue-100",children:t}),a.jsx("p",{className:"text-blue-100",children:r})]})]})]})}),a.jsx("div",{className:"max-w-5xl mx-auto px-6 py-6",children:v?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"bg-green-50 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(yr,{className:"w-10 h-10 text-green-500"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Meeting Request Sent!"}),a.jsx("p",{className:"text-gray-600 text-base mb-2",children:"Your counselor will review your request and respond soon."}),a.jsx("div",{className:"mt-6 bg-blue-50 rounded-lg p-4 inline-block",children:a.jsx("p",{className:"text-[#04adee] font-medium text-sm",children:"Check your meetings page for updates"})})]}):h?a.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8",children:a.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx(Uf,{className:"w-12 h-12 animate-spin text-[#04adee] mb-3"}),a.jsx("span",{className:"text-lg text-gray-600 font-medium",children:"Loading available time slots..."}),a.jsx("span",{className:"text-sm text-gray-500 mt-1",children:"Please wait a moment"})]})}):i.length===0?a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:[a.jsx("div",{className:"bg-gray-100 rounded-full w-16 h-16 flex items-center justify-center mx-auto mb-4",children:a.jsx(wt,{className:"w-10 h-10 text-gray-400"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"No Available Slots"}),a.jsx("p",{className:"text-gray-600 mb-1 text-sm",children:"This counselor has no available time slots at the moment."}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Please check back later or contact them via email."}),a.jsx("button",{onClick:s,className:"mt-6 px-6 py-2 bg-gray-600 text-white rounded-lg font-medium hover:bg-gray-700 transition-colors text-sm",children:"Go Back"})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:a.jsx(wt,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Choose Your Time"})]}),a.jsx("div",{className:"space-y-6",children:Object.entries(N()).map(([E,T])=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-base font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx("div",{className:"w-1 h-6 bg-[#04adee] rounded mr-3"}),j(E)]}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3",children:T.map(S=>a.jsx("button",{onClick:()=>S.isAvailable&&c(S),disabled:!S.isAvailable,className:`px-3 py-3 rounded-lg border-2 transition-all ${S.isAvailable?(l==null?void 0:l.id)===S.id?"border-[#04adee] bg-[#04adee] text-white shadow-lg scale-105":"border-gray-300 bg-white hover:border-[#04adee] hover:shadow-md transform hover:scale-105":"border-gray-200 bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx(Or,{className:`w-4 h-4 mb-1.5 ${S.isAvailable?(l==null?void 0:l.id)===S.id?"text-white":"text-[#04adee]":"text-gray-400"}`}),a.jsx("span",{className:"text-sm font-bold",children:S.timeRange}),!S.isAvailable&&a.jsx("span",{className:"text-xs mt-1 text-gray-500",children:"Booked"})]})},S.id))})]},E))})]}),a.jsxs("div",{className:"mb-6 bg-gray-50 rounded-xl p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 rounded-full p-2 mr-3",children:a.jsx(ps,{className:"w-5 h-5 text-[#04adee]"})}),a.jsx("label",{className:"text-base font-bold text-gray-900",children:"Meeting Agenda"})]}),a.jsx("textarea",{value:u,onChange:E=>d(E.target.value),placeholder:"What would you like to discuss? (e.g., college application strategy, essay review, major selection...)",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-[#04adee] resize-none bg-white transition-all text-sm"}),a.jsxs("p",{className:"text-xs text-gray-600 mt-3 flex items-start",children:[a.jsx("span",{className:"text-[#04adee] mr-2",children:""}),"A clear agenda helps your counselor prepare and makes the meeting more productive"]})]}),y&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(ps,{className:"w-5 h-5 text-red-600 mr-2 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-red-800",children:"Error"}),a.jsx("p",{className:"text-xs text-red-600 mt-0.5",children:y})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsx("button",{onClick:_,disabled:!l||!u.trim()||m,className:"flex-1 bg-gradient-to-r from-[#04adee] to-blue-600 text-white px-6 py-3 rounded-lg font-semibold text-base hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center transform hover:scale-105 disabled:hover:scale-100",children:m?a.jsxs(a.Fragment,{children:[a.jsx(Uf,{className:"w-5 h-5 animate-spin mr-2"}),"Sending Request..."]}):a.jsxs(a.Fragment,{children:[a.jsx(yr,{className:"w-5 h-5 mr-2"}),"Request Meeting"]})}),a.jsx("button",{onClick:s,disabled:m,className:"px-6 py-3 border border-gray-300 rounded-lg font-semibold text-base hover:bg-gray-50 transition-all disabled:opacity-50 text-gray-700 hover:border-gray-400",children:"Cancel"})]})]})})]})},Gae=({onBookMeeting:e})=>{const[t,r]=x.useState("counselors"),[n,s]=x.useState([]),[i,o]=x.useState([]),[l,c]=x.useState(!0),[u,d]=x.useState(null),[h,f]=x.useState(!1),[m,g]=x.useState(null);x.useEffect(()=>{y(),p()},[]);const y=async()=>{try{c(!0),d(null);const w=lt.getStoredUser();if(!w||!w.name){d("Unable to identify logged-in student"),s([]),c(!1);return}const _=w.name,N=G(V,"University Data/Caseloads"),E=await le(N),T=new Set;if(E.exists()){const C=E.val();Object.entries(C).forEach(([k,I])=>{I&&typeof I=="object"&&I[_]===!0&&T.add(k)})}const D=G(V,"University Data/University Counsellors /"),O=await le(D);if(O.exists()){const C=O.val(),k=[];Object.entries(C).forEach(([I,R])=>{if(R&&typeof R=="object"){const M=R,P=M.Name||I;if(T.has(P)){const A=[];M.Languages&&typeof M.Languages=="object"&&Object.entries(M.Languages).forEach(([z,K])=>{K===!0&&A.push(z)});const $=[];M.Specialties&&typeof M.Specialties=="object"&&Object.entries(M.Specialties).forEach(([z,K])=>{K===!0&&$.push(z)});const L={id:I,name:P,email:M.Email||M.email||"",university:M.University||"",year:M.Year||"",location:M.Location||"",profilePicture:M["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:M["Booking Link"]||M["booking link"]||"",languages:A,specialties:$,bio:`Expert counselor specializing in ${$.join(", ")}. Passionate about helping students achieve their academic dreams and navigate the university application process.`,experience:"3+ years guiding students",availability:"Mon-Fri: 9AM-5PM"};k.push(L)}}}),s(k)}else s([])}catch(w){console.error("Error loading counselors:",w),d(`Failed to load counselors: ${w instanceof Error?w.message:"Unknown error"}`),s([])}finally{c(!1)}},p=async()=>{try{const w=lt.getStoredUser();if(!w||!w.name){o([]);return}const _=w.name,N=G(V,"Upcoming meetings"),E=await le(N);if(!E.exists()){o([]);return}const T=E.val(),S=[];Object.entries(T).forEach(([D,O])=>{if(O&&typeof O=="object"&&O[_]){const C=O[_];Object.entries(C).forEach(([k,I])=>{const[R,M]=k.split("_"),[P]=M.split("-"),[A,$,L]=R.split("-").map(Number),[z,K]=P.split(":").map(Number),se=new Date(A,$-1,L,z,K),fe=se.toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),ye=new Date(I.requestedAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),q=G(V,`University Data/University Counsellors /${D}`);le(q).then(te=>{let U="";te.exists()&&(U=te.val().university||""),S.push({id:`${D}-${k}`,counselorName:D,counselorUniversity:U,counselorImage:"",date:fe,time:M.replace("-"," - "),agenda:I.agenda||"",status:"accepted",requestedDate:ye,meetingDateTime:se,meetingLink:I.meetingLink||void 0}),S.sort((H,ee)=>H.meetingDateTime.getTime()-ee.meetingDateTime.getTime()),o([...S])})})}}),S.length===0&&o([])}catch(w){console.error("Error loading upcoming meetings:",w),o([])}},v=w=>{g(w),f(!0)},b=w=>{if(w.email){const _=encodeURIComponent("University Guidance Consultation Request"),j=encodeURIComponent(`Dear ${w.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${w.email}?subject=${_}&body=${j}`,"_self")}else alert("Email address not available for this counselor.")};return l?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(Uf,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),a.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]})}):u?a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6 text-center",children:[a.jsx("p",{className:"text-red-600 mb-4",children:u}),a.jsx("button",{onClick:y,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Try Again"})]})}):h&&m?a.jsx(Q_,{counselorName:m.name,counselorUniversity:m.university,counselorImage:m.profilePicture,counselorEmail:m.email,onBack:()=>{f(!1),g(null),p()}}):a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"University Counselors"}),a.jsx("p",{className:"text-gray-600",children:"Connect with expert counselors and manage your meetings"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6",children:a.jsxs("div",{className:"flex border-b border-gray-200",children:[a.jsx("button",{onClick:()=>r("counselors"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="counselors"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(gl,{className:"w-5 h-5 mr-2"}),"Counselors"]})}),a.jsx("button",{onClick:()=>r("meetings"),className:`flex-1 px-6 py-4 font-medium transition-colors ${t==="meetings"?"text-[#04adee] border-b-2 border-[#04adee]":"text-gray-600 hover:text-gray-900"}`,children:a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(wt,{className:"w-5 h-5 mr-2"}),"Upcoming Meetings"]})})]})}),t==="counselors"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(w=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow duration-300",children:a.jsxs("div",{className:"px-6 pt-6 pb-6",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("img",{src:w.profilePicture,alt:w.name,className:"w-20 h-20 rounded-full object-cover shadow-md",onError:_=>{_.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsx("div",{className:"ml-4 mt-1",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:w.name})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(Rt,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsx("span",{className:"truncate",children:w.university})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(hr,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsxs("span",{children:[w.year," Student"]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(QT,{className:"w-4 h-4 mr-2 text-[#04adee] flex-shrink-0"}),a.jsx("span",{className:"truncate",children:w.location})]})]}),w.specialties.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Specialties"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.specialties.map(_=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-3 py-1 rounded-full",children:_},_))})]}),w.languages.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Languages"}),a.jsx("div",{className:"flex flex-wrap gap-1.5",children:w.languages.map(_=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1 rounded-full",children:_},_))})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[a.jsxs("button",{onClick:()=>v(w),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2.5 rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium",children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>b(w),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2.5 rounded-lg hover:bg-gray-700 transition-colors text-sm font-medium",children:[a.jsx(sd,{className:"w-4 h-4 mr-2"}),"Email"]})]})]})},w.id))}),n.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Eu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),a.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:i.filter(w=>w.meetingDateTime>new Date).map(w=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm border-2 border-green-200 transition-all hover:shadow-md",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900",children:w.counselorName}),a.jsx("p",{className:"text-sm text-gray-600",children:w.counselorUniversity})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(wt,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Meeting Date:"}),a.jsx("p",{className:"text-gray-600",children:w.date})]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(Or,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Time Slot:"}),a.jsx("p",{className:"text-gray-600",children:w.time})]})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-700",children:[a.jsx(gl,{className:"w-4 h-4 mr-2 text-[#04adee]"}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Requested On:"}),a.jsx("p",{className:"text-gray-600",children:w.requestedDate})]})]})]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(Ha,{className:"w-4 h-4 mr-2 text-gray-500 mt-1 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:"Meeting Agenda"}),a.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:w.agenda})]})]})}),a.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 rounded-lg p-4",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex items-start flex-1",children:[a.jsx(yr,{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-semibold text-green-900 mb-1",children:"Meeting Confirmed!"}),a.jsx("p",{className:"text-sm text-green-800",children:"Your meeting has been confirmed. Click the button below to join the video call at the scheduled time."})]})]})})}),w.meetingLink&&a.jsxs("button",{onClick:()=>window.open(w.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 mt-4",children:[a.jsx(Wl,{className:"w-5 h-5"}),"Join Video Meeting"]}),!w.meetingLink&&a.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-4 mt-4",children:a.jsxs("div",{className:"flex items-start",children:[a.jsx(ps,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-semibold text-yellow-900 mb-1",children:"Meeting Link Not Available"}),a.jsx("p",{className:"text-sm text-yellow-800",children:"The video meeting link will be available shortly. Please check back closer to the meeting time."})]})]})})]})},w.id))}),i.filter(w=>w.meetingDateTime>new Date).length===0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[a.jsx(wt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No upcoming meetings"}),a.jsx("p",{className:"text-gray-600",children:"You have no confirmed meetings scheduled at this time."})]})]})]})},Kae=async e=>{try{console.log("=== ROLE DETECTION STARTING ==="),console.log("User name:",e);const t=G(V,"University Data/Data"),r=await le(t);if(!r.exists())return console.error(" No data found at: University Data/Data"),null;const n=r.val(),s=Object.keys(n);console.log(`Found ${s.length} schools to search:`,s);for(const i of s){console.log(`
 Checking school: ${i}`);const o=`University Data/Data/${i}/Counsellors`,l=G(V,o),c=await le(l);if(c.exists()&&c.val()[e]===!0)return console.log(` MATCH FOUND: ${e} is a COUNSELLOR in ${i}`),{schoolName:i,role:"counsellor",userName:e};const u=`University Data/Data/${i}/Students`,d=G(V,u),h=await le(d);if(h.exists()&&h.val()[e]===!0)return console.log(` MATCH FOUND: ${e} is a STUDENT in ${i}`),{schoolName:i,role:"student",userName:e}}return console.log(` No match found for user: ${e}`),null}catch(t){return console.error("Error detecting user role:",t),null}},iC=e=>{const t=e.trim().replace(/^(Mr |Ms |Miss |Mrs )/i,""),r=t.trim().split(" ");return r.length>=2?(r[0][0]+r[r.length-1][0]).toUpperCase():t.substring(0,2).toUpperCase()},Yae=async(e,t,r)=>{try{console.log("=== GETTING SCHOOL MEMBERS ==="),console.log("School:",e),console.log("Current user:",t),console.log("User role:",r);const n=[],s=`University Data/Data/${e}/Counsellors`,i=G(V,s),o=await le(i);if(o.exists()){const l=o.val(),c=Object.keys(l);c.forEach(u=>{u!==t&&n.push({name:u,role:"counsellor",initials:iC(u)})}),console.log(` Found ${c.length} counsellors (excluding current user)`)}if(r==="counsellor"){const l=`University Data/Data/${e}/Students`,c=G(V,l),u=await le(c);if(u.exists()){const d=u.val(),h=Object.keys(d);h.forEach(f=>{n.push({name:f,role:"student",initials:iC(f)})}),console.log(` Found ${h.length} students`)}}return console.log(`Total members: ${n.length}`),n}catch(n){return console.error("Error getting school members:",n),[]}},mg=(e,t)=>{const r=[e,t].sort();return`chat_${r[0]}_${r[1]}`},Xi=e=>e.replace(/\s+/g,"_").toLowerCase(),Rv=e=>{const t=["#04ADEE","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#14B8A6","#F97316","#6366F1","#84CC16"];let r=0;for(let s=0;s<e.length;s++)r=e.charCodeAt(s)+((r<<5)-r);const n=Math.abs(r)%t.length;return t[n]},aC=async(e,t,r,n="text",s,i)=>{try{const o=Xi(e),l=Xi(t),c=mg(o,l),u=dO(G(V,`University Data/Inbox/${c}/messages`)).key;if(!u)throw new Error("Failed to generate message ID");const d=Date.now(),h={senderId:o,senderName:e,receiverId:l,receiverName:t,type:n,content:r,timestamp:d,status:"sent",...s&&{fileName:s},...i&&{fileSize:i}},f={};f[`University Data/Inbox/${c}/participants/${o}`]=!0,f[`University Data/Inbox/${c}/participants/${l}`]=!0,f[`University Data/Inbox/${c}/messages/${u}`]=h,f[`University Data/Inbox/${c}/lastMessage`]={content:n==="text"?r:`Sent a ${n}`,type:n,timestamp:d},f[`University Data/Inbox/${c}/unreadCount/${l}`]=await J_(c,l)+1,await ap(G(V),f),console.log(" Message sent successfully")}catch(o){throw console.error("Error sending message:",o),o}},Xae=(e,t,r)=>{const n=Xi(e),s=Xi(t),i=mg(n,s),o=G(V,`University Data/Inbox/${i}/messages`);return Gt(o,async l=>{if(!l.exists()){r([]);return}const c=l.val(),u=[];Object.keys(c).forEach(h=>{const f=c[h];u.push({messageId:h,...f})});const d=u.sort((h,f)=>h.timestamp-f.timestamp);r(d),await Qae(i,n),await k5(e,t)}),()=>{Pf(o)}},Qae=async(e,t)=>{try{const r=G(V,`University Data/Inbox/${e}/messages`),n=await le(r);if(!n.exists())return;const s=n.val(),i={};Object.keys(s).forEach(o=>{const l=s[o];l.receiverId===t&&l.status==="sent"&&(i[`University Data/Inbox/${e}/messages/${o}/status`]="delivered")}),Object.keys(i).length>0&&await ap(G(V),i)}catch(r){console.error("Error marking messages as delivered:",r)}},k5=async(e,t)=>{try{const r=Xi(e),n=Xi(t),s=mg(r,n),i=G(V,`University Data/Inbox/${s}/messages`),o=await le(i);if(!o.exists())return;const l=o.val(),c={};Object.keys(l).forEach(u=>{const d=l[u];d.receiverId===r&&d.status!=="seen"&&(c[`University Data/Inbox/${s}/messages/${u}/status`]="seen")}),c[`University Data/Inbox/${s}/unreadCount/${r}`]=0,Object.keys(c).length>0&&await ap(G(V),c)}catch(r){console.error("Error marking messages as seen:",r)}},J_=async(e,t)=>{try{const r=G(V,`University Data/Inbox/${e}/unreadCount/${t}`),n=await le(r);return n.exists()?n.val():0}catch(r){return console.error("Error getting unread count:",r),0}},Jae=async(e,t)=>{try{const r=Xi(e),n=[];for(const s of t){const i=Xi(s.name),o=mg(r,i),l=G(V,`University Data/Inbox/${o}/lastMessage`),c=await le(l),u=await J_(o,r);n.push({chatId:o,participant:s,lastMessage:c.exists()?c.val():null,unreadCount:u})}return n.sort((s,i)=>{var c,u;const o=((c=s.lastMessage)==null?void 0:c.timestamp)||0;return(((u=i.lastMessage)==null?void 0:u.timestamp)||0)-o})}catch(r){return console.error("Error getting chat list:",r),[]}},Zae=(e,t,r)=>{const n=G(V,`University Data/Inbox/${e}/lastMessage`),s=G(V,`University Data/Inbox/${e}/unreadCount/${t}`);return Gt(n,async i=>{const o=i.exists()?i.val():null,l=await J_(e,t);r({lastMessage:o,unreadCount:l})}),Gt(s,async i=>{const o=i.exists()?i.val():0,l=await le(n),c=l.exists()?l.val():null;r({lastMessage:c,unreadCount:o})}),()=>{Pf(n),Pf(s)}},eoe=(e,t,r)=>new Promise((n,s)=>{try{const o=`${Date.now()}_${e.name}`,l=`chat_media/${t}s/${o}`,c=DO(Tf,l),u=Ez(c,e);u.on("state_changed",d=>{const h=d.bytesTransferred/d.totalBytes*100;r({progress:h,status:"uploading"})},d=>{console.error("Upload error:",d),r({progress:0,status:"error",error:d.message}),s(d)},async()=>{try{const d=await IO(u.snapshot.ref);r({progress:100,status:"completed",url:d}),n(d)}catch(d){console.error("Error getting download URL:",d),s(d)}})}catch(i){console.error("Error starting upload:",i),s(i)}}),toe=e=>{const t=e.type.toLowerCase();return t.startsWith("image/")?"image":t.startsWith("video/")?"video":"file"},roe=e=>{if(e===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],n=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,n)*100)/100+" "+r[n]},A5=e=>e.replace(/\s+/g,"_").toLowerCase(),P5=e=>{const t=A5(e),r=G(V,`University Data/Presence/${t}`),n=()=>{Me(r,{status:"online",lastActive:Date.now()})},s=()=>{Me(r,{status:"offline",lastActive:Date.now()})};n(),iB(r).set({status:"offline",lastActive:Date.now()});const o=setInterval(()=>{document.visibilityState==="visible"&&n()},6e4),l=()=>{document.hidden?s():n()},c=()=>{s()},u=()=>{n()};return document.addEventListener("visibilitychange",l),window.addEventListener("blur",c),window.addEventListener("focus",u),()=>{clearInterval(o),document.removeEventListener("visibilitychange",l),window.removeEventListener("blur",c),window.removeEventListener("focus",u),s()}},noe=(e,t)=>{const r=A5(e),n=G(V,`University Data/Presence/${r}`);return Gt(n,s=>{s.exists()?t(s.val()):t(null)}),()=>{Pf(n)}},oC=e=>{const r=Date.now()-e,n=Math.floor(r/6e4),s=Math.floor(r/36e5),i=Math.floor(r/864e5);return n<1?"Active now":n<60?`Active ${n}m ago`:s<24?`Active ${s}h ago`:i===1?"Active yesterday":i<7?`Active ${i}d ago`:`Active ${new Date(e).toLocaleDateString()}`},Z_=()=>{var ye;const[e,t]=x.useState(!0),[r,n]=x.useState(null),[s,i]=x.useState([]),[o,l]=x.useState(null),[c,u]=x.useState([]),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(!1),[p,v]=x.useState(!0),[b,w]=x.useState(!1),[_,j]=x.useState(null),[N,E]=x.useState(new Map),T=x.useRef(null),S=x.useRef(null),D=x.useRef(null),O=x.useRef(null),C=x.useRef(null),k=x.useRef(new Map),I=x.useRef(new Map),R=()=>{var q;(q=T.current)==null||q.scrollIntoView({behavior:"smooth"})};x.useEffect(()=>{R()},[c]),x.useEffect(()=>((async()=>{try{const te=Tz();if(!(te!=null&&te.name)){console.error("No user found in storage"),t(!1);return}console.log(" Initializing chat for user:",te.name);const U=await Kae(te.name);if(!U){console.error("Could not detect user role"),t(!1);return}console.log(" User role detected:",U),n(U);const H=await Yae(U.schoolName,U.userName,U.role);console.log(" School members loaded:",H.length);const ee=H.map(ve=>({uid:ve.name.replace(/\s+/g,"_").toLowerCase(),name:ve.name,role:ve.role,initials:ve.initials})),B=await Jae(te.name,ee);i(B),B.forEach(ve=>{if(!k.current.has(ve.chatId)){const xe=te.name.replace(/\s+/g,"_").toLowerCase(),Ue=Zae(ve.chatId,xe,Te=>{i(tr=>tr.map(Rn=>Rn.chatId===ve.chatId?{...Rn,lastMessage:Te.lastMessage,unreadCount:Te.unreadCount}:Rn).sort((Rn,oo)=>{var Ie,Fe;const W=((Ie=Rn.lastMessage)==null?void 0:Ie.timestamp)||0;return(((Fe=oo.lastMessage)==null?void 0:Fe.timestamp)||0)-W}))});k.current.set(ve.chatId,Ue)}if(!I.current.has(ve.participant.name)){const xe=noe(ve.participant.name,Ue=>{Ue&&E(Te=>{const tr=new Map(Te);return tr.set(ve.participant.name,Ue),tr})});I.current.set(ve.participant.name,xe)}}),t(!1)}catch(te){console.error("Error initializing chat:",te),t(!1)}})(),()=>{C.current&&C.current(),k.current.forEach(te=>te()),k.current.clear(),I.current.forEach(te=>te()),I.current.clear()}),[]),x.useEffect(()=>{if(o&&r){C.current&&C.current();const q=Xae(r.userName,o.participant.name,te=>{u(te),setTimeout(()=>R(),100)});return C.current=q,k5(r.userName,o.participant.name),()=>{C.current&&C.current()}}},[o,r]);const M=async()=>{if(!(!d.trim()||!o||!r))try{w(!0),await aC(r.userName,o.participant.name,d.trim(),"text"),h("")}catch(q){console.error("Error sending message:",q)}finally{w(!1)}},P=async(q,te)=>{var H;const U=(H=q.target.files)==null?void 0:H[0];if(!(!U||!o||!r))try{j({progress:0,status:"uploading"});const ee=toe(U),B=await eoe(U,ee,ve=>{j(ve)});await aC(r.userName,o.participant.name,B,ee,U.name,U.size),j(null),q.target.value=""}catch(ee){console.error("Error uploading file:",ee),j(null)}},A=q=>{var te,U,H;y(!1),q==="image"?(te=D.current)==null||te.click():q==="video"?(U=O.current)==null||U.click():(H=S.current)==null||H.click()},$=q=>{const te=new Date(q),H=new Date().getTime()-te.getTime(),ee=Math.floor(H/6e4),B=Math.floor(H/36e5),ve=Math.floor(H/864e5);return ee<1?"Just now":ee<60?`${ee}m ago`:B<24?`${B}h ago`:ve<7?`${ve}d ago`:te.toLocaleDateString()},L=q=>new Date(q).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),z=q=>{const te=new Date(q),U=new Date,H=new Date(U);return H.setDate(H.getDate()-1),te.toDateString()===U.toDateString()?"Today":te.toDateString()===H.toDateString()?"Yesterday":te.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},K=(q,te)=>te?q==="seen"?a.jsx("span",{className:"text-xs text-blue-500 font-medium",children:"seen"}):a.jsx("span",{className:"text-xs text-gray-500",children:"sent"}):null,se=q=>(r&&(q.senderId,r.userName.replace(/\s+/g,"_").toLowerCase()),q.type==="image"?a.jsx("div",{className:"mb-1",children:a.jsx("img",{src:q.content,alt:"Shared image",className:"max-w-xs rounded-lg cursor-pointer",onClick:()=>window.open(q.content,"_blank")})}):q.type==="video"?a.jsx("div",{className:"mb-1",children:a.jsx("video",{src:q.content,controls:!0,className:"max-w-xs rounded-lg"})}):q.type==="file"?a.jsxs("a",{href:q.content,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 p-3 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-colors",children:[a.jsx(Ce,{className:"w-5 h-5"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium truncate",children:q.fileName||"File"}),q.fileSize&&a.jsx("p",{className:"text-xs opacity-75",children:roe(q.fileSize)})]}),a.jsx(dp,{className:"w-4 h-4"})]}):a.jsx("p",{className:"text-sm",children:q.content})),fe=(q,te)=>{const U=r&&q.senderId===r.userName.replace(/\s+/g,"_").toLowerCase(),H=te===0||z(c[te-1].timestamp)!==z(q.timestamp);return a.jsxs(SC.Fragment,{children:[H&&a.jsx("div",{className:"flex justify-center my-4",children:a.jsx("div",{className:"px-3 py-1 bg-gray-200 rounded-full text-xs text-gray-600",children:z(q.timestamp)})}),a.jsx("div",{className:`flex ${U?"justify-end":"justify-start"} mb-4`,children:a.jsxs("div",{className:`flex ${U?"flex-row-reverse":"flex-row"} items-end max-w-[70%]`,children:[!U&&a.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-semibold text-sm mr-2 flex-shrink-0",style:{backgroundColor:Rv((o==null?void 0:o.participant.name)||"")},children:(o==null?void 0:o.participant.initials)||"U"}),a.jsxs("div",{children:[a.jsx("div",{className:`px-4 py-2 rounded-2xl ${U?"bg-[#04ADEE] text-white rounded-br-sm":"bg-gray-200 text-gray-900 rounded-bl-sm"}`,children:se(q)}),a.jsxs("div",{className:`flex items-center space-x-1 mt-1 ${U?"justify-end":"justify-start"}`,children:[a.jsx("span",{className:"text-xs text-gray-500",children:L(q.timestamp)}),K(q.status,U)]})]})]})})]},q.messageId)},he=s.filter(q=>q.participant.name.toLowerCase().includes(f.toLowerCase()));return e?a.jsx("div",{className:"flex items-center justify-center h-screen bg-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE] mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading messages..."})]})}):a.jsxs("div",{className:"flex h-full overflow-hidden bg-white",children:[a.jsxs("div",{className:`${p?"block":"hidden"} lg:block w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col`,children:[a.jsxs("div",{className:"p-4 border-b border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search conversations...",value:f,onChange:q=>m(q.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-100 border-none rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#04ADEE]"})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:he.length===0?a.jsx("div",{className:"text-center py-12 px-4",children:a.jsx("p",{className:"text-gray-500",children:"No conversations found"})}):he.map(q=>{var te,U;return a.jsxs("button",{onClick:()=>{l(q),v(!1)},className:`w-full p-4 flex items-start space-x-3 hover:bg-gray-50 transition-colors border-b border-gray-100 ${(o==null?void 0:o.chatId)===q.chatId?"bg-blue-50":""}`,children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:Rv(q.participant.name)},children:q.participant.initials})}),a.jsxs("div",{className:"flex-1 min-w-0 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-sm truncate",children:q.participant.name}),N.has(q.participant.name)&&a.jsx("p",{className:"text-xs text-gray-500",children:((te=N.get(q.participant.name))==null?void 0:te.status)==="online"?a.jsx("span",{className:"text-green-600",children:"Active now"}):oC(N.get(q.participant.name).lastActive)})]}),q.lastMessage&&a.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0",children:$(q.lastMessage.timestamp)})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-sm text-gray-600 truncate",children:((U=q.lastMessage)==null?void 0:U.content)||"Start chatting"}),q.unreadCount>0&&a.jsx("span",{className:"ml-2 px-2 py-0.5 bg-[#04ADEE] text-white text-xs rounded-full flex-shrink-0",children:q.unreadCount})]})]})]},q.chatId)})})]}),o?a.jsxs("div",{className:`${p?"hidden":"flex"} lg:flex flex-1 flex-col`,children:[a.jsxs("div",{className:"bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a.jsx("button",{onClick:()=>v(!0),className:"lg:hidden p-2 hover:bg-gray-100 rounded-lg flex-shrink-0",children:a.jsx(cn,{className:"w-5 h-5"})}),a.jsx("div",{className:"relative flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold",style:{backgroundColor:Rv(o.participant.name)},children:o.participant.initials})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:o.participant.name}),N.has(o.participant.name)?a.jsx("p",{className:"text-xs text-gray-500",children:((ye=N.get(o.participant.name))==null?void 0:ye.status)==="online"?a.jsx("span",{className:"text-green-600",children:"Active now"}):oC(N.get(o.participant.name).lastActive)}):a.jsx("p",{className:"text-xs text-gray-500 capitalize",children:o.participant.role})]})]}),a.jsx("div",{className:"flex items-center space-x-2 flex-shrink-0",children:a.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(vW,{className:"w-5 h-5 text-gray-600"})})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:[c.length===0?a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Vc,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No messages yet. Start the conversation!"})]})}):c.map(fe),_&&_.status==="uploading"&&a.jsx("div",{className:"flex justify-end mb-4",children:a.jsx("div",{className:"bg-[#04ADEE] text-white px-4 py-2 rounded-2xl rounded-br-sm",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hx,{className:"w-4 h-4 animate-spin"}),a.jsxs("span",{className:"text-sm",children:["Uploading... ",Math.round(_.progress),"%"]})]})})}),a.jsx("div",{ref:T})]}),a.jsxs("div",{className:"bg-white border-t border-gray-200 px-6 py-4",children:[a.jsxs("div",{className:"flex items-end space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:()=>y(!g),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(xW,{className:"w-5 h-5 text-gray-600"})}),g&&a.jsxs("div",{className:"absolute bottom-full mb-2 left-0 bg-white rounded-lg shadow-lg border border-gray-200 py-2 w-48 z-10",children:[a.jsxs("button",{onClick:()=>A("image"),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(GT,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Image"})]}),a.jsxs("button",{onClick:()=>A("video"),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(Wl,{className:"w-5 h-5 text-purple-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"Video"})]}),a.jsxs("button",{onClick:()=>A("file"),className:"w-full px-4 py-2 flex items-center space-x-3 hover:bg-gray-50 transition-colors text-left",children:[a.jsx(Ce,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm text-gray-700",children:"File"})]})]})]}),a.jsx("div",{className:"flex-1 relative",children:a.jsx("input",{type:"text",value:d,onChange:q=>h(q.target.value),onKeyDown:q=>{q.key==="Enter"&&!b&&d.trim()&&(q.preventDefault(),M())},placeholder:"Type a message...",className:"w-full px-4 py-3 bg-gray-100 rounded-2xl text-sm focus:outline-none focus:ring-2 focus:ring-[#04ADEE]",disabled:_!==null})}),a.jsx("button",{onClick:M,disabled:!d.trim()||b||_!==null,className:"p-3 bg-[#04ADEE] hover:bg-[#0396d5] disabled:bg-gray-300 disabled:cursor-not-allowed rounded-full transition-colors",children:b?a.jsx(hx,{className:"w-5 h-5 text-white animate-spin"}):a.jsx(Vc,{className:"w-5 h-5 text-white"})})]}),a.jsx("input",{ref:D,type:"file",className:"hidden",accept:"image/*",onChange:q=>P(q)}),a.jsx("input",{ref:O,type:"file",className:"hidden",accept:"video/*",onChange:q=>P(q)}),a.jsx("input",{ref:S,type:"file",className:"hidden",accept:".pdf,.doc,.docx,.txt,.xlsx,.xls,.ppt,.pptx",onChange:q=>P(q)})]})]}):a.jsx("div",{className:"hidden lg:flex flex-1 items-center justify-center bg-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-24 h-24 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(Vc,{className:"w-12 h-12 text-gray-400"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Select a conversation"}),a.jsx("p",{className:"text-gray-500",children:"Choose a conversation from the list to start messaging"})]})})]})},soe=({selectedEssayTitle:e,returnToProfile:t,onBackToProfile:r})=>{var Rn,oo;const[n,s]=x.useState([]),[i,o]=x.useState(!1),[l,c]=x.useState(null),[u,d]=x.useState(""),[h,f]=x.useState("personal_statement"),[m,g]=x.useState(""),[y,p]=x.useState(!0),[v,b]=x.useState(!1),[w,_]=x.useState(""),[j,N]=x.useState(!1),[E,T]=x.useState("draft"),[S,D]=x.useState("list"),[O,C]=x.useState(0),k=x.useRef(null);x.useRef(null);const I=x.useRef(null),R=lt.getStoredUser(),M=(R==null?void 0:R.name)||"Unknown Student",P=["Arial","Times New Roman","Georgia","Calibri","Verdana","Helvetica","Courier New","Palatino"],A=[12,14,16,18,20,22,24],$=W=>{switch(W){case"personal_statement":return"Personal Statement";case"supplement":return"Supplemental Essay";case"activity_list":return"Activity List";default:return W}},L=W=>{switch(W){case"personal_statement":return"bg-purple-100 text-purple-700";case"supplement":return"bg-blue-100 text-blue-700";case"activity_list":return"bg-green-100 text-green-700";default:return"bg-gray-100 text-gray-700"}},z=W=>{const me=new Date(W),Ie=me.getDate(),Fe=["th","st","nd","rd"][Ie%10>3||Math.floor(Ie/10)===1?0:Ie%10],vt=["January","February","March","April","May","June","July","August","September","October","November","December"][me.getMonth()],Ze=me.getFullYear(),bs=me.getHours(),na=me.getMinutes().toString().padStart(2,"0"),fi=bs>=12?"PM":"AM",lo=bs%12||12;return`${Ie}${Fe} ${vt} ${Ze} at ${lo}:${na} ${fi}`},K=()=>{const W=n.length,me=n.filter(Fe=>Fe.status==="reviewed").length,Ie=n.filter(Fe=>Fe.status==="submitted").length;return{total:W,reviewed:me,submitted:Ie}},se=()=>n.filter(W=>W.status===E),fe=W=>new Date(W).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),he=W=>{c(W),D("editor")},ye=()=>{t&&r?r():(D("list"),c(null))},q=W=>{const me=document.createElement("div");return me.innerHTML=W,me.querySelectorAll("*").forEach(Fe=>{Array.from(Fe.attributes).forEach(Be=>{Be.name.startsWith("data-")&&Fe.removeAttribute(Be.name)})}),me.innerHTML},te=W=>{if(!I.current||!l)return;const me=I.current,Ie=q(l.content);if(me.innerHTML=Ie,W.length===0)return;[...W].sort((Be,vt)=>vt.start_position-Be.start_position).forEach(Be=>{const vt=document.createTreeWalker(me,NodeFilter.SHOW_TEXT,null);let Ze=0,bs=null,na=0,fi=null,lo=0,co=!1;for(;vt.nextNode();){const ss=vt.currentNode,X=ss.length;if(!co&&Ze+X>Be.start_position&&(bs=ss,na=Be.start_position-Ze,co=!0),co&&Ze+X>=Be.end_position){fi=ss,lo=Be.end_position-Ze;break}Ze+=X}if(bs&&fi){const ss=document.createRange();ss.setStart(bs,na),ss.setEnd(fi,lo);const X=document.createElement("mark");X.className="bg-yellow-200 cursor-pointer hover:bg-yellow-300 transition-colors relative group",X.setAttribute("data-comment-id",Be.id),X.title=Be.comment_text;try{ss.surroundContents(X);const J=document.createElement("span");J.className="invisible group-hover:visible absolute bottom-full left-0 mb-2 w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-10 pointer-events-none",J.innerHTML=`<div class="font-semibold mb-1">${Be.counselor_name}</div><div>${Be.comment_text}</div>`,X.appendChild(J)}catch(J){console.warn("Could not apply highlight",J)}}})},U=W=>W.replace(/<[^>]*>/g," ").replace(/&nbsp;/g," ").trim().split(/\s+/).filter(Fe=>Fe.length>0).length,H=W=>{document.execCommand(W,!1),k.current&&l&&ee()},ee=()=>{if(k.current&&l){const W=k.current.innerHTML,me=U(W);c({...l,content:W,wordCount:me})}};x.useEffect(()=>{const W=G(V,`University Data/Essays/${M}`),me=Gt(W,Ie=>{if(!Ie.exists()){s([]),p(!1);return}const Fe=[],Be=Ie.val();Object.keys(Be).forEach(vt=>{const Ze=Be[vt];Fe.push({id:vt,title:vt,type:Ze.essayType||"personal_statement",content:Ze.essayText||"",wordCount:Ze.wordCount||0,status:Ze.status||"draft",createdAt:Ze.createdAt||new Date().toISOString().split("T")[0],lastModified:Ze.lastModified||new Date().toISOString().split("T")[0],submittedAt:Ze.submittedAt||void 0,universityName:Ze.universityName||void 0,fontFamily:Ze.fontFamily||"Arial",fontSize:Ze.fontSize||14,reviewData:Ze.reviewData||void 0,activities:Ze.activities||void 0})}),Fe.sort((vt,Ze)=>new Date(Ze.createdAt).getTime()-new Date(vt.createdAt).getTime()),s(Fe),p(!1)});return()=>me()},[M]);const B=async W=>{const me=G(V,`University Data/Essays/${M}/${W.title}`);await Me(me,{essayTitle:W.title,essayText:W.content,essayType:W.type,status:W.status,wordCount:W.wordCount,createdAt:W.createdAt,lastModified:W.lastModified,submittedAt:W.submittedAt||null,universityName:W.universityName||null,fontFamily:W.fontFamily,fontSize:W.fontSize,reviewData:W.reviewData||null,activities:W.activities||null})},ve=async()=>{if(!u.trim())return;if(h==="supplement"&&!m.trim()){alert("Please enter the university name for this supplementary essay");return}const W={id:u,title:u,type:h,content:"",wordCount:0,status:"draft",createdAt:new Date().toISOString().split("T")[0],lastModified:new Date().toISOString().split("T")[0],universityName:h==="supplement"?m:void 0,fontFamily:"Arial",fontSize:14,activities:h==="activity_list"?[]:void 0};await B(W),c(W),D("editor"),o(!1),d(""),f("personal_statement"),g("")},xe=async W=>{if(!l)return;const me={...l,fontFamily:W};c(me),await B(me)},Ue=async W=>{if(!l)return;const me={...l,fontSize:W};c(me),await B(me)},Te=W=>{_(W),b(!0),setTimeout(()=>{b(!1)},3e3)},tr=async()=>{if(!l||!k.current)return;const W={...l,lastModified:new Date().toISOString().split("T")[0],status:"draft"};await B(W),c(W),Te("Essay saved as draft!")},hi=async()=>{if(!l)return;const W={...l,status:"submitted",lastModified:new Date().toISOString().split("T")[0],submittedAt:new Date().toISOString()};await B(W),c(W),Te("Essay submitted for review!")};return x.useEffect(()=>{k.current&&l&&(k.current.innerHTML=l.content)},[l==null?void 0:l.id]),x.useEffect(()=>{if(l&&l.status==="reviewed"){const W=G(V,`University Data/Essays/${M}/${l.title}`);Gt(W,me=>{if(me.exists()){const Ie=me.val();C(Ie.wordCount||0)}},{onlyOnce:!0})}},[l==null?void 0:l.id,M]),x.useEffect(()=>{var W;if(l&&l.status==="reviewed"&&I.current){const me=q(l.content);I.current.innerHTML=me,(W=l.reviewData)!=null&&W.inlineComments&&l.reviewData.inlineComments.length>0&&setTimeout(()=>{te(l.reviewData.inlineComments)},50)}},[l==null?void 0:l.id]),x.useEffect(()=>{if(e&&n.length>0&&!l){const W=n.find(me=>me.title===e);W&&(c(W),D("editor"))}},[e,n,l]),y?a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):a.jsxs("div",{className:"p-4",children:[v&&a.jsx("div",{className:"fixed top-4 right-4 z-50 animate-in fade-in slide-in-from-top-2 duration-300",children:a.jsxs("div",{className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-3",children:[a.jsx(yr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:w})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto",children:[S==="list"&&a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Essay Editor"}),a.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:"Write and manage your college application essays"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center gap-1.5 bg-blue-600 text-white px-3 py-1.5 text-sm rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(br,{className:"w-4 h-4"}),"New Essay"]})]}),i&&a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Create New Essay"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Title"}),a.jsx("input",{type:"text",value:u,onChange:W=>d(W.target.value),placeholder:"e.g., Common App Personal Statement",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Essay Type"}),a.jsxs("select",{value:h,onChange:W=>f(W.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"personal_statement",children:"Personal Statement"}),a.jsx("option",{value:"supplement",children:"Supplemental Essay"}),a.jsx("option",{value:"activity_list",children:"Activity List"})]})]}),h==="supplement"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"University Name"}),a.jsx("input",{type:"text",value:m,onChange:W=>g(W.target.value),placeholder:"e.g., Harvard University",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ve,className:"px-3 py-1.5 text-sm bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Essay"}),a.jsx("button",{onClick:()=>{o(!1),d(""),f("personal_statement"),g("")},className:"px-3 py-1.5 text-sm border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"})]})]})]}),n.length>0&&S==="list"&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-blue-600 mb-1",children:"Total Essays"}),a.jsx("p",{className:"text-2xl font-bold text-blue-900",children:K().total})]}),a.jsx("div",{className:"p-2 bg-blue-200 rounded-lg",children:a.jsx(Ce,{className:"w-5 h-5 text-blue-700"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-green-600 mb-1",children:"Submitted"}),a.jsx("p",{className:"text-2xl font-bold text-green-900",children:K().submitted})]}),a.jsx("div",{className:"p-2 bg-green-200 rounded-lg",children:a.jsx(Vc,{className:"w-5 h-5 text-green-700"})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-purple-600 mb-1",children:"Reviewed"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:K().reviewed})]}),a.jsx("div",{className:"p-2 bg-purple-200 rounded-lg",children:a.jsx(yr,{className:"w-5 h-5 text-purple-700"})})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("button",{onClick:()=>T("draft"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${E==="draft"?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"}`,children:"Drafts"}),a.jsx("button",{onClick:()=>T("submitted"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${E==="submitted"?"bg-green-100 text-green-700":"text-gray-600 hover:bg-gray-100"}`,children:"Submitted"}),a.jsx("button",{onClick:()=>T("reviewed"),className:`px-4 py-2 text-sm font-medium rounded-lg transition-all ${E==="reviewed"?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"}`,children:"Reviewed"})]}),a.jsx("div",{className:"space-y-3",children:se().length>0?se().map(W=>a.jsx("div",{onClick:()=>he(W),className:"bg-white border border-gray-200 rounded-xl p-5 cursor-pointer transition-all hover:border-blue-400 hover:shadow-md group",children:a.jsxs("div",{className:"flex items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors",children:W.title}),a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${L(W.type)}`,children:$(W.type)}),W.universityName&&a.jsxs("span",{className:"text-xs text-gray-600 italic",children:["for ",W.universityName]})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-4 h-4"}),a.jsxs("span",{children:[W.wordCount," words"]})]}),W.status==="reviewed"&&W.reviewData?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Reviewed by"}),a.jsx("span",{className:"font-medium text-gray-900",children:W.reviewData.reviewedBy})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"on"}),a.jsx("span",{className:"font-medium text-gray-900",children:z(W.reviewData.reviewedAt)})]})]}):W.status==="submitted"&&W.submittedAt?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Submitted on"}),a.jsx("span",{className:"font-medium text-gray-900",children:z(W.submittedAt)})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-gray-500",children:"Last modified"}),a.jsx("span",{className:"font-medium text-gray-900",children:fe(W.lastModified)})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[W.status==="draft"&&a.jsxs("div",{className:"flex items-center gap-2 text-blue-600 bg-blue-50 px-4 py-2 rounded-lg",children:[a.jsx(uW,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Continue editing"})]}),W.status==="submitted"&&a.jsxs("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 px-4 py-2 rounded-lg",children:[a.jsx(yr,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Awaiting review"})]}),W.status==="reviewed"&&a.jsxs("div",{className:"flex items-center gap-2 text-purple-600 bg-purple-50 px-4 py-2 rounded-lg",children:[a.jsx(Ha,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"View feedback"})]})]})]})},W.id)):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsxs("p",{className:"text-base text-gray-500",children:["No ",E," essays yet"]})]})})]})]}),S==="editor"&&l?l.status==="reviewed"?a.jsxs("div",{className:"-mx-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[a.jsxs("button",{onClick:ye,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(cn,{className:"w-4 h-4"}),t?"Back to Profile":"Back to Essays"]}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-1",children:l.title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[$(l.type),l.universityName&&`  ${l.universityName}`,O>0&&`  ${O} words`]})]}),((Rn=l.reviewData)==null?void 0:Rn.rubricFeedback)&&a.jsxs("button",{onClick:()=>N(!j),className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Vt,{className:"w-4 h-4"}),j?"Hide":"View"," Feedback"]})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:j?"grid grid-cols-[60%_40%] gap-6 max-w-7xl mx-auto items-start":"max-w-5xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] sticky top-6",children:a.jsx("div",{className:"overflow-y-auto flex-1 p-8",children:a.jsx("div",{ref:I,contentEditable:!1,className:"prose prose-lg max-w-none text-slate-700",style:{fontFamily:l.fontFamily,fontSize:`${l.fontSize}pt`,lineHeight:"1.6"}})})}),j&&((oo=l.reviewData)==null?void 0:oo.rubricFeedback)&&a.jsxs("div",{className:"sticky top-6 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] self-start",children:[a.jsx("div",{className:"p-5 border-b border-emerald-200 bg-gradient-to-br from-emerald-50 to-blue-50 flex-shrink-0",children:a.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-5 h-5 text-emerald-600"}),"Rubric Feedback"]})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-5 min-h-0",children:a.jsx("div",{className:"space-y-3",children:l.reviewData.rubricFeedback.map((W,me)=>a.jsxs("div",{className:"bg-white border border-emerald-200 rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-2.5 mb-2.5",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full flex-shrink-0",children:me+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:W.criterionName}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:W.criterionDescription})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-emerald-100 px-1.5 py-0.5 rounded flex-shrink-0",children:[a.jsx(Vt,{className:"w-3.5 h-3.5 text-emerald-700 fill-emerald-700"}),a.jsxs("span",{className:"text-xs font-bold text-emerald-700",children:[W.rating,"/5"]})]})]}),W.rating===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-xs text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-red-800 mb-0.5",children:"What's Missing:"}),a.jsx("p",{className:"text-xs text-red-700 leading-relaxed",children:W.whatsMissing})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-0.5",children:"How to Improve:"}),a.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:W.howToImprove})]})]})]},me))})})]})]})})]}):a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsxs("div",{className:"border-b border-gray-200 px-6 py-4 bg-gradient-to-r from-gray-50 to-white",children:[a.jsxs("button",{onClick:ye,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(cn,{className:"w-4 h-4"}),t?"Back to Profile":"Back to Essays"]}),a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:l.title}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-xs px-2.5 py-1 rounded-full ${L(l.type)}`,children:$(l.type)}),l.universityName&&a.jsxs("span",{className:"text-sm text-gray-600 italic",children:["for ",l.universityName]})]})]}),a.jsx("div",{className:"border-b border-gray-200 p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[l.type!=="activity_list"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>H("bold"),disabled:l.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Bold",children:a.jsx(oW,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>H("italic"),disabled:l.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Italic",children:a.jsx(gW,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>H("underline"),disabled:l.status==="submitted",className:"p-1.5 hover:bg-gray-100 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Underline",children:a.jsx(NW,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{className:"border-l border-gray-300 h-5"}),a.jsx("select",{value:l.fontFamily,onChange:W=>xe(W.target.value),disabled:l.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{fontFamily:l.fontFamily},children:P.map(W=>a.jsx("option",{value:W,style:{fontFamily:W},children:W},W))}),a.jsx("select",{value:l.fontSize,onChange:W=>Ue(Number(W.target.value)),disabled:l.status==="submitted",className:"px-2 py-1 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:A.map(W=>a.jsxs("option",{value:W,children:[W,"pt"]},W))}),a.jsx("div",{className:"border-l border-gray-300 h-5"}),a.jsxs("span",{className:"text-xs font-medium text-gray-600",children:[l.wordCount," words"]})]}):a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(L1,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Activity List"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:tr,disabled:l.status==="submitted",className:"flex items-center gap-1.5 px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Bi,{className:"w-3.5 h-3.5"}),"Save Draft"]}),a.jsxs("button",{onClick:hi,disabled:l.status==="submitted"||l.wordCount===0,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Vc,{className:"w-3.5 h-3.5"}),"Submit for Review"]})]})]})}),a.jsxs("div",{children:[l.type==="activity_list"?a.jsx("div",{className:"essay-container p-6 min-h-[500px]",children:a.jsxs("div",{className:"space-y-4",children:[l.activities&&l.activities.length>0?l.activities.map((W,me)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h4",{className:"text-sm font-semibold text-gray-700",children:["Activity ",me+1]}),l.status!=="submitted"&&a.jsx("button",{onClick:()=>{var Fe;const Ie={...l,activities:(Fe=l.activities)==null?void 0:Fe.filter(Be=>Be.id!==W.id)};c(Ie),B(Ie)},className:"text-red-500 hover:text-red-700",children:a.jsx(un,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Activity Name"}),a.jsx("input",{type:"text",value:W.name,onChange:Ie=>{var Be;const Fe={...l,activities:(Be=l.activities)==null?void 0:Be.map(vt=>vt.id===W.id?{...vt,name:Ie.target.value}:vt)};c(Fe)},onBlur:()=>B(l),disabled:l.status==="submitted",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"e.g., Varsity Basketball Team"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Description"}),a.jsx("textarea",{value:W.description,onChange:Ie=>{var Be;const Fe={...l,activities:(Be=l.activities)==null?void 0:Be.map(vt=>vt.id===W.id?{...vt,description:Ie.target.value}:vt)};c(Fe)},onBlur:()=>B(l),disabled:l.status==="submitted",className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none disabled:bg-gray-100 disabled:cursor-not-allowed",placeholder:"Describe your role, achievements, and what you learned...",rows:4})]})]})]},W.id)):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(L1,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{className:"text-sm",children:'No activities added yet. Click "Add Activity" to get started.'})]}),l.status!=="submitted"&&a.jsxs("button",{onClick:()=>{const W={id:Date.now().toString(),name:"",description:""},me={...l,activities:[...l.activities||[],W]};c(me),B(me)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 text-sm border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors text-gray-600 hover:text-blue-600",children:[a.jsx(br,{className:"w-4 h-4"}),"Add Activity"]})]})}):a.jsx("div",{ref:k,contentEditable:l.status!=="submitted",onInput:ee,className:`essay-container p-6 min-h-[500px] focus:outline-none ${l.status==="submitted"?"bg-gray-50 cursor-not-allowed":""}`,style:{fontSize:`${l.fontSize}pt`,lineHeight:"1.6",fontFamily:l.fontFamily}}),l.status==="submitted"&&a.jsx("div",{className:"border-t border-gray-200 p-3 bg-green-50",children:a.jsxs("p",{className:"text-xs text-green-700 flex items-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"This essay has been submitted for review and cannot be edited."]})})]})]}):null]})]})},ioe=({onLogout:e,user:t})=>{const[r,n]=x.useState("profile"),[s,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(null),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(null),[p,v]=x.useState(!1),b=x.useRef(null);x.useEffect(()=>(t!=null&&t.name&&(b.current=P5(t.name)),()=>{b.current&&b.current()}),[t==null?void 0:t.name]);const w=()=>{switch(r){case"profile":return a.jsx(sC,{user:t,onNavigateToEssayEditor:_=>{_?(y(_),v(!0)):(y(null),v(!1)),n("essay-editor")}});case"admit-profiles":return a.jsx(Rae,{onViewProfile:_=>{u(_),n("profile-details")}});case"scholarships":return a.jsx(Uae,{});case"applications":return a.jsx(Wae,{});case"resources":return a.jsx(Vae,{});case"counselors":return a.jsx(Gae,{onBookMeeting:(_,j)=>{h(_),m(j),n("meeting-booking")}});case"chat":return a.jsx(Z_,{userRole:"student"});case"essay-editor":return a.jsx(soe,{selectedEssayTitle:g,returnToProfile:p,onBackToProfile:()=>{n("profile"),y(null),v(!1)}});case"profile-details":return c?a.jsx(Mae,{profileId:c,onBack:()=>n("admit-profiles")}):null;case"meeting-booking":return a.jsx(Q_,{counselorEmail:d,counselorName:f,onBack:()=>n("counselors")});default:return a.jsx(sC,{user:t})}};return a.jsxs("div",{className:"flex h-screen bg-gray-50 relative overflow-hidden",children:[a.jsx("button",{onClick:()=>i(!s),className:"lg:hidden fixed top-4 left-4 z-50 bg-white p-2 rounded-lg shadow-lg border border-gray-200 touch-manipulation",children:s?a.jsx(rt,{className:"w-6 h-6"}):a.jsx(nw,{className:"w-6 h-6"})}),s&&a.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30 touch-manipulation",onClick:()=>i(!1)}),a.jsx(CW,{currentPage:r,setCurrentPage:n,onLogout:e,isOpen:s,onClose:()=>i(!1),isCollapsed:o,onToggleCollapse:()=>l(!o)}),a.jsx("main",{className:"flex-1 overflow-y-auto lg:ml-0 w-full min-w-0",children:w()})]})},aoe=({onLogin:e,onCounselorLogin:t})=>{const[r,n]=x.useState(""),[s,i]=x.useState(""),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState(""),[f,m]=x.useState(""),[g,y]=x.useState(""),p=async b=>{b.preventDefault(),h(""),m(""),y(""),u(!0);try{const w=await MO.authenticateUser({email:r,password:s});if(w.success&&w.user)if(console.log("Login successful:",w.user),(w.user.role==="pool_management"||w.user.role==="essay")&&t){console.log("Routing to counselor dashboard");const _={id:w.user.username,email:w.user.username,name:w.user.name,role:w.user.role};t(_)}else console.log("Routing to student dashboard"),e(w.user);else switch(w.error){case"USER_NOT_FOUND":h(w.message||"Email not found");break;case"WRONG_PASSWORD":m(w.message||"Incorrect password");break;case"NETWORK_ERROR":default:y(w.message||"Login failed. Please try again.");break}}catch(w){console.error("Login error:",w),y("Login failed. Please try again.")}finally{u(!1)}},v=()=>{n("kananelobutielliot@gmail.com"),i("12345"),h(""),m(""),y("")};return a.jsxs("div",{className:"min-h-screen bg-[#04adee] flex flex-col",children:[a.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center px-6 py-8",children:[a.jsx("div",{className:"mb-6",children:a.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-20 h-20 object-contain opacity-90"})}),a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"EduCare"}),a.jsx("p",{className:"text-white text-lg font-medium mb-2",children:"University Guidance"}),a.jsx("p",{className:"text-white text-center text-sm opacity-90",children:"Your academic journey starts here"})]}),a.jsxs("div",{className:"bg-white rounded-t-3xl px-6 py-8 shadow-2xl",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600",children:"Sign in to continue your journey"})]}),g&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-xl",children:a.jsx("p",{className:"text-red-600 text-sm",children:g})}),a.jsxs("form",{onSubmit:p,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(sd,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:r,onChange:b=>n(b.target.value),className:`w-full pl-12 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${d?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your email",required:!0})]}),d&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:d})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(XT,{className:"absolute left-4 top-4 w-5 h-5 text-gray-400"}),a.jsx("input",{type:o?"text":"password",value:s,onChange:b=>i(b.target.value),className:`w-full pl-12 pr-12 py-4 border rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-base ${f?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>l(!o),className:"absolute right-4 top-4 text-gray-400",children:o?a.jsx(HT,{className:"w-5 h-5"}):a.jsx(qT,{className:"w-5 h-5"})})]}),f&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:f})]}),a.jsx("button",{type:"submit",disabled:c,className:"w-full bg-[#04adee] text-white py-4 rounded-xl font-semibold text-base disabled:opacity-50 shadow-lg",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Signing in..."]}):"Sign In"}),a.jsx("button",{type:"button",onClick:v,className:"w-full bg-gray-100 text-gray-700 py-3 rounded-xl font-medium text-sm",children:"Use Demo Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsx("p",{className:"text-xs text-gray-500",children:"Demo: kananelobutielliot@gmail.com / 12345"})})]})]})},bh=(e,t=2e3)=>{const[r,n]=x.useState(0);return x.useEffect(()=>{let s,i;const o=l=>{s||(s=l);const c=Math.min((l-s)/t,1);n(Math.floor(c*e)),c<1&&(i=requestAnimationFrame(o))};return i=requestAnimationFrame(o),()=>cancelAnimationFrame(i)},[e,t]),r},ooe=({percentage:e,className:t="bg-[#04adee]"})=>{const[r,n]=x.useState(0);return x.useEffect(()=>{const s=setTimeout(()=>n(e),100);return()=>clearTimeout(s)},[e]),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:`${t} h-2 rounded-full transition-all duration-1000 ease-out`,style:{width:`${r}%`}})})},lC=({percentage:e,size:t=80,strokeWidth:r=6,color:n="#04adee"})=>{const[s,i]=x.useState(0);x.useEffect(()=>{const u=setTimeout(()=>i(e),100);return()=>clearTimeout(u)},[e]);const o=(t-r)/2,l=o*2*Math.PI,c=l-s/100*l;return a.jsxs("div",{className:"relative inline-flex items-center justify-center",children:[a.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:"#e5e7eb",strokeWidth:r,fill:"transparent"}),a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:n,strokeWidth:r,fill:"transparent",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Math.round(s),"%"]})})]})},cC=({user:e})=>{const[t,r]=x.useState(!1),[n,s]=x.useState(!1),i=()=>{if(e!=null&&e.name)return e.name;const k=lt.getStoredUser();return k!=null&&k.name?(console.log("Using stored user name:",k.name),k.name):"Student"},o=()=>{if((e==null?void 0:e.averageGrade)!==void 0)return console.log("Using average grade from user prop:",e.averageGrade),e.averageGrade;const k=lt.getStoredUser();return(k==null?void 0:k.averageGrade)!==void 0?(console.log("Using stored average grade:",k.averageGrade),k.averageGrade):(console.log("No average grade found, using default"),89)},l=()=>{if(e!=null&&e.subjectGrades)return console.log("Using subject grades from user prop:",e.subjectGrades),e.subjectGrades;const k=lt.getStoredUser();return k!=null&&k.subjectGrades?(console.log("Using stored subject grades:",k.subjectGrades),k.subjectGrades):(console.log("No subject grades found, using defaults"),{Mathematics:88,English:92,Science:85,History:90,"Foreign Language":87})},[c,u]=x.useState({studentName:i(),currentGPA:o(),subjects:l(),classRank:15,totalStudents:320,satScore:1450,careerInterests:["Science","Technology","Engineering"],age:17,nationality:"United States",personalStatement:"Passionate about technology and innovation, I aim to pursue computer science to create solutions that impact society positively. My journey began when I first encountered programming in high school, and since then, I have been fascinated by the endless possibilities that technology offers to solve real-world problems.",activities:["Debate Club President","Varsity Soccer","Math Olympiad","Volunteer Tutor"],specialCircumstances:"First-generation college student, overcame family financial hardship",financialBudget:5e4}),[d,h]=x.useState(c),f=bh(c.currentGPA),m=bh(c.classRank),g=bh(c.totalStudents),y=bh(c.satScore),p=()=>{r(!0),h(c)},v=async()=>{s(!0);try{const k=lt.getStoredUser(),I=(k==null?void 0:k.school)||(e==null?void 0:e.school),R=(k==null?void 0:k.username)||(e==null?void 0:e.username);if(!I||!R){console.error("Missing school or username information"),alert("Error: Missing user information. Please log in again."),s(!1);return}console.log("Saving profile data for:",R,"in school:",I);const M={Activities:{},Age:d.age.toString(),Nationality:d.nationality,SAT:d.satScore.toString(),"Career Interests":{},"Special Circumstances":d.specialCircumstances,"Personal Statement":d.personalStatement,Budget:d.financialBudget.toString()};d.activities.forEach((A,$)=>{A.trim()&&(M.Activities[A.trim()]="true")}),d.careerInterests.forEach((A,$)=>{A.trim()&&(M["Career Interests"][A.trim()]="true")});const P=G(V,`Schoolss/${I}/University Profiles/${R}`);await Me(P,M),console.log("Profile data saved successfully to Firebase!"),u(d),r(!1),alert("Profile saved successfully!")}catch(k){console.error("Error saving profile data:",k),alert("Error saving profile. Please try again.")}finally{s(!1)}},b=()=>{h(c),r(!1)},w=(k,I)=>{h(R=>({...R,[k]:I}))},_=()=>{d.activities.length<10&&h(k=>({...k,activities:[...k.activities,""]}))},j=k=>{h(I=>({...I,activities:I.activities.filter((R,M)=>M!==k)}))},N=(k,I)=>{h(R=>({...R,activities:R.activities.map((M,P)=>P===k?I:M)}))},E=()=>{d.careerInterests.length<10&&h(k=>({...k,careerInterests:[...k.careerInterests,""]}))},T=k=>{h(I=>({...I,careerInterests:I.careerInterests.filter((R,M)=>M!==k)}))},S=(k,I)=>{h(R=>({...R,careerInterests:R.careerInterests.map((M,P)=>P===k?I:M)}))},D=Object.entries(c.subjects);c.currentGPA;const O=D.reduce((k,I)=>k[1]>I[1]?k:I),C=D.reduce((k,I)=>k[1]<I[1]?k:I);return D.filter(([k,I])=>I<85),a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-4 py-6",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("h1",{className:"text-xl font-bold mb-1",children:"Academic Analytics"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"Performance Overview"})]})}),a.jsxs("div",{className:"px-4 -mt-4 pb-6",children:[a.jsx("div",{className:"mb-4",children:t?a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{onClick:v,disabled:n,className:"flex-1 bg-green-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:n?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Bi,{className:"w-4 h-4 mr-2 inline"}),"Save Changes"]})}),a.jsxs("button",{onClick:b,className:"flex-1 bg-gray-500 text-white py-3 rounded-xl font-semibold text-sm active:scale-95 transition-transform",children:[a.jsx(rt,{className:"w-4 h-4 mr-2 inline"}),"Cancel"]})]}):a.jsxs("button",{onClick:p,className:"w-full bg-white text-[#04adee] py-3 rounded-xl font-semibold text-sm border border-[#04adee] active:scale-95 transition-transform",children:[a.jsx(JT,{className:"w-4 h-4 mr-2 inline"}),"Edit Profile"]})}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-4 flex items-center",children:[a.jsx(iW,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Performance Metrics"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(lC,{percentage:f,color:"#04adee"}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Overall Average"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(lC,{percentage:Math.round(m/g*100),color:"#10b981"}),a.jsx("div",{className:"text-xs text-gray-600 mt-1",children:"Class Percentile"})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-[#04adee]",children:[f,"%"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"GPA"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsxs("div",{className:"text-lg font-bold text-green-600",children:["#",m]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Rank"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-lg font-bold text-purple-600",children:y}),a.jsx("div",{className:"text-xs text-gray-600",children:"SAT"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(bW,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Subject Analysis"]}),a.jsx("div",{className:"space-y-3 mb-4",children:Object.entries(c.subjects).map(([k,I])=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"font-medium text-sm text-gray-700",children:k}),a.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[I,"%"]})]}),a.jsx(ooe,{percentage:I})]},k))}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-green-700 font-medium",children:"Strongest Subject"}),a.jsx("div",{className:"text-sm font-bold text-green-800",children:O[0]}),a.jsxs("div",{className:"text-xs text-green-600",children:[O[1],"%"]})]}),a.jsxs("div",{className:"bg-orange-50 rounded-lg p-3",children:[a.jsx("div",{className:"text-xs text-orange-700 font-medium",children:"Focus Area"}),a.jsx("div",{className:"text-sm font-bold text-orange-800",children:C[0]}),a.jsxs("div",{className:"text-xs text-orange-600",children:[C[1],"%"]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h2",{className:"text-base font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(to,{className:"w-5 h-5 text-[#04adee] mr-2"}),"Application Profile"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"SAT Score"}),t?a.jsx("input",{type:"number",value:d.satScore,onChange:k=>w("satScore",parseInt(k.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:a.jsx("div",{className:"text-sm font-bold text-[#04adee]",children:y})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Age"}),t?a.jsx("input",{type:"number",value:d.age,onChange:k=>w("age",parseInt(k.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg text-center",children:a.jsx("div",{className:"text-sm font-medium",children:c.age})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nationality"}),t?a.jsx("input",{type:"text",value:d.nationality,onChange:k=>w("nationality",k.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsx("div",{className:"text-sm font-medium",children:c.nationality})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Financial Budget"}),t?a.jsx("input",{type:"number",value:d.financialBudget,onChange:k=>w("financialBudget",parseInt(k.target.value)),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white"}):a.jsx("div",{className:"bg-gray-50 p-2 rounded-lg",children:a.jsxs("div",{className:"text-sm font-medium",children:["$",c.financialBudget.toLocaleString()]})})]})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Career Interests"}),t?a.jsxs("div",{className:"space-y-2",children:[d.careerInterests.map((k,I)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:k,onChange:R=>S(I,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter career interest"}),a.jsx("button",{type:"button",onClick:()=>T(I),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:a.jsx(un,{className:"w-4 h-4"})})]},I)),d.careerInterests.length<10&&a.jsxs("button",{type:"button",onClick:E,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[a.jsx(br,{className:"w-4 h-4 mr-2"}),"Add Career Interest"]})]}):a.jsx("div",{className:"flex flex-wrap gap-2",children:c.careerInterests.map((k,I)=>a.jsx("span",{className:"bg-gray-50 text-[#04adee] px-3 py-1 rounded-full text-sm font-medium border border-gray-200",children:k},I))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Personal Statement"}),t?a.jsxs("div",{children:[a.jsx("textarea",{value:d.personalStatement,onChange:k=>w("personalStatement",k.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-24 bg-white",maxLength:650}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-right",children:[d.personalStatement.length,"/650 words"]})]}):a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.personalStatement})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200",children:[a.jsxs("h3",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center",children:[a.jsx(sW,{className:"w-4 h-4 text-[#04adee] mr-2"}),"Activities"]}),t?a.jsxs("div",{className:"space-y-2",children:[d.activities.map((k,I)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:k,onChange:R=>N(I,R.target.value),className:"flex-1 px-3 py-2 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none bg-white",placeholder:"Enter activity"}),a.jsx("button",{type:"button",onClick:()=>j(I),className:"p-2 text-red-600 bg-red-50 rounded-lg active:bg-red-100",children:a.jsx(un,{className:"w-4 h-4"})})]},I)),d.activities.length<10&&a.jsxs("button",{type:"button",onClick:_,className:"w-full flex items-center justify-center text-[#04adee] bg-gray-50 py-2 rounded-lg text-sm font-medium active:bg-gray-100",children:[a.jsx(br,{className:"w-4 h-4 mr-2"}),"Add Activity (Max 10)"]})]}):a.jsx("div",{className:"space-y-2",children:c.activities.map((k,I)=>a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04adee] rounded-full mr-3"}),a.jsx("span",{className:"text-sm text-gray-700 font-medium",children:k})]},I))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 mb-6 border border-gray-200",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Special Circumstances"}),t?a.jsx("textarea",{value:d.specialCircumstances,onChange:k=>w("specialCircumstances",k.target.value),className:"w-full px-3 py-3 text-sm border border-gray-300 rounded-lg focus:border-[#04adee] focus:outline-none h-20 bg-white"}):a.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-sm leading-relaxed",children:c.specialCircumstances})]})]})]})};function loe({onViewProfile:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,o]=x.useState(!0),[l,c]=x.useState(""),[u,d]=x.useState(""),[h,f]=x.useState("");x.useEffect(()=>{m()},[]),x.useEffect(()=>{g()},[l,u,h,t]);const m=async()=>{try{o(!0);const v=await X_();r(v),s(v)}catch(v){console.error("Error loading admit profiles:",v)}finally{o(!1)}},g=()=>{let v=t;l&&(v=v.filter(b=>b.name.toLowerCase().includes(l.toLowerCase())||b.current_university.toLowerCase().includes(l.toLowerCase())||b.country.toLowerCase().includes(l.toLowerCase())||b.current_major.toLowerCase().includes(l.toLowerCase()))),u&&(v=v.filter(b=>b.country===u)),h&&(v=v.filter(b=>b.current_major===h)),s(v)},y=Array.from(new Set(t.map(v=>v.country))).sort(),p=Array.from(new Set(t.map(v=>v.current_major))).sort();return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):a.jsx("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:a.jsxs("div",{className:"px-3 pt-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Admit Profiles"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Students admitted to top universities"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 mb-4",children:a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),a.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:v=>c(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("select",{value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Countries"}),y.map(v=>a.jsx("option",{value:v,children:v},v))]}),a.jsxs("select",{value:h,onChange:v=>f(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Majors"}),p.map(v=>a.jsx("option",{value:v,children:v},v))]})]})}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:n.map(v=>a.jsxs("div",{onClick:()=>e(v.id),className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden active:scale-95 transition-transform",children:[a.jsx("div",{className:"relative",children:a.jsx("img",{src:v.profile_image_url,alt:v.name,className:"w-full h-40 object-cover"})}),a.jsxs("div",{className:"p-3",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-xs mb-1.5 line-clamp-1",children:v.name}),a.jsxs("div",{className:"flex items-center text-xs text-gray-600 mb-1.5",children:[a.jsx("img",{src:fg(v.country),alt:v.country,className:"w-4 h-3 mr-1.5 flex-shrink-0 object-cover rounded-sm"}),a.jsx("span",{className:"line-clamp-1",children:v.country})]}),a.jsxs("div",{className:"flex items-start text-xs text-gray-700 mb-1.5",children:[a.jsx(Rt,{className:"w-3 h-3 mr-1 mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"line-clamp-2 font-medium",children:v.current_university})]}),a.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:["Accepted ",v.application_round]})]})]},v.id))}),n.length===0&&a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-sm",children:"No profiles found."})})]})})}function coe({profileId:e,onBack:t}){const[r,n]=x.useState(null),[s,i]=x.useState(!0),[o,l]=x.useState(null),[c,u]=x.useState(!1);x.useEffect(()=>{d()},[e]);const d=async()=>{try{i(!0);const h=await E5(e);n(h),l(null)}catch(h){l("Failed to load admit profile"),console.error(h)}finally{i(!1)}};return s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600"})}):o||!r?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-red-800 text-sm",children:o||"Profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Go Back"})]})}):a.jsxs("div",{className:"pb-20 bg-gradient-to-br from-gray-50 to-blue-50/30 min-h-screen",children:[a.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3 sticky top-0 z-10 shadow-sm",children:a.jsxs("button",{onClick:t,className:"flex items-center text-gray-600 active:text-gray-900 group",children:[a.jsx(cn,{className:"w-4 h-4 mr-2 group-active:-translate-x-1 transition-transform"}),a.jsx("span",{className:"font-medium text-sm",children:"Back to Profiles"})]})}),a.jsxs("div",{className:"bg-white mx-3 mt-3 rounded-2xl shadow-lg overflow-hidden",children:[a.jsxs("div",{className:"relative h-32 bg-gradient-to-r from-green-500 to-blue-600",children:[r.university_image_url&&a.jsx("img",{src:r.university_image_url,alt:`${r.current_university} campus`,className:"absolute inset-0 w-full h-full object-cover"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-black/40 to-black/20"}),a.jsx("div",{className:"absolute -bottom-12 left-4 z-10",children:a.jsx("img",{src:r.profile_image_url,alt:r.name,className:"w-24 h-24 rounded-xl border-4 border-white object-cover shadow-xl"})})]}),a.jsxs("div",{className:"pt-16 px-4 pb-5",children:[a.jsxs("div",{className:"mb-5",children:[a.jsx("h1",{className:"text-xl font-bold text-gray-900 mb-1",children:r.name}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r.current_major}),a.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-600 flex-wrap",children:a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx("img",{src:fg(r.country),alt:`${r.country} flag`,className:"w-4 h-3 object-cover rounded-sm"}),a.jsx("span",{children:r.country})]})})]}),(r.linkedin_handle||r.instagram_handle)&&a.jsxs("div",{className:"flex gap-2 mb-5",children:[r.linkedin_handle&&a.jsxs("a",{href:r.linkedin_handle,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-blue-50 text-blue-600 rounded-lg text-sm active:bg-blue-100",children:[a.jsx(YT,{className:"w-4 h-4"}),"LinkedIn"]}),r.instagram_handle&&a.jsxs("a",{href:`https://instagram.com/${r.instagram_handle.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-4 py-2 bg-pink-50 text-pink-600 rounded-lg text-sm active:bg-pink-100",children:[a.jsx(KT,{className:"w-4 h-4"}),"Instagram"]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 rounded-xl p-4 mb-3 border-2 border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Rt,{className:"w-4 h-4 text-blue-600"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Accepted To:"})]}),a.jsx("p",{className:"text-lg font-bold text-blue-600 mb-0.5",children:r.current_university}),a.jsx("p",{className:"text-xs text-gray-600",children:r.university_location}),r.graduation_year&&a.jsxs("p",{className:"text-xs text-gray-600 mt-1.5 font-medium",children:["Class of ",r.graduation_year]})]}),a.jsx("div",{className:"mb-5",children:a.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:["Application submitted to ",r.current_university]})})]})]}),a.jsxs("div",{className:"px-3 space-y-3 mt-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-3 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(to,{className:"w-3 h-3 text-blue-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Overall Avg"})]}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.overall_percentage?a.jsxs(a.Fragment,{children:[a.jsx(We,{end:r.overall_percentage,decimals:1}),a.jsx("span",{children:"%"})]}):"N/A"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Aggregate %"})]}),r.sat_score&&a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-3 border border-purple-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(hr,{className:"w-3 h-3 text-purple-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"SAT"})]}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:a.jsx(We,{end:r.sat_score})})]}),r.act_score&&a.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-xl p-3 border border-orange-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(hr,{className:"w-3 h-3 text-orange-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"ACT"})]}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:a.jsx(We,{end:r.act_score})})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-3 border border-green-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-1",children:[a.jsx(Rt,{className:"w-3 h-3 text-green-600 mr-1"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Round"})]}),a.jsx("p",{className:"text-lg font-bold text-green-600",children:r.application_round})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{className:"bg-yellow-50 rounded-xl p-3 border border-yellow-100",children:[a.jsxs("div",{className:"flex items-center mb-1.5",children:[a.jsx(Vt,{className:"w-3 h-3 text-yellow-600 mr-1.5"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"First Gen"})]}),a.jsx("p",{className:"text-gray-700 text-xs",children:r.first_generation?"Yes":"No"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-200",children:[a.jsxs("div",{className:"flex items-center mb-1.5",children:[a.jsx(Bl,{className:"w-3 h-3 text-green-600 mr-1.5"}),a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:"Aid"})]}),a.jsx("p",{className:"text-gray-700 text-xs leading-tight",children:r.financial_aid_received})]})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Ce,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line line-clamp-4",children:r.personal_statement}),a.jsx("button",{onClick:()=>u(!0),className:"mt-2 text-blue-600 active:text-blue-700 font-medium text-xs underline",children:"Read Full Statement"})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-end justify-center z-50",onClick:()=>u(!1),children:a.jsxs("div",{className:"bg-white rounded-t-3xl shadow-2xl w-full max-h-[90vh] overflow-hidden",onClick:h=>h.stopPropagation(),children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-4 h-4 text-blue-600"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Personal Statement"})]}),a.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 active:text-gray-700 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-lg active:bg-gray-100",children:""})]}),a.jsx("div",{className:"px-4 py-4 overflow-y-auto max-h-[calc(90vh-60px)]",children:a.jsx("p",{className:"text-gray-700 text-sm leading-relaxed whitespace-pre-line",children:r.personal_statement})})]})}),r.subject_grades&&Object.keys(r.subject_grades).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Rt,{className:"w-4 h-4 text-purple-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Latest Transcript Submitted"})]}),a.jsx("div",{className:"space-y-2",children:Object.entries(r.subject_grades).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-3 border border-purple-200",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsx("div",{className:"flex-1",children:a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h})}),a.jsx("span",{className:"text-xl font-bold text-purple-600 ml-2",children:f})]})},m))})]}),r.high_school_gpa_history&&Object.keys(r.high_school_gpa_history).length>0&&a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-3",children:[a.jsx(Gn,{className:"w-4 h-4 text-green-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"High School Performance History"})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-3 italic",children:"Overall grade percentages by year"}),a.jsx("div",{className:"space-y-2",children:Object.entries(r.high_school_gpa_history).map(([h,f],m)=>a.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-lg p-3 border border-gray-200",children:a.jsxs("div",{className:"flex justify-between items-start mb-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 text-xs",children:h}),a.jsx("span",{className:"text-lg font-bold text-blue-600",children:f})]})},m))})]}),a.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Zn,{className:"w-4 h-4 text-orange-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Extracurriculars"})]}),a.jsx("ul",{className:"space-y-1.5",children:r.extracurricular_activities.map((h,f)=>a.jsxs("li",{className:"flex items-start",children:[a.jsx("span",{className:"w-1.5 h-1.5 bg-orange-600 rounded-full mt-1.5 mr-2 flex-shrink-0"}),a.jsx("span",{className:"text-gray-700 text-xs",children:h})]},f))})]}),r.university_experience&&a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-4 border border-blue-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center mb-2",children:[a.jsx(Vt,{className:"w-4 h-4 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-base font-bold text-gray-900",children:"Their Journey"})]}),a.jsx("p",{className:"text-gray-700 text-xs leading-relaxed whitespace-pre-line italic",children:r.university_experience})]})]})]})}const uoe=()=>{const[e,t]=x.useState(""),r=[{id:1,name:"National Merit Scholarship",provider:"National Merit Corp.",amount:25e3,deadline:"2025-03-15",matchScore:95,type:"Merit"},{id:2,name:"Gates Millennium Scholars",provider:"Gates Foundation",amount:5e4,deadline:"2025-01-15",matchScore:88,type:"Need-Based"},{id:3,name:"Google CS Scholarship",provider:"Google Inc.",amount:1e4,deadline:"2025-02-28",matchScore:92,type:"Field-Specific"}],n=s=>s>=90?"text-green-600 bg-green-100":s>=80?"text-blue-600 bg-blue-100":"text-yellow-600 bg-yellow-100";return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search scholarships...",value:e,onChange:s=>t(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(hr,{className:"w-5 h-5 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Personalized Matching"}),a.jsx("p",{className:"text-xs text-gray-700",children:"Scholarships ranked by your eligibility"})]})]})}),a.jsx("div",{className:"space-y-4",children:r.map(s=>a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:s.name}),a.jsx("p",{className:"text-sm text-gray-600",children:s.provider})]}),a.jsxs("div",{className:`px-2 py-1 rounded-full text-xs font-semibold ${n(s.matchScore)}`,children:[s.matchScore,"% Match"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-[#04adee] bg-opacity-10 rounded-xl p-3 text-center",children:[a.jsx(Bl,{className:"w-5 h-5 text-[#04adee] mx-auto mb-1"}),a.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["$",(s.amount/1e3).toFixed(0),"k"]}),a.jsx("div",{className:"text-xs text-gray-600",children:"Award"})]}),a.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-center",children:[a.jsx(wt,{className:"w-5 h-5 text-gray-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-gray-900",children:new Date(s.deadline).toLocaleDateString()}),a.jsx("div",{className:"text-xs text-gray-600",children:"Deadline"})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full",children:s.type}),a.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Apply",a.jsx(zl,{className:"w-3 h-3 ml-1"})]})]})]},s.id))})]})},doe=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(null),[s,i]=x.useState(!1),[o,l]=x.useState(!1),[c,u]=x.useState(!1),[d,h]=x.useState({}),[f,m]=x.useState(""),[g,y]=x.useState(""),[p,v]=x.useState({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]});useEffect(()=>{b()},[]);const b=async()=>{try{console.log("=== LOADING APPLICATIONS FROM FIREBASE ===");const P=lt.getCurrentUser();if(!P||!P.name||!P.school){console.log("No user data found, cannot load applications:",P);return}console.log("Loading applications for user:",P.name,"in school:",P.school);const A=G(V,`Schoolss/${P.school}/Applications/${P.name}`);console.log("Firebase path:",`Schoolss/${P.school}/Applications/${P.name}`);const $=await le(A);if($.exists()){const L=$.val();console.log("Found applications data:",L);const z=[];Object.entries(L).forEach(([K,se],fe)=>{if(console.log(`Processing university: ${K}`,se),se&&typeof se=="object"){const he=[];Object.entries(se).forEach(([te,U],H)=>{console.log(`  Requirement: ${te} = ${U}`),he.push({id:Date.now()+fe*100+H,name:te,completed:U})});const ye=he.filter(te=>te.completed).length,q=Math.round(ye/he.length*100);console.log(`  University: ${K}, Completion: ${q}%`),z.push({id:Date.now()+fe,universityName:K,program:"Program Name",deadline:"2025-05-01",priority:"Medium",status:q===100?"Submitted":"In Progress",completionPercentage:q,requirements:he,notes:""})}}),console.log("Loaded applications:",z),t(z)}else console.log("No applications found in Firebase"),t([])}catch(P){console.error("Error loading applications from Firebase:",P),t([])}},w=async P=>{try{const A=P.split("@")[0].toLowerCase();console.log("Looking for username:",A);const $=G(V,"Schoolss"),L=await le($);if(!L.exists())return console.log("No Schoolss node found"),null;const z=L.val();console.log("Found schools:",Object.keys(z));for(const[K,se]of Object.entries(z))if(console.log(`Checking school: ${K}`),se&&typeof se=="object"&&"users"in se){const fe=se.users;if(fe&&A in fe)return console.log(`Found user ${A} in school: ${K}`),K}return console.log("User not found in any school"),null}catch(A){return console.error("Error finding user school:",A),null}},_=async(P,A,$)=>{try{const L=lt.getCurrentUser();if(L&&L.name&&L.school){const z=G(V,`Schoolss/${L.school}/Applications/${L.name}/${P}/${A}`);await Me(z,$),console.log(`Updated requirement ${A} to ${$} for ${P}`),await Om.updateCurrentUserProgress(),console.log("Application Progress updated after requirement change")}}catch(L){console.error("Error updating requirement in Firebase:",L)}},j=(P,A)=>{t($=>$.map(L=>{if(L.id===P){const z=L.requirements.map(he=>he.id===A?{...he,completed:!he.completed}:he),K=z.filter(he=>he.completed).length,se=Math.round(K/z.length*100),fe=L.requirements.find(he=>he.id===A);return fe&&_(L.universityName,fe.name,!fe.completed),{...L,requirements:z,completionPercentage:se}}return L}))},N=()=>{setNewApplication(P=>({...P,requirements:[...P.requirements,""]}))},E=(P,A)=>{setNewApplication($=>({...$,requirements:$.requirements.map((L,z)=>z===P?A:L)}))},T=P=>{setNewApplication(A=>({...A,requirements:A.requirements.filter(($,L)=>L!==P)}))},S=async P=>{try{console.log("=== STARTING FIREBASE SAVE (MOBILE) ==="),console.log("Application data:",P);const A=lt.getCurrentUser();if(console.log("Current stored user:",A),!A)throw new Error("No user data found in storage. Please log in again.");const $=`${A.username}@gmail.com`;console.log("Reconstructed email:",$);const L=await w($);if(console.log("Found school:",L),!L)throw new Error("Could not find your school in the database. Please contact support.");const z=G(V,`Schoolss/${L}/users/${A.username}`),K=await le(z);if(!K.exists())throw new Error("User data not found in school database.");const se=K.val(),fe=se.Name||se.name||A.name;console.log("Using user name for Applications:",fe);const he=`Schoolss/${L}/Applications/${fe}/${P.universityName}`;console.log("Firebase application path:",he);const ye={};if(P.requirements.forEach(te=>{if(te.trim()){const U=Bae(te.trim());U&&(ye[U]=!1)}}),console.log("Requirements data to save:",ye),Object.keys(ye).length===0)throw new Error("No valid requirements to save");console.log("Attempting to save to Firebase...");const q=G(V,he);return await Me(q,ye),console.log(" Application saved successfully to Firebase!"),!0}catch(A){throw console.error(" Error saving application to Firebase:",A),A instanceof Error&&console.error("Error message:",A.message),new Error(`Failed to save application: ${A instanceof Error?A.message:"Unknown error"}`)}},D=async()=>{const P={};let A=!1;if(p.requirements.forEach(($,L)=>{if($.trim()){const z=dy($.trim());z&&(P[L]=z,A=!0)}}),h(P),A){alert("Please fix the requirement name errors before saving.");return}if(p.universityName&&p.program&&p.requirements.length>0){u(!0);try{await S(p);const $=p.requirements.map((z,K)=>({id:Date.now()+K,name:z,completed:!1})),L={id:Date.now(),universityName:p.universityName,program:p.program,deadline:"2025-05-01",priority:"Medium",status:"In Progress",completionPercentage:0,notes:"",requirements:$};t(z=>[...z,L]),v({universityName:"",program:"",requirements:["Personal Statement","Letters of Recommendation","Official Transcripts","SAT/ACT Scores","Application Fee"]}),l(!1),m("Application has been added to tracker successfully!"),setTimeout(()=>m(""),3e3),await Om.updateCurrentUserProgress(),console.log("Application Progress updated after adding new application"),await b()}catch($){console.error("Error adding application:",$),y(`Error adding application: ${$ instanceof Error?$.message:"Please try again."}`),setTimeout(()=>y(""),5e3)}finally{u(!1)}}},O=()=>{p.requirements.length<15&&v(P=>({...P,requirements:[...P.requirements,""]}))},C=P=>{v(A=>({...A,requirements:A.requirements.filter(($,L)=>L!==P)}))},k=(P,A)=>{const $=dy(A);h(L=>{const z={...L};return $?z[P]=$:delete z[P],z}),v(L=>({...L,requirements:L.requirements.map((z,K)=>K===P?A:z)}))},I=P=>{switch(P){case"High":return"bg-red-100 text-red-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Low":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},R=P=>{switch(P){case"Submitted":return"text-green-600 bg-green-100";case"Under Review":return"text-blue-600 bg-blue-100";case"Decision Pending":return"text-purple-600 bg-purple-100";default:return"text-yellow-600 bg-yellow-100"}},M={avgCompletion:Math.round(e.reduce((P,A)=>P+A.completionPercentage,0)/e.length)||0,total:e.length,inProgress:e.filter(P=>P.status==="In Progress").length,submitted:e.filter(P=>P.status==="Submitted").length};return r?a.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:a.jsxs("div",{className:"max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("button",{onClick:()=>n(null),className:"mr-4 p-2 hover:bg-gray-200 rounded-lg",children:a.jsx(cn,{className:"w-5 h-5"})}),a.jsx("h1",{className:"text-2xl font-bold",children:r.universityName})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Program"}),a.jsx("p",{className:"text-gray-900",children:r.program})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Deadline"}),a.jsx("p",{className:"text-gray-900",children:new Date(r.deadline).toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Priority"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(r.priority)}`,children:r.priority})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"Status"}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(r.status)}`,children:r.status})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Progress"}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${r.completionPercentage}%`}})}),a.jsxs("p",{className:"text-sm text-gray-600",children:[r.completionPercentage,"% Complete"]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-700 mb-4",children:"Requirements"}),a.jsx("div",{className:"space-y-3",children:r.requirements.map(P=>a.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[a.jsx("button",{onClick:()=>j(r.id,P.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${P.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:P.completed&&a.jsx(yr,{className:"w-3 h-3"})}),P.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(P.dueDate).toLocaleDateString()]})]},P.id))})]})]})]})}):s?a.jsx("div",{className:"min-h-screen bg-gray-100 p-4",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Add New Application"}),a.jsx("button",{onClick:()=>i(!0),className:"bg-[#04adee] text-white p-3 rounded-xl",children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:newApplication.universityName,onChange:P=>setNewApplication(A=>({...A,universityName:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Stanford University"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program"}),a.jsx("input",{type:"text",value:newApplication.program,onChange:P=>setNewApplication(A=>({...A,program:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Application Deadline"}),a.jsx("input",{type:"date",value:newApplication.deadline,onChange:P=>setNewApplication(A=>({...A,deadline:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priority"}),a.jsxs("select",{value:newApplication.priority,onChange:P=>setNewApplication(A=>({...A,priority:P.target.value})),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",children:[a.jsx("option",{value:"Low",children:"Low Priority"}),a.jsx("option",{value:"Medium",children:"Medium Priority"}),a.jsx("option",{value:"High",children:"High Priority"})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:N,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2",children:newApplication.requirements.map((P,A)=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:P,onChange:$=>E(A,$.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent text-sm",placeholder:"Enter requirement"}),a.jsx("button",{onClick:()=>T(A),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(un,{className:"w-4 h-4"})})]},A))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-8",children:[a.jsx("button",{onClick:addApplication,disabled:c,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Create Application"}),a.jsx("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-100",children:[f&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(yr,{className:"w-5 h-5 mr-2"}),f]})}),g&&a.jsx("div",{className:"fixed top-6 left-1/2 transform -translate-x-1/2 z-50 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(rt,{className:"w-5 h-5 mr-2"}),g]})}),a.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Application Tracker"}),a.jsx("p",{className:"text-gray-600",children:"Monitor your university application progress and deadlines"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"flex items-center bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:[a.jsx(br,{className:"w-5 h-5 mr-2"}),"Add Application"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:a.jsx(Gn,{className:"w-6 h-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[M.avgCompletion,"%"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Avg. Completion"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-[#04adee] bg-opacity-10 rounded-lg flex items-center justify-center",children:a.jsx(Ce,{className:"w-6 h-6 text-[#04adee]"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.total}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Applications"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:a.jsx(Or,{className:"w-6 h-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.inProgress}),a.jsx("div",{className:"text-sm text-gray-600",children:"In Progress"})]})]})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:a.jsx(yr,{className:"w-6 h-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M.submitted}),a.jsx("div",{className:"text-sm text-gray-600",children:"Submitted"})]})]})})]}),a.jsx("div",{className:"space-y-6",children:e.map(P=>{const A=P.requirements.filter(L=>L.completed).length,$=Math.ceil((new Date(P.deadline).getTime()-new Date().getTime())/(1e3*60*60*24));return a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:P.universityName}),a.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${I(P.priority)}`,children:[P.priority," Priority"]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${R(P.status)}`,children:P.status})]}),a.jsx("p",{className:"text-gray-600 mb-2",children:P.program}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wt,{className:"w-4 h-4 mr-1"}),"Deadline: ",new Date(P.deadline).toLocaleDateString()]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Or,{className:"w-4 h-4 mr-1"}),$>0?`${$} days left`:"Overdue"]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("div",{className:"text-2xl font-bold text-[#04adee]",children:[P.completionPercentage,"%"]}),a.jsx(to,{className:"w-5 h-5 text-[#04adee]"})]}),a.jsxs("div",{className:"text-sm text-gray-600",children:[A," of ",P.requirements.length," completed"]})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-[#04adee] h-3 rounded-full transition-all duration-500",style:{width:`${P.completionPercentage}%`}})})}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"Requirements Checklist:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.requirements.map(L=>a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>j(P.id,L.id),className:`flex-shrink-0 w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${L.completed?"bg-[#04adee] border-[#04adee] text-white":"border-gray-300 hover:border-[#04adee]"}`,children:L.completed&&a.jsx(yr,{className:"w-3 h-3"})}),a.jsx("span",{className:`flex-1 ${L.completed?"line-through text-gray-500":"text-gray-700"}`,children:L.name}),L.dueDate&&a.jsxs("span",{className:"text-xs text-gray-500",children:["Due: ",new Date(L.dueDate).toLocaleDateString()]})]},L.id))})]}),P.notes&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h5",{className:"font-medium text-gray-900 mb-2",children:"Notes:"}),a.jsx("p",{className:"text-gray-700 text-sm",children:P.notes})]})]},P.id)})}),e.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No applications yet"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Start tracking your university applications to stay organized."}),a.jsx("button",{onClick:()=>l(!0),className:"bg-[#04adee] text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors font-medium",children:"Add Your First Application"})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add New Application"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-gray-100 rounded-lg",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"University Name"}),a.jsx("input",{type:"text",value:p.universityName,onChange:P=>v(A=>({...A,universityName:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., University of Chicago"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Program Name"}),a.jsx("input",{type:"text",value:p.program,onChange:P=>v(A=>({...A,program:P.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent",placeholder:"e.g., Computer Science"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requirements"}),a.jsx("button",{onClick:O,className:"text-[#04adee] hover:text-blue-600 text-sm font-medium",children:"+ Add Requirement"})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:p.requirements.map((P,A)=>a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("input",{type:"text",value:P,onChange:$=>k(A,$.target.value),className:`flex-1 px-3 py-2 text-sm border rounded-lg focus:ring-2 focus:ring-[#04adee] focus:border-transparent ${d[A]?"border-red-300 bg-red-50":"border-gray-300"}`,placeholder:"e.g., Write personal statement"}),a.jsx("button",{onClick:()=>C(A),className:"p-2 text-red-500 hover:text-red-700",children:a.jsx(un,{className:"w-4 h-4"})})]}),d[A]&&a.jsx("p",{className:"text-red-600 text-xs ml-3",children:d[A]})]},A))})]})]}),a.jsxs("div",{className:"flex space-x-3 mt-6",children:[a.jsx("button",{onClick:D,disabled:c||!p.universityName.trim()||!p.program.trim()||Object.keys(d).length>0,className:"flex-1 bg-[#04adee] text-white py-3 rounded-lg font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:c?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):"Add Application"}),a.jsx("button",{onClick:()=>l(!1),className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-medium text-sm",children:"Cancel"})]})]})})]})]})},hoe=()=>{const[e,t]=x.useState(""),[r,n]=x.useState(""),s=[{id:1,title:"How to Write a Compelling Personal Statement",type:"Article",author:"Dr. Sarah Johnson",rating:4.8,readTime:15,category:"Essays"},{id:2,title:"College Essay Bootcamp",type:"Video",author:"College Prep Academy",rating:4.9,category:"Essays"},{id:3,title:"FAFSA Complete Guide",type:"Guide",author:"Financial Aid Team",rating:4.7,readTime:25,category:"Financial Aid"}],i=l=>{switch(l){case"Video":return Wl;case"Article":return Ce;case"Guide":return cr;case"Template":return dp;default:return Ce}},o=l=>({Article:"bg-blue-100 text-blue-800",Video:"bg-red-100 text-red-800",Guide:"bg-green-100 text-green-800",Template:"bg-purple-100 text-purple-800"})[l]||"bg-gray-100 text-gray-800";return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search resources...",value:e,onChange:l=>t(l.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"bg-[#04adee] bg-opacity-10 border border-[#04adee] border-opacity-20 rounded-2xl p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vt,{className:"w-5 h-5 text-[#04adee] mr-3"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-[#04adee] text-sm",children:"Curated Resources"}),a.jsx("p",{className:"text-xs text-gray-700",children:"Hand-picked by successful students"})]})]})}),a.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:["All","Essays","Applications","Financial Aid","Test Prep"].map(l=>a.jsx("button",{onClick:()=>n(l==="All"?"":l),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap ${r===l||l==="All"&&r===""?"bg-[#04adee] text-white":"bg-gray-100 text-gray-700"}`,children:l},l))}),a.jsx("div",{className:"space-y-4",children:s.map(l=>{const c=i(l.type);return a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-10 h-10 bg-[#04adee] bg-opacity-10 rounded-xl flex items-center justify-center mr-3",children:a.jsx(c,{className:"w-5 h-5 text-[#04adee]"})}),a.jsxs("div",{children:[a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${o(l.type)}`,children:l.type}),a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:l.category})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vt,{className:"w-4 h-4 text-yellow-400 fill-current mr-1"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:l.rating})]})]}),a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:l.title}),a.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["by ",l.author]}),a.jsxs("div",{className:"flex items-center justify-between",children:[l.readTime&&a.jsxs("span",{className:"text-xs text-gray-500",children:[l.readTime," min read"]}),a.jsxs("button",{className:"flex items-center bg-[#04adee] text-white px-3 py-2 rounded-lg text-sm font-medium",children:["Access",a.jsx(zl,{className:"w-3 h-3 ml-1"})]})]})]},l.id)})})]})},foe=()=>{const[e,t]=x.useState(""),[r,n]=x.useState([]),[s,i]=x.useState(!0),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(null);x.useEffect(()=>{f()},[]);const f=async()=>{try{i(!0),l(null);const p=lt.getStoredUser();if(!p||!p.name){l("Unable to identify logged-in student"),n([]),i(!1);return}const v=p.name,w=G(V,"University Data/Caseloads"),_=await le(w),j=new Set;if(_.exists()){const S=_.val();Object.entries(S).forEach(([D,O])=>{O&&typeof O=="object"&&O[v]===!0&&j.add(D)})}const E=G(V,"University Data/University Counsellors /"),T=await le(E);if(T.exists()){const S=T.val(),D=[];Object.entries(S).forEach(([O,C])=>{if(C&&typeof C=="object"){const k=C,I=k.Name||O;if(j.has(I)){const R=[];k.Languages&&typeof k.Languages=="object"&&Object.entries(k.Languages).forEach(([A,$])=>{$===!0&&R.push(A)});const M=[];k.Specialties&&typeof k.Specialties=="object"&&Object.entries(k.Specialties).forEach(([A,$])=>{$===!0&&M.push(A)});const P={id:O,name:I,email:k.Email||k.email||"",university:k.University||"",year:k.Year||"",location:k.Location||"",profilePicture:k["Profile Picture"]||"https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150",bookingLink:k["Booking Link"]||k["booking link"]||"",languages:R,specialties:M};D.push(P)}}}),n(D)}else n([])}catch(p){console.error("Error loading counselors from Firebase:",p),l(`Failed to load counselors: ${p instanceof Error?p.message:"Unknown error"}`),n([])}finally{i(!1)}},m=r.filter(p=>p.name.toLowerCase().includes(e.toLowerCase())||p.university.toLowerCase().includes(e.toLowerCase())||p.specialties.some(v=>v.toLowerCase().includes(e.toLowerCase()))||p.location.toLowerCase().includes(e.toLowerCase())),g=p=>{h(p),u(!0)},y=p=>{if(p.email){const v=encodeURIComponent("University Guidance Consultation Request"),b=encodeURIComponent(`Dear ${p.name},

I would like to schedule a consultation regarding university guidance.

Best regards`);window.open(`mailto:${p.email}?subject=${v}&body=${b}`,"_self")}else alert("Email address not available for this counselor.")};return s?a.jsxs("div",{className:"p-4 flex items-center justify-center py-12",children:[a.jsx(Uf,{className:"w-8 h-8 animate-spin text-[#04adee] mr-3"}),a.jsx("span",{className:"text-lg text-gray-600",children:"Loading counselors..."})]}):o?a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:[a.jsx("p",{className:"text-red-600 mb-4",children:o}),a.jsx("button",{onClick:f,className:"bg-red-600 text-white px-4 py-2 rounded-xl hover:bg-red-700 transition-colors",children:"Try Again"})]})}):c&&d?a.jsx(Q_,{counselorName:d.name,counselorUniversity:d.university,counselorImage:d.profilePicture,counselorEmail:d.email,onBack:()=>{u(!1),h(null)}}):a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search counselors...",value:e,onChange:p=>t(p.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#04adee] focus:border-transparent"})]})}),a.jsx("div",{className:"space-y-4",children:m.map(p=>a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start mb-4",children:[a.jsx("img",{src:p.profilePicture,alt:p.name,className:"w-16 h-16 rounded-2xl object-cover mr-4",onError:v=>{v.target.src="https://images.pexels.com/photos/5212317/pexels-photo-5212317.jpeg?auto=compress&cs=tinysrgb&w=150"}}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:p.name}),a.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[p.year," Student"]}),a.jsx("p",{className:"text-sm text-[#04adee] mb-2",children:p.university}),a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx(QT,{className:"w-4 h-4 mr-1"}),p.location]})]})]}),p.specialties.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Specialties:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:p.specialties.map(v=>a.jsx("span",{className:"bg-[#04adee] bg-opacity-10 text-[#04adee] text-xs px-2 py-1 rounded-full",children:v},v))})]}),p.languages.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Languages:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:p.languages.map(v=>a.jsx("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:v},v))})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:()=>g(p),className:"flex-1 flex items-center justify-center bg-[#04adee] text-white px-4 py-2 rounded-xl font-medium",children:[a.jsx(wt,{className:"w-4 h-4 mr-2"}),"Book Meeting"]}),a.jsxs("button",{onClick:()=>y(p),className:"flex-1 flex items-center justify-center bg-gray-600 text-white px-4 py-2 rounded-xl font-medium",children:[a.jsx(sd,{className:"w-4 h-4 mr-2"}),"Email"]})]})]},p.id))}),m.length===0&&!s&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Eu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors found"}),a.jsx("p",{className:"text-gray-600",children:"Try adjusting your search criteria."})]}),r.length===0&&!s&&!o&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Eu,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No counselors available"}),a.jsx("p",{className:"text-gray-600",children:"Counselors data is not available at the moment."})]})]})},moe=({onLogout:e,user:t})=>{var f;const[r,n]=x.useState("profile"),[s,i]=x.useState(!1),[o,l]=x.useState(null),c=[{id:"profile",label:"My Profile",icon:gl,color:"bg-blue-500"},{id:"admit-profiles",label:"Admission Stories",icon:Rt,color:"bg-purple-500"},{id:"scholarships",label:"Scholarships",icon:hr,color:"bg-green-500"},{id:"applications",label:"Applications",icon:Ce,color:"bg-orange-500"},{id:"resources",label:"Resources",icon:cr,color:"bg-red-500"},{id:"counselors",label:"Counselors",icon:Eu,color:"bg-indigo-500"}],u=()=>{const m=c.find(g=>g.id===r);return(m==null?void 0:m.label)||"EduCare"},d=m=>{n(m),i(!1)},h=()=>{switch(r){case"profile":return a.jsx(cC,{user:t});case"admit-profiles":return a.jsx(loe,{onViewProfile:m=>{l(m),n("profile-details")}});case"scholarships":return a.jsx(uoe,{});case"applications":return a.jsx(doe,{});case"resources":return a.jsx(hoe,{});case"counselors":return a.jsx(foe,{});case"profile-details":return o?a.jsx(coe,{profileId:o,onBack:()=>n("admit-profiles")}):null;default:return a.jsx(cC,{user:t})}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm border-b border-gray-100 sticky top-0 z-40",children:a.jsxs("div",{className:"flex items-center justify-between px-4 py-3 safe-area-top",children:[a.jsx("button",{onClick:()=>i(!0),className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:a.jsx(nw,{className:"w-6 h-6 text-gray-700"})}),a.jsx("div",{className:"flex-1 text-center",children:a.jsx("h1",{className:"text-lg font-bold text-gray-900",children:u()})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors",children:a.jsx(fr,{className:"w-5 h-5 text-gray-700"})}),a.jsxs("button",{className:"p-3 rounded-full bg-gray-100 active:bg-gray-200 transition-colors relative",children:[a.jsx(aW,{className:"w-5 h-5 text-gray-700"}),a.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-xs text-white font-bold",children:"3"})})]})]})]})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>i(!1)}),a.jsx("div",{className:`
        fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-out
        ${s?"translate-x-0":"-translate-x-full"}
      `,children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04adee] to-blue-600 px-6 py-8 safe-area-top",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("img",{src:"/blue logo.png",alt:"EduCare Logo",className:"w-10 h-10 object-contain"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h2",{className:"text-xl font-bold text-white",children:"EduCare"}),a.jsx("p",{className:"text-blue-100 text-sm",children:"University Guidance"})]})]}),a.jsx("button",{onClick:()=>i(!1),className:"p-2 rounded-full bg-white bg-opacity-20 active:bg-opacity-30 transition-colors",children:a.jsx(rt,{className:"w-6 h-6 text-white"})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-12 h-12 bg-white bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-white font-bold text-lg",children:((f=t==null?void 0:t.name)==null?void 0:f.charAt(0))||"S"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-white font-semibold",children:(t==null?void 0:t.name)||"Student"}),a.jsx("p",{className:"text-blue-100 text-sm",children:(t==null?void 0:t.grade)||"Grade 12"})]})]})]}),a.jsx("div",{className:"flex-1 py-4",children:c.map(m=>a.jsxs("button",{onClick:()=>d(m.id),className:`w-full flex items-center px-6 py-4 text-left transition-all duration-200 ${r===m.id?"bg-blue-50 border-r-4 border-[#04adee]":"hover:bg-gray-50 active:bg-gray-100"}`,children:[a.jsx("div",{className:`w-10 h-10 ${m.color} rounded-full flex items-center justify-center mr-4`,children:a.jsx(m.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:`font-medium text-lg ${r===m.id?"text-[#04adee]":"text-gray-700"}`,children:m.label})]},m.id))}),a.jsx("div",{className:"p-4 border-t border-gray-200 safe-area-bottom",children:a.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center px-6 py-4 bg-red-50 text-red-600 rounded-2xl font-semibold text-lg active:bg-red-100 transition-colors",children:[a.jsx(rt,{className:"w-5 h-5 mr-3"}),"Logout"]})})]})}),a.jsx("main",{className:"min-h-screen",children:h()})]})};function O5(e,t){const[r,n]=x.useState({unreviewedEssays:2,pendingMeetings:0,unreadMessages:3}),[s,i]=x.useState(!1);return x.useEffect(()=>{const l=G(V,`University Data/Timeslots/${t}`),c=Gt(l,u=>{let d=0;if(u.exists()){const h=u.val();d=Object.values(h).filter(f=>f===!0).length}n({unreviewedEssays:2,pendingMeetings:d,unreadMessages:3}),i(!1)});return()=>c()},[t]),{counts:r,loading:s,refetch:()=>{i(!0)}}}const T5=({percentage:e,size:t=120,strokeWidth:r=8,color:n="#04ADEE",className:s="",children:i})=>{const o=(t-r)/2,l=o*2*Math.PI,c=l-e/100*l;return a.jsxs("div",{className:`relative inline-flex items-center justify-center ${s}`,children:[a.jsxs("svg",{width:t,height:t,className:"transform -rotate-90",children:[a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:"#e2e8f0",strokeWidth:r,fill:"none"}),a.jsx("circle",{cx:t/2,cy:t/2,r:o,stroke:n,strokeWidth:r,fill:"none",strokeDasharray:l,strokeDashoffset:c,strokeLinecap:"round",className:"transition-all duration-1000 ease-out"})]}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i})]})},uC=({counselorName:e,onClose:t})=>{const[r,n]=x.useState([]),[s,i]=x.useState(!0),[o,l]=x.useState(!1),[c,u]=x.useState(""),[d,h]=x.useState(""),[f,m]=x.useState(null),[g,y]=x.useState(""),[p,v]=x.useState(""),[b,w]=x.useState(!1),[_,j]=x.useState("");x.useEffect(()=>{N()},[e]);const N=async()=>{try{i(!0);const k=G(V,`University Data/${e}/grading_rubric`);Gt(k,I=>{if(I.exists()){const R=I.val(),M=Object.keys(R).map(P=>({id:P,name:R[P].name,description:R[P].description}));n(M)}else n([]);i(!1)},{onlyOnce:!0})}catch(k){console.error("Error loading rubric items:",k),i(!1)}},E=k=>{j(k),w(!0),setTimeout(()=>{w(!1)},3e3)},T=()=>{if(!c.trim()||!d.trim()){j("Please enter both a name and description"),w(!0),setTimeout(()=>w(!1),3e3);return}const k={id:Date.now().toString(),name:c.trim(),description:d.trim()};n([...r,k]),u(""),h("")},S=k=>{m(k.id),y(k.name),v(k.description)},D=k=>{if(!g.trim()||!p.trim()){j("Please enter both a name and description"),w(!0),setTimeout(()=>w(!1),3e3);return}n(r.map(I=>I.id===k?{...I,name:g.trim(),description:p.trim()}:I)),m(null),y(""),v("")},O=k=>{n(r.filter(I=>I.id!==k))},C=async()=>{try{l(!0);const k=G(V,`University Data/${e}/grading_rubric`),I={};r.forEach(R=>{I[R.id]={name:R.name,description:R.description}}),await Me(k,I),E("Rubric saved successfully!"),setTimeout(()=>{t()},1500)}catch(k){console.error("Error saving rubric:",k),j("Failed to save rubric. Please try again."),w(!0),setTimeout(()=>w(!1),3e3)}finally{l(!1)}};return s?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsx("div",{className:"bg-white rounded-lg p-8",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE] mx-auto"})})}):a.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:[b&&a.jsx("div",{className:"fixed top-4 right-4 z-[60] animate-slide-in",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl border border-slate-200 p-4 flex items-center gap-3 min-w-[300px]",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(yr,{className:"w-5 h-5 text-emerald-500"})}),a.jsx("p",{className:"text-sm font-medium text-slate-900",children:_})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Essay Grading Rubric"}),a.jsx("button",{onClick:t,className:"text-slate-400 hover:text-slate-600 hover:bg-slate-100 rounded-lg p-2 transition-colors",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Define the criteria you'll use to evaluate essays. Each criterion will be rated on a scale of 1-5 during the review process."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Add New Criterion"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:'Criterion Name (e.g., "Clarity", "Structure", "Grammar")'}),a.jsx("input",{type:"text",value:c,onChange:k=>u(k.target.value),placeholder:"Enter criterion name",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description (What you're looking for in this criterion)"}),a.jsx("textarea",{value:d,onChange:k=>h(k.target.value),placeholder:"Describe what this criterion evaluates...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("button",{onClick:T,disabled:!c.trim()||!d.trim(),className:"w-full flex items-center justify-center gap-2 bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(br,{className:"w-4 h-4"}),"Add Criterion"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:["Current Rubric (",r.length," ",r.length===1?"criterion":"criteria",")"]}),r.length===0?a.jsx("div",{className:"text-center py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:a.jsx("p",{className:"text-slate-500 text-sm",children:"No rubric criteria yet. Add your first criterion above."})}):r.map((k,I)=>a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:f===k.id?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Criterion Name"}),a.jsx("input",{type:"text",value:g,onChange:R=>y(R.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Description"}),a.jsx("textarea",{value:p,onChange:R=>v(R.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>D(k.id),className:"flex-1 flex items-center justify-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Bi,{className:"w-4 h-4"}),"Save Changes"]}),a.jsx("button",{onClick:()=>{m(null),y(""),v("")},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Cancel"})]})]}):a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(mW,{className:"w-5 h-5 text-slate-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full",children:I+1}),a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:k.name})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>S(k),className:"px-3 py-1 text-xs font-medium text-slate-600 hover:text-[#04ADEE] hover:bg-slate-50 rounded transition-colors",children:"Edit"}),a.jsx("button",{onClick:()=>O(k.id),className:"p-1.5 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:a.jsx(un,{className:"w-4 h-4"})})]})]}),a.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:k.description}),a.jsxs("div",{className:"mt-3 flex items-center gap-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Rating Scale:"}),a.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(R=>a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-600 text-xs font-semibold rounded border border-slate-200",children:R},R))})]})]})]})},k.id))]})]}),a.jsx("div",{className:"border-t border-slate-200 px-6 py-4 bg-slate-50",children:a.jsx("button",{onClick:C,disabled:o,className:"w-full px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Saving...":"Done"})})]})]})},pg=({comeFromStudentProfile:e=!1,studentName:t,essayTitle:r,onBackToStudentProfile:n})=>{var ss;const[s,i]=x.useState([]),[o,l]=x.useState(!0),[c,u]=x.useState(null),[d,h]=x.useState([]),[f,m]=x.useState([]),[g,y]=x.useState(null),[p,v]=x.useState(""),[b,w]=x.useState(""),[_,j]=x.useState("all"),[N,E]=x.useState(""),[T,S]=x.useState("all"),[D,O]=x.useState(""),[C,k]=x.useState(""),[I,R]=x.useState(!1),[M,P]=x.useState(!1),[A,$]=x.useState(null),[L,z]=x.useState(!1),[K,se]=x.useState(!1),[fe,he]=x.useState(!1),[ye,q]=x.useState([]),[te,U]=x.useState({}),[H,ee]=x.useState(!1),[B,ve]=x.useState(!1),xe=x.useRef(null),Ue=lt.getStoredUser(),Te=(Ue==null?void 0:Ue.name)||"University Counselor";Ue!=null&&Ue.id;const tr=X=>{const J=document.createElement("div");return J.innerHTML=X,J.querySelectorAll("*").forEach(ke=>{Array.from(ke.attributes).forEach(ge=>{ge.name.startsWith("data-")&&ke.removeAttribute(ge.name)})}),J.innerHTML};x.useEffect(()=>{c&&xe.current&&d.length>0&&setTimeout(()=>hi(),50)},[c,d]);const hi=()=>{if(!xe.current||!c)return;const X=xe.current,J=tr(c.essay_content);X.innerHTML=J;const be=X.textContent||"";console.log("Applying highlights. Total text length:",be.length),console.log("Comments to apply:",d.length),[...d].sort((ge,Se)=>Se.start_position-ge.start_position).forEach(ge=>{var ej,tj;console.log("Applying comment:",{id:ge.id,start:ge.start_position,end:ge.end_position,text:ge.highlighted_text,actualText:be.substring(ge.start_position,ge.end_position)});const Se=document.createTreeWalker(X,NodeFilter.SHOW_TEXT,null);let pe=0,Ee=null,Ge=0,ze=null,gn=0,uo=!1;for(;Se.nextNode();){const sa=Se.currentNode,ws=sa.length;if(!uo&&pe+ws>ge.start_position&&(Ee=sa,Ge=ge.start_position-pe,uo=!0),uo&&pe+ws>=ge.end_position){ze=sa,gn=ge.end_position-pe;break}pe+=ws}if(Ee&&ze){console.log("Found nodes for highlight:",{startNode:(ej=Ee.textContent)==null?void 0:ej.substring(0,20),endNode:(tj=ze.textContent)==null?void 0:tj.substring(0,20),startOffset:Ge,endOffset:gn});const sa=document.createRange();sa.setStart(Ee,Ge),sa.setEnd(ze,gn);const ws=document.createElement("mark");ws.className="bg-yellow-200 cursor-pointer hover:bg-yellow-300 transition-colors relative group",ws.setAttribute("data-comment-id",ge.id),ws.title=ge.comment_text;try{sa.surroundContents(ws);const Jl=document.createElement("span");Jl.className="invisible group-hover:visible absolute bottom-full left-0 mb-2 w-64 p-2 bg-slate-800 text-white text-xs rounded-lg shadow-lg z-10 pointer-events-none",Jl.innerHTML=`<div class="font-semibold mb-1">${ge.counselor_name}</div><div>${ge.comment_text}</div>`,ws.appendChild(Jl),console.log("Successfully applied highlight")}catch(Jl){console.warn("Could not apply highlight",Jl)}}else console.warn("Could not find start/end nodes for comment:",ge)})},Rn=X=>{const J=new Date(X),be=J.getDate(),ke=["th","st","nd","rd"][be%10>3||Math.floor(be/10)===1?0:be%10],Se=["January","February","March","April","May","June","July","August","September","October","November","December"][J.getMonth()],pe=J.getFullYear(),Ee=J.getHours(),Ge=J.getMinutes().toString().padStart(2,"0"),ze=Ee>=12?"PM":"AM",gn=Ee%12||12;return`${be}${ke} ${Se} ${pe} at ${gn}:${Ge} ${ze}`};x.useEffect(()=>{(async()=>{{const J=G(V,`University Data/${Te}/grading_rubric`),be=await le(J);se(be.exists())}})()},[Te]),x.useEffect(()=>{const X=G(V,"University Data/Essays"),J=Gt(X,be=>{if(!be.exists()){i([]),l(!1);return}const ke=[],ge=be.val();if(Object.keys(ge).forEach(Se=>{const pe=ge[Se];Object.keys(pe).forEach(Ee=>{var ze,gn,uo;const Ge=pe[Ee];(Ge.status==="submitted"||Ge.status==="reviewed")&&ke.push({id:`${Se}___${Ee}`,student_name:Se,essay_type:Ge.essayType||"personal_statement",essay_title:Ee,essay_content:Ge.essayText||"",university_name:Ge.universityName||null,submission_date:Ge.submittedAt||Ge.lastModified||new Date().toISOString().split("T")[0],status:Ge.status||"submitted",total_points:((ze=Ge.reviewData)==null?void 0:ze.totalPoints)||null,score:((gn=Ge.reviewData)==null?void 0:gn.score)||null,font_family:Ge.fontFamily||"Arial",font_size:Ge.fontSize||14,reviewed_at:((uo=Ge.reviewData)==null?void 0:uo.reviewedAt)||void 0})})}),ke.sort((Se,pe)=>new Date(pe.submission_date).getTime()-new Date(Se.submission_date).getTime()),e&&t){const Se=ke.filter(pe=>pe.student_name===t);i(Se)}else i(ke);l(!1)});return()=>J()},[e,t,r]),x.useEffect(()=>{if(c&&c.status==="reviewed"){const[X,J]=c.id.split("___"),be=G(V,`University Data/Essays/${X}/${J}`);Gt(be,ke=>{if(ke.exists()){const ge=ke.val();ge.reviewData&&(h(ge.reviewData.inlineComments||[]),m(ge.reviewData.generalComments||[]))}})}},[c==null?void 0:c.id,c==null?void 0:c.status]);const oo=async X=>{const J=s.find(be=>be.id===X);if(J){const[be,ke]=X.split("___"),ge=G(V,`University Data/Essays/${be}/${ke}`);Gt(ge,Se=>{if(Se.exists()){const pe=Se.val(),Ee={...J,reviewData:pe.reviewData||void 0};u(Ee),pe.reviewData?(h(pe.reviewData.inlineComments||[]),m(pe.reviewData.generalComments||[])):(h([]),m([]))}});{const Se=G(V,`University Data/${Te}/grading_rubric`),pe=await le(Se);se(pe.exists())}}},W=async()=>{const X=G(V,`University Data/${Te}/grading_rubric`);Gt(X,J=>{if(J.exists()){const be=J.val(),ke=Object.keys(be).map(Se=>({id:Se,name:be[Se].name,description:be[Se].description}));q(ke);const ge={};ke.forEach(Se=>{ge[Se.id]={rating:0,whatsMissing:"",howToImprove:""}}),U(ge)}},{onlyOnce:!0})},me=async()=>{if(c){if(!K){he(!0);return}await W(),ee(!0)}},Ie=(X,J,be)=>{U(ke=>({...ke,[X]:{...ke[X],[J]:be}}))},Fe=async()=>{if(!c)return;const X=ye.length*5,J=Object.values(te).reduce((ze,gn)=>ze+gn.rating,0),be=J/X*100,ke=ye.map(ze=>({criterionName:ze.name,criterionDescription:ze.description,rating:te[ze.id].rating,whatsMissing:te[ze.id].rating===5?"":te[ze.id].whatsMissing,howToImprove:te[ze.id].rating===5?"":te[ze.id].howToImprove})),[ge,Se]=c.id.split("___"),pe=G(V,`University Data/Essays/${ge}/${Se}`),Ee=await new Promise(ze=>{Gt(pe,gn=>ze(gn),{onlyOnce:!0})});if(Ee.exists()){const ze=Ee.val();await Me(pe,{...ze,status:"reviewed",reviewData:{reviewedBy:Te,reviewedAt:new Date().toISOString(),percentageGrade:be,rubricFeedback:ke}})}const Ge=s.map(ze=>ze.id===c.id?{...ze,status:"reviewed",total_points:X,score:J}:ze);i(Ge),u({...c,status:"reviewed",total_points:X,score:J}),ee(!1),U({})},Be=async()=>{if(!c)return;const X=parseInt(D),J=parseFloat(C);if(isNaN(X)||X<=0){alert("Please enter a valid total points greater than 0");return}if(isNaN(J)||J<0){alert("Please enter a valid score greater than or equal to 0");return}if(J>X){alert("Score cannot exceed total points");return}const[be,ke]=c.id.split("___"),ge=G(V,`University Data/Essays/${be}/${ke}`),Se=await new Promise(Ee=>{Gt(ge,Ge=>Ee(Ge),{onlyOnce:!0})});if(Se.exists()){const Ee=Se.val();await Me(ge,{...Ee,status:"reviewed",reviewData:{...Ee.reviewData,reviewedBy:Te,reviewedAt:new Date().toISOString(),totalPoints:X,score:J,inlineComments:d||[],generalComments:f||[]}})}const pe=s.map(Ee=>Ee.id===c.id?{...Ee,status:"reviewed",total_points:X,score:J}:Ee);i(pe),u({...c,status:"reviewed",total_points:X,score:J}),R(!1),O(""),k("")},vt=()=>{if(s.length===0)return 0;const X=s.filter(J=>J.status==="reviewed");return Math.round(X.length/s.length*100)};x.useEffect(()=>{if(e&&!c&&t&&r){const X=`${t}___${r}`,J=G(V,`University Data/Essays/${t}/${r}`);Gt(J,be=>{var ke,ge,Se;if(be.exists()){const pe=be.val(),Ee={id:X,student_name:t,essay_type:pe.essayType||"supplement",essay_title:r,essay_content:pe.essayText||"",university_name:pe.universityName||null,submission_date:pe.submittedAt||pe.lastModified||new Date().toISOString().split("T")[0],status:pe.status||"submitted",total_points:((ke=pe.reviewData)==null?void 0:ke.totalPoints)||null,score:((ge=pe.reviewData)==null?void 0:ge.score)||null,font_family:pe.fontFamily||"Arial",font_size:pe.fontSize||14,reviewed_at:((Se=pe.reviewData)==null?void 0:Se.reviewedAt)||void 0,reviewData:pe.reviewData||void 0};u(Ee),pe.reviewData?(h(pe.reviewData.inlineComments||[]),m(pe.reviewData.generalComments||[])):(h([]),m([]))}},{onlyOnce:!0})}},[e,t,r]),x.useEffect(()=>{if(c&&xe.current){const X=tr(c.essay_content);xe.current.innerHTML=X,d.length>0&&setTimeout(()=>hi(),50)}},[c==null?void 0:c.id]);const Ze=X=>{switch(X){case"submitted":return a.jsxs("div",{className:"flex items-center gap-1.5 bg-amber-100 text-amber-800 px-3 py-1 rounded-full",children:[a.jsx(Or,{className:"w-3.5 h-3.5"}),a.jsx("span",{className:"text-xs font-semibold",children:"To be Reviewed"})]});case"reviewed":return a.jsxs("div",{className:"flex items-center gap-1.5 bg-emerald-100 text-emerald-800 px-3 py-1 rounded-full",children:[a.jsx(Rh,{className:"w-3.5 h-3.5"}),a.jsx("span",{className:"text-xs font-semibold",children:"Reviewed"})]});default:return null}},bs=s.filter(X=>{const J=_==="all"?!0:_==="pending"?X.status==="submitted":X.status===_,be=N.trim()===""||X.student_name.toLowerCase().includes(N.toLowerCase()),ke=T==="all"||X.essay_type===T;return J&&be&&ke}),na=s.filter(X=>X.status==="submitted").length,fi=s.filter(X=>X.status==="reviewed").length,lo=vt();if(o)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});const co=async()=>{z(!1);{const X=G(V,`University Data/${Te}/grading_rubric`),J=await le(X);se(J.exists())}};if(c){const X=()=>{e&&n?n():u(null)};return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-4",children:[a.jsxs("button",{onClick:X,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(cn,{className:"w-4 h-4"}),e?"Back to Student Profile":"Back to Essays"]}),a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-1",children:c.essay_title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[c.student_name,"  ",c.essay_type==="personal_statement"?"Personal Statement":c.essay_type==="supplement"?"Supplemental Essay":"Activity List",c.university_name&&`  ${c.university_name}`]}),c.status==="reviewed"&&c.total_points&&c.score!==null&&a.jsxs("div",{className:"mt-2 inline-flex items-center gap-2 bg-emerald-50 px-3 py-1.5 rounded-lg border border-emerald-200",children:[a.jsx(Vt,{className:"w-4 h-4 text-emerald-600"}),a.jsxs("span",{className:"text-sm font-semibold text-emerald-900",children:["Grade: ",c.score,"/",c.total_points," (",(c.score/c.total_points*100).toFixed(1),"%)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[Ze(c.status),c.status==="reviewed"&&a.jsxs("button",{onClick:()=>ve(!B),className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Vt,{className:"w-4 h-4"}),B?"Hide":"View"," Feedback"]}),c.status!=="reviewed"&&a.jsxs("button",{onClick:me,className:"flex items-center gap-2 bg-emerald-500 text-white px-4 py-2 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm",children:[a.jsx(Vt,{className:"w-4 h-4"}),"Give Feedback"]})]})]})]}),H?a.jsx("div",{className:"px-8 py-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg p-6 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Essay Content"}),a.jsx("button",{onClick:()=>ee(!1),className:"text-sm text-[#04ADEE] hover:text-[#0396d5] font-medium",children:"View Full Essay"})]}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 max-h-[70vh] overflow-y-auto",style:{fontFamily:c.font_family,fontSize:`${c.font_size}pt`,lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:c.essay_content}})]}),a.jsxs("div",{className:"space-y-4 max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-blue-50 rounded-lg p-4 border border-emerald-200 sticky top-0 z-10",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Grade Essay with Rubric"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Rate each criterion and provide detailed feedback"})]}),ye.map((J,be)=>{var ke,ge,Se,pe;return a.jsxs("div",{className:"bg-white rounded-lg p-5 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-7 h-7 bg-[#04ADEE] text-white text-sm font-bold rounded-full flex-shrink-0",children:be+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-base font-bold text-slate-900 mb-1",children:J.name}),a.jsx("p",{className:"text-sm text-slate-600",children:J.description})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Rating (1-5)"}),a.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(Ee=>{var Ge;return a.jsx("button",{onClick:()=>Ie(J.id,"rating",Ee),className:`flex-1 px-4 py-3 rounded-lg font-bold text-sm transition-all ${((Ge=te[J.id])==null?void 0:Ge.rating)===Ee?"bg-[#04ADEE] text-white shadow-md":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:Ee},Ee)})})]}),((ke=te[J.id])==null?void 0:ke.rating)===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-sm text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):((ge=te[J.id])==null?void 0:ge.rating)>0?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"What's missing? (Why didn't they get a 5?)"}),a.jsx("textarea",{value:((Se=te[J.id])==null?void 0:Se.whatsMissing)||"",onChange:Ee=>Ie(J.id,"whatsMissing",Ee.target.value),placeholder:"Explain what elements are missing or could be improved...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"How to improve to a 5?"}),a.jsx("textarea",{value:((pe=te[J.id])==null?void 0:pe.howToImprove)||"",onChange:Ee=>Ie(J.id,"howToImprove",Ee.target.value),placeholder:"Provide specific suggestions on how to reach a perfect score...",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm resize-none",rows:3})]})]}):null]},J.id)}),a.jsx("div",{className:"sticky bottom-0 bg-white border-t border-slate-200 pt-4",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{ee(!1),U({})},className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Cancel"}),a.jsxs("button",{onClick:Fe,disabled:!Object.values(te).every(J=>J.rating>0&&(J.rating===5||J.whatsMissing.trim()&&J.howToImprove.trim())),className:`flex-1 px-4 py-3 rounded-lg transition-colors font-medium text-sm flex items-center justify-center gap-2 ${Object.values(te).every(J=>J.rating>0&&(J.rating===5||J.whatsMissing.trim()&&J.howToImprove.trim()))?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-slate-300 text-slate-500 cursor-not-allowed"}`,children:[a.jsx(Rh,{className:"w-4 h-4"}),"Submit Grade"]})]})})]})]})}):a.jsxs("div",{className:"px-8 py-6",children:[ye.length>0&&c.status!=="reviewed"&&a.jsx("div",{className:"mb-4 flex justify-center",children:a.jsxs("button",{onClick:()=>ee(!0),className:"flex items-center gap-2 bg-emerald-500 text-white px-6 py-3 rounded-lg hover:bg-emerald-600 transition-colors font-medium text-sm shadow-md",children:[a.jsx(Vt,{className:"w-4 h-4"}),"Back to Grading"]})}),a.jsxs("div",{className:B?"grid grid-cols-[60%_40%] gap-6 max-w-7xl mx-auto items-start":"max-w-5xl mx-auto",children:[a.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] sticky top-6",children:a.jsx("div",{className:"overflow-y-auto flex-1 p-8",children:a.jsx("div",{ref:xe,contentEditable:!1,className:"prose prose-lg max-w-none text-slate-700",style:{fontFamily:c.font_family,fontSize:`${c.font_size}pt`,lineHeight:"1.6"},dangerouslySetInnerHTML:{__html:c.essay_content}})})}),c.status==="reviewed"&&B&&((ss=c.reviewData)==null?void 0:ss.rubricFeedback)&&a.jsxs("div",{className:"sticky top-6 bg-gradient-to-br from-emerald-50 to-blue-50 rounded-lg border border-emerald-200 shadow-sm flex flex-col max-h-[calc(100vh-12rem)] self-start",children:[a.jsx("div",{className:"p-5 border-b border-emerald-200 bg-gradient-to-br from-emerald-50 to-blue-50 flex-shrink-0",children:a.jsxs("h3",{className:"text-lg font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Vt,{className:"w-5 h-5 text-emerald-600"}),"Rubric Feedback"]})}),a.jsx("div",{className:"overflow-y-auto flex-1 p-5 min-h-0",children:a.jsx("div",{className:"space-y-3",children:c.reviewData.rubricFeedback.map((J,be)=>a.jsxs("div",{className:"bg-white border border-emerald-200 rounded-lg p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-start gap-2.5 mb-2.5",children:[a.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 bg-[#04ADEE] text-white text-xs font-bold rounded-full flex-shrink-0",children:be+1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:J.criterionName}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:J.criterionDescription})]}),a.jsxs("div",{className:"flex items-center gap-1 bg-emerald-100 px-1.5 py-0.5 rounded flex-shrink-0",children:[a.jsx(Vt,{className:"w-3.5 h-3.5 text-emerald-700 fill-emerald-700"}),a.jsxs("span",{className:"text-xs font-bold text-emerald-700",children:[J.rating,"/5"]})]})]}),J.rating===5?a.jsxs("div",{className:"bg-emerald-50 border border-emerald-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-emerald-800",children:"Perfect Score!"}),a.jsx("p",{className:"text-xs text-emerald-700 leading-relaxed",children:"This criterion has been excellently fulfilled."})]}):a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-red-800 mb-0.5",children:"What's Missing:"}),a.jsx("p",{className:"text-xs text-red-700 leading-relaxed",children:J.whatsMissing})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2.5",children:[a.jsx("p",{className:"text-xs font-semibold text-blue-800 mb-0.5",children:"How to Improve:"}),a.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:J.howToImprove})]})]})]},be))})})]})]})]}),I&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Grade Essay"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Enter the grading based on your rubric"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Total Points (Maximum possible)"}),a.jsx("input",{type:"number",min:"1",value:D,onChange:J=>O(J.target.value),placeholder:"e.g., 100, 50, 20",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Score (Points earned)"}),a.jsx("input",{type:"number",min:"0",step:"0.01",value:C,onChange:J=>k(J.target.value),placeholder:"e.g., 85, 42.5, 18",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),D&&C&&a.jsx("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg",children:a.jsxs("p",{className:"text-sm text-slate-600",children:["Final Grade: ",a.jsxs("span",{className:"font-bold text-slate-900",children:[C,"/",D," (",(parseFloat(C)/parseFloat(D)*100).toFixed(1),"%)"]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{R(!1),O(""),k("")},className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium",children:"Cancel"}),a.jsx("button",{onClick:Be,className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium",children:"Save Grade"})]})]})}),fe&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ps,{className:"w-6 h-6 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Set Up Rubric First"}),a.jsx("p",{className:"text-sm text-slate-600",children:"You need to set up a grading rubric before you can give feedback on essays. This ensures consistent and fair evaluations."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>he(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Close"}),a.jsx("button",{onClick:()=>{he(!1),z(!0)},className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm",children:"Set Up Rubric"})]})]})}),L&&a.jsx(uC,{counselorName:Te,onClose:co})]})}return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Ce,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Essay Review"})]}),a.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 bg-white border border-slate-300 text-slate-700 px-4 py-2 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:[a.jsx(cW,{className:"w-4 h-4"}),K?"Edit Rubric":"Set Rubric"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Pending Review"}),a.jsx(Or,{className:"w-4 h-4 text-amber-500"})]}),a.jsx("p",{className:"text-2xl font-bold text-slate-900",children:na})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Reviewed"}),a.jsx(Rh,{className:"w-4 h-4 text-emerald-500"})]}),a.jsx("p",{className:"text-2xl font-bold text-slate-900",children:fi})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Review Progress"}),a.jsx(Vt,{className:"w-4 h-4 text-amber-500"})]}),a.jsxs("p",{className:"text-2xl font-bold text-slate-900",children:[lo,"%"]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(fr,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by student name...",value:N,onChange:X=>E(X.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm"})]}),a.jsxs("select",{value:T,onChange:X=>S(X.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-sm font-medium text-slate-700 bg-white hover:bg-slate-50",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"personal_statement",children:"Personal Statements"}),a.jsx("option",{value:"supplement",children:"Supplementary Essays"}),a.jsx("option",{value:"activity_list",children:"Activity Lists"})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:()=>j("all"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="all"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["All (",s.length,")"]}),a.jsxs("button",{onClick:()=>j("pending"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="pending"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Pending Review (",na,")"]}),a.jsxs("button",{onClick:()=>j("reviewed"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${_==="reviewed"?"bg-[#04ADEE] text-white":"bg-white text-slate-700 hover:bg-slate-100"}`,children:["Reviewed (",fi,")"]})]})]})]}),a.jsx("div",{className:"px-8 py-6",children:a.jsx("div",{className:"grid gap-4",children:bs.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Ce,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 text-lg",children:"No essays found"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your filter"})]}):bs.map(X=>a.jsxs("div",{onClick:()=>oo(X.id),className:"bg-white rounded-lg shadow-sm p-5 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-1",children:X.essay_title}),a.jsxs("p",{className:"text-sm text-slate-600",children:[X.student_name,"  ",X.essay_type==="personal_statement"?"Personal Statement":X.essay_type==="supplement"?"Supplemental Essay":"Activity List",X.university_name&&`  ${X.university_name}`]})]}),Ze(X.status)]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[X.status==="reviewed"&&X.reviewed_at?a.jsxs("span",{children:["Reviewed on: ",Rn(X.reviewed_at)]}):a.jsxs("span",{children:["Submitted on: ",Rn(X.submission_date)]}),X.status==="reviewed"&&X.total_points&&X.score!==null?a.jsxs("span",{className:"flex items-center gap-1.5 text-emerald-700 font-semibold",children:[a.jsx(Vt,{className:"w-3.5 h-3.5"}),X.score,"/",X.total_points," (",(X.score/X.total_points*100).toFixed(1),"%)"]}):a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Ha,{className:"w-3.5 h-3.5"}),"Click to review"]})]})]},X.id))})}),L&&a.jsx(uC,{counselorName:Te,onClose:co}),fe&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(ps,{className:"w-6 h-6 text-amber-500"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Set Up Rubric First"}),a.jsx("p",{className:"text-sm text-slate-600",children:"You need to set up a grading rubric before you can give feedback on essays. This ensures consistent and fair evaluations."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>he(!1),className:"flex-1 px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors font-medium text-sm",children:"Close"}),a.jsx("button",{onClick:()=>{he(!1),z(!0)},className:"flex-1 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors font-medium text-sm",children:"Set Up Rubric"})]})]})})]})},I5=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(null),[s,i]=x.useState(null),[o,l]=x.useState(""),[c,u]=x.useState("desc"),[d,h]=x.useState(!0),[f,m]=x.useState(!1),[g,y]=x.useState(0),[p,v]=x.useState(0),[b,w]=x.useState({academicHistory:!1,personalStatement:!1,activities:!1,supplementaryEssays:!1,careerInterests:!1,specialCircumstances:!1}),[_,j]=x.useState(!1),[N,E]=x.useState(null);x.useEffect(()=>{(async()=>{try{console.log(" AcademicTracking: Starting data fetch from FIREBASE..."),h(!0);const P=localStorage.getItem("counselor_name")||"Mr Adoniyas Tesfaye";console.log(" Counselor from localStorage:",P);const A=await Oae(P);console.log(" Data received from Firebase service:"),console.log("  - Total Students:",A.totalStudents),console.log("  - Average Grade:",A.averageGrade),console.log("  - Students Array:",A.students),console.log("  - Number of Students in Array:",A.students.length),t(A.students),y(A.totalStudents),v(A.averageGrade),console.log(" State updated successfully"),console.log("  - filteredStudents will have:",A.students.length,"students")}catch(P){console.error(" Error in AcademicTracking component:",P)}finally{h(!1),console.log(" Loading complete")}})()},[]);const T=async M=>{console.log(" Clicking on student:",M);const P=e.find(A=>A.studentName===M);if(P){console.log(" Found student data:",P),n(P),m(!0);const A=await N5(M);i(A),m(!1),w({academicHistory:!1,personalStatement:!1,activities:!1,supplementaryEssays:!1,careerInterests:!1,specialCircumstances:!1})}else console.log(" Student not found in array")},S=()=>{n(null),i(null)},D=M=>{w(P=>({...P,[M]:!P[M]}))},O=M=>{E(M),j(!0)},C=()=>{E(null),j(!1)};console.log(" Current students array length:",e.length),console.log(" Current search term:",o);const k=e.filter(M=>{const P=M.studentName.toLowerCase().includes(o.toLowerCase());return!P&&o&&console.log(`Filtering OUT ${M.studentName} (doesn't match "${o}")`),P}).sort((M,P)=>c==="desc"?P.overallAverage-M.overallAverage:c==="asc"?M.overallAverage-P.overallAverage:M.studentName.localeCompare(P.studentName));console.log(" Filtered Students Count:",k.length,"out of",e.length),k.length>0&&console.log(" Filtered Students:",k.map(M=>M.studentName));const I=M=>M===1?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-yellow-400 to-yellow-500 px-3 py-1.5 rounded-full",children:[a.jsx(jW,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"1st"})]}):M===2?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-slate-300 to-slate-400 px-3 py-1.5 rounded-full",children:[a.jsx($1,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"2nd"})]}):M===3?a.jsxs("div",{className:"flex items-center gap-1.5 bg-gradient-to-r from-amber-600 to-amber-700 px-3 py-1.5 rounded-full",children:[a.jsx($1,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm font-bold text-white",children:"3rd"})]}):a.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-slate-100 border border-slate-300",children:a.jsxs("span",{className:"text-base font-bold text-slate-600",children:["#",M]})}),R=M=>M>=90?"#10b981":M>=80?"#04ADEE":M>=70?"#f59e0b":"#ef4444";if(d)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});if(_&&N&&r)return a.jsx(pg,{comeFromStudentProfile:!0,studentName:r.studentName,essayTitle:N.title,onBackToStudentProfile:C});if(r){const M=r.subjectAverages.map(P=>({name:P.subject.length>12?P.subject.substring(0,12)+"...":P.subject,grade:P.grade,fullName:P.subject}));return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20 px-8 py-5",children:[a.jsxs("button",{onClick:S,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-4 transition-colors font-medium",children:[a.jsx(cn,{className:"w-4 h-4"}),"Back to Students"]}),a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-3",children:r.studentName}),f?a.jsxs("div",{className:"flex items-center gap-2 text-slate-500",children:[a.jsx("div",{className:"w-4 h-4 border-2 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-sm",children:"Loading profile data..."})]}):s&&a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Overall Average"}),a.jsxs("div",{className:"text-lg font-bold text-[#04ADEE]",children:[r.overallAverage,"%"]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:s.sat?"SAT":"ACT"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.sat||s.act||"N/A"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Age"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:S5(s.dob||"")})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Nationality"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.nationality||"N/A"})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-600 mb-0.5",children:"Budget"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:s.budget||"N/A"})]})]})]}),a.jsxs("div",{className:"px-8 py-6 space-y-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 border border-slate-200 shadow-sm",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-3",children:"Course Grades"}),a.jsx(F4,{width:"100%",height:240,children:a.jsxs(j5,{data:M,barSize:35,children:[a.jsx(z_,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),a.jsx(q_,{dataKey:"name",tick:{fontSize:12}}),a.jsx(V_,{domain:[0,100],tick:{fontSize:12}}),a.jsx(P3,{content:({active:P,payload:A})=>P&&A&&A.length?a.jsxs("div",{className:"bg-white p-2 border border-slate-200 rounded-lg shadow-lg",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-800",children:A[0].payload.fullName}),a.jsxs("p",{className:"text-base font-bold text-[#04ADEE]",children:["Grade: ",A[0].value,"%"]})]}):null}),a.jsx(H_,{dataKey:"grade",radius:[6,6,0,0],children:M.map((P,A)=>{const $=["#04ADEE","#10b981","#f59e0b","#8b5cf6","#ec4899","#06b6d4"];return a.jsx(rg,{fill:$[A%$.length]},`cell-${A}`)})})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("academicHistory"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Academic History"})]}),b.academicHistory?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.academicHistory&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:r.previousAverages.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(cr,{className:"w-12 h-12 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-slate-500",children:"No previous academic records available"})]}):a.jsx("div",{className:"space-y-3 mt-3",children:r.previousAverages.map((P,A)=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-800",children:P.year}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Overall Average:"}),a.jsxs("span",{className:"text-base font-bold text-[#04ADEE]",children:[P.overallAverage,"%"]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-3",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:"Subject Grades"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.subjects.map(($,L)=>a.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-slate-200",children:[a.jsx("p",{className:"text-xs text-slate-600 mb-0.5",children:$.subject}),a.jsxs("p",{className:"text-sm font-bold text-slate-800",children:[$.grade,"%"]})]},L))})]})]},A))})})]}),(s==null?void 0:s.personalStatement)&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("personalStatement"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ce,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Personal Statement"}),s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold",children:"Reviewed"}),!s.personalStatement.reviewed&&a.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold",children:"Unreviewed"})]}),b.personalStatement?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.personalStatement&&a.jsxs("div",{className:"px-4 pb-4 border-t border-slate-200 mt-3",children:[a.jsx("button",{onClick:()=>O(s.personalStatement),className:"text-lg font-semibold text-slate-900 hover:text-slate-700 hover:underline mb-3 block text-left",children:s.personalStatement.title}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:s.personalStatement.text}})]})]}),(s==null?void 0:s.activitiesList)&&s.activitiesList.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("activities"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hr,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Extra Curricular Activities"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.activitiesList.length})]}),b.activities?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.activities&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-2 mt-3",children:s.activitiesList.map((P,A)=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-[#04ADEE] text-white flex items-center justify-center text-xs font-bold flex-shrink-0 mt-0.5",children:A+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-1",children:P.name}),a.jsx("p",{className:"text-xs text-slate-600",children:P.description})]})]})},P.id))})})]}),(s==null?void 0:s.supplementaryEssays)&&s.supplementaryEssays.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("supplementaryEssays"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Rt,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Supplementary Essays"}),a.jsx("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-0.5 rounded-full font-semibold",children:s.supplementaryEssays.length})]}),b.supplementaryEssays?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.supplementaryEssays&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"space-y-3 mt-3",children:s.supplementaryEssays.map((P,A)=>a.jsx("div",{className:"bg-slate-50 rounded-lg p-3 border border-slate-200",children:a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("button",{onClick:()=>O(P),className:"text-sm font-bold text-slate-900 hover:text-slate-700 hover:underline mb-1 text-left",children:P.title}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[P.universityName&&a.jsx("span",{className:"text-xs text-slate-600 bg-white px-2 py-0.5 rounded border border-slate-200",children:P.universityName}),a.jsxs("span",{className:"text-xs text-slate-500",children:["Created: ",P.createdAt]})]})]}),P.reviewed?a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:"Reviewed"}):a.jsx("span",{className:"text-xs bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full font-semibold flex-shrink-0",children:"Unreviewed"})]})},A))})})]}),(s==null?void 0:s.careerInterests)&&s.careerInterests.length>0&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("careerInterests"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(to,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Career Interests"})]}),b.careerInterests?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.careerInterests&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:s.careerInterests.map((P,A)=>a.jsx("span",{className:"px-3 py-1.5 bg-gradient-to-r from-[#04ADEE]/10 to-emerald-50 border border-[#04ADEE]/20 rounded-full text-sm font-medium text-slate-800",children:P},A))})})]}),(s==null?void 0:s.specialCircumstances)&&a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden",children:[a.jsxs("button",{onClick:()=>D("specialCircumstances"),className:"w-full px-4 py-3 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ps,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("h3",{className:"text-base font-semibold text-slate-800",children:"Special Circumstances"})]}),b.specialCircumstances?a.jsx(Jr,{className:"w-5 h-5 text-slate-600"}):a.jsx(Qr,{className:"w-5 h-5 text-slate-600"})]}),b.specialCircumstances&&a.jsx("div",{className:"px-4 pb-4 border-t border-slate-200",children:a.jsx("p",{className:"text-sm text-slate-700 mt-3 bg-slate-50 p-3 rounded-lg border border-slate-200",children:s.specialCircumstances})})]})]})]})}return a.jsxs("div",{className:"-mx-8 -my-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:a.jsxs("div",{className:"px-8 py-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Rt,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Student Profile Dashboard"})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),a.jsx("span",{className:"text-xs font-semibold text-white",children:"Live Data"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zn,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Total Students"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(We,{end:g,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Gn,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Average Grade"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:a.jsx(We,{end:p,duration:1500,decimals:1})}),a.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]})]})]})}),a.jsxs("div",{className:"px-8 py-6",children:[a.jsxs("div",{className:"mb-6 space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search students by name...",value:o,onChange:M=>l(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-slate-900 placeholder-slate-400"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("label",{className:"text-sm font-medium text-slate-700",children:"Sort by:"}),a.jsxs("select",{value:c,onChange:M=>u(M.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent text-slate-900 bg-white cursor-pointer",children:[a.jsx("option",{value:"desc",children:"Descending Average"}),a.jsx("option",{value:"asc",children:"Ascending Average"}),a.jsx("option",{value:"alphabetical",children:"Alphabetical Order"})]})]})]}),k.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fr,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 text-lg",children:"No students found"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your search"})]}):a.jsx("div",{className:"grid gap-3",children:k.map((M,P)=>{const A=P+1;return a.jsx("div",{onClick:()=>T(M.studentName),className:"bg-white rounded-lg shadow-sm p-4 hover:shadow-md transition-all cursor-pointer border border-slate-200 hover:border-[#04ADEE]",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"flex-shrink-0",children:I(A)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-base font-semibold text-slate-800 mb-2",children:M.studentName}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(cr,{className:"w-3.5 h-3.5 text-slate-500"}),a.jsxs("span",{className:"text-sm text-slate-600",children:[M.numCourses," ",M.numCourses===1?"course":"courses"]})]})})]}),a.jsx("div",{className:"flex items-center justify-center",children:a.jsx(T5,{percentage:M.overallAverage,size:80,strokeWidth:6,color:R(M.overallAverage),children:a.jsxs("div",{className:"text-center",children:[a.jsxs("p",{className:"text-xl font-bold",style:{color:R(M.overallAverage)},children:[M.overallAverage,"%"]}),a.jsx("p",{className:"text-[10px] text-slate-500",children:"Avg"})]})})})]})},M.studentName)})})]})]})},poe=({counselor:e})=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(I5,{})}),Gr={essayWeight:40,currentAverageWeight:50,pastAverageWeight:10,excellentMin:90,excellentMax:100,strongMin:80,strongMax:89,competitiveMin:70,competitiveMax:79,developingMin:0,developingMax:69},D5=async e=>{var t,r,n,s,i,o,l,c,u,d,h,f,m,g,y,p;try{console.log("=== FETCHING POOL WEIGHTINGS (FIREBASE) ==="),console.log("Counselor Name:",e);const v=`University Data/Pool Weightings/${e}`;console.log("Firebase Path:",v);const b=G(V,v),w=await le(b);if(console.log("Snapshot Exists:",w.exists()),console.log("Raw Data:",w.val()),!w.exists())return console.log("No weightings found, returning defaults"),Gr;const _=w.val(),j={essayWeight:_["Essays and Activities"]||Gr.essayWeight,currentAverageWeight:_["Current Average"]||Gr.currentAverageWeight,pastAverageWeight:_["Past Averages"]||Gr.pastAverageWeight,excellentMin:parseInt((r=(t=_.Competitiveness)==null?void 0:t.Excellent)==null?void 0:r.split("-")[0])||Gr.excellentMin,excellentMax:parseInt((s=(n=_.Competitiveness)==null?void 0:n.Excellent)==null?void 0:s.split("-")[1])||Gr.excellentMax,strongMin:parseInt((o=(i=_.Competitiveness)==null?void 0:i.Strong)==null?void 0:o.split("-")[0])||Gr.strongMin,strongMax:parseInt((c=(l=_.Competitiveness)==null?void 0:l.Strong)==null?void 0:c.split("-")[1])||Gr.strongMax,competitiveMin:parseInt((d=(u=_.Competitiveness)==null?void 0:u.Competitive)==null?void 0:d.split("-")[0])||Gr.competitiveMin,competitiveMax:parseInt((f=(h=_.Competitiveness)==null?void 0:h.Competitive)==null?void 0:f.split("-")[1])||Gr.competitiveMax,developingMin:parseInt((g=(m=_.Competitiveness)==null?void 0:m.Developing)==null?void 0:g.split("-")[0])||Gr.developingMin,developingMax:parseInt((p=(y=_.Competitiveness)==null?void 0:y.Developing)==null?void 0:p.split("-")[1])||Gr.developingMax};return console.log("Parsed Weightings:",j),console.log(`=== END FETCH ===
`),j}catch(v){return console.error(" ERROR in getPoolWeightings:",v),Gr}},goe=async(e,t)=>{try{console.log("=== SAVING POOL WEIGHTINGS (FIREBASE) ==="),console.log("Counselor Name:",e),console.log("Weightings:",t);const r=`University Data/Pool Weightings/${e}`;console.log("Firebase Path:",r);const n={"Essays and Activities":t.essayWeight,"Current Average":t.currentAverageWeight,"Past Averages":t.pastAverageWeight,Competitiveness:{Excellent:`${t.excellentMin}-${t.excellentMax}`,Strong:`${t.strongMin}-${t.strongMax}`,Competitive:`${t.competitiveMin}-${t.competitiveMax}`,Developing:`${t.developingMin}-${t.developingMax}`}};console.log("Data to save:",n);const s=G(V,r);await Me(s,n),console.log(" Weightings saved successfully"),console.log(`=== END SAVE ===
`)}catch(r){throw console.error(" ERROR in savePoolWeightings:",r),r}},voe=(e,t,r,n)=>{const s=n.essayWeight/100,i=n.currentAverageWeight/100,o=n.pastAverageWeight/100;return e*s+t*i+r*o},xoe=(e,t)=>e>=t.excellentMin&&e<=t.excellentMax||e>=t.strongMin&&e<=t.strongMax?"Strong":e>=t.competitiveMin&&e<=t.competitiveMax?"Competitive":"Developing",R5=async e=>{try{console.log("=== FETCHING COUNSELOR POOL DATA (FIREBASE) ==="),console.log("Counselor Name:",e);const t=await D5(e);console.log("Loaded weightings:",t);const r=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",r);const n=G(V,r),s=await le(n);if(console.log("1. Caseload Query Result:"),console.log("   - Exists:",s.exists()),console.log("   - Raw Data:",s.val()),!s.exists())return console.log(" No caseload found for counselor:",e),{activeStudents:[],totalActivePool:0,totalAssigned:0,totalCaseload:0,averageStrength:0,progress:0};const i=s.val(),o=Object.keys(i);console.log("2. Student Names in Caseload:",o),console.log("   - Count:",o.length);const l=[],c=[];let u=0;for(const m of o){console.log(`
--- Processing Student: ${m} ---`);const g=`University Data/Pool management/${m}`;console.log("   Pool Management Path:",g);const y=G(V,g),p=await le(y);if(console.log("   Pool Snapshot Exists:",p.exists()),console.log("   Pool Raw Data:",p.val()),!p.exists()){console.log(`    No pool management data for: ${m}`);continue}const v=p.val(),b=v.Description||"No description available",w=v["Essays Average"]||0;console.log("   Description:",b),console.log("   Essays Average:",w);const _=v["Career Interests"]||{},j=Object.keys(_).filter($=>_[$]===!0);console.log("   Career Interests:",j);const N=`University Data/Student Academics/${m}`;console.log("   Academic Path:",N);const E=G(V,N),T=await le(E);if(console.log("   Academic Snapshot Exists:",T.exists()),console.log("   Academic Raw Data:",T.val()),!T.exists()){console.log(`    No academic data for: ${m}`);continue}const S=T.val(),D=S["Overall Average"]||0,O=S["Past Overall Average"]||0;console.log("   Overall Average:",D),console.log("   Past Overall Average:",O);const C=voe(w,D,O,t),k=xoe(C,t),I=Math.round(C*10)/10;console.log("   Composite Strength:",I),c.push(I);const R=`University Data/Pool Strength/${m}`,M=G(V,R);await Me(M,I),console.log("    Saved to Pool Strength:",R,"=",I);const P=v.Assigned===!0;if(console.log("   Is Assigned:",P),P){console.log(`    Skipping ${m} for active pool - Already assigned universities`),u++;continue}const A={id:m.replace(/\s+/g,"-").toLowerCase(),name:m,email:`${m.replace(/\s+/g,".").toLowerCase()}@example.com`,description:b,careerInterests:j,essayActivities:w,academicPerformance:D,academicTrend:O,compositeStrength:I,strengthLabel:k,composite_score:I,academic_performance:D,essay_activities_rating:w,academic_trend:O};console.log("    Added to Active Pool:",A),l.push(A)}const d=l.length,h=o.length,f=c.length>0?c.reduce((m,g)=>m+g,0)/c.length:0;return console.log(`
=== FINAL POOL SUMMARY ===`),console.log("Total Caseload:",h),console.log("Total Active Pool:",d),console.log("Total Assigned:",u),console.log("All Composite Scores:",c),console.log("Average Strength (All Students):",Math.round(f*10)/10),console.log("Progress:",`${u}/${h}`),console.log(`=== END FETCH ===
`),{activeStudents:l,totalActivePool:d,totalAssigned:u,totalCaseload:h,averageStrength:Math.round(f*10)/10,progress:h>0?u/h*100:0}}catch(t){throw console.error(" ERROR in getCounselorPoolData:",t),t}},yoe={getActiveStudents:async e=>{const{data:t,error:r}=await Yt.from("pool_students").select("*").eq("counselor_id",e).eq("status","active").order("composite_score",{ascending:!1});if(r)throw r;return t||[]},getAssignedStudents:async e=>{const{data:t,error:r}=await Yt.from("pool_students").select("*").eq("counselor_id",e).eq("status","assigned").order("updated_at",{ascending:!1});if(r)throw r;return t||[]},getStudentById:async e=>{const{data:t,error:r}=await Yt.from("pool_students").select("*").eq("id",e).maybeSingle();if(r)throw r;return t},assignUniversities:async(e,t)=>{try{console.log("=== ASSIGNING UNIVERSITIES (FIREBASE) ==="),console.log("Student Name:",e),console.log("Universities:",t);const r={};t.forEach(l=>{const c=l.tier.charAt(0).toUpperCase()+l.tier.slice(1);r[l.name]=c});const n=`University Data/Assigned Students/${e}/Universities`;console.log("Firebase Path for Assignments:",n),console.log("Data to save:",r);const s=G(V,n);await Me(s,r);const i=`University Data/Pool management/${e}`;console.log("Firebase Path for Pool Management:",i);const o=G(V,i);await ap(o,{Assigned:!0}),console.log(" Universities assigned successfully"),console.log(`=== END ASSIGNMENT ===
`)}catch(r){throw console.error(" ERROR in assignUniversities:",r),r}},getStudentAssignments:async e=>{const{data:t,error:r}=await Yt.from("university_assignments").select("*").eq("student_id",e).order("assigned_at",{ascending:!1});if(r)throw r;return t||[]},addStudent:async e=>{const{data:t,error:r}=await Yt.from("pool_students").insert(e).select().single();if(r)throw r;return t}},Mv={reach:["Harvard University","Stanford University","MIT","Yale University","Princeton University","Columbia University","Duke University","University of Pennsylvania","Cornell University","Brown University"],mid:["University of Michigan","Boston University","Northwestern University","University of Virginia","University of North Carolina","NYU","University of California Berkeley","UCLA","USC","Georgetown University"],safety:["Penn State University","Ohio State University","Michigan State University","University of Maryland","Rutgers University","Purdue University","University of Wisconsin Madison","University of Florida","Arizona State University"]};function M5({student:e,counselorId:t,onClose:r,onComplete:n}){const[s,i]=x.useState([]),[o,l]=x.useState(""),[c,u]=x.useState("mid"),[d,h]=x.useState(!1),[f,m]=x.useState(""),[g,y]=x.useState(!0),[p,v]=x.useState(5),[b,w]=x.useState(!1),_=()=>{if(!o.trim()){m("Please enter a university name");return}if(!b&&s.length>=p){m(`Maximum ${p} universities allowed`);return}if(s.some(S=>S.name.toLowerCase()===o.toLowerCase())){m("This university is already in the list");return}i([...s,{name:o.trim(),tier:c}]),l(""),m("")},j=S=>{i(s.filter((D,O)=>O!==S)),m("")},N=(S,D)=>{if(!b&&s.length>=p){m(`Maximum ${p} universities allowed`);return}if(s.some(O=>O.name.toLowerCase()===S.toLowerCase())){m("This university is already in the list");return}i([...s,{name:S,tier:D}]),m("")},E=async()=>{if(s.length===0){m("Please add at least one university");return}if(!b&&s.length!==p){m(`Please assign exactly ${p} universities`);return}h(!0),m("");try{await yoe.assignUniversities(e.name,s),n()}catch(S){m(S instanceof Error?S.message:"Failed to assign universities"),h(!1)}},T=S=>{switch(S){case"reach":return"bg-purple-100 text-purple-700 border-purple-200";case"mid":return"bg-blue-100 text-blue-700 border-blue-200";case"safety":return"bg-green-100 text-green-700 border-green-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col mx-2 sm:mx-0",children:[a.jsxs("div",{className:"px-4 sm:px-6 py-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg sm:text-2xl font-bold text-slate-900",children:"Assign Universities"}),a.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:e.name})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-2 sm:p-3 border border-slate-200",children:[a.jsx("p",{className:"text-[10px] sm:text-xs text-slate-600 mb-0.5 sm:mb-1",children:"Composite"}),a.jsxs("p",{className:"text-sm sm:text-lg font-bold text-slate-900",children:[e.composite_score.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-2 sm:p-3 border border-blue-200",children:[a.jsx("p",{className:"text-[10px] sm:text-xs text-blue-600 mb-0.5 sm:mb-1",children:"Current Avg"}),a.jsxs("p",{className:"text-sm sm:text-lg font-bold text-blue-700",children:[e.academic_performance.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-2 sm:p-3 border border-purple-200",children:[a.jsx("p",{className:"text-[10px] sm:text-xs text-purple-600 mb-0.5 sm:mb-1",children:"Essays"}),a.jsxs("p",{className:"text-sm sm:text-lg font-bold text-purple-700",children:[e.essay_activities_rating.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-2 sm:p-3 border border-amber-200",children:[a.jsx("p",{className:"text-[10px] sm:text-xs text-amber-600 mb-0.5 sm:mb-1",children:"Previous Avg"}),a.jsxs("p",{className:"text-sm sm:text-lg font-bold text-amber-700",children:[((e.academic_performance||0)-(e.academic_trend||0)).toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[a.jsxs("div",{className:"mb-6 p-4 bg-[#04ADEE]/10 rounded-lg border border-[#04ADEE]/30",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-[#04ADEE] mb-2",children:"University Limit"}),a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("input",{type:"number",min:"1",max:"20",value:p,onChange:S=>{const D=parseInt(S.target.value)||1;v(Math.max(1,Math.min(20,D)))},disabled:b,className:"w-24 px-3 py-2 border border-[#04ADEE]/30 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent disabled:opacity-50 disabled:bg-slate-100"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:b,onChange:S=>w(S.target.checked),className:"w-4 h-4 text-[#04ADEE] border-[#04ADEE]/30 rounded focus:ring-[#04ADEE]"}),a.jsxs("span",{className:"text-sm text-[#04ADEE] font-medium flex items-center gap-1",children:[a.jsx(pW,{className:"w-4 h-4"}),"Unlimited"]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-[#04ADEE] font-medium",children:b?"Add universities (no limit)":`Assign exactly ${p} universities`}),a.jsxs("p",{className:"text-xs text-[#04ADEE]/80 mt-1",children:["Progress: ",s.length,b?"":`/${p}`," universities added"]})]}),!b&&a.jsx("div",{className:"flex items-center gap-2 text-xs text-[#04ADEE]",children:a.jsx("div",{className:"w-12 h-2 bg-[#04ADEE]/20 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-[#04ADEE] transition-all",style:{width:`${s.length/p*100}%`}})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Add University"}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[a.jsx("input",{type:"text",value:o,onChange:S=>l(S.target.value),onKeyPress:S=>S.key==="Enter"&&_(),placeholder:"University name",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",disabled:!b&&s.length>=p}),a.jsxs("select",{value:c,onChange:S=>u(S.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",disabled:!b&&s.length>=p,children:[a.jsx("option",{value:"reach",children:"Reach"}),a.jsx("option",{value:"mid",children:"Mid"}),a.jsx("option",{value:"safety",children:"Safety"})]}),a.jsxs("button",{onClick:_,disabled:!b&&s.length>=p,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),"Add"]})]})]}),f&&a.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm",children:f}),a.jsxs("div",{className:"space-y-2 mb-6",children:[a.jsxs("h3",{className:"text-sm font-medium text-slate-700 mb-3",children:["Selected Universities (",s.length,b?"":`/${p}`,")"]}),s.length===0?a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[a.jsx("p",{className:"text-slate-500",children:"No universities added yet"}),a.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Add universities above or choose from suggestions below"})]}):s.map((S,D)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-200 hover:border-slate-300 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:[D+1,"."]}),a.jsx("span",{className:"font-medium text-slate-900",children:S.name}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${T(S.tier)}`,children:S.tier.charAt(0).toUpperCase()+S.tier.slice(1)})]}),a.jsx("button",{onClick:()=>j(D),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:a.jsx(un,{className:"w-4 h-4"})})]},D))]}),(b||s.length<p)&&g&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wW,{className:"w-4 h-4 text-[#04ADEE]"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Quick Add Suggestions"})]}),a.jsx("button",{onClick:()=>y(!1),className:"text-xs text-slate-500 hover:text-slate-700",children:"Hide"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-purple-700 mb-2",children:"Reach Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Mv.reach.slice(0,5).map(S=>a.jsxs("button",{onClick:()=>N(S,"reach"),disabled:s.some(D=>D.name===S),className:"px-3 py-1.5 bg-purple-50 hover:bg-purple-100 text-purple-700 text-xs font-medium rounded-full border border-purple-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",S]},S))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-blue-700 mb-2",children:"Mid-Tier Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Mv.mid.slice(0,5).map(S=>a.jsxs("button",{onClick:()=>N(S,"mid"),disabled:s.some(D=>D.name===S),className:"px-3 py-1.5 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-medium rounded-full border border-blue-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",S]},S))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-green-700 mb-2",children:"Safety Schools"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:Mv.safety.slice(0,5).map(S=>a.jsxs("button",{onClick:()=>N(S,"safety"),disabled:s.some(D=>D.name===S),className:"px-3 py-1.5 bg-green-50 hover:bg-green-100 text-green-700 text-xs font-medium rounded-full border border-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["+ ",S]},S))})]})]})]}),!g&&(b||s.length<p)&&a.jsx("button",{onClick:()=>y(!0),className:"w-full py-2 text-sm text-[#04ADEE] hover:text-[#0396d5] font-medium",children:"Show Suggestions"})]}),a.jsxs("div",{className:"px-6 py-4 border-t border-slate-200 flex items-center justify-between bg-slate-50",children:[a.jsx("button",{onClick:r,disabled:d,className:"px-6 py-2 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:E,disabled:d||s.length===0||!b&&s.length!==p,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:d?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Assigning..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Rh,{className:"w-4 h-4"}),"Complete Assignment"]})})]})]})})}function L5({counselorName:e,onClose:t,onSave:r}){const[n,s]=x.useState(40),[i,o]=x.useState(50),[l,c]=x.useState(10),[u,d]=x.useState(90),[h,f]=x.useState(100),[m,g]=x.useState(80),[y,p]=x.useState(89),[v,b]=x.useState(70),[w,_]=x.useState(79),[j,N]=x.useState(0),[E,T]=x.useState(69),[S,D]=x.useState(!0),[O,C]=x.useState(!1),[k,I]=x.useState(null);x.useEffect(()=>{(async()=>{try{D(!0);const $=await D5(e);$&&(s($.essayWeight),o($.currentAverageWeight),c($.pastAverageWeight),d($.excellentMin),f($.excellentMax),g($.strongMin),p($.strongMax),b($.competitiveMin),_($.competitiveMax),N($.developingMin),T($.developingMax))}catch($){console.error("Error loading weightings:",$),I("Failed to load weightings")}finally{D(!1)}})()},[e]);const R=n+i+l,M=R===100,P=async()=>{if(!M){I("Weights must add up to 100%");return}C(!0),I(null);try{await goe(e,{essayWeight:n,currentAverageWeight:i,pastAverageWeight:l,excellentMin:u,excellentMax:h,strongMin:m,strongMax:y,competitiveMin:v,competitiveMax:w,developingMin:j,developingMax:E}),r(),t()}catch(A){console.error("Error saving weightings:",A),I("Failed to save weightings")}finally{C(!1)}};return S?a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full p-8 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Loading weightings..."})]})}):a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto mx-2 sm:mx-0",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-4 sm:px-6 py-3 sm:py-4 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-base sm:text-xl font-bold text-slate-900",children:"Pool Weighting Settings"}),a.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mt-1",children:"Configure composite score calculation"})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(rt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-4 sm:space-y-6",children:[k&&a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(ps,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:k})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-base sm:text-lg font-bold text-slate-900 mb-3 sm:mb-4",children:"Composite Score Weights"}),a.jsx("p",{className:"text-xs sm:text-sm text-slate-600 mb-3 sm:mb-4",children:"Set the weight for each component. Total must equal 100%."}),a.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-xs sm:text-sm font-semibold text-slate-900",children:"Essays and Activities"}),a.jsxs("span",{className:"text-base sm:text-lg font-bold text-[#04ADEE]",children:[n,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:n,onChange:A=>s(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-xs sm:text-sm font-semibold text-slate-900",children:"Current Average"}),a.jsxs("span",{className:"text-base sm:text-lg font-bold text-[#04ADEE]",children:[i,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:i,onChange:A=>o(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3 sm:p-4 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"text-xs sm:text-sm font-semibold text-slate-900",children:"Past Overall Average"}),a.jsxs("span",{className:"text-base sm:text-lg font-bold text-[#04ADEE]",children:[l,"%"]})]}),a.jsx("input",{type:"range",min:"0",max:"100",value:l,onChange:A=>c(parseInt(A.target.value)),className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-[#04ADEE]"})]}),a.jsxs("div",{className:`mt-4 p-4 rounded-lg border-2 ${M?"bg-emerald-50 border-emerald-500":"bg-amber-50 border-amber-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-semibold text-slate-900",children:"Total Weight"}),a.jsxs("span",{className:`text-2xl font-bold ${M?"text-emerald-600":"text-amber-600"}`,children:[R,"%"]})]}),!M&&a.jsx("p",{className:"text-xs text-amber-700 mt-1",children:"Weights must add up to exactly 100%"})]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-6",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Competitiveness Ranges"}),a.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Define the composite score ranges for each competitiveness level."}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[a.jsx("label",{className:"text-sm font-semibold text-emerald-900 mb-3 block",children:"Excellent"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-emerald-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:u,onChange:A=>d(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-emerald-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-emerald-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:h,onChange:A=>f(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-emerald-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-emerald-500"})]})]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("label",{className:"text-sm font-semibold text-blue-900 mb-3 block",children:"Strong"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-blue-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:m,onChange:A=>g(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-blue-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:y,onChange:A=>p(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-blue-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-amber-50 rounded-lg p-4 border border-amber-200",children:[a.jsx("label",{className:"text-sm font-semibold text-amber-900 mb-3 block",children:"Competitive"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-amber-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:v,onChange:A=>b(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-amber-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-amber-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:w,onChange:A=>_(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-amber-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-amber-500"})]})]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900 mb-3 block",children:"Developing"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-700 mb-1 block",children:"Minimum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:j,onChange:A=>N(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-slate-700 mb-1 block",children:"Maximum"}),a.jsx("input",{type:"number",min:"0",max:"100",value:E,onChange:A=>T(parseInt(A.target.value)),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-slate-500"})]})]})]})]})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-6 flex gap-3",children:[a.jsx("button",{onClick:t,className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-lg font-semibold hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:!M||O,className:"flex-1 px-4 py-3 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg font-semibold transition-all shadow-sm hover:shadow disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Bi,{className:"w-4 h-4"}),"Save Settings"]})})]})]})]})})}const dC=({counselor:e})=>{const[t,r]=x.useState([]),[n,s]=x.useState(!1),[i,o]=x.useState("all"),[l,c]=x.useState(new Set),[u,d]=x.useState(null),[h,f]=x.useState(!1),[m,g]=x.useState(null);x.useEffect(()=>{y()},[e.name]);const y=async()=>{if(e.role==="pool_management"){s(!0);try{const N=await R5(e.name);r(N.activeStudents),g({totalCaseload:N.totalCaseload,totalAssigned:N.totalAssigned,averageStrength:N.averageStrength,progress:N.progress})}catch(N){console.error("Error fetching pool data:",N)}finally{s(!1)}}},p=x.useMemo(()=>{let N=[...t];return i!=="all"&&(N=N.filter(E=>{const T=E.compositeStrength;switch(i){case"90-100":return T>=90&&T<=100;case"80-89":return T>=80&&T<90;case"70-79":return T>=70&&T<80;case"below-70":return T<70;default:return!0}})),N.sort((E,T)=>T.compositeStrength-E.compositeStrength)},[t,i]),v=(m==null?void 0:m.averageStrength)||0,b=(m==null?void 0:m.totalAssigned)||0,w=(m==null?void 0:m.totalCaseload)||0,_=N=>{c(E=>{const T=new Set(E);return T.has(N)?T.delete(N):T.add(N),T})},j=N=>{switch(N){case"Strong":return"text-emerald-600 bg-emerald-50 border-emerald-200";case"Competitive":return"text-blue-600 bg-blue-50 border-blue-200";case"Developing":return"text-amber-600 bg-amber-50 border-amber-200";default:return"text-slate-600 bg-slate-50 border-slate-200"}};return n?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Loading pool data..."})]}):a.jsxs("div",{className:"pb-4",children:[a.jsxs("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 px-4 py-4 border-b border-[#04ADEE]/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Pool Dashboard"}),a.jsxs("button",{onClick:()=>f(!0),className:"flex items-center gap-1 px-3 py-1.5 bg-white border border-slate-300 text-slate-700 rounded-lg text-xs font-semibold",children:[a.jsx(ZT,{className:"w-3.5 h-3.5"}),"Weighting"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(Zn,{className:"w-3.5 h-3.5 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Active Pool"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl font-bold text-slate-900",children:a.jsx(We,{end:p.length,duration:1500})}),a.jsx("span",{className:"text-xs text-slate-600",children:"students"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(Cu,{className:"w-3.5 h-3.5 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Assigned"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl font-bold text-slate-900",children:a.jsx(We,{end:b,duration:1500})}),a.jsx("span",{className:"text-xs text-slate-600",children:"students"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(Gn,{className:"w-3.5 h-3.5 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Avg Strength"})]}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl font-bold text-[#04ADEE]",children:a.jsx(We,{end:v,duration:1500,decimals:1})}),a.jsx("span",{className:"text-xs text-slate-600",children:"%"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 p-3",children:[a.jsx("span",{className:"text-xs font-medium text-slate-600 block mb-1",children:"Progress"}),a.jsx("div",{className:"mb-1.5",children:a.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[a.jsx(We,{end:b,duration:1500})," / ",a.jsx(We,{end:w,duration:1500})]})}),a.jsx("div",{className:"w-full h-1.5 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${b/w*100}%`}})})]})]})]}),a.jsxs("div",{className:"px-4 py-3 bg-white border-b border-slate-200",children:[a.jsx("label",{className:"text-xs font-medium text-slate-600 block mb-1.5",children:"Filter by Composite Score"}),a.jsxs("select",{value:i,onChange:N=>o(N.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm bg-white",children:[a.jsx("option",{value:"all",children:"All Students"}),a.jsx("option",{value:"90-100",children:"90-100 (Strong)"}),a.jsx("option",{value:"80-89",children:"80-89 (Competitive)"}),a.jsx("option",{value:"70-79",children:"70-79 (Developing)"}),a.jsx("option",{value:"below-70",children:"Below 70"})]})]}),a.jsx("div",{className:"px-4 py-3 space-y-3",children:p.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-slate-500 text-sm",children:"No students in active pool"})}):p.map(N=>{const E=l.has(N.id);return a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:N.name}),a.jsx("p",{className:"text-xs text-slate-600",children:N.email})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx(T5,{percentage:N.compositeStrength,size:40})})]}),a.jsx("div",{className:`inline-block px-2 py-1 rounded-md border text-xs font-medium ${j(N.strengthLabel)}`,children:N.strengthLabel}),E&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 space-y-2",children:[a.jsx("p",{className:"text-xs text-slate-600",children:N.description}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-slate-700 mb-1",children:"Career Interests:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:N.careerInterests.map((T,S)=>a.jsx("span",{className:"px-2 py-0.5 bg-[#04ADEE]/10 text-[#04ADEE] rounded text-xs",children:T},S))})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Academic"}),a.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[N.academicPerformance,"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Essay/Activities"}),a.jsxs("p",{className:"text-lg font-bold text-slate-900",children:[N.essayActivities,"%"]})]})]}),a.jsx("button",{onClick:()=>d(N),className:"w-full mt-2 px-3 py-2 bg-[#04ADEE] text-white rounded-lg text-sm font-medium",children:"Assign Universities"})]})]}),a.jsx("button",{onClick:()=>_(N.id),className:"w-full px-3 py-2 bg-slate-50 border-t border-slate-200 flex items-center justify-center gap-1 text-xs font-medium text-slate-600 hover:bg-slate-100",children:E?a.jsxs(a.Fragment,{children:["Show Less ",a.jsx(Jr,{className:"w-4 h-4"})]}):a.jsxs(a.Fragment,{children:["Show More ",a.jsx(Qr,{className:"w-4 h-4"})]})})]},N.id)})}),u&&a.jsx(M5,{student:u,counselorName:e.name,onClose:()=>d(null),onAssignmentComplete:()=>{d(null),y()}}),h&&a.jsx(L5,{counselorName:e.name,onClose:()=>f(!1),onSave:()=>{f(!1),y()}})]})},boe=async(e,t)=>{const{data:r,error:n}=await Yt.from("pool_students").select("*").eq("id",e).eq("counselor_id",t).maybeSingle();if(n||!r)return console.error("Error fetching student:",n),null;const{data:s,error:i}=await Yt.from("university_assignments").select("*").eq("student_id",e).eq("counselor_id",t).order("assigned_at",{ascending:!1});if(i)return console.error("Error fetching assignments:",i),null;const o=await Promise.all((s||[]).map(async l=>{const{data:c}=await Yt.from("application_progress").select("*").eq("assignment_id",l.id).maybeSingle();return{...l,progress:c||void 0}}));return{...r,universities:o}},woe=async(e,t,r)=>{const{error:n}=await Yt.from("application_progress").update({...t,updated_at:new Date().toISOString()}).eq("id",e).eq("counselor_id",r);return n?(console.error("Error updating progress:",n),!1):!0},_oe=async(e,t,r,n)=>{const{data:s,error:i}=await Yt.from("application_progress").insert({assignment_id:e,student_id:t,counselor_id:r,...n}).select().single();return i?(console.error("Error creating progress:",i),null):s},joe=async(e,t)=>{const{error:r}=await Yt.from("university_assignments").delete().eq("id",e).eq("counselor_id",t);return r?(console.error("Error removing assignment:",r),!1):!0},$5=async e=>{try{console.log("=== FETCHING ASSIGNED STUDENTS (FIREBASE) ==="),console.log("Counselor Name:",e);const t=`University Data/Caseloads/${e}`;console.log("Firebase Path for Caseload:",t);const r=G(V,t),n=await le(r);if(console.log("Caseload Exists:",n.exists()),console.log("Raw Caseload Data:",n.val()),!n.exists())return console.log(" No caseload found for counselor:",e),[];const s=n.val(),i=Object.keys(s);console.log("Student Names in Caseload:",i),console.log("Count:",i.length);const o=[];for(const l of i){console.log(`
--- Checking Student: ${l} ---`);const c=`University Data/Assigned Students/${l}/Universities`;console.log("   Assigned Students Path:",c);const u=G(V,c),d=await le(u);if(console.log("   Assigned Snapshot Exists:",d.exists()),console.log("   Raw Universities Data:",d.val()),!d.exists()){console.log(`    No assigned universities for: ${l}`);continue}const h=d.val(),f=[];for(const[b,w]of Object.entries(h))f.push({name:b,tier:w});console.log("   Universities:",f);const m=`University Data/Pool Strength/${l}`;console.log("   Pool Strength Path:",m);const g=G(V,m),y=await le(g),p=y.exists()?y.val():0;console.log("   Composite Score:",p);const v={id:l.replace(/\s+/g,"-").toLowerCase(),name:l,email:`${l.replace(/\s+/g,".").toLowerCase()}@example.com`,universities:f,assignedCount:f.length,compositeScore:p};console.log("    Added Assigned Student:",v),o.push(v)}return console.log(`
=== ASSIGNED STUDENTS SUMMARY ===`),console.log("Total Assigned Students:",o.length),console.log("Students:",o),console.log(`=== END FETCH ===
`),o}catch(t){throw console.error(" ERROR in getAssignedStudentsFromFirebase:",t),t}},Noe=({counselor:e})=>{const[t,r]=x.useState([]),[n,s]=x.useState(!1),[i,o]=x.useState(""),[l,c]=x.useState(new Set);x.useEffect(()=>{u()},[e.name]);const u=async()=>{if(e.role==="pool_management"){s(!0);try{const f=await $5(e.name);r(f)}catch(f){console.error("Error fetching assigned students:",f)}finally{s(!1)}}},d=t.filter(f=>{if(!i.trim())return!0;const m=i.toLowerCase(),g=f.name.toLowerCase().includes(m),y=f.universities.some(p=>p.name.toLowerCase().includes(m));return g||y}),h=f=>{c(m=>{const g=new Set(m);return g.has(f)?g.delete(f):g.add(f),g})};return n?a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Loading assigned students..."})]}):a.jsxs("div",{className:"pb-4",children:[a.jsx("div",{className:"px-4 py-3 bg-white border-b border-slate-200",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search students or universities...",value:i,onChange:f=>o(f.target.value),className:"w-full pl-9 pr-3 py-2 border border-slate-300 rounded-lg text-sm"})]})}),a.jsx("div",{className:"px-4 py-3 space-y-3",children:d.length===0?a.jsx("div",{className:"text-center py-8",children:a.jsx("p",{className:"text-slate-500 text-sm",children:i?"No students found":"No assigned students yet"})}):d.map(f=>{const m=l.has(f.id);return a.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:[a.jsxs("div",{className:"p-3",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 text-sm",children:f.name}),a.jsx("p",{className:"text-xs text-slate-600",children:f.email})]}),a.jsxs("div",{className:"px-2 py-1 bg-[#04ADEE]/10 text-[#04ADEE] rounded text-xs font-medium",children:[f.universities.length," unis"]})]}),m&&a.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-100 space-y-3",children:[a.jsx("p",{className:"text-xs text-slate-600",children:f.description}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-slate-700 mb-1.5",children:"Career Interests:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:f.careerInterests.map((g,y)=>a.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-700 rounded text-xs",children:g},y))})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-slate-700 mb-1.5",children:"Assigned Universities:"}),a.jsx("div",{className:"space-y-2",children:f.universities.map((g,y)=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded border border-slate-200",children:[a.jsx("p",{className:"font-medium text-sm text-slate-900",children:g.name}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:g.deadline}),g.requirements&&a.jsx("p",{className:"text-xs text-slate-600 mt-1",children:g.requirements})]},y))})]}),a.jsxs("div",{className:"text-xs text-slate-500",children:["Assigned on: ",new Date(f.assignedDate).toLocaleDateString()]})]})]}),a.jsx("button",{onClick:()=>h(f.id),className:"w-full px-3 py-2 bg-slate-50 border-t border-slate-200 flex items-center justify-center gap-1 text-xs font-medium text-slate-600 hover:bg-slate-100",children:m?a.jsxs(a.Fragment,{children:["Show Less ",a.jsx(Jr,{className:"w-4 h-4"})]}):a.jsxs(a.Fragment,{children:["Show More ",a.jsx(Qr,{className:"w-4 h-4"})]})})]},f.id)})})]})},Soe=({counselor:e})=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(pg,{})}),wh={getAll:async e=>{const{data:t,error:r}=await Yt.from("counselor_scholarships").select("*").eq("counselor_id",e).order("deadline",{ascending:!0});if(r)throw r;return(t||[]).map(s=>({...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}))},create:async e=>{const{data:t,error:r}=await Yt.from("counselor_scholarships").insert(e).select().single();if(r)throw r;try{const n=Array.isArray(e.eligibility_criteria)?e.eligibility_criteria:[e.eligibility_criteria],s=Array.isArray(e.requirements)?e.requirements:[e.requirements],i={};n.forEach((c,u)=>{i[String(u+1)]=c});const o={};s.forEach((c,u)=>{o[String(u+1)]=c});const l=G(V,`University Data/Scholarships/${e.name}`);await Me(l,{"Award amount":e.award_amount,Deadline:e.deadline,Description:e.description,"Icon link":e.logo_url||"",Link:e.application_link,"Eligibility Criteria":i,Requirements:o}),console.log("Scholarship saved to Firebase successfully")}catch(n){console.error("Error saving to Firebase:",n),console.log("Scholarship saved to Supabase, but Firebase sync failed")}return{...t,eligibility_criteria:typeof t.eligibility_criteria=="string"?JSON.parse(t.eligibility_criteria):t.eligibility_criteria,requirements:typeof t.requirements=="string"?JSON.parse(t.requirements):t.requirements}},update:async(e,t)=>{const{data:r,error:n}=await Yt.from("counselor_scholarships").select("*").eq("id",e).single();if(n)throw n;const{data:s,error:i}=await Yt.from("counselor_scholarships").update(t).eq("id",e).select().single();if(i)throw i;try{const o=r.name,l=t.name||o;if(o!==l){const m=G(V,`University Data/Scholarships/${o}`);await _u(m)}const c=Array.isArray(t.eligibility_criteria)?t.eligibility_criteria:t.eligibility_criteria?[t.eligibility_criteria]:Array.isArray(r.eligibility_criteria)?r.eligibility_criteria:[r.eligibility_criteria],u=Array.isArray(t.requirements)?t.requirements:t.requirements?[t.requirements]:Array.isArray(r.requirements)?r.requirements:[r.requirements],d={};c.forEach((m,g)=>{d[String(g+1)]=m});const h={};u.forEach((m,g)=>{h[String(g+1)]=m});const f=G(V,`University Data/Scholarships/${l}`);await Me(f,{"Award amount":t.award_amount||r.award_amount,Deadline:t.deadline||r.deadline,Description:t.description||r.description,"Icon link":t.logo_url!==void 0?t.logo_url:r.logo_url||"",Link:t.application_link||r.application_link,"Eligibility Criteria":d,Requirements:h}),console.log("Scholarship updated in Firebase successfully")}catch(o){console.error("Error updating Firebase:",o),console.log("Scholarship updated in Supabase, but Firebase sync failed")}return{...s,eligibility_criteria:typeof s.eligibility_criteria=="string"?JSON.parse(s.eligibility_criteria):s.eligibility_criteria,requirements:typeof s.requirements=="string"?JSON.parse(s.requirements):s.requirements}},delete:async e=>{const{data:t,error:r}=await Yt.from("counselor_scholarships").select("name").eq("id",e).single();if(r)throw r;const{error:n}=await Yt.from("counselor_scholarships").delete().eq("id",e);if(n)throw n;if(t)try{const s=G(V,`University Data/Scholarships/${t.name}`);await _u(s),console.log("Scholarship removed from Firebase successfully")}catch(s){console.error("Error removing from Firebase:",s),console.log("Scholarship deleted from Supabase, but Firebase sync failed")}}};function U5({onBack:e,onLogout:t}){const[r,n]=x.useState([]),[s,i]=x.useState(!0),[o,l]=x.useState(null),[c,u]=x.useState(!1),[d,h]=x.useState(null),[f,m]=x.useState(!1),[g,y]=x.useState(null),[p,v]=x.useState({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),[b,w]=x.useState(""),[_,j]=x.useState("");x.useEffect(()=>{N()},[]);const N=async()=>{i(!0),l(null);try{const R=await wh.getAll("203c556b-d13d-48f6-81dc-49a162b5527d");n(R),l(null)}catch(R){console.error("Error loading scholarships:",R),l("Failed to load scholarships. Please try again."),n([])}finally{i(!1)}},E=async R=>{if(R.preventDefault(),p.eligibility_criteria.length===0){l("Please add at least one eligibility criteria");return}if(p.requirements.length===0){l("Please add at least one requirement");return}m(!0),l(null),y(null);try{if(console.log("Submitting scholarship data:",p),d)await wh.update(d,p),y("Scholarship updated successfully!"),console.log("Scholarship updated successfully");else{const M=await wh.create({...p,counselor_id:"203c556b-d13d-48f6-81dc-49a162b5527d"});y("Scholarship created successfully!"),console.log("Scholarship created successfully:",M)}D(),await N()}catch(M){console.error("Error saving scholarship:",M),l(`Failed to save scholarship: ${M instanceof Error?M.message:"Unknown error"}`)}finally{m(!1)}},T=R=>{v({name:R.name,logo_url:R.logo_url||"",description:R.description,award_amount:R.award_amount,deadline:R.deadline,eligibility_criteria:Array.isArray(R.eligibility_criteria)?R.eligibility_criteria:R.eligibility_criteria.split(`
`).filter(M=>M.trim()),requirements:Array.isArray(R.requirements)?R.requirements:R.requirements.split(`
`).filter(M=>M.trim()),application_link:R.application_link}),h(R.id),u(!0)},S=async R=>{if(confirm("Are you sure you want to delete this scholarship?"))try{await wh.delete(R),alert("Scholarship deleted successfully!"),N()}catch(M){console.error("Error deleting scholarship:",M),alert("Failed to delete scholarship. Please try again.")}},D=()=>{v({name:"",logo_url:"",description:"",award_amount:"",deadline:"",eligibility_criteria:[],requirements:[],application_link:""}),w(""),j(""),h(null),u(!1),l(null),y(null)},O=()=>{b.trim()&&(v({...p,eligibility_criteria:[...p.eligibility_criteria,b.trim()]}),w(""))},C=R=>{v({...p,eligibility_criteria:p.eligibility_criteria.filter((M,P)=>P!==R)})},k=()=>{_.trim()&&(v({...p,requirements:[...p.requirements,_.trim()]}),j(""))},I=R=>{v({...p,requirements:p.requirements.filter((M,P)=>P!==R)})};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Scholarship Management"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage scholarship opportunities"})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[a.jsx(br,{className:"w-4 h-4"}),c?"Cancel":"Add Scholarship"]})}),o&&a.jsxs("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(rt,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-red-900",children:"Error"}),a.jsx("p",{className:"text-sm text-red-700",children:o})]})]}),a.jsx("button",{onClick:()=>l(null),className:"text-red-600 hover:text-red-700",children:a.jsx(rt,{className:"w-5 h-5"})})]}),g&&a.jsxs("div",{className:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(hr,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-green-900",children:"Success"}),a.jsx("p",{className:"text-sm text-green-700",children:g})]})]}),a.jsx("button",{onClick:()=>y(null),className:"text-green-600 hover:text-green-700",children:a.jsx(rt,{className:"w-5 h-5"})})]}),c&&a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Scholarship":"New Scholarship"}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Scholarship Name *"}),a.jsx("input",{type:"text",value:p.name,onChange:R=>v({...p,name:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Logo URL"}),a.jsx("input",{type:"url",value:p.logo_url,onChange:R=>v({...p,logo_url:R.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),a.jsx("textarea",{value:p.description,onChange:R=>v({...p,description:R.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Award Amount *"}),a.jsx("input",{type:"text",value:p.award_amount,onChange:R=>v({...p,award_amount:R.target.value}),required:!0,placeholder:"e.g., $5,000",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Deadline *"}),a.jsx("input",{type:"date",value:p.deadline,onChange:R=>v({...p,deadline:R.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Eligibility Criteria *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:b,onChange:R=>w(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),O())},placeholder:"Add eligibility criteria...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]}),p.eligibility_criteria.length>0&&a.jsx("ul",{className:"space-y-2 mt-2",children:p.eligibility_criteria.map((R,M)=>a.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-slate-700",children:R}),a.jsx("button",{type:"button",onClick:()=>C(M),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(rt,{className:"w-4 h-4"})})]},M))}),p.eligibility_criteria.length===0&&a.jsx("p",{className:"text-sm text-slate-500 italic",children:"No eligibility criteria added yet"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Requirements *"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:_,onChange:R=>j(R.target.value),onKeyPress:R=>{R.key==="Enter"&&(R.preventDefault(),k())},placeholder:"Add requirement...",className:"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),a.jsx("button",{type:"button",onClick:k,className:"px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white rounded-lg transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]}),p.requirements.length>0&&a.jsx("ul",{className:"space-y-2 mt-2",children:p.requirements.map((R,M)=>a.jsxs("li",{className:"flex items-center justify-between bg-slate-50 px-4 py-2 rounded-lg",children:[a.jsx("span",{className:"text-sm text-slate-700",children:R}),a.jsx("button",{type:"button",onClick:()=>I(M),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(rt,{className:"w-4 h-4"})})]},M))}),p.requirements.length===0&&a.jsx("p",{className:"text-sm text-slate-500 italic",children:"No requirements added yet"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Link *"}),a.jsx("input",{type:"url",value:p.application_link,onChange:R=>v({...p,application_link:R.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",disabled:f,className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),d?"Updating...":"Creating..."]}):a.jsxs(a.Fragment,{children:[d?"Update":"Create"," Scholarship"]})}),a.jsx("button",{type:"button",onClick:D,disabled:f,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})]})]}),s?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-slate-600",children:"Loading scholarships..."})]}):r.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(hr,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"No scholarships yet"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Create your first scholarship to get started"})]}):a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(R=>a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow duration-300 relative",children:[a.jsxs("div",{className:"absolute top-4 right-4 flex gap-2",children:[a.jsx("button",{onClick:()=>T(R),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",title:"Edit scholarship",children:a.jsx(qc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S(R.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",title:"Delete scholarship",children:a.jsx(un,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-start gap-4 mb-4 pr-20",children:[R.logo_url&&a.jsx("img",{src:R.logo_url,alt:R.name,className:"w-16 h-16 object-contain rounded-lg flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:R.name}),a.jsx("p",{className:"text-slate-700 text-sm",children:R.description})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs("div",{className:"text-center p-4 bg-[#04ADEE] bg-opacity-10 rounded-lg",children:[a.jsx(Bl,{className:"w-6 h-6 text-[#04ADEE] mx-auto mb-1"}),a.jsx("div",{className:"text-lg font-bold text-slate-900",children:R.award_amount}),a.jsx("div",{className:"text-sm text-slate-600",children:"Award Amount"})]}),a.jsxs("div",{className:"text-center p-4 bg-slate-50 rounded-lg",children:[a.jsx(wt,{className:"w-6 h-6 text-slate-600 mx-auto mb-1"}),a.jsx("div",{className:"text-sm font-bold text-slate-900",children:new Date(R.deadline).toLocaleDateString()}),a.jsx("div",{className:"text-sm text-slate-600",children:"Deadline"})]})]}),Array.isArray(R.eligibility_criteria)&&R.eligibility_criteria.length>0&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Eligibility Criteria:"}),a.jsx("ul",{className:"space-y-1",children:R.eligibility_criteria.map((M,P)=>a.jsxs("li",{className:"flex items-center text-sm text-slate-700",children:[a.jsx("div",{className:"w-2 h-2 bg-[#04ADEE] rounded-full mr-2 flex-shrink-0"}),M]},P))})]}),Array.isArray(R.requirements)&&R.requirements.length>0&&a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"Requirements:"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:R.requirements.map((M,P)=>a.jsx("span",{className:"bg-slate-100 text-slate-700 text-xs px-3 py-1 rounded-full",children:M},P))})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsxs("a",{href:R.application_link,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center bg-[#04ADEE] text-white px-4 py-2 rounded-lg hover:bg-[#0396d5] transition-colors text-sm font-medium w-full",children:["Learn More & Apply",a.jsx(zl,{className:"w-4 h-4 ml-2"})]})})]},R.id))})]})}const Eoe=()=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(U5,{onBack:()=>{},onLogout:()=>{}})}),hC=e=>e.charAt(0).toUpperCase()+e.slice(1),fC=e=>e==="financial_aid"?"Financial Aid":e.charAt(0).toUpperCase()+e.slice(1),zo={getAll:async e=>{try{const t=G(V,"University Data/Resources"),r=await le(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.entries(n).forEach(([i,o])=>{var u;const l=[];o["Key Words"]&&Object.keys(o["Key Words"]).forEach(d=>{l.push(d)});const c={Essays:"essays","Financial Aid":"financial_aid",Applications:"applications",Interviews:"interviews",General:"general"};s.push({id:i,counselor_id:e,resource_type:((u=o["Resource Type"])==null?void 0:u.toLowerCase())||"other",title:o.name||i,creator:o.Owner||"",description:o.Description||"",key_topics:l,time_estimate:o.Duration||"",link:o.Link||"",category:c[o["Helps with"]]||"general",created_at:new Date().toISOString()})}),s}catch(t){throw console.error("Error loading resources from Firebase:",t),t}},getByCategory:async(e,t)=>(await zo.getAll(e)).filter(n=>n.category===t),create:async e=>{console.log("counselorResourcesService.create called with:",e);try{if(!V)throw new Error("Firebase database is not initialized");const t={};e.key_topics.forEach(o=>{t[o]=!0}),console.log("Key words object:",t);const r=`University Data/Resources/${e.title}`;console.log("Writing to Firebase path:",r);const n=G(V,r),s={name:e.title,"Resource Type":hC(e.resource_type),Owner:e.creator,Description:e.description,"Key Words":t,Duration:e.time_estimate,Link:e.link,"Helps with":fC(e.category)};console.log("Data to write:",s),await Me(n,s),console.log("Resource saved to Firebase successfully at path:",r);const i={id:e.title,...e,created_at:new Date().toISOString()};return console.log("Returning result:",i),i}catch(t){throw console.error("Error saving to Firebase:",t),console.error("Error details:",t instanceof Error?t.message:t),t}},update:async(e,t)=>{var r;try{const n=e,s=t.title||n;if(n!==s){const h=G(V,`University Data/Resources/${n}`);await _u(h)}const i=G(V,`University Data/Resources/${n}`),o=await le(i),l=o.exists()?o.val():{},c=t.key_topics||[],u={};c.forEach(h=>{u[h]=!0});const d=G(V,`University Data/Resources/${s}`);return await Me(d,{name:s,"Resource Type":hC(t.resource_type||((r=l["Resource Type"])==null?void 0:r.toLowerCase())||"other"),Owner:t.creator||l.Owner||"",Description:t.description||l.Description||"","Key Words":Object.keys(u).length>0?u:l["Key Words"]||{},Duration:t.time_estimate||l.Duration||"",Link:t.link||l.Link||"","Helps with":fC(t.category||"general")}),console.log("Resource updated in Firebase successfully"),{id:s,counselor_id:"",resource_type:t.resource_type||"other",title:s,creator:t.creator||"",description:t.description||"",key_topics:t.key_topics||[],time_estimate:t.time_estimate||"",link:t.link||"",category:t.category||"general",created_at:new Date().toISOString()}}catch(n){throw console.error("Error updating Firebase:",n),n}},delete:async e=>{try{const t=G(V,`University Data/Resources/${e}`);await _u(t),console.log("Resource removed from Firebase successfully")}catch(t){throw console.error("Error removing from Firebase:",t),t}},search:async(e,t)=>{const r=await zo.getAll(e),n=t.toLowerCase();return r.filter(s=>s.title.toLowerCase().includes(n)||s.creator.toLowerCase().includes(n)||s.key_topics.some(i=>i.toLowerCase().includes(n)))}};function F5({onBack:e,onLogout:t}){const[r,n]=x.useState([]),[s,i]=x.useState([]),[o,l]=x.useState(!0),[c,u]=x.useState(!1),[d,h]=x.useState(null),[f,m]=x.useState(""),[g,y]=x.useState("all"),[p,v]=x.useState("all"),[b,w]=x.useState({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"});x.useEffect(()=>{_()},[]),x.useEffect(()=>{j()},[r,f,g,p]);const _=async()=>{l(!0),console.log("Loading resources from Firebase...");try{const C=await zo.getAll("anonymous");console.log("Resources loaded:",C),n(C)}catch(C){console.error("Error loading resources:",C),n([])}finally{l(!1)}},j=()=>{let C=[...r];f&&(C=C.filter(k=>k.title.toLowerCase().includes(f.toLowerCase())||k.creator.toLowerCase().includes(f.toLowerCase())||k.key_topics.some(I=>I.toLowerCase().includes(f.toLowerCase())))),g!=="all"&&(C=C.filter(k=>k.category===g)),p!=="all"&&(C=C.filter(k=>k.resource_type===p)),i(C)},N=async C=>{C.preventDefault();const k=b.key_topics.split(",").map(I=>I.trim()).filter(I=>I);if(!b.title||!b.creator||!b.link){alert("Please fill in all required fields");return}console.log("Submitting resource:",{...b,key_topics:k});try{if(d)console.log("Updating resource with id:",d),await zo.update(d,{...b,key_topics:k}),alert("Resource updated successfully!");else{console.log("Creating new resource");const I=await zo.create({...b,key_topics:k,counselor_id:"anonymous"});console.log("Resource created:",I),alert("Resource created successfully!")}S(),await _()}catch(I){console.error("Error saving resource:",I),alert(`Error saving resource: ${I instanceof Error?I.message:"Unknown error"}`)}},E=C=>{w({resource_type:C.resource_type,title:C.title,creator:C.creator,description:C.description||"",key_topics:C.key_topics.join(", "),time_estimate:C.time_estimate,link:C.link,category:C.category}),h(C.id),u(!0)},T=async C=>{if(confirm("Are you sure you want to delete this resource?"))try{await zo.delete(C),_()}catch(k){console.error("Error deleting resource:",k)}},S=()=>{w({resource_type:"article",title:"",creator:"",description:"",key_topics:"",time_estimate:"",link:"",category:"general"}),h(null),u(!1)},D=C=>{switch(C){case"video":return a.jsx(Wl,{className:"w-4 h-4"});case"article":return a.jsx(Ce,{className:"w-4 h-4"});case"guide":return a.jsx(cr,{className:"w-4 h-4"});default:return a.jsx(Ce,{className:"w-4 h-4"})}},O=C=>{switch(C){case"essays":return"bg-purple-100 text-purple-700 border-purple-200";case"financial_aid":return"bg-green-100 text-green-700 border-green-200";case"applications":return"bg-blue-100 text-blue-700 border-blue-200";case"interviews":return"bg-orange-100 text-orange-700 border-orange-200";default:return"bg-slate-100 text-slate-700 border-slate-200"}};return a.jsxs("div",{children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Resource Management"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Add and manage educational resources"})]}),a.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[a.jsxs("button",{onClick:()=>u(!c),className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[a.jsx(br,{className:"w-4 h-4"}),c?"Cancel":"Add Resource"]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(fr,{className:"w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),a.jsx("input",{type:"text",value:f,onChange:C=>m(C.target.value),placeholder:"Search resources...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"}),f&&a.jsx("button",{onClick:()=>m(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("select",{value:g,onChange:C=>y(C.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"all",children:"All Categories"}),a.jsx("option",{value:"essays",children:"Essays"}),a.jsx("option",{value:"financial_aid",children:"Financial Aid"}),a.jsx("option",{value:"applications",children:"Applications"}),a.jsx("option",{value:"interviews",children:"Interviews"}),a.jsx("option",{value:"general",children:"General"})]}),a.jsxs("select",{value:p,onChange:C=>v(C.target.value),className:"px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"video",children:"Videos"}),a.jsx("option",{value:"article",children:"Articles"}),a.jsx("option",{value:"guide",children:"Guides"}),a.jsx("option",{value:"other",children:"Other"})]})]}),c&&a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6 mb-8",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-4",children:d?"Edit Resource":"New Resource"}),a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Type *"}),a.jsxs("select",{value:b.resource_type,onChange:C=>w({...b,resource_type:C.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"video",children:"Video"}),a.jsx("option",{value:"article",children:"Article"}),a.jsx("option",{value:"guide",children:"Guide"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Category *"}),a.jsxs("select",{value:b.category,onChange:C=>w({...b,category:C.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent bg-white",children:[a.jsx("option",{value:"essays",children:"Essays"}),a.jsx("option",{value:"financial_aid",children:"Financial Aid"}),a.jsx("option",{value:"applications",children:"Applications"}),a.jsx("option",{value:"interviews",children:"Interviews"}),a.jsx("option",{value:"general",children:"General Strategy"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Title *"}),a.jsx("input",{type:"text",value:b.title,onChange:C=>w({...b,title:C.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Description *"}),a.jsx("textarea",{value:b.description,onChange:C=>w({...b,description:C.target.value}),required:!0,rows:3,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Creator / Author *"}),a.jsx("input",{type:"text",value:b.creator,onChange:C=>w({...b,creator:C.target.value}),required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Time Estimate *"}),a.jsx("input",{type:"text",value:b.time_estimate,onChange:C=>w({...b,time_estimate:C.target.value}),required:!0,placeholder:"e.g., 10 minutes",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Key Topics * (comma-separated)"}),a.jsx("input",{type:"text",value:b.key_topics,onChange:C=>w({...b,key_topics:C.target.value}),required:!0,placeholder:"e.g., Common App, Personal Statement, Brainstorming",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Resource Link *"}),a.jsx("input",{type:"url",value:b.link,onChange:C=>w({...b,link:C.target.value}),required:!0,placeholder:"https://...",className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"submit",className:"px-6 py-2 bg-[#04ADEE] hover:bg-[#0396d5] text-white font-medium rounded-lg transition-colors",children:[d?"Update":"Create"," Resource"]}),a.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 text-slate-700 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"})]})]})]}),o?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"inline-block w-8 h-8 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin"}),a.jsx("p",{className:"mt-4 text-slate-600",children:"Loading resources..."})]}):s.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-xl border border-slate-200",children:[a.jsx(cr,{className:"w-12 h-12 text-slate-400 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600 text-lg",children:"No resources found"}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:f||g!=="all"||p!=="all"?"Try adjusting your search or filters":'Click "Add Resource" button above to create your first resource'})]}):a.jsx("div",{className:"grid gap-4",children:s.map(C=>a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6 hover:shadow-lg transition-shadow",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("div",{className:"p-2 bg-[#04ADEE]/10 rounded-lg text-[#04ADEE]",children:D(C.resource_type)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:C.title}),a.jsxs("p",{className:"text-sm text-slate-600",children:["by ",C.creator]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium border ${O(C.category)}`,children:C.category.replace("_"," ")})]}),C.description&&a.jsx("p",{className:"text-sm text-slate-700 mb-3",children:C.description}),a.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(Or,{className:"w-4 h-4"}),C.time_estimate]}),a.jsx("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:a.jsx("span",{className:"font-medium capitalize",children:C.resource_type})})]}),a.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:C.key_topics.map((k,I)=>a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 rounded text-xs",children:k},I))}),a.jsxs("a",{href:C.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] text-sm font-medium",children:[a.jsx(zl,{className:"w-4 h-4"}),"View Resource"]})]}),a.jsxs("div",{className:"flex gap-2 ml-4",children:[a.jsx("button",{onClick:()=>E(C),className:"p-2 hover:bg-[#04ADEE]/10 text-[#04ADEE] rounded-lg transition-colors",children:a.jsx(qc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>T(C.id),className:"p-2 hover:bg-red-50 text-red-600 rounded-lg transition-colors",children:a.jsx(un,{className:"w-4 h-4"})})]})]})},C.id))})]})}const Coe=()=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(F5,{onBack:()=>{},onLogout:()=>{}})}),Lv={async getCounselorAvailability(e){const t=G(V,`University Data/Timeslots/${e}`);try{const r=await le(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{const o=n[i],[l,c]=i.split("_"),[u,d]=c.split("-");s.push({id:i,date:l,startTime:u,endTime:d,isBooked:o})}),s.sort((i,o)=>{const l=i.date.localeCompare(o.date);return l!==0?l:i.startTime.localeCompare(o.startTime)})}catch(r){return console.error("Error fetching availability:",r),[]}},async addAvailabilitySlot(e,t,r,n){const s=`${t}_${r}-${n}`,i=G(V,`University Data/Timeslots/${e}/${s}`);await Me(i,!1)},async deleteAvailabilitySlot(e,t){const r=G(V,`University Data/Timeslots/${e}/${t}`);await _u(r)},async getMeetingRequests(e){const t=G(V,`University Data/MeetingRequests/${e}`);try{const r=await le(t);if(!r.exists())return[];const n=r.val(),s=[];return Object.keys(n).forEach(i=>{s.push({id:i,...n[i]})}),s}catch(r){return console.error("Error fetching meeting requests:",r),[]}},listenToCounselorAvailability(e,t){const r=G(V,`University Data/Timeslots/${e}`);return Gt(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),o=[];Object.keys(i).forEach(c=>{const u=i[c],[d,h]=c.split("_"),[f,m]=h.split("-");o.push({id:c,date:d,startTime:f,endTime:m,isBooked:u})});const l=o.sort((c,u)=>{const d=c.date.localeCompare(u.date);return d!==0?d:c.startTime.localeCompare(u.startTime)});t(l)})},listenToMeetingRequests(e,t){const r=G(V,`University Data/MeetingRequests/${e}`);return Gt(r,s=>{if(!s.exists()){t([]);return}const i=s.val(),o=[];Object.keys(i).forEach(l=>{o.push({id:l,...i[l]})}),t(o)})},generateMeetingLink(e){return`https://meet.jit.si/educare-meeting-${e}`},async updateMeetingLink(e,t,r){const n=G(V,`University Data/MeetingRequests/${e}/${t}`),s=await le(n);s.exists()&&await Me(n,{...s.val(),meetingLink:r})}};function B5({counselorName:e}){const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,o]=x.useState(!0),[l,c]=x.useState("upcoming"),[u,d]=x.useState(!1),[h,f]=x.useState({date:"",startTime:"",endTime:""});x.useEffect(()=>{const v=Lv.listenToCounselorAvailability(e,_=>{s(_),o(!1)}),b=G(V,`Upcoming meetings/${e}`),w=Gt(b,_=>{if(!_.exists()){r([]);return}const j=[],N=_.val();Object.keys(N).forEach(E=>{const T=N[E];Object.keys(T).forEach(S=>{const D=T[S],[O,C]=S.split("_");j.push({id:S,studentName:E,studentEmail:D.studentEmail||"",date:O,time:C,agenda:D.agenda||"No agenda provided",meetingLink:D.meetingLink||"",requestedAt:D.requestedAt||""})})}),j.sort((E,T)=>E.date.localeCompare(T.date)),r(j)});return()=>{v(),w()}},[e]);const m=async()=>{if(!h.date||!h.startTime||!h.endTime){alert("Please fill in all fields");return}try{await Lv.addAvailabilitySlot(e,h.date,h.startTime,h.endTime),f({date:"",startTime:"",endTime:""}),d(!1)}catch(v){console.error("Error adding slot:",v),alert("Failed to add time slot. Please try again.")}},g=async v=>{if(confirm("Are you sure you want to delete this time slot?"))try{await Lv.deleteAvailabilitySlot(e,v)}catch(b){console.error("Error deleting slot:",b),alert("Failed to delete time slot. Please try again.")}},y=v=>new Date(v).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),p=v=>{const[b,w]=v.split(":"),_=parseInt(b),j=_>=12?"PM":"AM";return`${_%12||12}:${w} ${j}`};return i?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})}):a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Meeting Requests"}),a.jsx("p",{className:"text-gray-600",children:"Manage student meeting requests and your availability"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("div",{className:"flex",children:[a.jsx("button",{onClick:()=>c("upcoming"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="upcoming"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"Upcoming Meetings"}),a.jsx("button",{onClick:()=>c("availability"),className:`px-6 py-4 text-sm font-medium transition-colors ${l==="availability"?"text-[#04ADEE] border-b-2 border-[#04ADEE]":"text-gray-500 hover:text-gray-700"}`,children:"My Availability"})]})}),l==="upcoming"?a.jsx("div",{className:"p-6",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wt,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-lg",children:"No upcoming meetings"})]}):a.jsx("div",{className:"space-y-4",children:t.map(v=>a.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow bg-green-50/50",children:[a.jsx("div",{className:"flex items-start justify-between mb-4",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.studentName||"Unknown Student"}),a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Confirmed"})]}),a.jsx("p",{className:"text-sm text-gray-600",children:v.studentEmail})]})}),a.jsxs("div",{className:"flex items-center gap-6 mb-4 text-sm text-gray-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-4 h-4"}),y(v.date)]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Or,{className:"w-4 h-4"}),v.time]})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 mb-3",children:[a.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Meeting Agenda:"}),a.jsx("p",{className:"text-gray-600",children:v.agenda})]}),v.meetingLink&&a.jsxs("button",{onClick:()=>window.open(v.meetingLink,"_blank"),className:"w-full bg-gradient-to-r from-[#04adee] to-[#0396d5] text-white px-6 py-3 rounded-lg font-semibold hover:from-[#0396d5] hover:to-[#027fb8] transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Wl,{className:"w-5 h-5"}),"Join Video Meeting"]})]},v.id))})}):a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Available Time Slots"}),a.jsxs("button",{onClick:()=>d(!u),className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"}),"Add Time Slot"]})]}),u&&a.jsxs("div",{className:"bg-[#04ADEE]/10 border border-[#04ADEE]/30 rounded-lg p-6 mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Time Slot"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),a.jsx("input",{type:"date",value:h.date,onChange:v=>f({...h,date:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]",min:new Date().toISOString().split("T")[0]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),a.jsx("input",{type:"time",value:h.startTime,onChange:v=>f({...h,startTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),a.jsx("input",{type:"time",value:h.endTime,onChange:v=>f({...h,endTime:v.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-[#04ADEE]"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:m,className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors",children:"Add Slot"}),a.jsx("button",{onClick:()=>{d(!1),f({date:"",startTime:"",endTime:""})},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Cancel"})]})]}),n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Or,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500 text-lg",children:"No available time slots"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Add time slots for students to book meetings"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:n.map(v=>a.jsxs("div",{className:`border rounded-lg p-4 ${v.isBooked?"bg-gray-50 border-gray-300":"bg-white border-gray-200 hover:shadow-md transition-shadow"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(wt,{className:"w-5 h-5 text-[#04ADEE]"}),a.jsx("span",{className:"font-medium text-gray-900",children:y(v.date)})]}),!v.isBooked&&a.jsx("button",{onClick:()=>g(v.id),className:"text-red-600 hover:text-red-700 transition-colors",children:a.jsx(rt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsxs("span",{children:[p(v.startTime)," - ",p(v.endTime)]})]}),v.isBooked&&a.jsx("div",{className:"mt-3 px-3 py-1 bg-gray-200 text-gray-700 text-xs font-medium rounded-full inline-block",children:"Booked"})]},v.id))})]})]})]})}const koe=({counselor:e,counts:t})=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(B5,{counselorId:e.id,counselorName:e.name})}),Aoe=({counselor:e})=>a.jsx("div",{className:"h-[calc(100vh-120px)] bg-slate-50",children:a.jsx(Z_,{userRole:"counselor"})}),Poe=[{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}];function z5({onSelectStudent:e}){const[t]=x.useState(Poe),[r,n]=x.useState(""),s=t.filter(o=>{var l;return((l=o.student)==null?void 0:l.name.toLowerCase().includes(r.toLowerCase()))||o.nationality.toLowerCase().includes(r.toLowerCase())}),i=o=>{const l=new Date(o),c=new Date;let u=c.getFullYear()-l.getFullYear();const d=c.getMonth()-l.getMonth();return(d<0||d===0&&c.getDate()<l.getDate())&&u--,u};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Student Profiles"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"View and manage student information"})]})}),a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by name or nationality...",value:r,onChange:o=>n(o.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),s.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center",children:[a.jsx(gl,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No students found"})]}):a.jsx("div",{className:"grid gap-4",children:s.map(o=>{var l,c,u;return a.jsx("button",{onClick:()=>e(o.id),className:"bg-white rounded-lg border border-slate-200 p-6 hover:shadow-md hover:border-slate-300 transition-all text-left w-full",children:a.jsx("div",{className:"flex items-start justify-between",children:a.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-lg",children:(l=o.student)==null?void 0:l.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:(c=o.student)==null?void 0:c.name}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(u=o.student)==null?void 0:u.email}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(gl,{className:"w-4 h-4 text-gray-400"}),a.jsxs("span",{className:"text-gray-600",children:["Age ",i(o.date_of_birth)]})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[a.jsx(VT,{className:"w-4 h-4 text-gray-400"}),a.jsx("span",{className:"text-gray-600",children:o.nationality})]})]})]})]})})},o.id)})})]})}const $v=[{id:"1",essay_title:"Why This Major?",university_name:"Stanford University",submission_date:"2024-11-15",status:"reviewed",score:92},{id:"2",essay_title:"Community Impact",university_name:"MIT",submission_date:"2024-11-20",status:"reviewed",score:88},{id:"3",essay_title:"Overcoming Challenges",university_name:"UC Berkeley",submission_date:"2024-12-01",status:"in_review",score:null},{id:"4",essay_title:"Leadership Experience",university_name:"Harvard University",submission_date:"2024-12-10",status:"pending",score:null}],Ooe={1:{id:"1",student_id:"s1",date_of_birth:"2006-03-15",nationality:"United States",career_interests:"Computer Science, Artificial Intelligence, Software Engineering",financial_budget:75e3,personal_statement:`From a young age, I've been fascinated by the power of technology to solve real-world problems. Growing up in a small town with limited resources, I witnessed firsthand how digital innovation could bridge gaps in education and healthcare. This inspired me to pursue computer science, with a particular focus on artificial intelligence and machine learning.

During my high school years, I've dedicated myself to learning programming languages and frameworks, participating in hackathons, and developing applications that serve my community. One of my proudest achievements was creating a mobile app that helps local farmers optimize their crop yields using predictive analytics.

I believe that technology should be accessible and beneficial to all, and I'm committed to using my skills to create solutions that make a positive impact on society. I'm particularly interested in exploring how AI can be used ethically and responsibly to address challenges in healthcare, education, and environmental sustainability.`,extracurricular_activities:` President of Computer Science Club (3 years) - Led workshops on web development and organized coding competitions
 Varsity Soccer Team Captain (2 years) - Balanced athletic commitment with academic excellence
 Volunteer Coding Instructor - Taught programming basics to middle school students every Saturday
 Winner of State Hackathon 2023 - Developed an AI-powered tutoring platform
 National Honor Society Member - Maintained 4.0 GPA while contributing to community service projects
 Founded Tech for Good Initiative - Created a team that develops free apps for local non-profits`,special_circumstances:null,created_at:"2024-01-15",student:{id:"s1",name:"Emma Rodriguez",email:"emma.rodriguez@email.com",composite_score:88.5,academic_performance:90,essay_activities_rating:87,academic_trend:5}},2:{id:"2",student_id:"s2",date_of_birth:"2006-07-22",nationality:"India",career_interests:"Biomedical Engineering, Healthcare Innovation, Medical Research",financial_budget:45e3,personal_statement:`The intersection of engineering and medicine has always captivated me. When my grandmother suffered from a debilitating illness that required constant monitoring, I realized how technology could transform patient care and improve quality of life. This experience ignited my passion for biomedical engineering and healthcare innovation.

I've spent countless hours researching medical devices, studying anatomy and physiology, and learning about the latest advances in biotechnology. My goal is to develop accessible, affordable medical solutions that can benefit patients in underserved communities around the world.

Through internships at local hospitals and research projects, I've gained hands-on experience in understanding the practical challenges healthcare professionals face. I'm particularly interested in developing low-cost diagnostic tools and remote monitoring systems that can bring quality healthcare to rural areas. I believe that innovation in healthcare should not be a luxury but a fundamental right for all.`,extracurricular_activities:` Founder of Biomedical Innovation Club - Organized workshops and guest lectures from medical professionals
 Hospital Volunteer (300+ hours) - Assisted in patient care and observed medical procedures
 Science Olympiad Team - Gold medalist in Anatomy and Physiology division
 Research Assistant at University Lab - Studied tissue engineering and regenerative medicine
 TEDx Speaker - Presented on 'The Future of Affordable Healthcare Technology'
 Cricket Team Vice-Captain - Demonstrated leadership and teamwork skills`,special_circumstances:"As an international student from India, I come from a middle-class family where education is highly valued. My parents have made significant sacrifices to support my educational aspirations. I am actively seeking scholarships and financial aid to pursue my dream of studying biomedical engineering in the United States.",created_at:"2024-01-20",student:{id:"s2",name:"Arjun Patel",email:"arjun.patel@email.com",composite_score:91.2,academic_performance:93,essay_activities_rating:89,academic_trend:7}},3:{id:"3",student_id:"s3",date_of_birth:"2006-11-08",nationality:"United Kingdom",career_interests:"Environmental Science, Climate Policy, Sustainability",financial_budget:6e4,personal_statement:`Climate change is the defining challenge of our generation, and I am committed to being part of the solution. Growing up in a coastal town in the UK, I've witnessed the tangible effects of rising sea levels and extreme weather events. These experiences have shaped my determination to pursue environmental science and contribute to creating a sustainable future.

My academic journey has been driven by a deep curiosity about ecological systems and a desire to understand the complex relationships between human activity and environmental health. I've conducted independent research on local biodiversity, participated in beach cleanups, and engaged with community leaders to promote sustainable practices.

I believe that addressing climate change requires both scientific innovation and policy change. I'm eager to study environmental science at a university where I can develop the technical skills and interdisciplinary knowledge needed to tackle this global crisis. My ultimate goal is to work on developing and implementing evidence-based climate policies that can make a real difference.`,extracurricular_activities:` Environmental Club President - Led campus-wide sustainability initiatives and reduced school waste by 40%
 Youth Climate Council Member - Advised local government on environmental policies
 Marine Conservation Volunteer - Participated in coral reef restoration projects
 Science Fair Winner - Research project on microplastics in local water systems
 Debate Team Captain - Competed nationally, specializing in environmental policy topics
 Outdoor Adventure Club - Organized eco-friendly hiking and camping trips`,special_circumstances:null,created_at:"2024-01-25",student:{id:"s3",name:"Sophie Chen",email:"sophie.chen@email.com",composite_score:85.8,academic_performance:84,essay_activities_rating:88,academic_trend:4}},4:{id:"4",student_id:"s4",date_of_birth:"2006-05-12",nationality:"Canada",career_interests:"Business Administration, Entrepreneurship, Finance",financial_budget:55e3,personal_statement:`Entrepreneurship isn't just about building businesses; it's about solving problems and creating value for communities. My journey into business began when I started a small lawn care service at age 14, which taught me invaluable lessons about customer service, financial management, and perseverance.

What started as a summer job evolved into a passion for understanding how businesses operate and grow. I became fascinated by the strategic decisions that successful entrepreneurs make and the economic principles that drive markets. Through various business competitions and internships, I've developed skills in financial analysis, marketing strategy, and leadership.

I'm particularly interested in social entrepreneurship and how businesses can be forces for positive change while remaining profitable. I believe that the next generation of business leaders must balance profit with purpose, and I'm committed to developing the skills and knowledge necessary to build sustainable, ethical enterprises that benefit both shareholders and society.`,extracurricular_activities:` DECA International Finalist - Placed top 10 in Entrepreneurship category
 Founded 'Green Clean' Business - Student-run eco-friendly cleaning service employing 12 peers
 Junior Achievement Company Program - Served as CEO of award-winning student company
 Business Club Treasurer - Managed $15,000 budget and organized networking events
 Volunteer Financial Literacy Instructor - Taught personal finance basics to underserved youth
 Varsity Basketball Team - Demonstrated teamwork and leadership as point guard`,special_circumstances:null,created_at:"2024-02-01",student:{id:"s4",name:"Marcus Johnson",email:"marcus.johnson@email.com",composite_score:82.4,academic_performance:81,essay_activities_rating:84,academic_trend:3}},5:{id:"5",student_id:"s5",date_of_birth:"2006-09-30",nationality:"Brazil",career_interests:"Architecture, Urban Planning, Sustainable Design",financial_budget:38e3,personal_statement:`Architecture has the power to shape not just buildings, but communities and lives. Growing up in So Paulo, one of the world's largest cities, I've experienced both the beauty of thoughtful urban design and the challenges of rapid, unplanned development. This duality has inspired my passion for architecture and sustainable urban planning.

I believe that great architecture goes beyond aestheticsit must be functional, sustainable, and accessible to all members of society. Through my studies and volunteer work in underserved neighborhoods, I've learned that good design can improve quality of life, foster community connections, and address environmental challenges.

My goal is to become an architect who creates spaces that honor cultural heritage while embracing innovation and sustainability. I'm particularly interested in designing affordable housing solutions and public spaces that bring communities together. I want to use architecture as a tool for social change, creating built environments that are beautiful, sustainable, and equitable.`,extracurricular_activities:` Architecture Summer Program at Local University - Top student recognition
 Volunteer with Habitat for Humanity - Helped build homes for low-income families
 Art Club Vice President - Organized exhibitions showcasing student work
 Model UN Delegate - Represented Brazil in sustainable development committees
 Community Design Workshop Leader - Taught basic architectural principles to children
 Photography Club Member - Documented urban landscapes and architectural heritage`,special_circumstances:"I come from a working-class family in Brazil where my parents work multiple jobs to support my education. The economic challenges in my country have limited my access to advanced resources, but they have also taught me resilience and creativity. I am seeking financial aid to pursue my architectural education and bring valuable perspectives from my background to contribute to campus diversity.",created_at:"2024-02-05",student:{id:"s5",name:"Isabella Santos",email:"isabella.santos@email.com",composite_score:87.6,academic_performance:86,essay_activities_rating:90,academic_trend:6}},6:{id:"6",student_id:"s6",date_of_birth:"2006-01-18",nationality:"South Korea",career_interests:"Mechanical Engineering, Robotics, Automation",financial_budget:5e4,personal_statement:`Robotics represents the future of how humans interact with technology and solve complex problems. My fascination with mechanical systems began in elementary school when I dismantled my first toy robot to understand how it worked. That curiosity has evolved into a serious pursuit of mechanical engineering and robotics.

Throughout high school, I've dedicated myself to learning the principles of mechanics, electronics, and programming. I've participated in numerous robotics competitions, where I've not only honed my technical skills but also learned the importance of teamwork, iterative design, and creative problem-solving.

I'm particularly interested in how robotics and automation can be used to improve manufacturing efficiency, assist in healthcare, and explore environments that are dangerous or inaccessible to humans. My dream is to contribute to developing robotic systems that can make meaningful improvements in people's lives, whether through assistive technologies for individuals with disabilities or robots that can perform critical tasks in extreme environments.`,extracurricular_activities:` Robotics Team Captain - Led team to national championships, won Innovation Award
 FIRST Robotics Competition Participant (4 years) - Served as lead mechanical designer
 Founded Maker Space Club - Created hands-on learning environment for engineering projects
 Volunteer Mentor for Junior Robotics Teams - Coached elementary and middle school teams
 Math Olympiad Competitor - Regional gold medalist
 Taekwondo Black Belt - Demonstrated discipline and perseverance`,special_circumstances:null,created_at:"2024-02-10",student:{id:"s6",name:"David Kim",email:"david.kim@email.com",composite_score:89.3,academic_performance:91,essay_activities_rating:87,academic_trend:5}},7:{id:"7",student_id:"s7",date_of_birth:"2006-04-25",nationality:"Nigeria",career_interests:"International Relations, Political Science, Diplomacy",financial_budget:42e3,personal_statement:`In an increasingly interconnected world, the ability to build bridges between cultures and nations is more important than ever. Coming from Nigeria, a country rich in diversity and complex in its challenges, I've developed a deep appreciation for the power of diplomacy and international cooperation.

My interest in international relations stems from witnessing how global events directly impact local communities. I've been fascinated by the intricate web of economic, political, and social factors that shape our world. Through Model UN conferences, research projects, and engagement with current affairs, I've developed a nuanced understanding of international dynamics.

I aspire to work in diplomacy or international development, where I can contribute to building more equitable relationships between nations and addressing global challenges such as poverty, conflict, and climate change. I believe that with empathy, cultural intelligence, and strong negotiation skills, we can create a more peaceful and prosperous world for all.`,extracurricular_activities:` Model United Nations Team Leader - Won Best Delegate awards at multiple conferences
 Student Government President - Represented 2,000+ students and implemented policy changes
 Youth Ambassador for African Leadership Initiative - Represented Nigeria at international youth summit
 Debate Team Member - National finalist in foreign policy debates
 Volunteer with Refugee Support Organization - Tutored and mentored displaced youth
 Editor of School Newspaper - Covered international affairs and social justice issues`,special_circumstances:"As a student from Nigeria, I have faced challenges including inconsistent electricity, limited internet access, and economic instability. Despite these obstacles, I have maintained academic excellence and pursued my passions. I am seeking financial assistance to achieve my educational goals and eventually give back to my community in Nigeria.",created_at:"2024-02-15",student:{id:"s7",name:"Amara Okonkwo",email:"amara.okonkwo@email.com",composite_score:84.7,academic_performance:83,essay_activities_rating:86,academic_trend:4}},8:{id:"8",student_id:"s8",date_of_birth:"2006-08-14",nationality:"Australia",career_interests:"Marine Biology, Environmental Conservation, Research",financial_budget:58e3,personal_statement:`The ocean has always been my greatest teacher. Growing up along Australia's coast, I spent countless hours exploring tide pools, snorkeling in coral reefs, and marveling at the incredible diversity of marine life. These experiences sparked a lifelong passion for marine biology and ocean conservation.

What began as childhood curiosity has evolved into a serious commitment to understanding and protecting our oceans. Through research projects, volunteer work, and field studies, I've learned about the critical threats facing marine ecosystemsfrom climate change and pollution to overfishing and habitat destruction.

I'm particularly interested in coral reef ecology and the development of innovative conservation strategies. My goal is to pursue research that can inform policy decisions and contribute to the preservation of marine biodiversity. I believe that through rigorous scientific study and effective communication of research findings, we can inspire action to protect our oceans for future generations.`,extracurricular_activities:` Marine Conservation Volunteer - 400+ hours with Great Barrier Reef Foundation
 Science Research Project - Published findings on coral bleaching in local scientific journal
 Environmental Youth Council Member - Advocated for marine protection policies
 Certified Scuba Diver - Advanced Open Water certification, underwater research training
 Science Olympiad Marine Biology Team Captain - State champions 2023
 Swimming Team Member - Competed at state level while maintaining academic excellence`,special_circumstances:null,created_at:"2024-02-20",student:{id:"s8",name:"Olivia Thompson",email:"olivia.thompson@email.com",composite_score:86.9,academic_performance:85,essay_activities_rating:89,academic_trend:5}}};function W5({studentId:e,onBack:t}){var m,g,y,p,v,b,w,_;const[r,n]=x.useState(null),[s,i]=x.useState(!1),[o,l]=x.useState(null);x.useEffect(()=>{const j=Ooe[e];n(j||null),i(!1)},[e]);const c=j=>{var E,T;const N={id:`${(E=r==null?void 0:r.student)==null?void 0:E.name}___${j.essay_title}`,student_name:((T=r==null?void 0:r.student)==null?void 0:T.name)||"",essay_title:j.essay_title,essay_type:"supplement",university_name:j.university_name};l(N)};if(o&&r)return a.jsx(pg,{comeFromStudentProfile:!0,studentName:((m=r.student)==null?void 0:m.name)||"",essayTitle:o.essay_title,onBackToStudentProfile:()=>l(null)});const u=j=>{const N=new Date(j),E=new Date;let T=E.getFullYear()-N.getFullYear();const S=E.getMonth()-N.getMonth();return(S<0||S===0&&E.getDate()<N.getDate())&&T--,T},d=j=>new Date(j).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),h=j=>j.length<=300?j:j.substring(0,300)+"...",f=j=>j.split(`
`).filter(N=>N.trim()).map(N=>N.replace(/^\s*/,"").trim());return r?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("button",{onClick:t,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900",children:[a.jsx(cn,{className:"w-5 h-5"}),a.jsx("span",{children:"Back to Student Profiles"})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:a.jsxs("div",{className:"flex items-start space-x-6",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-3xl",children:(g=r.student)==null?void 0:g.name.charAt(0)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:(y=r.student)==null?void 0:y.name}),a.jsx("p",{className:"text-gray-600 mt-1",children:(p=r.student)==null?void 0:p.email}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(wt,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Age"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[u(r.date_of_birth)," years"]}),a.jsxs("p",{className:"text-xs text-gray-400",children:["DOB: ",d(r.date_of_birth)]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(VT,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Nationality"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.nationality})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Bl,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Budget"}),a.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:["$",r.financial_budget.toLocaleString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(cr,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Essays Score"}),a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:((b=(v=r.student)==null?void 0:v.essay_activities_rating)==null?void 0:b.toFixed(1))||"N/A"})]})]})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ce,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Personal Statement"})]}),((w=r.student)==null?void 0:w.essay_activities_rating)&&a.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[a.jsx(cr,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"prose max-w-none",children:[a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:s?r.personal_statement:h(r.personal_statement)}),r.personal_statement.length>300&&a.jsx("button",{onClick:()=>i(!s),className:"mt-3 text-blue-600 hover:text-blue-700 font-medium text-sm",children:s?"View less":"View more"})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(hr,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Extracurricular Activities"})]}),((_=r.student)==null?void 0:_.essay_activities_rating)&&a.jsxs("div",{className:"flex items-center gap-2 bg-blue-50 px-3 py-1.5 rounded-lg border border-blue-200",children:[a.jsx(cr,{className:"w-4 h-4 text-blue-600"}),a.jsxs("span",{className:"text-sm font-semibold text-blue-900",children:["Essay Score: ",r.student.essay_activities_rating.toFixed(1),"%"]})]})]}),a.jsx("div",{className:"space-y-3",children:f(r.extracurricular_activities).map((j,N)=>a.jsxs("div",{className:"flex gap-3",children:[a.jsx("span",{className:"flex-shrink-0 w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-sm font-semibold",children:N+1}),a.jsx("p",{className:"text-gray-700 leading-relaxed flex-1",children:j})]},N))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(Ce,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Supplementary Essays"}),a.jsxs("span",{className:"ml-auto text-sm text-gray-500",children:[$v.length," ",$v.length===1?"essay":"essays"]})]}),a.jsx("div",{className:"space-y-3",children:$v.map(j=>a.jsx("button",{onClick:()=>c(j),className:"w-full text-left border border-slate-200 rounded-lg p-4 hover:border-blue-400 hover:bg-blue-50 transition-all cursor-pointer",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:j.essay_title}),a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:j.university_name}),a.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(wt,{className:"w-3.5 h-3.5"}),new Date(j.submission_date).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]})})]}),a.jsxs("div",{className:"flex flex-col items-end gap-2",children:[a.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-semibold ${j.status==="reviewed"?"bg-green-100 text-green-700":j.status==="in_review"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:[j.status==="reviewed"?a.jsx(yr,{className:"w-3.5 h-3.5"}):a.jsx(Or,{className:"w-3.5 h-3.5"}),j.status==="reviewed"?"Reviewed":j.status==="in_review"?"In Review":"Pending"]}),j.score&&a.jsxs("span",{className:"text-sm font-bold text-blue-600",children:[j.score,"%"]})]})]})},j.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-slate-200",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(BT,{className:"w-5 h-5 text-blue-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Career Interests"})]}),a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:r.career_interests})]}),r.special_circumstances&&a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx(ps,{className:"w-5 h-5 text-amber-600"}),a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Special Circumstances"})]}),a.jsx("div",{className:"prose max-w-none",children:a.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:r.special_circumstances})})]})]}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx("p",{className:"text-gray-500",children:"Student profile not found"}),a.jsx("button",{onClick:t,className:"mt-4 text-blue-600 hover:text-blue-700 font-medium",children:"Go Back"})]})}const Toe=({counselor:e})=>{const[t,r]=x.useState(null);return t?a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(W5,{studentId:t,onBack:()=>r(null)})}):a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(z5,{onSelectStudent:r})})},Ioe=async e=>{try{const t=G(V,"University Data/School Counsellors"),r=await le(t);if(!r.exists())return[];let n=[],s="";const i=r.val();for(const d in i){const h=i[d];if(h&&h[e]===!0){s=d,n=Object.keys(h);break}}if(!s||n.length===0)return[];const o=new Set,l=G(V,"University Data/Caseloads"),c=await le(l);if(!c.exists())return[];const u=c.val();for(const d of n)u[d]&&Object.keys(u[d]).forEach(f=>o.add(f));return Array.from(o).sort()}catch(t){throw console.error("Error fetching school students:",t),t}},Doe=async e=>{try{const t=G(V,"University Data/EduCare Drive"),r=await le(t);if(!r.exists())return[];const n=[],s=r.val();for(const i in s){const o=s[i];o.studentName===e&&n.push({id:i,studentName:o.studentName,fileName:o.fileName||"Untitled Document",fileType:o.fileType||"unknown",link:o.link,uploadedBy:o["Uploaded by"]||o.uploadedBy||"Unknown",uploadedOn:o["Uploaded on"]||o.uploadedOn||"Unknown"})}return n.sort((i,o)=>{const l=new Date(i.uploadedOn);return new Date(o.uploadedOn).getTime()-l.getTime()})}catch(t){throw console.error("Error fetching student documents:",t),t}},Roe=async()=>{try{const e=G(V,"University Data/EduCare Drive"),t=await le(e);return t.exists()?Object.keys(t.val()).length:0}catch(e){return console.error("Error counting documents:",e),0}},Moe=async(e,t,r)=>{try{if(!Tf)throw new Error("Firebase Storage is not initialized. Please check your Firebase configuration.");const n=new Date,s=`${String(n.getDate()).padStart(2,"0")}/${String(n.getMonth()+1).padStart(2,"0")}/${n.getFullYear()}`,i=e.name.split(".").pop(),o=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),l=`educare_drive/${t}/${Date.now()}_${o}`;console.log("Uploading file to Firebase Storage:",l);const c=DO(Tf,l),u=await Sz(c,e);console.log("File uploaded successfully:",u);const d=await IO(c);console.log("Download URL obtained:",d);const h=G(V,"University Data/EduCare Drive"),f=dO(h);await Me(f,{studentName:t,fileName:e.name,fileType:i||"unknown",link:d,"Uploaded by":r,"Uploaded on":s,uploadedAt:n.toISOString()}),console.log("Document metadata saved to database")}catch(n){throw console.error("Error uploading document:",n),(n==null?void 0:n.code)==="storage/unauthorized"?new Error("Permission denied. Please check Firebase Storage security rules."):(n==null?void 0:n.code)==="storage/canceled"?new Error("Upload was canceled."):(n==null?void 0:n.code)==="storage/unknown"?new Error("An unknown error occurred. Please check your Firebase configuration."):n!=null&&n.message?new Error(n.message):new Error("Failed to upload document. Please check your internet connection and try again.")}},Loe=async e=>{try{const t=G(V,`University Data/EduCare Drive/${e}`);await Me(t,null)}catch(t){throw console.error("Error deleting document:",t),t}},H5=({counselorName:e})=>{const[t,r]=x.useState([]),[n,s]=x.useState([]),[i,o]=x.useState(""),[l,c]=x.useState(null),[u,d]=x.useState([]),[h,f]=x.useState(0),[m,g]=x.useState(!0),[y,p]=x.useState(!1),[v,b]=x.useState(null),[w,_]=x.useState(null);x.useEffect(()=>{j(),N()},[e]),x.useEffect(()=>{if(i.trim()==="")s(t);else{const C=t.filter(k=>k.toLowerCase().includes(i.toLowerCase()));s(C)}},[i,t]);const j=async()=>{try{g(!0);const C=await Ioe(e);r(C),s(C)}catch(C){b("Failed to load students"),console.error(C)}finally{g(!1)}},N=async()=>{try{const C=await Roe();f(C)}catch(C){console.error("Failed to load document count:",C)}},E=async C=>{try{g(!0),c(C);const k=await Doe(C);d(k)}catch(k){b("Failed to load documents"),console.error(k)}finally{g(!1)}},T=async C=>{var R;const k=(R=C.target.files)==null?void 0:R[0];if(!k||!l)return;if(!["application/pdf","image/png","image/jpeg","image/jpg","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"].includes(k.type)){b("Please upload a valid document or image file (PDF, DOCX, XLSX, PNG, JPG)");return}if(k.size>10*1024*1024){b("File size must be less than 10MB");return}try{p(!0),b(null),await Moe(k,l,e),_("Document uploaded successfully!"),await E(l),await N(),setTimeout(()=>_(null),3e3)}catch(M){const P=(M==null?void 0:M.message)||"Failed to upload document";b(`Upload failed: ${P}`),console.error("Upload error:",M)}finally{p(!1),C.target.value=""}},S=async C=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Loe(C),_("Document deleted successfully!"),l&&(await E(l),await N()),setTimeout(()=>_(null),3e3)}catch(k){b("Failed to delete document"),console.error(k)}},D=C=>{const k=C.toLowerCase();return k==="pdf"?a.jsx(Ce,{className:"w-5 h-5 text-red-500"}):["png","jpg","jpeg"].includes(k)?a.jsx(GT,{className:"w-5 h-5 text-blue-500"}):a.jsx(hW,{className:"w-5 h-5 text-gray-500"})},O=()=>{c(null),d([]),b(null)};return m&&t.length===0?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE] mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading EduCare Drive..."})]})}):l?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("button",{onClick:O,className:"flex items-center gap-2 text-[#04ADEE] hover:text-[#0396d5] mb-3 transition-colors font-medium",children:[a.jsx(cn,{className:"w-4 h-4"}),"Back to Students"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:l}),a.jsx("p",{className:"text-gray-600",children:"Documents and Files"})]}),a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("input",{type:"file",onChange:T,disabled:y,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"}),a.jsxs("div",{className:"flex items-center gap-2 px-6 py-3 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0396d5] transition-colors disabled:opacity-50",children:[a.jsx(SW,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:y?"Uploading...":"Upload Document"})]})]})]}),v&&a.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:v})}),w&&a.jsx("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-green-600",children:w})}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:m?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE] mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading documents..."})]}):u.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx($f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Documents Yet"}),a.jsxs("p",{className:"text-gray-500 mb-6",children:["There are no documents uploaded for ",l," yet."]}),a.jsx("p",{className:"text-sm text-gray-400",children:'Click the "Upload Document" button above to add files.'})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Uploaded Documents (",u.length,")"]}),u.map(C=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:border-[#04ADEE] transition-colors cursor-pointer group",onClick:()=>window.open(C.link,"_blank"),children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"flex-shrink-0",children:D(C.fileType)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 truncate group-hover:text-[#04ADEE] transition-colors",children:C.fileName}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm text-gray-500",children:[a.jsxs("span",{children:["Uploaded by: ",C.uploadedBy]}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Date: ",C.uploadedOn]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("a",{href:C.link,target:"_blank",rel:"noopener noreferrer",onClick:k=>k.stopPropagation(),className:"p-2 text-[#04ADEE] hover:bg-blue-50 rounded-lg transition-colors",title:"Download",children:a.jsx(dp,{className:"w-5 h-5"})}),a.jsx("button",{onClick:k=>{k.stopPropagation(),S(C.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:a.jsx(un,{className:"w-5 h-5"})})]})]},C.id))]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"EduCare Drive"}),a.jsx("p",{className:"text-gray-600",children:"Manage and access student documents securely"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsx("div",{className:"bg-[#04ADEE]/10 rounded-xl p-6 border border-[#04ADEE]/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[#04ADEE] text-sm font-semibold mb-1",children:"Total Students"}),a.jsx("p",{className:"text-4xl font-bold text-gray-900",children:t.length})]}),a.jsx("div",{className:"bg-[#04ADEE]/10 p-4 rounded-lg",children:a.jsx(Zn,{className:"w-8 h-8 text-[#04ADEE]"})})]})}),a.jsx("div",{className:"bg-green-500/10 rounded-xl p-6 border border-green-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-green-600 text-sm font-semibold mb-1",children:"Total Documents"}),a.jsx("p",{className:"text-4xl font-bold text-gray-900",children:h})]}),a.jsx("div",{className:"bg-green-500/10 p-4 rounded-lg",children:a.jsx(dW,{className:"w-8 h-8 text-green-600"})})]})})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search for a student...",value:i,onChange:C=>o(C.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})}),v&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-sm text-red-600",children:v})}),a.jsx("div",{className:"space-y-2",children:n.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx($f,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:i?"No students found matching your search":"No students available"})]}):n.map(C=>a.jsxs("button",{onClick:()=>E(C),className:"w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200 hover:border-[#04ADEE]",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-[#04ADEE] rounded-full flex items-center justify-center text-white font-semibold",children:C.charAt(0).toUpperCase()}),a.jsx("span",{className:"font-medium text-gray-900",children:C})]}),a.jsx(cn,{className:"w-5 h-5 text-gray-400 transform rotate-180"})]},C))})]})]})},$oe=({counselor:e})=>a.jsx("div",{className:"min-h-screen bg-slate-50",children:a.jsx(H5,{counselorName:e.name})}),Uoe=({counselor:e,onLogout:t})=>{const[r,n]=x.useState("active"),[s,i]=x.useState(!1),o=O5(),l=()=>({academic:"Student Profiles",active:"Active Pool",assigned:"Assigned Students",essays:"Essay Review",scholarships:"Scholarships",resources:"Resources",meetings:"Meeting Requests",inbox:"Inbox",student_profiles:"All Student Profiles","educare-drive":"EduCare Drive"})[r],c=()=>{switch(r){case"academic":return a.jsx(poe,{counselor:e});case"active":return a.jsx(dC,{counselor:e});case"assigned":return a.jsx(Noe,{counselor:e});case"essays":return a.jsx(Soe,{counselor:e});case"scholarships":return a.jsx(Eoe,{});case"resources":return a.jsx(Coe,{});case"meetings":return a.jsx(koe,{counselor:e,counts:o});case"inbox":return a.jsx(Aoe,{counselor:e});case"student_profiles":return a.jsx(Toe,{counselor:e});case"educare-drive":return a.jsx($oe,{counselor:e});default:return a.jsx(dC,{counselor:e})}};return a.jsxs("div",{className:"min-h-screen bg-slate-50 flex flex-col",children:[a.jsxs("div",{className:"bg-white border-b border-slate-200 px-4 py-3 flex items-center justify-between sticky top-0 z-40",children:[a.jsx("button",{onClick:()=>i(!0),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(nw,{className:"w-6 h-6 text-slate-700"})}),a.jsx("h1",{className:"text-lg font-semibold text-slate-800",children:l()}),a.jsx("div",{className:"w-10"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto pb-16",children:c()}),a.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 px-2 py-2 flex items-center justify-around z-40",children:[a.jsxs("button",{onClick:()=>{n("active"),i(!1)},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-lg relative ${r==="active"?"text-[#04ADEE]":"text-slate-600"}`,children:[a.jsx(Zn,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Pool"})]}),a.jsxs("button",{onClick:()=>{n("assigned"),i(!1)},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-lg relative ${r==="assigned"?"text-[#04ADEE]":"text-slate-600"}`,children:[a.jsx(Cu,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Assigned"})]}),a.jsxs("button",{onClick:()=>{n("essays"),i(!1)},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-lg relative ${r==="essays"?"text-[#04ADEE]":"text-slate-600"}`,children:[a.jsx(Ce,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Essays"}),o.unreviewedEssays>0&&a.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center font-semibold",children:o.unreviewedEssays})]}),a.jsxs("button",{onClick:()=>{n("inbox"),i(!1)},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-lg relative ${r==="inbox"?"text-[#04ADEE]":"text-slate-600"}`,children:[a.jsx(Ha,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Inbox"}),o.unreadMessages>0&&a.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center font-semibold",children:o.unreadMessages})]}),a.jsxs("button",{onClick:()=>{n("meetings"),i(!1)},className:`flex flex-col items-center gap-1 px-3 py-2 rounded-lg relative ${r==="meetings"?"text-[#04ADEE]":"text-slate-600"}`,children:[a.jsx(wt,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:"Meet"}),o.pendingMeetings>0&&a.jsx("span",{className:"absolute top-1 right-1 w-4 h-4 bg-red-500 text-white text-[10px] rounded-full flex items-center justify-center font-semibold",children:o.pendingMeetings})]})]}),s&&a.jsxs("div",{className:"fixed inset-0 z-50",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:()=>i(!1)}),a.jsxs("div",{className:"absolute left-0 top-0 bottom-0 w-72 bg-white shadow-xl flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:"/white_logo.png",alt:"EduCare",className:"w-10 h-10 object-contain"}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("p",{className:"text-xl font-bold text-[#04ADEE] leading-tight",children:"EduCare"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Counselor Portal"})]})]}),a.jsx("button",{onClick:()=>i(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(rt,{className:"w-5 h-5 text-slate-600"})})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("div",{className:"w-10 h-10 rounded-full bg-[#04ADEE] flex items-center justify-center",children:a.jsx("span",{className:"text-white font-semibold text-sm",children:e.name.charAt(0)})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-slate-800",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500 capitalize",children:e.role.replace("_"," ")})]})]})]}),a.jsxs("nav",{className:"flex-1 overflow-y-auto p-4 space-y-1",children:[a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Profiles"}),a.jsxs("button",{onClick:()=>{n("academic"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="academic"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Rt,{className:"w-5 h-5"}),a.jsx("span",{children:"Student Profiles"})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4",children:"Pool Management"}),a.jsxs("button",{onClick:()=>{n("active"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="active"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Zn,{className:"w-5 h-5"}),a.jsx("span",{children:"Active Pool"})]}),a.jsxs("button",{onClick:()=>{n("assigned"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="assigned"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Cu,{className:"w-5 h-5"}),a.jsx("span",{children:"Assigned Students"})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4",children:"Review"}),a.jsxs("button",{onClick:()=>{n("essays"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="essays"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Ce,{className:"w-5 h-5"}),a.jsx("span",{children:"Essay Review"}),o.unreviewedEssays>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="essays"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:o.unreviewedEssays})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4",children:"Communication"}),a.jsxs("button",{onClick:()=>{n("inbox"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="inbox"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Ha,{className:"w-5 h-5"}),a.jsx("span",{children:"Inbox"}),o.unreadMessages>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="inbox"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:o.unreadMessages})]}),a.jsxs("button",{onClick:()=>{n("meetings"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="meetings"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(wt,{className:"w-5 h-5"}),a.jsx("span",{children:"Meeting Requests"}),o.pendingMeetings>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="meetings"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:o.pendingMeetings})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4",children:"Resources"}),a.jsxs("button",{onClick:()=>{n("scholarships"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="scholarships"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(hr,{className:"w-5 h-5"}),a.jsx("span",{children:"Scholarships"})]}),a.jsxs("button",{onClick:()=>{n("resources"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="resources"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(cr,{className:"w-5 h-5"}),a.jsx("span",{children:"Resources"})]}),a.jsxs("button",{onClick:()=>{n("educare-drive"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="educare-drive"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx($f,{className:"w-5 h-5"}),a.jsx("span",{children:"EduCare Drive"})]}),a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2 mt-4",children:"More"}),a.jsxs("button",{onClick:()=>{n("student_profiles"),i(!1)},className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium ${r==="student_profiles"?"bg-[#04ADEE] text-white":"text-slate-700 hover:bg-slate-50"}`,children:[a.jsx(Rt,{className:"w-5 h-5"}),a.jsx("span",{children:"All Student Profiles"})]})]}),a.jsx("div",{className:"p-4 border-t border-slate-200",children:a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-red-50 text-red-600 rounded-lg hover:bg-red-100 transition-colors font-medium",children:[a.jsx(Ff,{className:"w-5 h-5"}),a.jsx("span",{children:"Logout"})]})})]})]})]})};function Foe({studentId:e,counselorId:t,onBack:r}){const[n,s]=x.useState(null),[i,o]=x.useState(!0),[l,c]=x.useState(null),[u,d]=x.useState(null),[h,f]=x.useState({});x.useEffect(()=>{m()},[e]);const m=async()=>{o(!0);const S=await boe(e,t);s(S),o(!1)},g=async(S,D)=>{D?await woe(D,h,t):await _oe(S,e,t,h),d(null),f({}),m()},y=async S=>{confirm("Are you sure you want to remove this university assignment?")&&(await joe(S,t),m())},p=S=>{const D={not_started:"bg-gray-100 text-gray-700",in_progress:"bg-blue-100 text-blue-700",submitted:"bg-purple-100 text-purple-700",accepted:"bg-emerald-100 text-emerald-700",rejected:"bg-red-100 text-red-700",deferred:"bg-amber-100 text-amber-700",waitlisted:"bg-orange-100 text-orange-700"};return D[S]||D.not_started},v=S=>({reach:"bg-rose-100 text-rose-700 border-rose-300",mid:"bg-amber-100 text-amber-700 border-amber-300",safety:"bg-emerald-100 text-emerald-700 border-emerald-300"})[S],b=S=>{const D={not_started:"text-gray-400",draft:"text-blue-500",review:"text-amber-500",final:"text-emerald-500"};return D[S]||D.not_started};if(i)return a.jsx("div",{className:"flex items-center justify-center h-screen",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#04ADEE]"})});if(!n)return a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("p",{className:"text-slate-600",children:"Student not found"}),a.jsx("button",{onClick:r,className:"mt-4 text-[#04ADEE] hover:text-[#0390cc] font-medium",children:"Go Back"})]});const w=n.universities.filter(S=>S.university_tier==="reach").length,_=n.universities.filter(S=>S.university_tier==="mid").length,j=n.universities.filter(S=>S.university_tier==="safety").length,N=n.universities.filter(S=>{var D;return((D=S.progress)==null?void 0:D.status)==="submitted"}).length,E=n.universities.filter(S=>{var D;return((D=S.progress)==null?void 0:D.status)==="accepted"}).length,T=n.universities.filter(S=>{var D;return((D=S.progress)==null?void 0:D.status)==="in_progress"}).length;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-[#04ADEE]/5",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-8",children:[a.jsxs("button",{onClick:r,className:"flex items-center gap-2 text-slate-600 hover:text-[#04ADEE] transition-colors mb-6",children:[a.jsx(cn,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Back to Dashboard"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-8 mb-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center text-white text-2xl font-bold",children:n.name.split(" ").map(S=>S[0]).join("")}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:n.name}),a.jsxs("p",{className:"text-slate-600 flex items-center gap-2 mt-1",children:[a.jsx(sd,{className:"w-4 h-4"}),n.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-lg border border-emerald-200",children:[a.jsx(hr,{className:"w-5 h-5"}),a.jsxs("span",{className:"font-semibold",children:["Composite: ",n.composite_score.toFixed(1)]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 rounded-xl p-4 border border-blue-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-2",children:[a.jsx(cr,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Essays & Activities"})]}),a.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[n.essay_activities_rating.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 rounded-xl p-4 border border-purple-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-2",children:[a.jsx(Rt,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Academic Performance"})]}),a.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[n.academic_performance.toFixed(1),"%"]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 rounded-xl p-4 border border-emerald-200",children:[a.jsxs("div",{className:"flex items-center gap-2 text-emerald-700 mb-2",children:[n.academic_trend>=0?a.jsx(Gn,{className:"w-5 h-5"}):a.jsx(_W,{className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium",children:"Academic Trend"})]}),a.jsxs("p",{className:"text-2xl font-bold text-emerald-900",children:[n.academic_trend>=0?"+":"",n.academic_trend.toFixed(1),"%"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-6 gap-4 mb-6",children:[a.jsxs("div",{className:"col-span-2 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(to,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Universities"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-600",children:"Total Assigned"}),a.jsx("span",{className:"text-2xl font-bold text-slate-900",children:n.universities.length})]}),a.jsx("div",{className:"h-px bg-slate-200"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-rose-600 text-sm",children:"Reach"}),a.jsx("span",{className:"font-semibold text-rose-600",children:w})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-amber-600 text-sm",children:"Mid"}),a.jsx("span",{className:"font-semibold text-amber-600",children:_})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-emerald-600 text-sm",children:"Safety"}),a.jsx("span",{className:"font-semibold text-emerald-600",children:j})]})]})]}),a.jsxs("div",{className:"col-span-4 bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(lW,{className:"w-6 h-6 text-emerald-500"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Application Progress"})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[a.jsx("p",{className:"text-sm text-blue-700 font-medium mb-1",children:"In Progress"}),a.jsx("p",{className:"text-3xl font-bold text-blue-900",children:T})]}),a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[a.jsx("p",{className:"text-sm text-purple-700 font-medium mb-1",children:"Submitted"}),a.jsx("p",{className:"text-3xl font-bold text-purple-900",children:N})]}),a.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[a.jsx("p",{className:"text-sm text-emerald-700 font-medium mb-1",children:"Accepted"}),a.jsx("p",{className:"text-3xl font-bold text-emerald-900",children:E})]})]})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-200 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Assigned Universities"}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:[a.jsx(br,{className:"w-4 h-4"}),"Add University"]})]}),a.jsxs("div",{className:"space-y-4",children:[n.universities.map(S=>{var D,O,C,k,I,R,M;return a.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden hover:shadow-md transition-shadow",children:[a.jsx("div",{className:"p-6 cursor-pointer bg-gradient-to-r from-slate-50 to-white",onClick:()=>c(l===S.id?null:S.id),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[#04ADEE] to-emerald-400 flex items-center justify-center",children:a.jsx(Rt,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:S.university_name}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[a.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full border ${v(S.university_tier)}`,children:S.university_tier.charAt(0).toUpperCase()+S.university_tier.slice(1)}),S.progress&&a.jsx("span",{className:`text-xs font-medium px-3 py-1 rounded-full ${p(S.progress.status)}`,children:S.progress.status.replace("_"," ").toUpperCase()})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[S.progress&&a.jsxs("div",{className:"flex items-center gap-4 mr-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Essay Status"}),a.jsx("p",{className:`text-sm font-semibold ${b(S.progress.essay_status)}`,children:S.progress.essay_status.charAt(0).toUpperCase()+S.progress.essay_status.slice(1)})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Recommendations"}),a.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[S.progress.recommendation_letters,"/",S.progress.recommendation_letters_needed]})]})]}),a.jsx("button",{onClick:P=>{P.stopPropagation(),y(S.id)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(un,{className:"w-4 h-4"})})]})]})}),l===S.id&&a.jsx("div",{className:"border-t border-slate-200 p-6 bg-white",children:u===S.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Status"}),a.jsxs("select",{value:h.status||((D=S.progress)==null?void 0:D.status)||"not_started",onChange:P=>f({...h,status:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"not_started",children:"Not Started"}),a.jsx("option",{value:"in_progress",children:"In Progress"}),a.jsx("option",{value:"submitted",children:"Submitted"}),a.jsx("option",{value:"accepted",children:"Accepted"}),a.jsx("option",{value:"rejected",children:"Rejected"}),a.jsx("option",{value:"deferred",children:"Deferred"}),a.jsx("option",{value:"waitlisted",children:"Waitlisted"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Essay Status"}),a.jsxs("select",{value:h.essay_status||((O=S.progress)==null?void 0:O.essay_status)||"not_started",onChange:P=>f({...h,essay_status:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"not_started",children:"Not Started"}),a.jsx("option",{value:"draft",children:"Draft"}),a.jsx("option",{value:"review",children:"Under Review"}),a.jsx("option",{value:"final",children:"Final"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Application Deadline"}),a.jsx("input",{type:"date",value:h.application_deadline||((C=S.progress)==null?void 0:C.application_deadline)||"",onChange:P=>f({...h,application_deadline:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Decision Date"}),a.jsx("input",{type:"date",value:h.decision_date||((k=S.progress)==null?void 0:k.decision_date)||"",onChange:P=>f({...h,decision_date:P.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Completed)"}),a.jsx("input",{type:"number",min:"0",value:h.recommendation_letters??((I=S.progress)==null?void 0:I.recommendation_letters)??0,onChange:P=>f({...h,recommendation_letters:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Recommendation Letters (Required)"}),a.jsx("input",{type:"number",min:"0",value:h.recommendation_letters_needed??((R=S.progress)==null?void 0:R.recommendation_letters_needed)??2,onChange:P=>f({...h,recommendation_letters_needed:parseInt(P.target.value)}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Notes"}),a.jsx("textarea",{value:h.notes||((M=S.progress)==null?void 0:M.notes)||"",onChange:P=>f({...h,notes:P.target.value}),rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",placeholder:"Add notes about this application..."})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsxs("button",{onClick:()=>{d(null),f({})},className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors flex items-center gap-2",children:[a.jsx(rt,{className:"w-4 h-4"}),"Cancel"]}),a.jsxs("button",{onClick:()=>{var P;return g(S.id,(P=S.progress)==null?void 0:P.id)},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors flex items-center gap-2",children:[a.jsx(Bi,{className:"w-4 h-4"}),"Save Progress"]})]})]}):a.jsx("div",{children:S.progress?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(wt,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Application Deadline"})]}),a.jsx("p",{className:"text-slate-900 font-semibold",children:S.progress.application_deadline?new Date(S.progress.application_deadline).toLocaleDateString():"Not set"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Or,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Decision Date"})]}),a.jsx("p",{className:"text-slate-900 font-semibold",children:S.progress.decision_date?new Date(S.progress.decision_date).toLocaleDateString():"Not set"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Zn,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Recommendation Letters"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 bg-slate-100 rounded-full h-2",children:a.jsx("div",{className:"bg-[#04ADEE] h-2 rounded-full transition-all",style:{width:`${S.progress.recommendation_letters/S.progress.recommendation_letters_needed*100}%`}})}),a.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:[S.progress.recommendation_letters,"/",S.progress.recommendation_letters_needed]})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Ce,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Essay Progress"})]}),a.jsx("span",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-lg text-sm font-medium ${p(S.progress.essay_status)}`,children:S.progress.essay_status.charAt(0).toUpperCase()+S.progress.essay_status.slice(1)})]})]}),S.progress.notes&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 text-slate-500 mb-2",children:[a.jsx(Ce,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Notes"})]}),a.jsx("p",{className:"text-slate-700 bg-slate-50 rounded-lg p-4",children:S.progress.notes})]}),a.jsx("div",{className:"flex justify-end pt-4",children:a.jsxs("button",{onClick:()=>{d(S.id),f(S.progress||{})},className:"flex items-center gap-2 px-4 py-2 bg-slate-100 text-slate-700 hover:bg-slate-200 rounded-lg transition-colors",children:[a.jsx(JT,{className:"w-4 h-4"}),"Edit Progress"]})})]}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ps,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-slate-500 mb-4",children:"No progress tracking yet"}),a.jsx("button",{onClick:()=>{d(S.id),f({})},className:"px-4 py-2 bg-[#04ADEE] text-white rounded-lg hover:bg-[#0390cc] transition-colors",children:"Start Tracking"})]})})})]},S.id)}),n.universities.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Rt,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-lg mb-2",children:"No universities assigned yet"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Start by adding universities to this student's list"})]})]})]})]})})}const Boe=[{id:"1",name:"Maya Rodriguez",email:"maya.rodriguez@example.com",description:"Maya is a passionate advocate for environmental justice who combines her love for science with community organizing to create sustainable solutions.",careerInterests:["Environmental Science","Public Policy","Urban Planning"],essayActivities:92,academicPerformance:84,academicTrend:3,compositeStrength:86.3,strengthLabel:"Strong",composite_score:86.3,academic_performance:84,essay_activities_rating:92,academic_trend:3},{id:"2",name:"Ayaan Patel",email:"ayaan.patel@example.com",description:"Ayaan is an innovative problem-solver with a keen interest in artificial intelligence and its applications in healthcare to improve patient outcomes.",careerInterests:["Computer Science","Biomedical Engineering","Healthcare"],essayActivities:88,academicPerformance:91,academicTrend:6,compositeStrength:88.3,strengthLabel:"Strong",composite_score:88.3,academic_performance:91,essay_activities_rating:88,academic_trend:6},{id:"3",name:"Ethan Chen",email:"ethan.chen@example.com",description:"Ethan is a creative entrepreneur who founded a social enterprise connecting local artisans with global markets while preserving cultural heritage.",careerInterests:["Business Administration","International Relations","Social Entrepreneurship"],essayActivities:75,academicPerformance:89,academicTrend:8,compositeStrength:84,strengthLabel:"Competitive",composite_score:84,academic_performance:89,essay_activities_rating:75,academic_trend:8},{id:"4",name:"Zara Khan",email:"zara.khan@example.com",description:"Zara is a talented writer and aspiring filmmaker who uses storytelling to amplify marginalized voices and spark conversations about social change.",careerInterests:["Film & Media Studies","Creative Writing","Journalism"],essayActivities:81,academicPerformance:78,academicTrend:2,compositeStrength:80.3,strengthLabel:"Competitive",composite_score:80.3,academic_performance:78,essay_activities_rating:81,academic_trend:2},{id:"5",name:"Lucas Bennett",email:"lucas.bennett@example.com",description:"Lucas is a dedicated student athlete who balances competitive swimming with a passion for physical therapy to help others achieve their athletic goals.",careerInterests:["Kinesiology","Physical Therapy","Sports Medicine"],essayActivities:68,academicPerformance:73,academicTrend:1,compositeStrength:70.3,strengthLabel:"Developing",composite_score:70.3,academic_performance:73,essay_activities_rating:68,academic_trend:1}],zoe=[{id:"6",name:"Emma Wilson",email:"emma.wilson@example.com",description:"Emma is a dedicated computer science student with exceptional coding skills and a passion for developing AI solutions.",careerInterests:["Computer Science","Artificial Intelligence","Software Engineering"],essayActivities:95,academicPerformance:92,academicTrend:5,compositeStrength:91.5,strengthLabel:"Strong",composite_score:91.5,academic_performance:92,essay_activities_rating:95,academic_trend:5,universities:["Stanford University","UC Berkeley","University of Washington"],assignedDate:"2024-12-10"},{id:"7",name:"Sophie Chen",email:"sophie.chen@example.com",description:"Sophie is a robotics enthusiast who has won multiple national competitions and developed innovative solutions for accessibility.",careerInterests:["Mechanical Engineering","Robotics","Product Design"],essayActivities:89,academicPerformance:88,academicTrend:7,compositeStrength:87.8,strengthLabel:"Strong",composite_score:87.8,academic_performance:88,essay_activities_rating:89,academic_trend:7,universities:["MIT","University of Michigan","Purdue University","Georgia Tech"],assignedDate:"2024-12-12"}];function Woe({counselor:e,onLogout:t}){const[r,n]=x.useState("academic"),[s,i]=x.useState(Boe),[o,l]=x.useState(zoe),[c,u]=x.useState(null),[d,h]=x.useState("all"),[f,m]=x.useState(null),[g,y]=x.useState(null),[p,v]=x.useState(!1),[b,w]=x.useState(null),[_,j]=x.useState(!1),[N,E]=x.useState(!1),[T,S]=x.useState([]),[D,O]=x.useState(!1),[C,k]=x.useState(new Set),[I,R]=x.useState(""),[M,P]=x.useState(null),{counts:A}=O5(e.id,e.name),$=x.useRef(null);x.useEffect(()=>(e.name&&($.current=P5(e.name)),()=>{$.current&&$.current()}),[e.name]);const L=async()=>{if(e.role==="pool_management"){j(!0);try{console.log("Fetching pool data for counselor:",e.name);const H=await R5(e.name);console.log("Pool data received:",H),i(H.activeStudents),P({totalCaseload:H.totalCaseload,totalAssigned:H.totalAssigned,averageStrength:H.averageStrength,progress:H.progress})}catch(H){console.error("Error fetching pool data:",H)}finally{j(!1)}}},z=async()=>{if(e.role==="pool_management"){O(!0);try{console.log("Fetching assigned students for counselor:",e.name);const H=await $5(e.name);console.log("Assigned students received:",H),S(H)}catch(H){console.error("Error fetching assigned students:",H)}finally{O(!1)}}};x.useEffect(()=>{L(),z()},[e.name,e.role]);const K=()=>{L()},se=x.useMemo(()=>{let H=[...s];return d!=="all"&&(H=H.filter(ee=>{const B=ee.compositeStrength;switch(d){case"90-100":return B>=90&&B<=100;case"80-89":return B>=80&&B<90;case"70-79":return B>=70&&B<80;case"below-70":return B<70;default:return!0}})),H.sort((ee,B)=>B.compositeStrength-ee.compositeStrength)},[s,d]),fe=(M==null?void 0:M.averageStrength)||0,he=(M==null?void 0:M.totalAssigned)||0,ye=(M==null?void 0:M.totalCaseload)||0,q=()=>{u(null),L(),z()},te=H=>{k(ee=>{const B=new Set(ee);return B.has(H)?B.delete(H):B.add(H),B})},U=T.filter(H=>{if(!I.trim())return!0;const ee=I.toLowerCase(),B=H.name.toLowerCase().includes(ee),ve=H.universities.some(xe=>xe.name.toLowerCase().includes(ee));return B||ve});return g?a.jsx(Foe,{studentId:g,counselorId:e.id,onBack:()=>y(null)}):a.jsxs("div",{className:"min-h-screen bg-slate-50 flex",children:[a.jsxs("aside",{className:`bg-white border-r border-slate-200 fixed left-0 top-0 bottom-0 flex flex-col transition-all duration-300 ${p?"w-20":"w-72"}`,children:[a.jsx("button",{onClick:()=>v(!p),className:"absolute -right-3 top-24 bg-white border border-slate-200 rounded-full p-1.5 shadow-md hover:bg-slate-50 transition-colors z-50",title:p?"Expand sidebar":"Collapse sidebar",children:p?a.jsx(WT,{className:"w-4 h-4 text-slate-600"}):a.jsx(zT,{className:"w-4 h-4 text-slate-600"})}),a.jsx("div",{className:`p-6 border-b border-slate-200 ${p?"p-4":""}`,children:a.jsxs("div",{className:`flex items-center gap-3 mb-2 ${p?"justify-center":""}`,children:[a.jsx("img",{src:"/white_logo.png",alt:"EduCare",className:"w-10 h-10 object-contain"}),!p&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("p",{className:"text-xl font-bold text-[#04ADEE] leading-tight",children:"EduCare"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Counselor Portal"})]})]})}),a.jsxs("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:[a.jsxs("div",{className:"mb-4",children:[!p&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Profiles"}),a.jsxs("button",{onClick:()=>n("academic"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="academic"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Student Profiles":void 0,children:[a.jsx(Rt,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsx("span",{children:"Student Profiles"})]})]}),a.jsxs("div",{className:"mb-4",children:[!p&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Pool Management"}),a.jsxs("button",{onClick:()=>n("active"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="active"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Active Pool":void 0,children:[a.jsx(Zn,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Active Pool"}),a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="active"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:se.length})]})]}),a.jsxs("button",{onClick:()=>n("assigned"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="assigned"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Assigned Students":void 0,children:[a.jsx(Cu,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Assigned Students"}),a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="assigned"?"bg-white/20 text-white":"bg-slate-100 text-slate-600"}`,children:he})]})]})]}),a.jsxs("div",{className:"mb-4",children:[!p&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Essays"}),a.jsxs("button",{onClick:()=>n("essays"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="essays"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Essay Review":void 0,children:[a.jsx(Ce,{className:"w-5 h-5 flex-shrink-0"}),p&&A.unreviewedEssays>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Essay Review"}),A.unreviewedEssays>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="essays"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.unreviewedEssays})]})]})]}),a.jsxs("div",{className:"mb-4",children:[!p&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Communication"}),a.jsxs("button",{onClick:()=>n("inbox"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="inbox"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Inbox":void 0,children:[a.jsx(Ha,{className:"w-5 h-5 flex-shrink-0"}),p&&A.unreadMessages>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Inbox"}),A.unreadMessages>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="inbox"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.unreadMessages})]})]}),a.jsxs("button",{onClick:()=>n("meetings"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3 relative":"gap-3 px-3 py-2.5"} ${r==="meetings"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Meeting Requests":void 0,children:[a.jsx(wt,{className:"w-5 h-5 flex-shrink-0"}),p&&A.pendingMeetings>0&&a.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full"}),!p&&a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Meeting Requests"}),A.pendingMeetings>0&&a.jsx("span",{className:`ml-auto px-2 py-0.5 rounded-full text-xs font-semibold ${r==="meetings"?"bg-white/20 text-white":"bg-red-500 text-white"}`,children:A.pendingMeetings})]})]})]}),a.jsxs("div",{children:[!p&&a.jsx("p",{className:"text-xs font-semibold text-slate-400 uppercase tracking-wider px-3 mb-2",children:"Resources"}),a.jsxs("button",{onClick:()=>n("scholarships"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="scholarships"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Scholarships":void 0,children:[a.jsx(hr,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsx("span",{children:"Scholarships"})]}),a.jsxs("button",{onClick:()=>n("resources"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="resources"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"Resources":void 0,children:[a.jsx(cr,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsx("span",{children:"Resources"})]}),a.jsxs("button",{onClick:()=>n("educare-drive"),className:`w-full flex items-center rounded-lg text-sm font-medium transition-all ${p?"justify-center p-3":"gap-3 px-3 py-2.5"} ${r==="educare-drive"?"bg-[#04ADEE] text-white shadow-sm":"text-slate-700 hover:bg-slate-50"}`,title:p?"EduCare Drive":void 0,children:[a.jsx($f,{className:"w-5 h-5 flex-shrink-0"}),!p&&a.jsx("span",{children:"EduCare Drive"})]})]})]}),a.jsx("div",{className:`border-t border-slate-200 ${p?"p-2":"p-4"}`,children:p?a.jsx("button",{onClick:t,className:"w-full flex items-center justify-center p-3 text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",title:"Sign Out",children:a.jsx(Ff,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[a.jsx("img",{src:"https://images.pexels.com/photos/3782235/pexels-photo-3782235.jpeg?auto=compress&cs=tinysrgb&w=200",alt:e.name,className:"w-10 h-10 rounded-full object-cover border-2 border-slate-200"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:e.name}),a.jsx("p",{className:"text-xs text-slate-500",children:"Counselor"})]})]}),a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 px-3 py-2 text-sm font-medium text-slate-600 hover:text-slate-900 hover:bg-slate-50 rounded-lg transition-colors",children:[a.jsx(Ff,{className:"w-4 h-4"}),a.jsx("span",{children:"Sign Out"})]})]})})]}),a.jsx("main",{className:`flex-1 transition-all duration-300 ${p?"ml-20":"ml-72"} ${r==="inbox"?"h-screen overflow-hidden":"overflow-y-auto"}`,children:r==="inbox"?a.jsx(Z_,{userRole:"counselor"}):a.jsxs(a.Fragment,{children:[(r==="active"||r==="assigned")&&a.jsx("div",{className:"bg-gradient-to-r from-[#04ADEE]/10 via-emerald-50 to-[#04ADEE]/10 border-b border-[#04ADEE]/20",children:a.jsxs("div",{className:"px-8 py-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gn,{className:"w-6 h-6 text-[#04ADEE]"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Pool Management Dashboard"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-300 hover:border-[#04ADEE] text-slate-700 hover:text-[#04ADEE] rounded-lg text-sm font-semibold transition-all shadow-sm hover:shadow",children:[a.jsx(ZT,{className:"w-4 h-4"}),"Set Weighting"]}),a.jsxs("div",{className:"flex items-center gap-2 bg-emerald-500 px-3 py-1.5 rounded-full",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),a.jsx("span",{className:"text-xs font-semibold text-white",children:"Active"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zn,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Active Pool"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(We,{end:se.length,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Cu,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Assigned"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-slate-900",children:a.jsx(We,{end:he,duration:1500})}),a.jsx("span",{className:"text-sm text-slate-600",children:"Students"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Gn,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Avg Strength"})]}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-3xl font-bold text-[#04ADEE]",children:a.jsx(We,{end:fe,duration:1500,decimals:1})}),a.jsx("span",{className:"text-sm text-slate-600",children:"%"})]})]}),a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsx("span",{className:"text-xs font-medium text-slate-600",children:"Progress"})}),a.jsx("div",{className:"mb-2",children:a.jsxs("span",{className:"text-lg font-bold text-slate-900",children:[a.jsx(We,{end:he,duration:1500})," / ",a.jsx(We,{end:ye,duration:1500})]})}),a.jsx("div",{className:"w-full h-2 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-500",style:{width:`${he/ye*100}%`}})})]})]})]})}),a.jsxs("div",{className:"px-8 py-6",children:[r==="academic"&&a.jsx(I5,{}),r==="essays"&&a.jsx(pg,{}),r==="meetings"&&a.jsx(B5,{counselorId:e.id,counselorName:e.name}),r==="student_profiles"&&(b?a.jsx(W5,{studentId:b,onBack:()=>w(null)}):a.jsx(z5,{onSelectStudent:w})),r==="scholarships"&&a.jsx(U5,{onBack:()=>n("active"),onLogout:()=>{}}),r==="resources"&&a.jsx(F5,{onBack:()=>n("active"),onLogout:()=>{}}),r==="educare-drive"&&a.jsx(H5,{counselorName:e.name}),r==="active"&&a.jsx("div",{children:_?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Loading Pool Data"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Fetching students from Firebase..."})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Filter by Composite:"}),a.jsxs("select",{value:d,onChange:H=>h(H.target.value),className:"px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-700 hover:border-slate-300 focus:outline-none focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent",children:[a.jsx("option",{value:"all",children:"All Students"}),a.jsx("option",{value:"90-100",children:"90-100 (Excellent)"}),a.jsx("option",{value:"80-89",children:"80-89 (Strong)"}),a.jsx("option",{value:"70-79",children:"70-79 (Competitive)"}),a.jsx("option",{value:"below-70",children:"Below 70 (Developing)"})]})]}),a.jsxs("span",{className:"text-sm text-slate-500",children:["Showing ",se.length," of ",s.length," students"]})]}),se.length===0?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx(Gn,{className:"w-12 h-12 text-emerald-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:s.length===0&&he===ye&&ye>0?"All students in your caseload have been assigned universities":"No Students Found"}),a.jsx("p",{className:"text-sm text-slate-600",children:s.length===0&&he===ye&&ye>0?'Great work! Check the "Assigned Students" tab to view all assignments.':"Try adjusting your filter to see more students."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:se.map(H=>{const B=H.description.length>120,ve=B?H.description.slice(0,120)+"...":H.description;return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 hover:border-slate-300 hover:shadow-lg transition-all p-5 flex flex-col",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:H.name}),a.jsx("span",{className:`inline-block px-2.5 py-1 rounded-full text-xs font-semibold ${H.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":H.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:H.strengthLabel})]}),a.jsxs("div",{className:"text-center bg-slate-50 rounded-lg px-3 py-2 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-0.5",children:"Composite"}),a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:a.jsx(We,{end:H.compositeStrength,duration:1500,decimals:1})})]})]}),a.jsxs("div",{className:"text-sm text-slate-600 leading-relaxed mb-4 flex-grow",children:[a.jsx("p",{className:"inline",children:ve}),B&&a.jsx("button",{onClick:()=>m(H),className:"ml-1 text-[#04ADEE] hover:text-[#0396d5] font-medium inline",children:"Read More"})]}),a.jsxs("div",{className:"space-y-2.5 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Essay & Activities"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(We,{end:H.essayActivities,duration:1500}),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Current Average"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(We,{end:H.academicPerformance,duration:1500}),"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Past Overall Average"}),a.jsxs("span",{className:"text-xs font-bold text-slate-900",children:[a.jsx(We,{end:H.academicTrend,duration:1500}),"%"]})]})]}),a.jsx("button",{onClick:()=>u(H),className:"w-full px-4 py-2.5 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:"Assign Universities"})]},H.id)})})]})}),r==="assigned"&&a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:a.jsxs("div",{className:"relative",children:[a.jsx(fr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Search by student or university name...",value:I,onChange:H=>R(H.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-lg focus:ring-2 focus:ring-[#04ADEE] focus:border-transparent outline-none"})]})}),D?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-[#04ADEE] border-t-transparent rounded-full animate-spin mx-auto mb-3"}),a.jsx("p",{className:"text-slate-600",children:"Loading assigned students..."})]}):U.length===0?a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-12 text-center",children:[a.jsx(Gn,{className:"w-12 h-12 text-slate-400 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:I.trim()?"No Matching Students":"No Assigned Students Yet"}),a.jsx("p",{className:"text-sm text-slate-600",children:I.trim()?"Try a different search term.":"Students will appear here once universities are assigned."})]}):U.map(H=>{const ee=C.has(H.id);return a.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-bold text-slate-900 mb-1",children:H.name}),a.jsxs("span",{className:"inline-block px-2.5 py-1 rounded-full text-xs font-semibold bg-slate-100 text-slate-600",children:[H.assignedCount," ",H.assignedCount===1?"University":"Universities"]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-xs text-slate-500",children:"Composite"}),a.jsx("div",{className:"text-xl font-bold text-[#04ADEE]",children:a.jsx(We,{end:H.compositeScore,duration:1500,decimals:1})})]})]}),a.jsxs("button",{onClick:()=>te(H.id),className:"w-full py-2 px-3 bg-slate-50 hover:bg-slate-100 rounded-lg text-sm font-medium text-slate-700 transition-colors flex items-center justify-between",children:[a.jsxs("span",{children:[ee?"Hide":"Show"," Universities"]}),a.jsx("span",{className:`transform transition-transform ${ee?"rotate-180":""}`,children:""})]}),ee&&a.jsx("div",{className:"border-t border-slate-100 pt-3 mt-3",children:a.jsx("div",{className:"space-y-1.5",children:H.universities.map((B,ve)=>a.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("span",{className:"text-sm font-medium text-slate-900",children:B.name}),a.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-semibold ${B.tier==="Reach"?"bg-red-100 text-red-700 border border-red-200":B.tier==="Mid"?"bg-blue-100 text-blue-700 border border-blue-200":"bg-green-100 text-green-700 border border-green-200"}`,children:B.tier})]},ve))})})]},H.id)})]})]})]})}),c&&a.jsx(M5,{student:c,counselorId:"counselor-demo",onClose:()=>u(null),onComplete:q}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Student Details"}),a.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(rt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:f.name}),a.jsx("p",{className:"text-sm text-slate-600",children:f.email}),a.jsx("span",{className:`inline-block mt-3 px-3 py-1.5 rounded-full text-sm font-semibold ${f.strengthLabel==="Strong"?"bg-emerald-100 text-emerald-700":f.strengthLabel==="Competitive"?"bg-amber-100 text-amber-700":"bg-slate-100 text-slate-600"}`,children:f.strengthLabel})]}),a.jsxs("div",{className:"text-center bg-slate-50 rounded-xl px-4 py-3 border border-slate-200",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Composite Score"}),a.jsx("div",{className:"text-3xl font-bold text-slate-900",children:a.jsx(We,{end:f.compositeStrength,duration:1500,decimals:1})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-2",children:"About"}),a.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:f.description})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Essay & Activities"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(We,{end:f.essayActivities,duration:1500}),"%"]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Current Average"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(We,{end:f.academicPerformance,duration:1500}),"%"]})]}),a.jsxs("div",{className:"bg-slate-50 rounded-lg p-4 border border-slate-200",children:[a.jsx("div",{className:"text-xs font-medium text-slate-500 mb-1",children:"Past Overall Average"}),a.jsxs("div",{className:"text-2xl font-bold text-slate-900",children:[a.jsx(We,{end:f.academicTrend,duration:1500}),"%"]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 mb-3",children:"Career Interests"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:f.careerInterests.map((H,ee)=>a.jsx("span",{className:"px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg text-sm font-medium border border-blue-200",children:H},ee))})]}),a.jsxs("button",{onClick:()=>{m(null),u(f)},className:"w-full px-4 py-3 bg-[#04ADEE] hover:bg-[#0396d5] text-white text-sm font-semibold rounded-lg transition-all shadow-sm hover:shadow",children:["Assign Universities to ",f.name]})]})]})}),N&&a.jsx(L5,{counselorName:e.name,onClose:()=>E(!1),onSave:K})]})}function Hoe(){const[e,t]=x.useState(null),[r,n]=x.useState(!1),[s,i]=x.useState(null),[o,l]=x.useState(null),[c,u]=x.useState(!0),d=bL();x.useEffect(()=>{(async()=>{lt.clearUser(),M1.logout(),n(!1),i(null),t(null),u(!1)})()},[]);const h=g=>{console.log("User logged in:",g),i(g),t("student"),n(!0)},f=g=>{l(g),t("counselor"),n(!0)},m=()=>{e==="counselor"?M1.logout():Dz(),i(null),n(!1),t(null)};return c?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-4 border-[#04adee] border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading..."})]})}):e==="counselor"&&r&&o?d==="mobile"?a.jsx("div",{className:"App",children:a.jsx(Uoe,{counselor:o,onLogout:m})}):a.jsx("div",{className:"App",children:a.jsx(Woe,{counselor:o,onLogout:m})}):e==="student"&&r?d==="mobile"?a.jsx("div",{className:"App",children:a.jsx(moe,{onLogout:m,user:s})}):a.jsx("div",{className:"App",children:a.jsx(ioe,{onLogout:m})}):d==="mobile"?a.jsx("div",{className:"App",children:a.jsx(aoe,{onLogin:h,onCounselorLogin:f})}):a.jsx("div",{className:"App",children:a.jsx(EW,{onLogin:h,onCounselorLogin:f})})}kA(document.getElementById("root")).render(a.jsx(x.StrictMode,{children:a.jsx(Hoe,{})}));
